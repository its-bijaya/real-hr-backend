(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6396e1a0","chunk-6441e173","chunk-2d213000"],{"0608":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",{attrs:{height:"auto"}},[t.showHistory?t._e():s("div",[s("vue-card-title",{attrs:{title:"Attendance Entry Request",subtitle:"Attendance Entry Request",icon:"mdi-file-document-outline",dark:"",closable:""},on:{close:function(e){return t.$emit("close")}}}),s("v-card-text",{staticClass:"scrollbar-md"},[t.loading?s("default-svg-loader"):s("v-row",[s("v-col",{attrs:{md:"3"}},[s("v-list-item",[s("v-list-item-avatar",{staticClass:"mr-0"},[s("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-briefcase-account-outline")}})],1),s("v-list-item-content",[s("v-list-item-title",{domProps:{textContent:t._s("Requested By :")}}),s("v-list-item-subtitle",[s("vue-user",{attrs:{user:t.adjustmentRequest.user}})],1)],1)],1),s("v-list-item",[s("v-list-item-avatar",{staticClass:"mr-0"},[s("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-calendar-check-outline")}})],1),s("v-list-item-content",[s("v-list-item-title",{domProps:{textContent:t._s("Requested Date :")}}),s("v-list-item-subtitle",{domProps:{textContent:t._s(t.adjustmentRequest.created_at?t.adjustmentRequest.created_at.substring(0,10):"Not Available")}})],1)],1),s("v-list-item",[s("v-list-item-avatar",{staticClass:"mr-0"},[s("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-information-outline")}})],1),s("v-list-item-content",[s("v-list-item-title",{domProps:{textContent:t._s("Status :")}}),s("v-list-item-subtitle",[s("v-chip",{attrs:{color:t.colors[t.adjustmentRequest.status],outlined:"",small:""}},[t._v(" "+t._s(t.adjustmentRequest.status)+" ")])],1)],1)],1)],1),s("v-col",{attrs:{md:"6"}},[s("v-row",[s("v-col",{attrs:{md:"6"}},[s("v-list-item",[s("v-list-item-avatar",{staticClass:"mr-0"},[s("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-clock")}})],1),s("v-list-item-content",[s("v-list-item-title",{domProps:{textContent:t._s("Entry Time :")}}),s("v-list-item-subtitle",{domProps:{textContent:t._s(t.get(t.adjustmentRequest.timesheet_entry,"timestamp")?t.get(t.adjustmentRequest.timesheet_entry,"timestamp").split("T")[0]+" "+t.get(t.adjustmentRequest.timesheet_entry,"timestamp").substring(11,19):t.adjustmentRequest.timestamp?t.adjustmentRequest.timestamp.split("T")[0]+" "+t.adjustmentRequest.timestamp.substring(11,19):"Not available")}})],1)],1)],1),s("v-col",{attrs:{md:"6"}},[s("v-list-item",[s("v-list-item-avatar",{staticClass:"mr-0"},[s("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-clock")}})],1),s("v-list-item-content",[s("v-list-item-title",{domProps:{textContent:t._s("Category :")}}),s("v-list-item-subtitle",{domProps:{textContent:t._s(t.adjustmentRequest.category||"Not Available")}})],1)],1)],1),s("v-col",{attrs:{md:"6"}},[s("v-list-item",[s("v-list-item-avatar",{staticClass:"mr-0"},[s("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-clock")}})],1),s("v-list-item-content",[s("v-list-item-title",{domProps:{textContent:t._s("Requested For :")}}),s("v-list-item-subtitle",{domProps:{textContent:t._s(t.adjustmentRequest.timesheet.timesheet_for)}})],1)],1)],1),s("v-col",{attrs:{md:"6"}},[s("v-list-item",[s("v-list-item-avatar",{staticClass:"mr-0"},[s("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-clock")}})],1),s("v-list-item-content",[s("v-list-item-title",{domProps:{textContent:t._s("Requested Action:")}}),s("v-list-item-subtitle",{domProps:{textContent:t._s(t.adjustmentRequest.requestedAction)}})],1)],1)],1)],1),s("v-list-item",[s("v-list-item-avatar",{staticClass:"mr-0"},[s("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-clock")}})],1),s("v-list-item-content",[s("v-list-item-title",{domProps:{textContent:t._s(" Remarks :")}}),s("v-list-item-subtitle",[s("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[s("div",t._g({},n),[t._v(" "+t._s(t._f("truncate")(t.adjustmentRequest.description,20))+" ")])]}}],null,!1,2113412871)},[s("div",{domProps:{textContent:t._s(t.adjustmentRequest.description)}})])],1)],1)],1)],1),"Requested"===t.adjustmentRequest.status||"Forwarded"===t.adjustmentRequest.status?s("v-col",{attrs:{md:"3",cols:"12"}},[s("v-form",{ref:"orgForm",attrs:{"lazy-validation":""}},[t.nonFieldErrors?s("non-field-form-errors",{attrs:{"non-field-errors":t.nonFieldErrors}}):t._e(),s("v-textarea",t._b({directives:[{name:"validate",rawName:"v-validate",value:"max:150|required",expression:"'max:150|required'"}],attrs:{counter:150},model:{value:t.formValues.remark,callback:function(e){t.$set(t.formValues,"remark",e)},expression:"formValues.remark"}},"v-textarea",t.veeValidate("remark","Remarks"),!1)),t.permissions.approve||t.permissions.deny||t.permissions.forward?s("div",{staticClass:"mb-2",domProps:{textContent:t._s("Actions")}}):t._e(),s("v-btn-toggle",{attrs:{mandatory:""},model:{value:t.actionTaken,callback:function(e){t.actionTaken=e},expression:"actionTaken"}},[t.permissions.approve?s("v-btn",{class:"Approved"===t.actionTaken?"cyan white--text":"text-capitalize",attrs:{value:"Approved",small:""},domProps:{textContent:t._s("Approve")}}):t._e(),t.permissions.deny?s("v-btn",{class:"Declined"===t.actionTaken?"red white--text":"text-capitalize",attrs:{value:"Declined",small:""},domProps:{textContent:t._s("Deny")}}):t._e(),t.permissions.forward&&!t.$route.params.slug?s("v-btn",{class:"Forwarded"===t.actionTaken?"purple white--text":"text-capitalize",attrs:{value:"Forwarded",small:""},domProps:{textContent:t._s("Forward")}}):t._e()],1)],1)],1):t._e()],1),"Requested"===t.adjustmentRequest.status||"Forwarded"===t.adjustmentRequest.status?s("v-row",{staticClass:"mt-7",attrs:{"no-gutters":""}},[s("v-footer",{attrs:{app:""}},[s("v-spacer"),s("v-btn",{attrs:{outlined:""},domProps:{textContent:t._s("Clear")},on:{click:t.clearForm}}),s("v-btn",{attrs:{depressed:"",color:"primary"},domProps:{textContent:t._s("Remarks History")},on:{click:function(e){return t.viewAdjustmentHistory(t.adjustmentRequest)}}}),s("v-btn",{attrs:{disabled:""===t.actionTaken,color:"primary",depressed:""},on:{click:function(e){return t.submitAdjustmentRequest(t.actionTaken)}}},[s("v-icon",{attrs:{left:"",size:"14"},domProps:{textContent:t._s("mdi-content-save-outline")}}),t._v(" Save ")],1)],1)],1):s("v-row",{staticClass:"mt-7",attrs:{"no-gutters":""}},[s("v-footer",{attrs:{app:""}},[s("v-spacer"),s("v-btn",{attrs:{depressed:"",color:"primary"},domProps:{textContent:t._s("Remarks History")},on:{click:function(e){return t.viewAdjustmentHistory(t.adjustmentRequest)}}})],1)],1)],1)],1),s("v-divider"),s("v-bottom-sheet",{attrs:{persistent:""},on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.showHistory=!1}},model:{value:t.showHistory,callback:function(e){t.showHistory=e},expression:"showHistory"}},[t.showHistory?s("request-history",{attrs:{endpoint:t.adjustmentHistoryEndpoint,title:"Attendance Entry Request History",subtitle:"The list below contain attendance entry request history."},on:{close:function(e){t.showHistory=!1,t.sheet=!0}}}):t._e()],1)],1)},i=[],o=s("1da1"),r=s("5530"),a=(s("96cf"),s("a9e3"),s("d3b7"),s("ac1f"),s("1276"),s("02cb")),c=s("c197"),l=s("ab8a"),u=s("1ac0"),d=s("c44a"),m=s("6e60"),p=s("bf02"),h=s("eb03"),v=s("2f62"),f={components:{NonFieldFormErrors:l["default"],VueUser:a["default"],DefaultSvgLoader:c["default"],RequestHistory:u["a"]},mixins:[d["a"]],props:{requestDetail:{type:Object,default:function(){return{}}},supervisor:{type:Boolean,default:!1},notificationId:{type:[Number,String],default:""},requestId:{type:[Number,String],default:""}},data:function(){return{permissions:{approve:!0,deny:!0,forward:!0},adjustmentRequest:this.deepCopy(this.requestDetail),loading:!1,formValues:{remark:""},actionTaken:"Approved",adjustmentHistoryEndpoint:"",showHistory:!1,colors:{Requested:"orange",Declined:"red",Approved:"green",Forwarded:"purple",Cancelled:"grey"}}},computed:Object(r["a"])({},Object(v["c"])({getSupervisorOrgSlug:"supervisor/getOrganizationSlug"})),created:function(){this.notificationId?this.fetchRequestDetail():this.getSupervisorPermission()},methods:Object(r["a"])(Object(r["a"])({},Object(v["d"])({setUnreadNotificationCount:"notification/setUnreadNotificationCount"})),{},{fetchRequestDetail:function(){var t=this;this.loading=!0;var e={as:this.supervisor?"supervisor":"hr"},s=this.supervisor?this.getSupervisorOrgSlug:this.getOrganizationSlug,n=m["a"].getAdjustmentDetail(s,this.requestId);this.$http.get(n,{params:e}).then((function(e){t.adjustmentRequest=e,t.supervisor&&t.getSupervisorPermission()})).finally((function(){t.loading=!1}))},getSupervisorPermission:function(){var t=this;(this.supervisor||this.notificationId)&&(this.permissions={},this.$http.get(p["a"].getSubordinatePermission(this.adjustmentRequest.user.id)).then((function(e){t.permissions=e})))},submitAdjustmentRequest:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function s(){var n,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.validateAllFields();case 2:if(!s.sent){s.next=8;break}n="",i=e.supervisor?e.getSupervisorOrgSlug:e.getOrganizationSlug,"Approved"===t?n=m["a"].approve(i,e.adjustmentRequest.id):"Declined"===t?n=m["a"].decline(i,e.adjustmentRequest.id):"Forwarded"===t&&(n=m["a"].forward(i,e.adjustmentRequest.id)),n+="?as=".concat(e.supervisor?"supervisor":"hr"),e.$http.post(n,e.formValues).then((function(){e.notifyUser("Successfully ".concat(t," attendance entry request"),"green"),e.notificationId&&e.$http.post(h["a"].readNotification(e.notificationId)).then((function(){e.setUnreadNotificationCount(0)})).catch((function(){e.notifyUser("Something went wrong","red")})),e.$emit("close"),e.$emit("refresh")})).catch((function(t){e.notifyInvalidFormResponse(),e.pushErrors(t)}));case 8:case"end":return s.stop()}}),s)})))()},clearForm:function(){this.clearNonFieldErrors(),this.$refs.orgForm.reset(),this.$validator.errors.clear()},viewAdjustmentHistory:function(t){var e=this.supervisor?this.getSupervisorOrgSlug:this.getOrganizationSlug,s=m["a"].getAdjustmentHistory(e,t.id);this.adjustmentHistoryEndpoint=s+"?as="+(this.supervisor?"supervisor":"hr"),this.sheet=!1,this.showHistory=!0},getFormattedTime:function(t){if(t){var e=t.split("T"),s=e[0],n=e[1].split("+")[0];return s+" "+n}return"Not adjusted"}})},g=f,b=s("2877"),y=s("6544"),_=s.n(y),C=s("288c"),j=s("8336"),x=s("a609"),k=s("b0af"),q=s("99d9"),R=s("cc20"),w=s("62ad"),P=s("ce7e"),S=s("553a"),A=s("4bd4"),$=s("132d"),O=s("da13"),B=s("8270"),T=s("5d23"),V=s("0fd9b"),E=s("2fa4"),F=s("a844"),I=s("3a2f"),H=Object(b["a"])(g,n,i,!1,null,null,null);e["default"]=H.exports;_()(H,{VBottomSheet:C["a"],VBtn:j["a"],VBtnToggle:x["a"],VCard:k["a"],VCardText:q["c"],VChip:R["a"],VCol:w["a"],VDivider:P["a"],VFooter:S["a"],VForm:A["a"],VIcon:$["a"],VListItem:O["a"],VListItemAvatar:B["a"],VListItemContent:T["a"],VListItemSubtitle:T["b"],VListItemTitle:T["c"],VRow:V["a"],VSpacer:E["a"],VTextarea:F["a"],VTooltip:I["a"]})},"0798":function(t,e,s){"use strict";var n=s("5530"),i=s("ade3"),o=(s("caad"),s("0c18"),s("10d2")),r=s("afdd"),a=s("9d26"),c=s("f2e7"),l=s("7560"),u=s("f40d"),d=s("58df"),m=s("d9bd");e["a"]=Object(d["a"])(o["a"],c["a"],u["a"]).extend({name:"v-alert",props:{border:{type:String,validator:function(t){return["top","right","bottom","left"].includes(t)}},closeLabel:{type:String,default:"$vuetify.close"},coloredBorder:Boolean,dense:Boolean,dismissible:Boolean,closeIcon:{type:String,default:"$cancel"},icon:{default:"",type:[Boolean,String],validator:function(t){return"string"===typeof t||!1===t}},outlined:Boolean,prominent:Boolean,text:Boolean,type:{type:String,validator:function(t){return["info","error","success","warning"].includes(t)}},value:{type:Boolean,default:!0}},computed:{__cachedBorder:function(){if(!this.border)return null;var t={staticClass:"v-alert__border",class:Object(i["a"])({},"v-alert__border--".concat(this.border),!0)};return this.coloredBorder&&(t=this.setBackgroundColor(this.computedColor,t),t.class["v-alert__border--has-color"]=!0),this.$createElement("div",t)},__cachedDismissible:function(){var t=this;if(!this.dismissible)return null;var e=this.iconColor;return this.$createElement(r["a"],{staticClass:"v-alert__dismissible",props:{color:e,icon:!0,small:!0},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:function(){return t.isActive=!1}}},[this.$createElement(a["a"],{props:{color:e}},this.closeIcon)])},__cachedIcon:function(){return this.computedIcon?this.$createElement(a["a"],{staticClass:"v-alert__icon",props:{color:this.iconColor}},this.computedIcon):null},classes:function(){var t=Object(n["a"])(Object(n["a"])({},o["a"].options.computed.classes.call(this)),{},{"v-alert--border":Boolean(this.border),"v-alert--dense":this.dense,"v-alert--outlined":this.outlined,"v-alert--prominent":this.prominent,"v-alert--text":this.text});return this.border&&(t["v-alert--border-".concat(this.border)]=!0),t},computedColor:function(){return this.color||this.type},computedIcon:function(){return!1!==this.icon&&("string"===typeof this.icon&&this.icon?this.icon:!!["error","info","success","warning"].includes(this.type)&&"$".concat(this.type))},hasColoredIcon:function(){return this.hasText||Boolean(this.border)&&this.coloredBorder},hasText:function(){return this.text||this.outlined},iconColor:function(){return this.hasColoredIcon?this.computedColor:void 0},isDark:function(){return!(!this.type||this.coloredBorder||this.outlined)||l["a"].options.computed.isDark.call(this)}},created:function(){this.$attrs.hasOwnProperty("outline")&&Object(m["a"])("outline","outlined",this)},methods:{genWrapper:function(){var t=[this.$slots.prepend||this.__cachedIcon,this.genContent(),this.__cachedBorder,this.$slots.append,this.$scopedSlots.close?this.$scopedSlots.close({toggle:this.toggle}):this.__cachedDismissible],e={staticClass:"v-alert__wrapper"};return this.$createElement("div",e,t)},genContent:function(){return this.$createElement("div",{staticClass:"v-alert__content"},this.$slots.default)},genAlert:function(){var t={staticClass:"v-alert",attrs:{role:"alert"},on:this.listeners$,class:this.classes,style:this.styles,directives:[{name:"show",value:this.isActive}]};if(!this.coloredBorder){var e=this.hasText?this.setTextColor:this.setBackgroundColor;t=e(this.computedColor,t)}return this.$createElement("div",t,[this.genWrapper()])},toggle:function(){this.isActive=!this.isActive}},render:function(t){var e=this.genAlert();return this.transition?t("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[e]):e}})},"0c18":function(t,e,s){},"553a":function(t,e,s){"use strict";var n=s("5530"),i=(s("a9e3"),s("c7cd"),s("b5b6"),s("8dd9")),o=s("3a66"),r=s("d10f"),a=s("58df"),c=s("80d2");e["a"]=Object(a["a"])(i["a"],Object(o["a"])("footer",["height","inset"]),r["a"]).extend({name:"v-footer",props:{height:{default:"auto",type:[Number,String]},inset:Boolean,padless:Boolean,tag:{type:String,default:"footer"}},computed:{applicationProperty:function(){return this.inset?"insetFooter":"footer"},classes:function(){return Object(n["a"])(Object(n["a"])({},i["a"].options.computed.classes.call(this)),{},{"v-footer--absolute":this.absolute,"v-footer--fixed":!this.absolute&&(this.app||this.fixed),"v-footer--padless":this.padless,"v-footer--inset":this.inset})},computedBottom:function(){if(this.isPositioned)return this.app?this.$vuetify.application.bottom:0},computedLeft:function(){if(this.isPositioned)return this.app&&this.inset?this.$vuetify.application.left:0},computedRight:function(){if(this.isPositioned)return this.app&&this.inset?this.$vuetify.application.right:0},isPositioned:function(){return Boolean(this.absolute||this.fixed||this.app)},styles:function(){var t=parseInt(this.height);return Object(n["a"])(Object(n["a"])({},i["a"].options.computed.styles.call(this)),{},{height:isNaN(t)?t:Object(c["g"])(t),left:Object(c["g"])(this.computedLeft),right:Object(c["g"])(this.computedRight),bottom:Object(c["g"])(this.computedBottom)})}},methods:{updateApplication:function(){var t=parseInt(this.height);return isNaN(t)?this.$el?this.$el.clientHeight:0:t}},render:function(t){var e=this.setBackgroundColor(this.color,{staticClass:"v-footer",class:this.classes,style:this.styles});return t(this.tag,e,this.$slots.default)}})},"6e60":function(t,e,s){"use strict";s("99af");e["a"]={getAdjustment:function(t){return"/attendance/".concat(t,"/adjustments/")},getAdjustmentDetail:function(t,e){return"/attendance/".concat(t,"/adjustments/").concat(e,"/")},approve:function(t,e){return"/attendance/".concat(t,"/adjustments/").concat(e,"/approve/")},decline:function(t,e){return"/attendance/".concat(t,"/adjustments/").concat(e,"/decline/")},forward:function(t,e){return"/attendance/".concat(t,"/adjustments/").concat(e,"/forward/")},cancel:function(t,e){return"/attendance/".concat(t,"/adjustments/").concat(e,"/cancel/")},sendAdjustment:function(t){return"/attendance/".concat(t,"/adjustments/bulk-update/")},getAdjustmentHistory:function(t,e){return"/attendance/".concat(t,"/adjustments/").concat(e,"/history/")},postBulkAttendanceAdjustment:function(t){return"/attendance/".concat(t,"/adjustments/bulk-action/")},editAttendance:function(t){return"/attendance/".concat(t,"/edit-entry/")},softDeleteShiftTiming:function(t,e,s){return"/attendance/".concat(t,"/timesheets/").concat(e,"/soft-delete-entry/").concat(s,"/")},deleteShiftTimingByUser:function(t){return"/attendance/".concat(t,"/delete-entry/")}}},ab8a:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.changeType&&0!==t.nonFieldErrors.length?s("div",t._l(t.nonFieldErrors,(function(e,n){return s("v-col",{key:n},t._l(e,(function(e,n){return s("div",{key:n},[s("span",{domProps:{textContent:t._s(t.key)}}),s("span",{domProps:{textContent:t._s(e.toString())}})])})),0)})),1):t._e(),t.changeType||0===t.nonFieldErrors.length?t._e():s("v-alert",{staticClass:"ma-3",attrs:{outlined:"",dense:"",tile:"",dismissible:"",color:"danger"}},[s("span",{domProps:{textContent:t._s("There are some errors")}}),t._l(t.nonFieldErrors,(function(e,n){return s("div",{key:n},t._l(e,(function(e,n){return s("div",{key:n},[s("ul",[s("li",[s("span",{domProps:{textContent:t._s(t.key)}}),s("span",{domProps:{textContent:t._s(e.toString())}})])])])})),0)}))],2)],1)},i=[],o={props:{nonFieldErrors:{type:Array,required:!0},changeType:{type:Boolean,default:!1}},data:function(){return{key:""}}},r=o,a=s("2877"),c=s("6544"),l=s.n(c),u=s("0798"),d=s("62ad"),m=Object(a["a"])(r,n,i,!1,null,null,null);e["default"]=m.exports;l()(m,{VAlert:u["a"],VCol:d["a"]})},b5b6:function(t,e,s){}}]);