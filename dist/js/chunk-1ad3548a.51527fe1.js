(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ad3548a","chunk-2d2160c2","chunk-2d2160c2","chunk-2d2160c2","chunk-2d2160c2","chunk-2d2160c2"],{"0139":function(e,t,a){},"0360":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.basicView?e._e():a("v-row",[a("v-col",{attrs:{cols:"11"}},[a("div",{staticClass:"px-3 blue-grey--text text--darken-2 font-weight-bold"},[e._v(" "+e._s(e.item.heading_name)+" ")])]),a("v-col",{staticClass:"pl-3",attrs:{cols:"1"}},[a("v-icon",{attrs:{size:16},domProps:{textContent:e._s(e.showDetail?"mdi-chevron-up":"mdi-chevron-down")},on:{click:function(t){e.showDetail=!e.showDetail}}})],1),a("v-col",{staticClass:"pa-0 ma-0 pr-3",attrs:{cols:"12"}},[a("v-divider")],1)],1),a("v-card-text",{staticClass:"pa-0 ma-0",class:{"scrollbar-lg":!e.basicView}},[e.nonFieldErrors.length>0?a("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"12"}},[a("non-field-form-errors",{attrs:{"non-field-errors":e.nonFieldErrors}})],1):e._e(),e.showDetail&&!e.basicView?a("v-row",[a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Order")])]),a("div",[e._v(" "+e._s(e.item.order)+" ")])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Payroll Setting Type")])]),a("div",[e._v(" "+e._s(e.item.payroll_setting_type)+" ")])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Heading Type")])]),a("div",[e._v(" "+e._s(e.item.type)+" ")])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Duration Unit")])]),a("div",[e._v(" "+e._s(e.item.duration_unit||"N/A")+" ")])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Is Taxable")])]),a("div",[a("span",{domProps:{textContent:e._s(e.item.taxable?"Yes":"No")}})])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Absent Days Impact")])]),a("div",[a("span",{domProps:{textContent:e._s(e.item.absent_days_impact?"Yes":"No")}})])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Benefit Type")])]),a("div",[e._v(" "+e._s(e.item.benefit_type||"N/A")+" ")])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Year to Date")])]),a("div",[e._v(" "+e._s(e.item.year_to_date||"False")+" ")])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Remote Work Impact")])]),a("div",[a("span",{domProps:{textContent:e._s(e.item.deduct_amount_on_remote_work?"Yes":"No")}})])])],1):e._e(),e.showDetail&&!e.basicView?a("v-divider"):e._e(),a("heading-rule",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],attrs:{"conditional-variables":e.conditional_variables,"function-variables":e.function_variables,"rule-variables":e.rule_variables,"read-only":!1,error:e.isValidRule,"enable-tds":e.enable_tds,"show-title":!0,"is-package-heading-equation":!0,"is-editable":e.item.is_editable,"is-update-package":"","basic-view":e.basicView,"trigger-update":e.triggerUpdate,"applied-class":e.appliedClass},on:{"update:error":function(t){e.isValidRule=t},"update:triggerUpdate":function(t){e.triggerUpdate=t},"update:trigger-update":function(t){e.triggerUpdate=t}},model:{value:e.item.rules,callback:function(t){e.$set(e.item,"rules",t)},expression:"item.rules"}}),a("default-svg-loader",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],attrs:{message:"Updating package rule. Please wait...","div-class":"pa-2","img-class":"my-2",height:"10"}})],1),e.basicView?e._e():a("v-divider"),e.basicView?e._e():a("v-card-actions",[a("v-col",{staticClass:"text-right"},[a("v-btn",{attrs:{text:"",outlined:"",color:"primary"},on:{click:function(t){return e.$emit("close")}}},[e._v(" Cancel ")]),a("v-btn",{attrs:{color:"primary",disabled:e.errors.any()||!e.isValidRule},on:{click:e.updatePackageHeading}},[e._v(" Update ")])],1)],1)],1)},i=[],r=a("1da1"),s=(a("96cf"),a("a9e3"),a("f12b")),c=a("e860"),o=a("d772"),d=a("ab8a"),l=a("c197"),u={components:{DefaultSvgLoader:l["default"],HeadingRule:c["a"],NonFieldFormErrors:d["default"]},mixins:[s["a"]],provide:function(){return{$validator:this.$validator}},props:{packageId:{type:[String,Number],default:""},packageHeadingId:{type:[String,Number],default:""},packageDetail:{type:Object,default:null,required:!1},basicView:{type:Boolean,default:!1},appliedClass:{type:String,default:""}},data:function(){return{conditional_variables:[],function_variables:[],rule_variables:[],item:{},isValidRule:!0,enable_tds:!1,showDetail:!0,triggerUpdate:new Date}},watch:{triggerUpdate:function(e){e&&this.updatePackageHeading()}},created:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.basicView){t.next=6;break}e.item=e.deepCopy(e.packageDetail),e.rule_variables=e.item.rule_variables,e.function_variables=e.item.functions,t.next=9;break;case 6:return t.next=8,e.getPayrollHeading();case 8:e.getAvailableVariables(e.item.order);case 9:case"end":return t.stop()}}),t)})))()},methods:{getAvailableVariables:function(){var e=this;if(parseInt(this.item.order)>=0){this.crud.message="";var t={order:this.item.order,package_id:this.packageId,current_heading_type:this.item.type,current_duration_unit:this.item.duration_unit};this.insertData(o["a"].getPackageVariables+"?as=hr&package__organization__slug=".concat(this.getOrganizationSlug),t).then((function(t){e.conditional_variables=t.conditional_variables,e.rule_variables=t.rule_variables,e.function_variables=t.functions}))}},updatePackageHeading:function(){var e=this;this.crud.message="Successfully Updated Package Headings.",this.putData(o["a"].updatePackageHeadingById(this.item.id)+"?as=hr&package__organization__slug=".concat(this.getOrganizationSlug),this.item).then((function(){e.$emit("close")})).catch((function(t){var a=e.get(t.response.data,"rules.errors"),n={response:{data:a}};e.pushIndexedErrors(n,"",!1,"")}))},getPayrollHeading:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getData(o["a"].getPackageHeadingById(e.packageHeadingId)+"?as=hr&package__organization__slug=".concat(e.getOrganizationSlug)).then((function(t){e.item=t,"Tax Deduction"===e.item.type&&"Salary TDS"===e.item.payroll_setting_type&&(e.enable_tds=!0)}));case 2:case"end":return t.stop()}}),t)})))()}}},g=u,p=a("2877"),h=a("6544"),f=a.n(h),m=a("8336"),v=a("99d9"),_=a("62ad"),k=a("ce7e"),y=a("132d"),b=a("0fd9b"),x=Object(p["a"])(g,n,i,!1,null,null,null);t["a"]=x.exports;f()(x,{VBtn:m["a"],VCardActions:v["a"],VCardText:v["c"],VCol:_["a"],VDivider:k["a"],VIcon:y["a"],VRow:b["a"]})},"348c":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("vue-card-title",{attrs:{title:e.cloneId?"Clone the existing payroll package.":"Create new payroll package",subtitle:"",icon:"mdi-file-document-outline",closable:""},on:{close:function(t){return e.close()}}}),e.nonFieldErrors?a("non-field-form-errors",{attrs:{"non-field-errors":e.nonFieldErrors}}):e._e(),a("v-divider"),a("v-card-text",[a("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required|max:150",expression:"'required|max:150'"}],attrs:{counter:"150"},model:{value:e.packageName,callback:function(t){e.packageName=t},expression:"packageName"}},"v-text-field",e.veeValidate("name","Name *"),!1))],1),a("v-divider"),a("v-card-actions",[a("v-col",{staticClass:"text-right"},[a("v-btn",{attrs:{disabled:e.errors.any(),color:"primary"},on:{click:function(t){return e.savePackage()}}},[e._v(" "+e._s(e.cloneId?"Clone":"Create")+" ")])],1)],1)],1)},i=[],r=(a("a9e3"),a("b0c0"),a("f0d5")),s=a("f70a"),c=a("d772"),o={mixins:[r["a"],s["a"]],props:{cloneId:{type:[String,Number],default:""},fromProfileSummary:{type:Boolean,default:!1}},data:function(){return{packageName:""}},methods:{savePackage:function(){this.cloneId?this.clonePackage():this.createNewPackage()},createNewPackage:function(){var e=this;this.insertData(c["a"].postPackage()+"?organization__slug=".concat(this.getOrganizationSlug,"&as=hr"),{name:this.packageName,organization:this.getOrganizationSlug}).then((function(t){e.$route.params.pk||e.$router.push({name:"admin-slug-payroll-settings-packages-edit-pk",params:{pk:t.id,slug:e.getOrganizationSlug}})}))},clonePackage:function(){var e=this,t={old_package:this.cloneId,new_package_name:this.packageName};this.insertData(c["a"].clonePackage(this.getOrganizationSlug)+"?as=hr",t).then((function(t){e.fromProfileSummary?(e.packageName="",e.$emit("cloned-package-id",{id:t.new_package.id,name:t.new_package.name})):e.$route.params.pk||e.$router.push({name:"admin-slug-payroll-settings-packages-edit-pk",params:{pk:t.new_package.id,slug:e.getOrganizationSlug}})}))},close:function(){this.packageName="",this.clearNonFieldErrors(),this.$emit("close")}}},d=o,l=a("2877"),u=a("6544"),g=a.n(u),p=a("8336"),h=a("b0af"),f=a("99d9"),m=a("62ad"),v=a("ce7e"),_=a("8654"),k=Object(l["a"])(d,n,i,!1,null,null,null);t["a"]=k.exports;g()(k,{VBtn:p["a"],VCard:h["a"],VCardActions:f["a"],VCardText:f["c"],VCol:m["a"],VDivider:v["a"],VTextField:_["a"]})},"51d8":function(e,t,a){"use strict";a("99af");t["a"]={getFiscalYear:function(e){return"/org/".concat(e,"/fiscal-year/")},postFiscalYear:function(e){return"/org/".concat(e,"/fiscal-year/")},getFiscalYearDetails:function(e,t){return"/org/".concat(e,"/fiscal-year/").concat(t,"/")},updateFiscalYear:function(e,t){return"/org/".concat(e,"/fiscal-year/").concat(t,"/")},deleteFiscalYear:function(e,t){return"/org/".concat(e,"/fiscal-year/").concat(t,"/")},exportRebate:function(e){return"/payroll/".concat(e,"/user-voluntary-rebates/export/")}}},"5bcd":function(e,t,a){"use strict";a("0139")},"66da":function(e,t,a){},"6b20":function(e,t,a){"use strict";t["a"]={getEmployeePayroll:"/payroll/employee-payroll/",patchApprovePayroll:function(e){return"/payroll/employee-payroll/".concat(e,"/")},getPayrollConfig:function(e){return"/payroll/organization-payroll-configs/".concat(e,"/")}}},"99ff":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-card",[a("v-card-text",[a("div",{staticClass:"pb-4 pt-1"},[a("v-row",{staticClass:"mx-1",attrs:{align:"center"}},[a("v-col",{staticClass:"my-0 py-0",attrs:{cols:"12",md:"6"}},[a("h5",[e._v("Assign For")]),a("vue-user",{attrs:{user:e.currentUserData}})],1),a("v-col",{staticClass:"my-0 py-0",attrs:{cols:"12",md:"3"}},[a("h5",[e._v("Fiscal Year Start Date")]),e._v(" "+e._s(e.payrollFiscalStartDate||"N/A")+" ")]),e.clonePage?a("v-col",{staticClass:"text-right",attrs:{cols:"12",md:"3"}},[a("v-btn",{attrs:{small:"",color:"primary",depressed:""},on:{click:function(t){e.mainPage=!0,e.clonePage=!1,e.advanceView=!1}}},[e._v(" Go Back ")]),a("v-btn",{attrs:{small:"",color:"primary",depressed:""},on:{click:function(t){e.advanceView=!e.advanceView}}},[e._v(" "+e._s(e.advanceView?"Basic View":"Advance View")+" ")])],1):e._e()],1)],1),e.nonFieldErrors?a("non-field-form-errors",{attrs:{"non-field-errors":e.nonFieldErrors}}):e._e(),e.loading?a("v-progress-linear",{attrs:{indeterminate:e.loading,color:"primary"}}):e._e(),[e.mainPage?a("div",e._l(e.currentUserData.experiences,(function(t,n){return a("div",{key:n,staticClass:"primaryLight"},[a("v-divider"),a("v-row",{staticClass:"very-light-blue mx-1",attrs:{align:"center"}},[a("v-col",{attrs:{cols:"12",md:"6"}},[a("div",{staticClass:"blueGrey--text font-weight-bold"},[a("span",[e._v(e._s(e.get(t,"job_title.title")+" "))]),t.is_current?a("span",[e._v("("+e._s(t.start_date)+" - Till Now)")]):a("span",[e._v(" ("+e._s(t.start_date)+" - "+e._s(t.end_date)+") ")])])]),a("v-col",{staticClass:"text-right",attrs:{cols:"12",md:"6"}},[a("v-btn",{attrs:{small:"",color:"primary",depressed:"",disabled:!!t.user_experience_packages.find((function(e){return"undefined"===typeof e.id}))},on:{click:function(t){return e.addNewPackage(n)}}},[e._v(" + Add New Package ")])],1)],1),a("v-divider"),t.user_experience_packages.length>0?e._l(t.user_experience_packages,(function(i,r){return a("v-row",{key:"package-"+r,staticClass:"mx-1",attrs:{align:"center"}},[a("v-col",{attrs:{cols:"12",md:"4"}},[a("package-auto-complete",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{endpoint:e.packageEndpoint,"selected-full-data":i.package_detail,disabled:i.is_used_package,"force-fetch":"","hide-details":"","item-text":"name","item-value":"id"},on:{"update:selectedFullData":function(t){return e.$set(i,"package_detail",t)},"update:selected-full-data":function(t){return e.$set(i,"package_detail",t)}},model:{value:i.package,callback:function(t){e.$set(i,"package",t)},expression:"user_package.package"}},"package-auto-complete",e.veeValidate(n+"-package-"+(r+1),"Package *"),!1)),i.is_used_package?e._e():a("span",{staticClass:"danger--text text-caption"},[e._v(" "+e._s(e.errors.first(n+"-package-"+(r+1)))+" ")])],1),a("v-col",{attrs:{cols:"12",md:"2"}},[a("vue-date-picker",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"read-only":i.is_used_package||(r>0||1===t.user_experience_packages.length)&&!!i.active_from_date,disabled:i.is_used_package||(r>0||1===t.user_experience_packages.length)&&!!i.active_from_date||e.loading,"hide-details":""},model:{value:i.active_from_date,callback:function(t){e.$set(i,"active_from_date",t)},expression:"user_package.active_from_date"}},"vue-date-picker",e.veeValidate(n+"-active_from_date-"+(r+1),"Active From Date *"),!1)),i.is_used_package||(r>0||1===t.user_experience_packages.length)&&i.active_from_date?e._e():a("span",{staticClass:"danger--text text-caption"},[e._v(" "+e._s(e.errors.first(n+"-active_from_date-"+(r+1)))+" ")])],1),a("v-col",{attrs:{cols:"12",md:"2"}},[r>0?a("vue-date-picker",e._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],attrs:{value:e.getEndDate(t.user_experience_packages[r-1].active_from_date),disabled:"","read-only":"","hide-details":""}},"vue-date-picker",e.veeValidate(n+"-to_date-"+(r+1),"To Date"),!1)):e._e()],1),a("v-col",{attrs:{cols:"12",md:"2"}},[0===r&&0===n||i.backdated_calculation_from?a("vue-date-picker",e._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],attrs:{"read-only":i.is_used_package||r>0,disabled:i.is_used_package||r>0,"hide-details":""},model:{value:i.backdated_calculation_from,callback:function(t){e.$set(i,"backdated_calculation_from",t)},expression:"user_package.backdated_calculation_from"}},"vue-date-picker",e.veeValidate(n+"-backdated_calculation_from-"+(r+1),"Backdated Calculation From *"),!1)):e._e(),i.is_used_package||r>0?e._e():a("span",{staticClass:"danger--text text-caption"},[e._v(" "+e._s(e.errors.first(n+"-backdated_calculation_from-"+(r+1)))+" ")])],1),a("v-col",{staticClass:"text-right",attrs:{cols:"12",md:"2"}},[a("vue-context-menu",{attrs:{"context-list":[{name:"Delete",hide:i.is_used_package||!i.id,icon:"mdi-trash-can-outline",color:"red",text_color:"red--text",disabled:e.loading},{name:"Remove",hide:i.id,icon:"mdi-close",color:"red",text_color:"red--text",disabled:e.loading},{name:i.id?"Update":"Save",hide:i.is_used_package,icon:i.id?"mdi-pencil-outline":"mdi-content-save-outline",color:"primary",text_color:"primary--text",disabled:e.loading},{name:"Edit",hide:i.is_used_package||!i.package,icon:"mdi-pencil-box-multiple-outline",color:"primary",text_color:"primary--text",disabled:e.loading},{name:"Clone",hide:!i.is_used_package,icon:"mdi-content-duplicate",color:"primary",text_color:"primary--text",disabled:e.loading},{name:"Backdated Report",hide:!i.backdated_calculation_generated,icon:"mdi-calculator-variant",color:"green",text_color:"green--text",disabled:e.loading},{name:"Refresh Report",hide:!(i.id&&!i.backdated_calculation_generated&&0===r&&!0===e.backdatedReportExist[n]),icon:"mdi-cloud-sync",color:"primary",text_color:"primary--text",disabled:e.loading}],"show-icons":""},on:{click0:function(t){e.deleteId=i.id,e.deleteNotification.dialog=!0},click1:function(e){return t.user_experience_packages.splice(r,1)},click2:function(t){return e.assignPackageFromMainPage(n,r)},click3:function(t){return e.editPackage(n,r)},click4:function(t){return e.clonePackage(n,r)},click5:function(t){e.showBackDatedCalculation=!0,e.selectedPackage=e.currentUserData.experiences[n].user_experience_packages[r]},click6:e.refreshData}})],1)],1)})):e._e()],2)})),0):e._e(),e.clonePage?a("div",[e.selectedPackageDetail?a("v-row",{staticClass:"mx-1 px-4 very-light-blue mb-2",attrs:{align:"center"}},[a("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"8"}},[a("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"max:150",expression:"'max:150'"}],attrs:{counter:"150"},model:{value:e.selectedPackageDetail.name,callback:function(t){e.$set(e.selectedPackageDetail,"name",t)},expression:"selectedPackageDetail.name"}},"v-text-field",e.veeValidate("name","Package Name"),!1))],1),a("v-col",{staticClass:"text-right pa-0 ma-0"},[a("v-icon",{attrs:{color:"primary",size:"18"},on:{click:e.updatePackageName}},[e._v(" mdi-content-save-outline ")])],1)],1):e._e(),a("v-row",{staticClass:"mx-1 px-4 very-light-blue mb-2",attrs:{align:"center"}},[a("v-col",{staticClass:"pa-0 ma-0 px-2",attrs:{cols:"12",md:"4"}},[a("vue-date-picker",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{disabled:e.selectedPackage.active_from_disable},model:{value:e.selectedPackage.active_from_date,callback:function(t){e.$set(e.selectedPackage,"active_from_date",t)},expression:"selectedPackage.active_from_date"}},"vue-date-picker",e.veeValidate("active_from_date","Active From Date *"),!1))],1),a("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"12",md:"4"}},[a("vue-date-picker",e._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],model:{value:e.selectedPackage.backdated_calculation_from,callback:function(t){e.$set(e.selectedPackage,"backdated_calculation_from",t)},expression:"selectedPackage.backdated_calculation_from"}},"vue-date-picker",e.veeValidate("backdated_calculation_from","Backdated Calculation From"),!1))],1),a("v-col",{staticClass:"text-right pa-0 ma-0",attrs:{cols:"12",md:"4"}},[a("v-icon",{attrs:{color:"primary",size:"18"},on:{click:e.assignPackage}},[e._v(" mdi-content-save-outline ")])],1)],1)],1):e._e(),e.clonePage&&!e.advanceView?a("div",e._l(e.packageHeadings,(function(t,n){return a("v-row",{key:n,staticClass:"mx-1 px-4",class:n%2?"very-light-blue":"primaryLight",attrs:{align:"center"}},[a("v-col",{staticClass:"pa-0 ma-0 blueGrey--text font-weight-medium",attrs:{cols:"12",md:"3"}},[e._v(e._s(t.heading_name))]),a("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"12",md:"9"}},[a("edit-package-headings",{attrs:{"package-detail":t,"basic-view":"","applied-class":n%2?"very-light-blue":"primaryLight"},on:{close:function(t){e.uniqueRefreshKey=Math.random()}}})],1)],1)})),1):e._e(),e.clonePage&&e.advanceView?a("div",{staticClass:"mx-1 pa-1 very-light-blue"},[a("package-edit",{attrs:{"package-id":e.selectedPackage.package}})],1):e._e()],a("vue-dialog",{attrs:{notify:e.deleteNotification},on:{close:function(t){e.deleteNotification.dialog=!1},agree:function(t){return e.deletePayroll()}}}),e.showBackDatedCalculation?a("v-dialog",{attrs:{width:"700",persistent:"",scrollable:""},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.showBackDatedCalculation=!1}},model:{value:e.showBackDatedCalculation,callback:function(t){e.showBackDatedCalculation=t},expression:"showBackDatedCalculation"}},[a("v-card",[a("vue-card-title",{attrs:{title:"Backdated Calculation Report",subtitle:"",icon:"mdi-file-document-outline",dark:"",closable:""},on:{close:function(t){e.showBackDatedCalculation=!1}}}),a("back-dated-calculation",{attrs:{"selected-package-id":e.selectedPackage.id}})],1)],1):e._e(),a("v-dialog",{attrs:{persistent:"",width:"500"},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.createPackage=!1,e.cloneId=""}},model:{value:e.createPackage,callback:function(t){e.createPackage=t},expression:"createPackage"}},[a("create-package",{attrs:{"clone-id":e.cloneId,"from-profile-summary":""},on:{"cloned-package-id":function(t){return e.showClonePage(t)},close:function(t){e.createPackage=!1,e.cloneId=""}}})],1)],2)],1)],1)},i=[],r=a("1da1"),s=(a("96cf"),a("7db0"),a("159b"),a("a434"),a("b0c0"),a("02cb")),c=a("741f"),o=a("c05d"),d=a("f12b"),l=a("b471"),u=a("8da0"),g=a("6b20"),p=a("51d8"),h=a("e4bf"),f=a("d772"),m=a("0360"),v=a("ec3e"),_=a("348c"),k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-flex space-between"},[a("v-autocomplete",{key:e.componentKey,ref:"autoComplete",attrs:{items:e.items,"search-input":e.search,loading:e.isLoading,label:e.label,error:e.errorMessages.length>0,"error-messages":e.errorMessages,disabled:e.disabled,"hide-details":e.hideDetails,"item-text":e.itemText,"item-value":e.itemValue,hint:e.hint,"hide-selected":"","hide-no-data":""},on:{"update:searchInput":function(t){e.search=t},"update:search-input":function(t){e.search=t},focus:e.populateOnFocus,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.searchText())},change:e.updateState,blur:function(t){return e.$emit("blur")}},scopedSlots:e._u([{key:"selection",fn:function(t){return[e._t("selection",(function(){return[e.itemText&&t.item?a("div",[t.item[e.itemText]?a("div",[t.item[e.itemText].length>40?a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(n){var i=n.on;return[a("span",e._g({},i),[e._v(" "+e._s(e._f("truncate")(t.item[e.itemText],40)))])]}}],null,!0)},[a("span",[e._v(e._s(t.item[e.itemText]))])]):a("span",[e._v(e._s(t.item[e.itemText]))])],1):a("div",[a("span",[e._v(e._s(t.item))])])]):e._e()]}),{props:t})]}},{key:"item",fn:function(t){return[a("v-list-item-content",[a("v-list-item-title",[e._t("item",(function(){return[e.itemText&&t.item?a("div",[t.item[e.itemText]?a("div",[t.item[e.itemText].length>40?a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(n){var i=n.on;return[a("span",e._g({},i),[e._v(" "+e._s(e._f("truncate")(t.item[e.itemText],40)))])]}}],null,!0)},[a("span",[e._v(e._s(t.item[e.itemText]))])]):a("span",[e._v(e._s(t.item[e.itemText]))])],1):a("div",[a("span",[e._v(e._s(t.item))])])]):e._e()]}),{props:t})],2)],1)]}},{key:"append-item",fn:function(){return[!e.fullyLoaded&&e.showMoreIcon?a("div",[a("v-list-item-content",{staticClass:"px-4 pointer primary--text font-weight-bold"},[a("v-list-item-title",{on:{click:function(t){return e.fetchData()}}},[e._v(" Load More Items ... ")])],1)],1):e._e()]},proxy:!0}],null,!0),model:{value:e.selectedData,callback:function(t){e.selectedData=t},expression:"selectedData"}}),e._t("default")],2)},y=[],b=a("2909"),x=a("5530"),D=a("53ca"),w=(a("a9e3"),a("d81d"),a("ac1f"),a("841c"),a("d3b7"),a("99af"),a("c740"),a("3ca3"),a("ddb0"),a("2b3d"),a("4de4"),a("caad"),a("2532"),a("63ea")),P=a.n(w),C={props:{value:{type:[Number,String,Array,Object],default:void 0},endpoint:{type:String,default:""},itemText:{type:String,required:!0},itemValue:{type:String,required:!0},forceFetch:{type:Boolean,default:!1},staticItems:{type:Array,default:function(){return[]}},errorMessages:{type:[String,Array],default:function(){return[]}},label:{type:String,default:""},disabled:{type:Boolean,default:!1},hint:{type:String,default:void 0},hideDetails:{type:Boolean,default:!1}},data:function(){return{componentKey:0,items:[],selectedData:null,search:null,initialFetchStarted:!1,nextLimit:null,nextOffset:null,showMoreIcon:!1,fullyLoaded:!1,isLoading:!1}},watch:{value:{handler:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a,n,i,r,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}if(!this.forceFetch||this.initialFetchStarted){e.next=6;break}return this.initialFetchStarted=!0,e.next=5,this.fetchData();case 5:this.removeDuplicateItem();case 6:Array.isArray(t)?(i=[],"object"===Object(D["a"])(t[0])?(this.selectedData=t.map((function(e){return e[s.itemValue]})),t.forEach((function(e){var t=s.items.find((function(t){return t===e}));t||i.push(e)}))):(t.forEach((function(e){var t=s.items.find((function(t){return t[s.itemValue]===e}));t||i.push(e)})),this.selectedData=t),i.length>0&&(r=this.items).push.apply(r,i)):"object"===Object(D["a"])(t)?(this.selectedData=t[this.itemValue],a=this.items.find((function(e){return e[s.itemValue]===t})),a||this.items.push(t)):(n=this.items.find((function(e){return e===t})),n||this.searchData(t),this.selectedData=t),this.updateData(this.selectedData);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),immediate:!0},selectedData:function(e){this.updateData(e)},params:{handler:function(e,t){P()(e,t)||(this.fullyLoaded=!1,this.initialFetchStarted=!1,this.items=[],this.componentKey+=1)},deep:!0}},methods:{populateOnFocus:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.initialFetchStarted){t.next=2;break}return t.abrupt("return");case 2:return e.initialFetchStarted=!0,t.next=5,e.fetchData();case 5:e.removeDuplicateItem();case 6:case"end":return t.stop()}}),t)})))()},fetchData:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.staticItems.length>0)){t.next=3;break}return e.items=e.staticItems,t.abrupt("return");case 3:return a=e.nextLimit,n=e.nextOffset,e.search&&(a=null,n=null),e.isLoading=!0,t.next=9,e.$http.get(e.endpoint,{params:Object(x["a"])(Object(x["a"])({},e.params),{},{search:e.search,limit:a,offset:n})}).then((function(t){var a;t.results||(t.results=t),t.next?(e.showMoreIcon=!0,e.extractLimitOffset(t.next)):(e.showMoreIcon=!1,e.search||(e.fullyLoaded=!0)),e.itemsToExclude&&(t.results=e.excludeRecord(t.results)),(a=e.items).push.apply(a,Object(b["a"])(t.results))})).finally((function(){e.isLoading=!1}));case 9:case"end":return t.stop()}}),t)})))()},searchData:function(e){var t=this;this.$http.get(f["a"].getPackage+"?search=".concat(e,"&organization__slug=").concat(this.getOrganizationSlug,"&as=hr")).then((function(e){var a;(a=t.items).push.apply(a,Object(b["a"])(e.results))}))},removeDuplicateItem:function(){var e=this,t=this.items.indexOf(this.selectedData);if(t>=0){var a=this.items.findIndex((function(t){return t[e.itemValue]===e.selectedData}));a>=0&&(this.items.splice(t,1),this.componentKey+=1)}},updateData:function(e){var t=this,a=[];e instanceof Array?e.forEach((function(e){a.unshift(t.items.find((function(a){return a[t.itemValue]===e})))})):a=this.items.find((function(a){return a[t.itemValue]===e})),this.$emit("input",e),this.$emit("update:selectedFullData",a)},searchText:function(){0!==this.$refs.autoComplete.filteredItems.length||this.fullyLoaded||this.fetchData()},extractLimitOffset:function(e){var t=new URL(e);this.nextLimit=t.searchParams.get("limit"),this.nextOffset=t.searchParams.get("offset")},excludeRecord:function(e){var t=this,a=[];return"number"===typeof this.itemsToExclude?a.push(this.itemsToExclude):a=this.itemsToExclude,e.filter((function(e){if(e[t.itemValue])return!a.includes(e[t.itemValue])}))},remove:function(e){if(this.selectedData instanceof Object){var t=this.selectedData.indexOf(e[this.itemValue]);t>=0&&this.selectedData.splice(t,1)}else this.selectedData=null},updateState:function(){this.search="",this.nextLimit&&(this.showMoreIcon=!0)}}},O=C,I=a("2877"),S=a("6544"),V=a.n(S),N=a("c6a6"),R=a("5d23"),E=a("3a2f"),$=Object(I["a"])(O,k,y,!1,null,null,null),T=$.exports;V()($,{VAutocomplete:N["a"],VListItemContent:R["a"],VListItemTitle:R["c"],VTooltip:E["a"]});var H={components:{PackageAutoComplete:T,CreatePackage:_["a"],PackageEdit:v["a"],VueContextMenu:h["default"],VueUser:s["default"],VueDatePicker:c["default"],BackDatedCalculation:o["a"],EditPackageHeadings:m["a"]},mixins:[d["a"]],props:{selectedUserData:{type:Object,required:!0},isPastEmployee:{type:Boolean,default:!0}},data:function(){return{packageEndpoint:"",currentUserData:this.deepCopy(this.selectedUserData),deleteId:"",deleteNotification:{dialog:!1,heading:"Confirm Delete",text:"Are you sure you want to delete this assigned package?\n                 This is one time option and cannot be reverted once deleted."},packageApplicableDate:"",payrollFiscalStartDate:"",showBackDatedCalculation:!1,selectedPackage:{},selectedExperience:"",mainPage:!1,clonePage:!1,advanceView:!1,packageHeadings:[],selectedPackageDetail:null,createPackage:!1,cloneId:"",backdatedReportExist:[]}},created:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.packageEndpoint=f["a"].getPackage+"?as=hr&organization__slug=".concat(e.getOrganizationSlug),t.next=3,e.getPayrollStartFiscalYearDate();case 3:n=t.sent,e.currentUserData.experiences.find((function(e){return e.is_current}))?a=e.currentUserData.experiences.find((function(e){return e.is_current})).start_date:e.currentUserData.experiences.length&&(a=e.currentUserData.experiences[0].start_date),e.packageApplicableDate=n>a?n:a,e.makeReverse(),e.mainPage=!0;case 8:case"end":return t.stop()}}),t)})))()},methods:{makeReverse:function(){var e=this;this.currentUserData.experiences.forEach((function(t){var a=t.user_experience_packages.reverse();delete t.user_experience_packages,e.$set(t,"user_experience_packages",a),e.backdatedReportExist=[],t.user_experience_packages.length>0&&t.user_experience_packages[0].backdated_calculation_from?e.backdatedReportExist.push(!0):e.backdatedReportExist.push(!1)}))},getPayrollStartFiscalYearDate:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getData(g["a"].getPayrollConfig(e.getOrganizationSlug)+"?as=hr").then((function(e){a=e.start_fiscal_year.id}));case 2:if(!a){t.next=5;break}return t.next=5,e.getData(p["a"].getFiscalYearDetails(e.getOrganizationSlug,a)).then((function(t){e.payrollFiscalStartDate=t.applicable_from}));case 5:return t.abrupt("return",e.payrollFiscalStartDate||null);case 6:case"end":return t.stop()}}),t)})))()},addNewPackage:function(e){var t=this.currentUserData.experiences[e];t.user_experience_packages.splice(0,0,{active_from_date:0===t.user_experience_packages.length?this.packageApplicableDate:null,user_experience:null,package:null})},assignPackageFromMainPage:function(e,t){this.selectedExperience=this.currentUserData.experiences[e],this.selectedPackage=this.currentUserData.experiences[e].user_experience_packages[t],this.assignPackage(e+"-")},assignPackage:function(){var e=arguments,t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:"",a.next=3,t.validateAllFields();case 3:if(!a.sent){a.next=6;break}i={user_experience:t.selectedExperience.id,package:t.selectedPackage.package,active_from_date:t.selectedPackage.active_from_date,deleted_at:t.selectedPackage.deleted_at,backdated_calculation_from:t.selectedPackage.backdated_calculation_from||null},t.selectedPackage.id?(t.crud.message="Successfully Updated Package",t.putData(l["a"].updatePackage(t.selectedPackage.id)+"?user_experience__user__detail__organization__slug=".concat(t.getOrganizationSlug,"&as=hr"),i).then((function(e){t.selectedPackage.active_from_date=e.active_from_date,t.selectedPackage.backdated_calculation_from=e.backdated_calculation_from,t.selectedPackage.backdated_calculation_generated=e.backdated_calculation_generated,t.selectedPackage.backdated_calculation_from&&t.notifyUser("Successfully Updated Package. Backdated report will be generated soon.")})).catch((function(e){t.mainPage&&(t.pushIndexedErrors(e,"backdated_calculation_from",!1,n),t.pushIndexedErrors(e,"active_from_date",!1,n))}))):(t.crud.message="Successfully Created Package.",t.insertData(l["a"].linkPackage+"?user_experience__user__detail__organization__slug=".concat(t.getOrganizationSlug,"&as=hr"),i).then((function(){t.selectedPackage.backdated_calculation_from&&t.notifyUser("Successfully Created Package. Backdated report will be generated soon."),t.refreshData()})).catch((function(e){t.mainPage&&(t.pushIndexedErrors(e,"backdated_calculation_from",!1,n),t.pushIndexedErrors(e,"active_from_date",!1,n))})));case 6:case"end":return a.stop()}}),a)})))()},deletePayroll:function(){var e=this;this.crud.message="Successfully Deleted Assigned Payroll.",this.deleteData(l["a"].deletePackage(this.deleteId)+"?user_experience__user__detail__organization__slug=".concat(this.getOrganizationSlug,"&as=hr")).then((function(){e.$emit("form-response")}))},getEndDate:function(e){return e?this.$dayjs(e).subtract(1,"days").format("YYYY-MM-DD"):null},refreshData:function(){var e=this,t=u["a"].getIndividualUserPackageDetails(this.getOrganizationSlug,this.currentUserData.id),a={as:"hr",user_status:this.isPastEmployee?"past":""};this.getData(t,a).then((function(t){e.currentUserData=t,e.makeReverse()}))},setSelectedPackage:function(e,t){return this.currentUserData.experiences[e].user_experience_packages[t]},editPackage:function(e,t){this.selectedExperience=this.currentUserData.experiences[e],this.selectedPackage=this.selectedExperience.user_experience_packages[t],1===this.selectedExperience.user_experience_packages.length&&this.selectedPackage.active_from_date&&(this.selectedPackage.active_from_disable=!0),this.selectedPackageDetail=this.selectedPackage.package_detail,this.showClonePage()},clonePackage:function(e,t){this.selectedExperience=this.currentUserData.experiences[e],this.cloneId=this.selectedExperience.user_experience_packages[t].package,this.createPackage=!0},showClonePage:function(e){var t=this;e&&(this.selectedPackageDetail=e,this.selectedPackage["package"]=e.id),this.createPackage=!1,this.mainPage=!1,this.clonePage=!0,this.getData(f["a"].getBasicPackageById(this.selectedPackage.package)+"?organization__slug=".concat(this.getOrganizationSlug,"&as=hr")).then((function(e){t.packageHeadings=e}))},updatePackageName:function(){this.crud.message="Successfully Updated Package Name.",this.patchData(f["a"].updatePackageById(this.selectedPackage.package)+"?organization__slug=".concat(this.getOrganizationSlug,"&as=hr"),{name:this.selectedPackageDetail.name},{validate:!1})}}},A=H,B=a("8336"),z=a("b0af"),F=a("99d9"),U=a("62ad"),j=a("a523"),M=a("169a"),q=a("ce7e"),L=a("132d"),K=a("8e36"),Y=a("0fd9b"),G=a("8654"),J=Object(I["a"])(A,n,i,!1,null,null,null);t["default"]=J.exports;V()(J,{VBtn:B["a"],VCard:z["a"],VCardText:F["c"],VCol:U["a"],VContainer:j["a"],VDialog:M["a"],VDivider:q["a"],VIcon:L["a"],VProgressLinear:K["a"],VRow:Y["a"],VTextField:G["a"]})},a459:function(e,t,a){"use strict";a("66da")},b471:function(e,t,a){"use strict";a("99af");t["a"]={linkPackage:"/payroll/user-experience-package/",updatePackage:function(e){return"/payroll/user-experience-package/".concat(e,"/")},deletePackage:function(e){return"/payroll/user-experience-package/".concat(e,"/")},bulkAssign:"/payroll/user-experience-package/create_in_bulk/",getBackdatedCalculationReport:function(e,t){return"/payroll/".concat(e,"/reports/backdated-calculations/").concat(t)}}},c05d:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"scrollbar-md"},[0!==e.backdatedData.length?a("v-data-table",{attrs:{headers:e.headers,items:e.backdatedData,"mobile-breakpoint":0,"items-per-page":e.backdatedData.length,"must-sort":"","hide-default-footer":""},scopedSlots:e._u([{key:"item",fn:function(t){return[a("tr",[a("td",[e._v(" "+e._s(t.item.heading)+" ")]),a("td",[e._v(" "+e._s(e.formatCurrency(t.item.previous_amount)||"-")+" ")]),a("td",[e._v(" "+e._s(e.formatCurrency(t.item.current_amount)||"-")+" ")]),a("td",[e._v(" "+e._s(e.formatCurrency(t.item.current_amount-t.item.previous_amount)||"-")+" ")])])]}}],null,!1,2019143977)},[a("template",{slot:"no-data"},[a("data-table-no-data",{attrs:{loading:e.loading}})],1)],2):a("v-data-table",{attrs:{headers:e.headers,items:e.fetchedResults,"sort-desc":e.pagination.descending,"sort-by":e.pagination.sortBy,page:e.pagination.page,"items-per-page":e.pagination.rowsPerPage,"footer-props":e.footerProps,"server-items-length":e.pagination.totalItems,"mobile-breakpoint":0,"must-sort":""},on:{"update:sortDesc":function(t){return e.$set(e.pagination,"descending",t)},"update:sort-desc":function(t){return e.$set(e.pagination,"descending",t)},"update:sortBy":function(t){return e.$set(e.pagination,"sortBy",t)},"update:sort-by":function(t){return e.$set(e.pagination,"sortBy",t)},"update:page":function(t){return e.$set(e.pagination,"page",t)},"update:itemsPerPage":function(t){return e.$set(e.pagination,"rowsPerPage",t)},"update:items-per-page":function(t){return e.$set(e.pagination,"rowsPerPage",t)}},scopedSlots:e._u([{key:"item",fn:function(t){return[a("tr",[a("td",[e._v(" "+e._s(t.item.heading)+" ")]),a("td",[e._v(" "+e._s(e.formatCurrency(t.item.previous_amount)||"-")+" ")]),a("td",[e._v(" "+e._s(e.formatCurrency(t.item.current_amount)||"-")+" ")]),a("td",[e._v(" "+e._s(e.formatCurrency(t.item.current_amount-t.item.previous_amount)||"-")+" ")])])]}}])},[a("template",{slot:"no-data"},[a("data-table-no-data",{attrs:{loading:e.loading}})],1)],2)],1)},i=[],r=a("1da1"),s=(a("96cf"),a("a9e3"),a("d3b7"),a("17cc")),c=a("a51f"),o=a("b471"),d=a("cf45"),l={components:{DataTableNoData:c["default"]},mixins:[s["a"]],props:{selectedPackageId:{type:[String,Number],default:null},backdatedData:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,headers:[{text:"Heading Name",value:"heading",align:"left",sortable:!1},{text:"Backdated value per heading",value:"previous_amount",align:"left",sortable:!1},{text:"Current value per heading",value:"current_amount",align:"left",sortable:!1},{text:"Total Increment",value:"total",align:"left",sortable:!1}]}},created:function(){0===this.backdatedData.length&&this.loadDataTableChange()},methods:{formatCurrency:d["d"],fetchDataTable:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loading=!0,e.$http.get(o["a"].getBackdatedCalculationReport(e.getOrganizationSlug,e.selectedPackageId),{params:e.fullParams}).then((function(t){e.loadDataTable(t)})).finally((function(){e.loading=!1}));case 2:case"end":return t.stop()}}),t)})))()}}},u=l,g=a("2877"),p=a("6544"),h=a.n(p),f=a("8fea"),m=Object(g["a"])(u,n,i,!1,null,null,null);t["a"]=m.exports;h()(m,{VDataTable:f["a"]})},c197:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.divClass},[a("v-img",{class:e.imgClass,attrs:{src:"/svg/three-dots.svg",height:e.height,contain:""}}),a("h3",{staticClass:"text-center grey--text",domProps:{textContent:e._s(e.message)}})],1)},i=[],r={props:{message:{type:String,default:"Please wait. Fetching data just for you ..."},divClass:{type:String,default:"pa-12"},imgClass:{type:String,default:"my-6"},height:{type:String,default:"20"}},data:function(){return{}}},s=r,c=a("2877"),o=a("6544"),d=a.n(o),l=a("adda"),u=Object(c["a"])(s,n,i,!1,null,null,null);t["default"]=u.exports;d()(u,{VImg:l["a"]})},d772:function(e,t,a){"use strict";t["a"]={getPackage:"/payroll/packages/",postPackage:function(){return"/payroll/packages/"},clonePackage:function(e){return"/payroll/".concat(e,"/packages/clone/")},getPackageVariables:"/payroll/package-headings/get_variables/",getPackageById:function(e){return"/payroll/packages/".concat(e,"/")},getBasicPackageById:function(e){return"/payroll/packages/".concat(e,"/basic-view/")},updatePackageById:function(e){return"/payroll/packages/".concat(e,"/")},createPackageHeadingById:"/payroll/package-headings/",getPackageHeadingById:function(e){return"/payroll/package-headings/".concat(e,"/")},updatePackageHeadingById:function(e){return"/payroll/package-headings/".concat(e,"/")}}},ec3e:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card-text",{staticClass:"ma-0 pa-0"},[a("v-row",{staticClass:"pa-0 ma-0"},[a("v-slide-x-transition",[a("v-col",{directives:[{name:"show",rawName:"v-show",value:!e.collapsed,expression:"!collapsed"}],staticClass:"very-light-blue py-0",attrs:{md:"3",cols:"12"}},[a("v-row",[a("v-col",{attrs:{cols:"10"}},[a("div",{staticClass:"px-3 blue-grey--text text--darken-2 font-weight-bold"},[e._v(" Overall Headings ")])]),a("v-col",{attrs:{cols:"2"}},[a("v-icon",{attrs:{size:16},domProps:{textContent:e._s(e.collapsed?"mdi-chevron-right":"mdi-chevron-left")},on:{click:function(t){e.collapsed=!e.collapsed}}})],1),a("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"12"}},[a("v-divider")],1),a("v-col",{staticClass:"pa-0 ma-0 scrollbar-lg",attrs:{cols:"12"}},[a("overall-headings",{key:e.uniqueRefreshKey,attrs:{"package-id":e.packageId},on:{addHeading:function(t){e.displayForm=!1,e.addHeading(t)},refresh:function(t){e.uniqueRefreshKey=Math.random()},editDependency:e.editDependency}})],1)],1)],1)],1),a("v-col",{staticClass:"very-light-blue py-0",attrs:{md:"3",cols:"12"}},[a("v-row",[e.collapsed?a("v-col",{attrs:{cols:"2"}},[a("v-icon",{attrs:{size:16},domProps:{textContent:e._s(e.collapsed?"mdi-chevron-right":"mdi-chevron-left")},on:{click:function(t){e.collapsed=!e.collapsed}}})],1):e._e(),a("v-col",{attrs:{cols:"10"}},[a("div",{staticClass:"px-3 blue-grey--text text--darken-2 font-weight-bold"},[e._v(" Headings In This Package ")])]),a("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"12"}},[a("v-divider")],1),a("v-col",{staticClass:"py-0 px-1 scrollbar-lg"},[a("add-headings",{key:e.uniqueRefreshKey,attrs:{"package-id":e.packageId},on:{refresh:function(t){e.uniqueRefreshKey=Math.random(),e.displayForm=!1},"open-form":function(t){return e.openForm(t)}}})],1)],1)],1),a("v-col",{staticClass:"very-light-blue py-0 pr-0",attrs:{md:e.collapsed?"9":"6",cols:"12"}},[e.displayForm?a("edit-package-headings",{attrs:{"package-id":e.packageId,"package-heading-id":e.headId},on:{close:function(t){e.displayForm=!1,e.uniqueRefreshKey=Math.random()}}}):e._e(),e.newHeadingAddition?a("add-new-heading",{attrs:{"next-order":e.order,"show-title":""},on:{close:function(t){e.newHeadingAddition=!1,e.uniqueRefreshKey=Math.random()}}}):e._e(),e.editDependencyData.display?a("add-package-heading",{attrs:{"heading-id":e.editDependencyData.headingId,"next-order":e.editDependencyData.order},on:{close:function(t){e.editDependencyData.display=!1,e.uniqueRefreshKey=Math.random()}}}):e._e()],1)],1)],1)},i=[],r=(a("a9e3"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-data-table",{ref:"sortableTable",attrs:{items:e.results,loading:e.loading,"disable-pagination":"",dense:"","hide-default-footer":"","hide-default-header":""},scopedSlots:e._u([{key:"item",fn:function(t){return[a("tr",{key:t.item.id,class:e.addedIds.includes(t.item.id)?"sortableRow "+t.item.style_class:"sortableRow "+t.item.style_class+" sortHandle pointer",attrs:{id:t.item.id},on:{click:function(a){return e.showDependency(t.index,t.item)},dblclick:function(a){return e.removeDependency(t.index,t.item)}}},[a("td",[a("v-icon",{attrs:{color:e.addedIds.includes(t.item.id)?"red":"green"}},[e._v("mdi-equal")])],1),a("td",[a("span",[e._v(" "+e._s(t.item.label)+" ")]),e.addedIds.includes(t.item.id)?a("span",[a("v-icon",{attrs:{color:"danger",size:"12"},domProps:{textContent:e._s("mdi-circle")}})],1):e._e()]),a("td",[a("v-menu",{attrs:{"offset-y":"",left:"",transition:"slide-y-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-btn",e._g({attrs:{small:"",text:"",icon:""}},n),[a("v-icon",{domProps:{textContent:e._s("mdi-dots-vertical")}})],1)]}}],null,!0)},[a("v-list",{attrs:{dense:""}},[a("v-list-item",{on:{click:function(a){return e.addHeadingAbove(t.item.order)}}},[a("v-icon",{attrs:{size:"18"},domProps:{textContent:e._s("mdi-arrow-up")}}),a("span",{staticClass:"mx-1"},[e._v("Add Heading Above")])],1),a("v-list-item",{on:{click:function(a){return e.orderSelectLastButtonClick(t.item.order)}}},[a("v-icon",{attrs:{size:"18"},domProps:{textContent:e._s("mdi-arrow-down")}}),a("span",{staticClass:"mx-1"},[e._v("Add Heading Below")])],1)],1)],1)],1)])]}}])},[a("template",{slot:"no-data"},[a("data-table-no-data",{attrs:{loading:e.loading}})],1)],2),a("v-dialog",{attrs:{persistent:"","max-width":"45%"},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.dependencyNotification.dialog=!1}},model:{value:e.dependencyNotification.dialog,callback:function(t){e.$set(e.dependencyNotification,"dialog",t)},expression:"dependencyNotification.dialog"}},[a("v-card",[a("vue-card-title",{attrs:{title:e.dependencyNotification.heading,subtitle:e.dependencyNotification.autoResolve?e.dependencyNotification.subheading:"Could not auto resolve dependencies. Please select edit action to resolve.",icon:"mdi-file-document-outline",dark:"",closable:""},on:{close:function(t){e.dependencyNotification.dialog=!1}}}),a("v-card-text",{staticClass:"pa-3"},[e.dependencyNotification.autoResolving?a("div",{staticClass:"text-subtitle-2 primary--text",domProps:{textContent:e._s("Resolving data please wait...")}}):a("div",{domProps:{textContent:e._s(e.dependencyNotification.text)}})]),a("v-divider"),e.dependencyNotification.autoResolving?e._e():a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:""},domProps:{textContent:e._s("Cancel")},on:{click:function(t){e.dependencyNotification.dialog=!1,e.$emit("refresh")}}}),a("v-btn",{attrs:{color:"primary"},domProps:{textContent:e._s("Update")},on:{click:e.editDependency}}),e.dependencyNotification.autoResolve?a("v-btn",{attrs:{color:"primary"},domProps:{textContent:e._s("Auto Resolve")},on:{click:e.resolveDependency}}):e._e()],1)],1)],1)],1)}),s=[],c=a("1da1"),o=a("d4ec"),d=(a("96cf"),a("d81d"),a("a630"),a("3ca3"),a("99af"),a("d3b7"),a("4de4"),a("159b"),a("caad"),a("2532"),a("aa47")),l=a("a51f"),u=a("c44a"),g=function e(t,a){var n=this;Object(o["a"])(this,e),this.id=t.id,this.original_order=this.order,this.order=t.order,this.label=t.label,this.type=t.type,this.payroll_setting_type=t.payroll_setting_type,this.dependencies=t.dependencies,this.makes_dependencies=t.makes_dependency,this.style_class=null,this.beforeItemClick=function(e){var t=e.currentTarget.parentElement.parentElement,i=n.getUpperAndLowerOrder(t);a.$emit("addHeading",{order:i})},this.getUpperAndLowerOrder=function(e){var t=Array.from(a.$refs.sortableTable.$el.getElementsByTagName("tbody")[0].childNodes).map((function(e){return e.id})),n=t.indexOf(e.id);return a.results[n].order}},p={components:{DataTableNoData:l["default"]},mixins:[u["a"]],props:{orderSelectMode:{type:Boolean,default:!0},packageId:{type:[String,Number],required:!0}},data:function(){return{srtjs:null,results:[],nextOrder:"",addedIds:[],dependencies:[],loading:!1,packageHeadings:[],lastIndex:0,lastDetails:null,makeDependencies:[],selectedHeadingId:"",dependencyNotification:{dialog:!1,heading:"Missing Dependency",subheading:"Missing dependency found for the dragged heading.",text:"Please select the action that you want to perform for Dependency.",autoResolve:!0,autoResolving:!1}}},mounted:function(){this.fetchData(),this.getPackageHeadings(),this.srtjs=d["a"].create(this.$refs.sortableTable.$el.getElementsByTagName("tbody")[0],{group:{name:"shared",pull:"clone",put:!1},multiDrag:!0,selectedClass:"sortableRow",draggable:".sortableRow",handle:".sortHandle",onEnd:this.onEnded,onMove:this.detectComponent,onStart:this.onStart,sort:!1})},methods:{orderSelectLastButtonClick:function(e){this.$emit("addHeading",{order:e+1})},addHeadingAbove:function(e){this.$emit("addHeading",{order:e})},getPackageHeadings:function(){var e=this;this.$http.get("/payroll/packages/".concat(this.packageId,"/?organization__slug=").concat(this.getOrganizationSlug,"&as=hr")).then((function(t){e.packageHeadings=t.package_headings,e.nextOrder=t.next_order,e.addedIds=t.package_headings.map((function(e){return e.heading}))}))},fetchData:function(){var e=this;this.loading||(this.loading=!0,this.$http.get("/payroll/headings/choices/?organization__slug=".concat(this.getOrganizationSlug,"&as=hr"),{params:{archived:!0}}).then((function(t){e.results=t.map((function(t){return new g(t,e)}))})).finally((function(){e.loading=!1})))},showDependency:function(e,t){var a=this;this.removeDependency(this.lastIndex,this.lastDetails),this.lastIndex=e,this.lastDetails=t,this.dependencies=this.results[e].dependencies||[],this.makeDependencies=this.results[e].makes_dependencies||[],this.results[this.results.indexOf(t)].style_class="selected";var n=this.results.filter((function(e){return-1!==a.dependencies.indexOf(e.id)})),i=this.results.filter((function(e){return-1!==a.makeDependencies.indexOf(e.id)}));n.forEach((function(e){a.results[a.results.indexOf(e)].style_class="dependent-heading"})),i.forEach((function(e){a.results[a.results.indexOf(e)].style_class="make-dependent-heading"}))},removeDependency:function(e,t){var a=this;this.dependencies=this.results[e].dependencies||[],this.makeDependencies=this.results[e].makes_dependencies||[];var n=this.results.filter((function(e){return-1!==a.dependencies.indexOf(e.id)}));t&&this.results[this.results.indexOf(t)]&&(this.results[this.results.indexOf(t)].style_class="");var i=this.results.filter((function(e){return-1!==a.makeDependencies.indexOf(e.id)}));n.forEach((function(e){a.results[a.results.indexOf(e)].style_class=""})),i.forEach((function(e){a.results[a.results.indexOf(e)].style_class=""}))},onEnded:function(e){if(e.to.rows.dropZone||0===this.packageHeadings.length){var t=0;e.newIndex&&this.packageHeadings.length>0&&(t=this.packageHeadings[e.newIndex]?this.packageHeadings[e.newIndex].order||1:this.nextOrder),this.nextOrder=t,this.selectedHeadingId=e.item.id,this.createPackageHeading(!1)}else this.notifyUser("Cannot drop heading in same table.","red")},createPackageHeading:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n={heading_id:t.selectedHeadingId,to_obj_order:t.nextOrder,package_id:t.packageId},a.next=3,t.$http.post("/payroll/package-headings/drag_heading/?as=hr&package__organization__slug=".concat(t.getOrganizationSlug,"&auto_resolve=").concat(e),n).then((function(e){!0===e.success&&(t.notifyUser("Successfully added package heading."),t.$emit("refresh"))})).catch((function(e){400===e.response.status&&e.response.data.success&&e.response.data.success.includes("False")&&e.response.data.auto_resolve&&e.response.data.auto_resolve.includes("True")?(t.get(e,"response.data.errors.non_field_errors")?t.notifyUser(t.get(e,"response.data.errors.non_field_errors"),"red"):t.get(e,"response.data.error_message")?t.notifyUser(t.get(e,"response.data.error_message"),"red"):t.notifyUser("Something went wrong.","red"),t.dependencyNotification.dialog=!0):(t.dependencyNotification.autoResolve=!1,t.get(e,"response.data.non_field_errors")?t.notifyUser(t.get(e,"response.data.non_field_errors")[0],"red"):t.get(e,"response.data.error_message")?t.notifyUser(t.get(e,"response.data.error_message"),"red"):t.notifyUser(t.get(e,"response.data.message"),"red"),t.$emit("refresh"))}));case 3:case"end":return a.stop()}}),a)})))()},editDependency:function(){var e={headingId:this.selectedHeadingId,order:this.nextOrder};this.$emit("editDependency",e),this.dependencyNotification.dialog=!1},resolveDependency:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dependencyNotification.autoResolving=!0,t.next=3,e.createPackageHeading(!0);case 3:e.dependencyNotification.dialog=!1,e.dependencyNotification.autoResolving=!1;case 5:case"end":return t.stop()}}),t)})))()}}},h=p,f=(a("a459"),a("2877")),m=a("6544"),v=a.n(m),_=a("8336"),k=a("b0af"),y=a("99d9"),b=a("8fea"),x=a("169a"),D=a("ce7e"),w=a("132d"),P=a("8860"),C=a("da13"),O=a("e449"),I=a("2fa4"),S=Object(f["a"])(h,r,s,!1,null,"90cb0f10",null),V=S.exports;v()(S,{VBtn:_["a"],VCard:k["a"],VCardActions:y["a"],VCardText:y["c"],VDataTable:b["a"],VDialog:x["a"],VDivider:D["a"],VIcon:w["a"],VList:P["a"],VListItem:C["a"],VMenu:O["a"],VSpacer:I["a"]});var N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.tempDisable?e._e():a("v-data-table",{ref:"sortableTable",attrs:{headers:e.package_headings_headers,items:e.package_headings,loading:e.loading,"disable-pagination":"",dense:"","hide-default-footer":"","hide-default-header":""},scopedSlots:e._u([{key:"item",fn:function(t){return[a("tr",{key:t.item.id,class:"sortableRow "+t.item.style_class,attrs:{id:t.item.id,name:"dropZone"},on:{click:function(a){return e.showDependency(t.index,t.item)},dblclick:function(a){return e.removeDependency(t.index,t.item)}}},[a("td",[a("v-icon",{staticClass:"sortHandle",staticStyle:{cursor:"move"},attrs:{icon:"",color:"green"},on:{mousedown:function(a){return e.showDependency(t.index,t.item)},dblclick:function(a){return e.removeDependency(t.index,t.item)}}},[e._v("mdi-equal")])],1),a("td",[e._v(" "+e._s(t.item.heading_name)+" ")]),a("td",[a("v-row",{staticClass:"my-1",attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"6"}},[a("v-icon",{attrs:{color:"blue",size:"14"},on:{click:function(a){return e.$emit("open-form",t.item.id)}}},[e._v("mdi-pencil")])],1),a("v-col",{attrs:{cols:"6"}},[a("v-icon",{staticClass:"pl-1",attrs:{color:"red",size:"14"},on:{click:function(a){e.deleteNotification.dialog=!0,e.deleteId=t.item.id}}},[e._v("mdi-trash-can-outline")])],1)],1)],1)])]}}],null,!1,1214333581)},[a("template",{slot:"no-data"},[a("data-table-no-data",{attrs:{loading:e.loading}})],1)],2),a("vue-dialog",{attrs:{notify:e.deleteNotification},on:{close:function(t){e.deleteNotification.dialog=!1},agree:e.deletePackageHeading}})],1)},R=[],E=a("2909"),$=(a("7db0"),a("d772")),T=function e(t,a){var n=this;Object(o["a"])(this,e),this.id=t.id,this.original_order=this.order,this.order=t.order,this.heading_name=t.heading_name,this.absent_days_impact=t.absent_days_impact,this.duration_unit=t.duration_unit,this.taxable=t.taxable,this.benefit_type=t.benefit_type,this.type=t.type,this.payroll_setting_type=t.payroll_setting_type,this.dependencies=t.dependencies,this.makes_dependencies=t.makes_dependency,this.style_class=null,this.beforeItemClick=function(e){var t=e.currentTarget.parentElement.parentElement,i=n.getUpperAndLowerOrder(t);a.$router.push({name:"admin-slug-payroll-settings-package-heading-create-packageId-nextOrder",params:{nextOrder:i,packageId:a.packageId,slug:a.getOrganizationSlug}})},this.getUpperAndLowerOrder=function(e){var t=Array.from(a.$refs.sortableTable.$el.getElementsByTagName("tbody")[0].childNodes).map((function(e){return e.id})),n=t.indexOf(e.id);return a.package_headings[n].order}},H={components:{DataTableNoData:l["default"]},mixins:[u["a"]],props:{packageId:{type:[String,Number],required:!0}},data:function(){return{package_headings_headers:[{text:"",value:"order"},{text:"Heading Name",value:"heading_name",align:"left",sortable:!1},{text:"Controls",value:"benefit_type",align:"right",sortable:!1}],deleteNotification:{dialog:!1,heading:"Confirm Delete",text:"Are you sure you want to delete this heading?"},srtjs:null,deleteId:"",loading:!1,formData:{},package_headings:[],dependencies:[],makeDependencies:[],beforeMoveKeyOrder:[],lastIndex:0,lastDetails:null,tempDisable:!1,validDrag:!0}},mounted:function(){this.loadPackageById(),this.srtjs=d["a"].create(this.$refs.sortableTable.$el.getElementsByTagName("tbody")[0],{group:{name:"shared"},draggable:".sortableRow",handle:".sortHandle",onEnd:this.dragReorder,onMove:this.onMove,onStart:this.onStart})},methods:{loadPackageById:function(){var e=this;this.loading=!0,this.formData={},this.package_headings=[],this.$http.get($["a"].getPackageById(this.packageId)+"?as=hr&organization__slug=".concat(this.getOrganizationSlug)).then((function(t){e.formData=t,e.package_headings=t.package_headings.map((function(t){return new T(t,e)})),e.loading=!1}))},successCallback:function(){this.$router.push({name:"admin-slug-payroll-settings-packages",params:{slug:this.getOrganizationSlug}})},deletePackageHeading:function(){var e=this;this.$http.delete("/payroll/package-headings/".concat(this.deleteId,"/?as=hr&package__organization__slug=").concat(this.getOrganizationSlug)).then((function(){e.notifyUser("Successfully Deleted Package Headings"),e.loadPackageById(),e.deleteNotification.dialog=!1,e.lastIndex=0,e.lastDetails=null,e.$emit("refresh")})).catch((function(t){e.deleteNotification.dialog=!1;var a=t.response.data.error_message||t.response.data[0]||"Something went wrong.";e.notifyUser(a,"red")}))},showDependency:function(e,t){var a=this;this.removeDependency(this.lastIndex,this.lastDetails),this.lastIndex=e,this.lastDetails=t,this.dependencies=this.package_headings[e].dependencies||[],this.makeDependencies=this.package_headings[e].makes_dependencies||[],this.package_headings[this.package_headings.indexOf(t)].style_class="selected";var n=this.package_headings.filter((function(e){return-1!==a.dependencies.indexOf(e.id)})),i=this.package_headings.filter((function(e){return-1!==a.makeDependencies.indexOf(e.id)}));n.forEach((function(e){a.package_headings[a.package_headings.indexOf(e)].style_class="dependent-heading"})),i.forEach((function(e){a.package_headings[a.package_headings.indexOf(e)].style_class="make-dependent-heading"}))},removeDependency:function(e,t){var a=this;this.dependencies=this.package_headings[e].dependencies||[],this.makeDependencies=this.package_headings[e].makes_dependencies||[];var n=this.package_headings.filter((function(e){return-1!==a.dependencies.indexOf(e.id)}));t&&this.package_headings[this.package_headings.indexOf(t)]&&(this.package_headings[this.package_headings.indexOf(t)].style_class="");var i=this.package_headings.filter((function(e){return-1!==a.makeDependencies.indexOf(e.id)}));n.forEach((function(e){a.package_headings[a.package_headings.indexOf(e)].style_class=""})),i.forEach((function(e){a.package_headings[a.package_headings.indexOf(e)].style_class=""}))},onStart:function(){this.beforeMoveKeyOrder=Array.from(this.$refs.sortableTable.$el.getElementsByTagName("tbody")[0].childNodes).map((function(e){return e.id}))},onMove:function(e){var t=this,a=e.dragged,n=e.related,i=this.package_headings.filter((function(e){return"Tax Deduction"===e.type})).map((function(e){return t.beforeMoveKeyOrder.indexOf(String(e.id))})).map((function(e){return t.package_headings[e].order})),r=this.package_headings.filter((function(e){return-1!==["Addition","Deduction"].indexOf(e.type)})).map((function(e){return t.beforeMoveKeyOrder.indexOf(String(e.id))})).map((function(e){return t.package_headings[e].order})),s=i.length>0?Math.min.apply(Math,Object(E["a"])(i)):null,c=r.length>0?Math.max.apply(Math,Object(E["a"])(r)):null,o=this.package_headings.find((function(e){return String(e.id)===a.id})).type,d=this.package_headings.find((function(e){return String(e.id)===a.id})).dependencies.map((function(e){return t.beforeMoveKeyOrder.indexOf(String(e))})).map((function(e){return t.package_headings[e].order})),l=d.length>0?Math.max.apply(Math,Object(E["a"])(d)):null,u=this.package_headings.find((function(e){return String(e.id)===a.id})).makes_dependencies.map((function(e){return t.beforeMoveKeyOrder.indexOf(String(e))})).map((function(e){return t.package_headings[e].order})),g=u.length>0?Math.min.apply(Math,Object(E["a"])(u)):null,p=this.beforeMoveKeyOrder.indexOf(n.id),h=this.package_headings[p].order;return l&&h<=l?(this.dragDependencyError="Sort cannot be performed because its dependent heading order will be greater than current heading.",this.validDrag=!1,!1):g&&h>=g?(this.dragDependencyError="Sort cannot be performed because its heading order must not be greater than dependent heading.",this.validDrag=!1,!1):-1!==["Addition","Deduction"].indexOf(o)&&s&&h>=s?(this.dragDependencyError="Addition or Deduction heading cannot be after Tax Deduction heading.",this.validDrag=!1,!1):-1!==["Tax Deduction"].indexOf(o)&&c&&h<=c?(this.dragDependencyError="Tax Deduction cannot be before addition or deduction heading.",this.validDrag=!1,!1):void(this.validDrag=!0)},dragReorder:function(e){var t=this,a=e.oldIndex,n=e.newIndex;if(!1!==this.validDrag||a!==n){if(!1===this.validDrag&&a!==n)return this.loadPackageById(),void this.notifyUser(this.dragDependencyError,"red");var i=this.package_headings[a],r=this.package_headings[n],s=i.order,c=r.order;s!==c&&this.$http.post("/payroll/package-headings/switch_order/?as=hr&package__organization__slug=".concat(this.getOrganizationSlug),{from_obj_order:s,to_obj_order:c,package_id:this.packageId}).then((function(e){if(e.success){for(var a in t.package_headings)t.package_headings[a].order=e.new_orders[a];t.notifyUser("Successfully sorted heading","green")}})).catch((function(e){t.get(e,"response.data.error_message")?t.notifyUser(t.get(e,"response.data.error_message"),"red"):t.notifyUser("Something went wrong.","red")}))}else this.notifyUser(this.dragDependencyError,"red")}}},A=H,B=(a("5bcd"),a("62ad")),z=a("0fd9b"),F=Object(f["a"])(A,N,R,!1,null,"6cbe04aa",null),U=F.exports;v()(F,{VCol:B["a"],VDataTable:b["a"],VIcon:w["a"],VRow:z["a"]});var j=a("0360"),M=a("90c6"),q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-row",[a("v-col",{attrs:{cols:"11"}},[a("div",{staticClass:"px-3 blue-grey--text text--darken-2 font-weight-bold"},[e._v(" "+e._s(e.fields.name)+" ")])]),a("v-col",{staticClass:"pl-3",attrs:{cols:"1"}},[a("v-icon",{attrs:{size:16},domProps:{textContent:e._s(e.showDetail?"mdi-chevron-up":"mdi-chevron-down")},on:{click:function(t){e.showDetail=!e.showDetail}}})],1),a("v-col",{staticClass:"pa-0 ma-0 pr-3",attrs:{cols:"12"}},[a("v-divider")],1)],1),a("v-card-text",{staticClass:"scrollbar-lg"},[e.showDetail?a("v-row",[a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Order")])]),a("div",[e._v(" "+e._s(e.fields.order)+" ")])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Payroll Setting Type")])]),a("div",[e._v(" "+e._s(e.fields.payroll_setting_type)+" ")])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Heading Type")])]),a("div",[e._v(" "+e._s(e.fields.type)+" ")])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Duration Unit")])]),a("div",[e._v(" "+e._s(e.fields.duration_unit||"N/A")+" ")])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Is Taxable")])]),a("div",[a("span",{domProps:{textContent:e._s(e.fields.taxable?"Yes":"No")}})])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Absent Days Impact")])]),a("div",[a("span",{domProps:{textContent:e._s(e.fields.absent_days_impact?"Yes":"No")}})])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Benefit Type")])]),a("div",[e._v(" "+e._s(e.fields.benefit_type||"N/A")+" ")])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Year to Date")])]),a("div",[e._v(" "+e._s(e.fields.year_to_date||"False")+" ")])])],1):e._e(),e.showDetail?a("v-divider"):e._e(),a("heading-rule",{attrs:{"conditional-variables":e.conditional_variables,"function-variables":e.function_variables,"rule-variables":e.rule_variables,"read-only":!1,error:e.isValidRule,"show-title":!0,"is-editable":e.fields.is_editable,"is-package-heading-equation":!0},on:{"update:error":function(t){e.isValidRule=t}},model:{value:e.fields.rules,callback:function(t){e.$set(e.fields,"rules",t)},expression:"fields.rules"}})],1),a("v-card-actions",[a("v-col",{staticClass:"text-right"},[a("v-btn",{attrs:{text:""},on:{click:function(t){return e.$emit("close")}}},[e._v(" Cancel ")]),a("v-btn",{attrs:{disabled:e.errors.any()||!e.isValidRule},on:{click:e.createPayrollHeadings}},[e._v(" Save ")])],1)],1)],1)},L=[],K=a("e860"),Y=a("7f8f"),G={components:{HeadingRule:K["a"]},mixins:[u["a"]],props:{nextOrder:{type:[String,Number],required:!0},headingId:{type:[String],required:!0}},data:function(){return{fields:{},conditional_variables:[],function_variables:[],rule_variables:[],isValidRule:!0,showDetail:!0}},created:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getPayrollHeading();case 2:e.getAvailableVariables();case 3:case"end":return t.stop()}}),t)})))()},methods:{getPayrollHeading:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get(Y["a"].getHeadingById(e.headingId)+"?as=hr&organization__slug=".concat(e.getOrganizationSlug)).then((function(t){e.fields=t,e.fields.order=e.nextOrder}));case 2:case"end":return t.stop()}}),t)})))()},getAvailableVariables:function(){var e=this;if(parseInt(this.fields.order)>=0){var t={order:this.fields.order,package_id:this.$route.params.pk,current_heading_type:this.fields.type,current_duration_unit:this.fields.duration_unit};this.$http.post($["a"].getPackageVariables+"?as=hr&package__organization__slug=".concat(this.getOrganizationSlug),t).then((function(t){e.conditional_variables=t.conditional_variables,e.rule_variables=t.rule_variables,e.function_variables=t.functions}))}},createPayrollHeadings:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.validateAllFields();case 2:if(!t.sent){t.next=6;break}e.fields.heading=e.headingId,e.fields.package=e.$route.params.pk,e.$http.post($["a"].createPackageHeadingById+"?as=hr&package__organization__slug=".concat(e.getOrganizationSlug),e.fields).then((function(){e.notifyUser("Successfully created payroll package heading."),e.$emit("close")})).catch((function(t){e.notifyInvalidFormResponse(t.response.data.rules.errors&&t.response.data.rules.errors[0].rule_equation_errors[0]),e.pushErrors(t)}));case 6:case"end":return t.stop()}}),t)})))()}}},J=G,Z=Object(f["a"])(J,q,L,!1,null,null,null),W=Z.exports;v()(Z,{VBtn:_["a"],VCardActions:y["a"],VCardText:y["c"],VCol:B["a"],VDivider:D["a"],VIcon:w["a"],VRow:z["a"]});var X={components:{AddPackageHeading:W,OverallHeadings:V,AddNewHeading:M["a"],AddHeadings:U,EditPackageHeadings:j["a"]},mixins:[u["a"]],props:{packageId:{type:[String,Number],required:!0}},data:function(){return{collapsed:!1,uniqueRefreshKey:0,headId:"",displayForm:!1,newHeadingAddition:!1,editDependencyData:{display:!1,headingId:"",order:""},order:""}},methods:{openForm:function(e){var t=this;this.displayForm=!1,this.$nextTick((function(){t.headId=e,t.newHeadingAddition=!1,t.editDependencyData.display=!1,t.displayForm=!0}))},addHeading:function(e){var t=this;this.newHeadingAddition=!1,this.$nextTick((function(){t.order=e.order,t.newHeadingAddition=!0,t.editDependencyData.display=!1}))},editDependency:function(e){this.uniqueRefreshKey=Math.random(),this.editDependencyData.display=!0,this.newHeadingAddition=!1,this.displayForm=!1,this.editDependencyData.headingId=e.headingId,this.editDependencyData.order=e.order}}},Q=X,ee=a("0789"),te=Object(f["a"])(Q,n,i,!1,null,null,null);t["a"]=te.exports;v()(te,{VCardText:y["c"],VCol:B["a"],VDivider:D["a"],VIcon:w["a"],VRow:z["a"],VSlideXTransition:ee["f"]})}}]);