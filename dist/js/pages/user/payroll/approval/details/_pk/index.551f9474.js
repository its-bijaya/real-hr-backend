(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages/user/payroll/approval/details/_pk/index","chunk-2d0c8a11","chunk-2d2259e9","chunk-6441e173","chunk-2d2160c2","pages/admin/_slug/payroll/settings/tax-report~pages/user/payroll/payslip/index","chunk-54c4192f","chunk-2d2160c2","chunk-2d0e6279","chunk-63c80d7a","chunk-2d213000","chunk-2d2160c2","chunk-2d2160c2","chunk-2d2160c2"],{"03df":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card-title",{staticClass:"pa-0"},[e.exportGeneration.created_on?e.exportGeneration.url?a("span",[a("div",{staticClass:"grey--text text-caption",domProps:{textContent:e._s("Last Report was generated on")}}),a("div",{staticClass:"text-caption"},[e._v(" "+e._s(e.getGeneratedDate(e.exportGeneration.created_on))+" ")])]):e._e():a("span",{staticClass:"grey--text text-caption mr-2",domProps:{textContent:e._s("Report has not been generated yet")}}),a("v-btn",{staticClass:"mx-1",attrs:{small:"",depressed:"",color:"primary"},domProps:{textContent:e._s(e.exportGeneration.created_on?"Generate Again":e.buttonText)},on:{click:e.exportTasks}}),e.exportGeneration.url?a("v-btn",{attrs:{small:"",depressed:"",color:"primary"},domProps:{textContent:e._s("Download")},on:{click:e.downloadTask}}):e._e(),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-btn",e._g({attrs:{icon:""},on:{click:e.verifyExportGeneration}},n),[a("v-icon",{attrs:{color:"primary"},domProps:{textContent:e._s("mdi-cloud-sync")}})],1)]}}])},[a("span",[e._v("Refresh to see if report is generated.")])])],1)},i=[],r=a("5530"),o=(a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("a9e3"),a("fb6a"),a("63ea")),s=a.n(o),l=a("2f62"),c={props:{exportUrl:{type:String,required:!0},filters:{type:[Object,URLSearchParams],required:!0},triggerChange:{type:Object,required:!1,default:function(){return{}}},buttonText:{type:String,default:"Generate Now"}},data:function(){return{exportGeneration:{url:null,created_on:""},exportGenerated:!1,useNepaliDate:localStorage.useNepaliDate}},watch:{triggerChange:{handler:function(e,t){s()(e,t)||this.verifyExportGeneration()},deep:!0},"$route.query.export":{handler:function(e){e&&this.verifyExportGeneration()},immediate:!0}},created:function(){this.verifyExportGeneration()},methods:Object(r["a"])(Object(r["a"])({},Object(l["d"])({setSnackBar:"common/setSnackBar"})),{},{verifyExportGeneration:function(){var e=this,t={};if(this.filters instanceof URLSearchParams){var a=this.filters;a.delete("offset"),a.delete("limit"),t="?"+a}else t=this.convertToURLSearchParams(this.filters);this.$http.get(this.exportUrl+t).then((function(t){e.exportGeneration=t}))},exportTasks:function(){var e=this,t={};if(this.filters instanceof URLSearchParams){var a=this.filters;a.delete("offset"),a.delete("limit"),t="?"+a}else t=this.convertToURLSearchParams(this.filters);var n=this.exportUrl+t;this.$http.post(n).then(this.setSnackBar({text:"A new export will be generated soon",color:"green"})).catch((function(t){e.setSnackBar({text:t.response.data[0],color:"danger"})}))},downloadTask:function(){window.open(this.exportGeneration.url)},getGeneratedDate:function(e){var t=this.$dayjs(e).calendar(),a=Number(t.slice(0,2));return"true"===this.useNepaliDate&&a?this.$dayjs(this.ad2bs(t)).format("DD/MM/YYYY"):t}})},d=c,u=a("2877"),p=a("6544"),m=a.n(p),h=a("8336"),f=a("99d9"),g=a("132d"),v=a("3a2f"),y=Object(u["a"])(d,n,i,!1,null,null,null);t["a"]=y.exports;m()(y,{VBtn:h["a"],VCardTitle:f["d"],VIcon:g["a"],VTooltip:v["a"]})},"0548":function(e,t,a){"use strict";a("0801")},"0798":function(e,t,a){"use strict";var n=a("5530"),i=a("ade3"),r=(a("caad"),a("0c18"),a("10d2")),o=a("afdd"),s=a("9d26"),l=a("f2e7"),c=a("7560"),d=a("f40d"),u=a("58df"),p=a("d9bd");t["a"]=Object(u["a"])(r["a"],l["a"],d["a"]).extend({name:"v-alert",props:{border:{type:String,validator:function(e){return["top","right","bottom","left"].includes(e)}},closeLabel:{type:String,default:"$vuetify.close"},coloredBorder:Boolean,dense:Boolean,dismissible:Boolean,closeIcon:{type:String,default:"$cancel"},icon:{default:"",type:[Boolean,String],validator:function(e){return"string"===typeof e||!1===e}},outlined:Boolean,prominent:Boolean,text:Boolean,type:{type:String,validator:function(e){return["info","error","success","warning"].includes(e)}},value:{type:Boolean,default:!0}},computed:{__cachedBorder:function(){if(!this.border)return null;var e={staticClass:"v-alert__border",class:Object(i["a"])({},"v-alert__border--".concat(this.border),!0)};return this.coloredBorder&&(e=this.setBackgroundColor(this.computedColor,e),e.class["v-alert__border--has-color"]=!0),this.$createElement("div",e)},__cachedDismissible:function(){var e=this;if(!this.dismissible)return null;var t=this.iconColor;return this.$createElement(o["a"],{staticClass:"v-alert__dismissible",props:{color:t,icon:!0,small:!0},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:function(){return e.isActive=!1}}},[this.$createElement(s["a"],{props:{color:t}},this.closeIcon)])},__cachedIcon:function(){return this.computedIcon?this.$createElement(s["a"],{staticClass:"v-alert__icon",props:{color:this.iconColor}},this.computedIcon):null},classes:function(){var e=Object(n["a"])(Object(n["a"])({},r["a"].options.computed.classes.call(this)),{},{"v-alert--border":Boolean(this.border),"v-alert--dense":this.dense,"v-alert--outlined":this.outlined,"v-alert--prominent":this.prominent,"v-alert--text":this.text});return this.border&&(e["v-alert--border-".concat(this.border)]=!0),e},computedColor:function(){return this.color||this.type},computedIcon:function(){return!1!==this.icon&&("string"===typeof this.icon&&this.icon?this.icon:!!["error","info","success","warning"].includes(this.type)&&"$".concat(this.type))},hasColoredIcon:function(){return this.hasText||Boolean(this.border)&&this.coloredBorder},hasText:function(){return this.text||this.outlined},iconColor:function(){return this.hasColoredIcon?this.computedColor:void 0},isDark:function(){return!(!this.type||this.coloredBorder||this.outlined)||c["a"].options.computed.isDark.call(this)}},created:function(){this.$attrs.hasOwnProperty("outline")&&Object(p["a"])("outline","outlined",this)},methods:{genWrapper:function(){var e=[this.$slots.prepend||this.__cachedIcon,this.genContent(),this.__cachedBorder,this.$slots.append,this.$scopedSlots.close?this.$scopedSlots.close({toggle:this.toggle}):this.__cachedDismissible],t={staticClass:"v-alert__wrapper"};return this.$createElement("div",t,e)},genContent:function(){return this.$createElement("div",{staticClass:"v-alert__content"},this.$slots.default)},genAlert:function(){var e={staticClass:"v-alert",attrs:{role:"alert"},on:this.listeners$,class:this.classes,style:this.styles,directives:[{name:"show",value:this.isActive}]};if(!this.coloredBorder){var t=this.hasText?this.setTextColor:this.setBackgroundColor;e=t(this.computedColor,e)}return this.$createElement("div",e,[this.genWrapper()])},toggle:function(){this.isActive=!this.isActive}},render:function(e){var t=this.genAlert();return this.transition?e("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[t]):t}})},"0801":function(e,t,a){},"0c18":function(e,t,a){},1229:function(e,t,a){"use strict";a("99af");t["a"]={getDivision:function(e){return"/org/".concat(e,"/division/")},postDivision:function(e){return"/org/".concat(e,"/division/")},getDivisionDetails:function(e,t){return"/org/".concat(e,"/division/").concat(t,"/")},putDivision:function(e,t){return"/org/".concat(e,"/division/").concat(t,"/")},deleteDivision:function(e,t){return"/org/".concat(e,"/division/").concat(t,"/")},importDivision:function(e){return"/org/".concat(e,"/division/import/")},downloadSampleDivision:function(e){return"/org/".concat(e,"/division/import/sample")}}},"17cc":function(e,t,a){"use strict";var n=a("b85c"),i=a("1da1"),r=a("5530");a("96cf"),a("ac1f"),a("841c"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("b64b");t["a"]={data:function(){return{fetchedResults:[],response:{},extra_data:"",appliedFilters:{},footerProps:{itemsPerPageOptions:[10,20,30,40,50,100]},pagination:{sortBy:["modified_at"],descending:!1,totalItems:0,page:1,rowsPerPage:10,pageCount:0},triggerDataTable:!0,fullParams:""}},created:function(){this.getParams(this.DataTableFilter)},methods:{getParams:function(e){var t=Object(r["a"])(Object(r["a"])({},e),{},{offset:(this.pagination.page-1)*this.pagination.rowsPerPage,limit:this.pagination.rowsPerPage,ordering:this.pagination.descending?this.pagination.sortBy:"-"+this.pagination.sortBy});this.fullParams=this.convertToURLSearchParams(t)},loadDataTable:function(e){this.response=e,this.fetchedResults=e.results,this.pagination.totalItems=e.count,this.extra_data=e.extra_data,this.triggerDataTable=!0},fetchData:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.warn("DatatableMixin: fetchData has been deprecated. Please use the function in page itself."),n=Object(r["a"])(Object(r["a"])(Object(r["a"])({},e),t.appliedFilters),{},{search:t.search,offset:(t.pagination.page-1)*t.pagination.rowsPerPage,limit:t.pagination.rowsPerPage,ordering:t.pagination.descending?t.pagination.sortBy:"-"+t.pagination.sortBy}),i=t.convertToURLSearchParams(n),t.loading=!0,a.next=6,t.$http.get(t.endpoint,{params:i}).then((function(e){t.response=e,t.fetchedResults=e.results,t.pagination.totalItems=e.count})).finally((function(){t.loading=!1}));case 6:case"end":return a.stop()}}),a)})))()},applyFilters:function(e){this.appliedFilters=e,this.fetchData(e)},convertToURLSearchParams:function(e){for(var t=new URLSearchParams,a=0,i=Object.keys(e);a<i.length;a++){var r=i[a],o=e[r];if(void 0===o&&(o=""),Array.isArray(o)){var s,l=Object(n["a"])(o);try{for(l.s();!(s=l.n()).done;){var c=s.value;t.append(r,c)}}catch(d){l.e(d)}finally{l.f()}}else t.append(r,o)}return t},loadDataTableChange:function(){var e=this;this.triggerDataTable&&(this.getParams(this.DataTableFilter),this.$nextTick((function(){e.fetchDataTable()})))}},watch:{DataTableFilter:function(e){this.fetchedResults=[],this.getParams(e),this.fetchDataTable(),this.pagination.page=1},"pagination.sortBy":function(){this.fetchedResults=[],this.loadDataTableChange()},"pagination.descending":function(){this.fetchedResults=[],this.loadDataTableChange()},"pagination.page":function(){this.fetchedResults=[],this.loadDataTableChange()},"pagination.rowsPerPage":function(){this.fetchedResults=[],this.loadDataTableChange()}}}},"1f04":function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return l}));var n=a("1da1");a("d3b7"),a("3ca3"),a("ddb0"),a("96cf");function i(e){return r.apply(this,arguments)}function r(){return r=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o(t);case 2:return a=e.sent,e.next=5,l([a]);case 5:return n=e.sent,e.abrupt("return",n[0]);case 7:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}function o(e){return s.apply(this,arguments)}function s(){return s=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.next=5,a.blob();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function l(e){return c.apply(this,arguments)}function c(){return c=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(a=function(e){var t=new FileReader;return new Promise((function(a){t.readAsDataURL(e),t.onloadend=function(){a(t.result)}}))},n=[],i=0;i<t.length;i++)n.push(a(t[i]));return e.next=5,Promise.all(n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}},"21d9":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.nonFieldErrors?a("v-divider"):e._e(),e._l(e.nonFieldErrors,(function(t,n){return a("div",{key:n},[a("v-alert",{staticClass:"ma-2 text-body-1",attrs:{dense:"",text:"",dismissible:"",type:"error"}},[e._v(" "+e._s(t)+" ")])],1)})),e.fetchedResults.length>0?a("v-data-table",{attrs:{headers:e.errorHeadings,items:e.fetchedResults,"mobile-breakpoint":0,loading:e.loading,"fixed-header":"",height:"300",id:"errTable","hide-default-footer":"","disable-pagination":""},scopedSlots:e._u([{key:"item",fn:function(t){return[a("tr",[a("td",[a("vue-user",{staticClass:"excel-hidden",attrs:{user:t.item.employee}}),a("span",{staticClass:"excel-only"},[e._v(e._s(t.item.employee.full_name))])],1),a("td",[e._v(e._s(t.item.employee.job_title))]),a("td",{staticClass:"danger--text"},[e._v(" "+e._s(t.item.reason_args[0])+" "),-1!==["Pending Approval","Gap Or Overlap"].indexOf(t.item.reason_args[1])?a("span",[a("div",{staticClass:"primary--text pointer",on:{click:function(a){return e.openDetails(t.item.reason_args[2].payroll_id)}}},[e._v(" Show Payroll ")])]):e._e(),-1!==["Holding"].indexOf(t.item.reason_args[1])?a("span",[a("v-btn",{attrs:{text:"",small:""},on:{click:function(t){return e.$router.push({name:"admin-slug-payroll-on-hold",params:{slug:e.getOrganizationSlug}})}}},[e._v(" See List ")])],1):e._e()])])]}}],null,!1,2467503607)}):e._e()],2)},i=[],r=(a("a9e3"),a("99af"),a("02cb")),o=a("17cc"),s={components:{VueUser:r["default"]},mixins:[o["a"]],props:{logId:{type:[String,Number],default:""},errorList:{type:[Array],default:function(){return[]}}},data:function(){return{errorHeadings:[{text:"Employee Name",value:"name",align:"left",sortable:!1},{text:"Employee Designation",value:"name",align:"left",sortable:!1},{text:"Reason",value:"name",align:"left",sortable:!1}],nonFieldErrors:null,loading:!1}},computed:{DataTableFilter:function(){return{as:"hr"}}},created:function(){if(this.logId||0!==this.errorList.length)if(this.errorList.length>0){var e={};e.results=this.errorList,e.count=this.errorList.length,this.loadDataTable(e)}else this.fetchDataTable()},methods:{fetchDataTable:function(){var e=this;this.loading=!0,this.$http.get("/payroll/".concat(this.$route.params.slug,"/payroll-history/").concat(this.logId,"/"),{params:this.fullParams}).then((function(t){t.errors&&t.errors.not_eligibles&&e.loadDataTable(t.errors.not_eligibles),t.errors&&t.errors.non_field_errors&&(e.nonFieldErrors=t.errors.non_field_errors),e.loading=!1}))},openDetails:function(e){this.$router.push({name:"admin-slug-payroll-collection-detail",params:{slug:this.getOrganizationSlug,pk:e}})}}},l=s,c=a("2877"),d=a("6544"),u=a.n(d),p=a("0798"),m=a("8336"),h=a("8fea"),f=a("ce7e"),g=Object(c["a"])(l,n,i,!1,null,null,null);t["a"]=g.exports;u()(g,{VAlert:p["a"],VBtn:m["a"],VDataTable:h["a"],VDivider:f["a"]})},2837:function(e,t,a){"use strict";a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return s})),a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return c}));var n=a("d4ec"),i=a("bee2"),r=a("edc0"),o=function(){function e(){Object(n["a"])(this,e),this.error={}}return Object(i["a"])(e,[{key:"setErrors",value:function(e){this.error=e}},{key:"get",value:function(e){return this.error[e]}},{key:"clear",value:function(){this.error={}}}]),e}(),s=function(){function e(t,a,i){Object(n["a"])(this,e),this.initialValue=t||0,this._currentValue=i||this.initialValue,this.type=a,this.addition_types=["Addition","Extra Addition"],this.deduction_types=["Deduction","Extra Deduction","Tax Deduction"]}return Object(i["a"])(e,[{key:"isEdited",get:function(){return Object(r["a"])(this.initialValue)!==Object(r["a"])(this._currentValue)}},{key:"clean",value:function(){return{initialValue:this.initialValue,currentValue:this.currentValue,type:this.type}}},{key:"currentValue",get:function(){return this._currentValue},set:function(e){this._currentValue=e}},{key:"changedDifference",get:function(){var e=Object(r["a"])(this.currentValue)-Object(r["a"])(this.initialValue);return-1!==this.deduction_types.indexOf(this.type)&&(e*=-1),e}}]),e}(),l=function(){function e(){Object(n["a"])(this,e)}return Object(i["a"])(e,[{key:"hasHeading",value:function(e){return!!this[e]}},{key:"editedDifference",get:function(){var e=0;for(var t in this)"Tax Deduction"!==this[t].type&&(e+=this[t].changedDifference);return e}}]),e}(),c=function(){function e(){Object(n["a"])(this,e)}return Object(i["a"])(e,[{key:"hasEmployee",value:function(e){return!!this[e]}}],[{key:"clean",value:function(e){var t={};for(var a in e)for(var n in t[a]={},t[a].incomeDifference=e[a].editedDifference,e[a])e[a][n].isEdited&&(t[a][n]=e[a][n].clean());return t}}]),e}()},"2c2a":function(e,t,a){"use strict";a("99af");t["a"]={getEmploymentLevel:function(e){return"/org/".concat(e,"/employment/level/")},postEmploymentLevel:function(e){return"/org/".concat(e,"/employment/level/")},getEmploymentLevelDetail:function(e,t){return"/org/".concat(e,"/employment/level/").concat(t,"/")},updateEmploymentLevel:function(e,t){return"/org/".concat(e,"/employment/level/").concat(t,"/")},deleteEmploymentLevel:function(e,t){return"/org/".concat(e,"/employment/level/").concat(t,"/")},importEmploymentLevel:function(e){return"/org/".concat(e,"/employment/level/import/")},downloadSampleEmploymentLevel:function(e){return"/org/".concat(e,"/employment/level/import/sample")}}},"2eda":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("vue-card-title",{attrs:{title:"Employment Review",subtitle:"",icon:"mdi-file-document-outline"}}),a("v-divider"),a("v-card-text",{staticClass:"scrollbar-sm py-0"},[a("v-list",{staticClass:"py-0"},[e._l(e.details.stat,(function(t,n){return[a("v-list-item",{key:n},[a("v-list-item-content",[a("v-list-item-title",{staticClass:"grey--text text-subtitle-2",domProps:{textContent:e._s(t.change_type__title)}})],1),a("v-list-item-action",[a("v-list-item-title",{staticClass:"info--text pointer text-subtitle-2",domProps:{textContent:e._s(t.count)},on:{click:function(t){e.showUsersList=!0}}})],1)],1),n<e.details.stat.length-1?a("v-divider",{key:"D-"+n}):e._e()]}))],2)],1),a("user-list-dialog",{attrs:{users:e.details.users},on:{close:function(t){e.showUsersList=!1,e.employeeList=[]}},model:{value:e.showUsersList,callback:function(t){e.showUsersList=t},expression:"showUsersList"}})],1)},i=[],r=a("9815"),o={components:{UserListDialog:r["default"]},props:{details:{type:Object,required:!0}},data:function(){return{showUsersList:!1}}},s=o,l=a("2877"),c=a("6544"),d=a.n(c),u=a("b0af"),p=a("99d9"),m=a("ce7e"),h=a("8860"),f=a("da13"),g=a("1800"),v=a("5d23"),y=Object(l["a"])(s,n,i,!1,null,null,null);t["a"]=y.exports;d()(y,{VCard:u["a"],VCardText:p["c"],VDivider:m["a"],VList:h["a"],VListItem:f["a"],VListItemAction:g["a"],VListItemContent:v["a"],VListItemTitle:v["c"]})},"2f1b":function(e,t,a){"use strict";a("41a5")},"35b3":function(e,t,a){var n=a("23e7");n({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},"36e4":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("vue-card-title",{attrs:{title:"Payroll Tax Report "+(e.readOnly?"":"Settings"),subtitle:e.readOnly?"":"Here you can configure tax report settings.",icon:"mdi-sack-percent",dark:e.readOnly}},[a("template",{slot:"actions"},[e.readOnly&&!e.loading&&e.results.length>0?a("v-btn",{attrs:{small:"",depressed:"",color:"primary"},on:{click:function(t){return e.downloadExcelReport()}}},[e._v(" Download Excel ")]):e._e(),e.readOnly&&!e.loading&&e.results.length>0?a("v-btn",{attrs:{small:"",depressed:"",color:"primary"},on:{click:function(t){return e.downloadPdf(e.$refs.taxReport,"p","tax-report",125)}}},[e._v(" Download Pdf ")]):e._e(),e.readOnly?a("v-btn",{staticClass:"white--text",attrs:{icon:""},on:{click:function(t){return e.$emit("close")}}},[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-close")}})],1):e._e()],1)],2),a("v-divider"),e.nonFieldErrors.length>0&&e.results.length>0?a("v-row",[a("v-col",{attrs:{cols:"12"}},[e.nonFieldErrors?a("non-field-form-errors",{attrs:{"non-field-errors":e.nonFieldErrors}}):e._e()],1)],1):e._e(),!e.results.length>0?a("v-row",{staticClass:"\n      pa-5\n      red\n      lighten-5\n      no-gutters\n      text-subtitle-2\n      font-weight-regular\n      text-center\n    ",attrs:{justify:"center",align:"center"}},[a("div",["hr"===e.as?a("span",[e._v("Tax report settings not configured properly. Please configure tax report settings from "),a("a",{on:{click:e.pushToTaxReportSettings}},[e._v(" here")])]):a("span",[e._v(" Tax report settings not configured properly. Please contact your HR Administrator ")])])]):e._e(),e.results.length>0?a("v-row",{class:{"scrollbar-thin":e.readOnly},style:e.readOnly?"height: calc(100vh - 55px)":"",attrs:{justify:"center"}},[a("v-col",{attrs:{cols:e.readOnly?"8":"12"}},[a("div",{ref:"taxReport",staticClass:"pa-5"},[e.readOnly?a("v-row",{staticClass:"\n            blue\n            lighten-5\n            no-gutters\n            text-subtitle-2\n            font-weight-regular\n            pa-0\n          ",staticStyle:{"background-color":"#90caf9",margin:"4px 2px 12px 2px"},attrs:{"no-gutters":""}},[a("v-col",{staticClass:"text-center font-weight-medium"},[a("span",{staticClass:"blueGrey--text"},[e._v(" Tax calculation details from "),a("span",{staticClass:"blueGrey--text font-weight-bold"},[e._v(e._s(e.from_date))]),e._v(" to "),a("span",{staticClass:"blueGrey--text font-weight-bold"},[e._v(e._s(e.to_date))]),e._v(" for Fiscal Year "),a("span",{staticClass:"blueGrey--text font-weight-bold"},[e._v(e._s(e.fiscalYear))])])])],1):e._e(),e.readOnly?a("v-row",{staticClass:"\n            blue\n            lighten-5\n            no-gutters\n            text-subtitle-2\n            font-weight-regular\n            pa-2\n          ",staticStyle:{margin:"4px 2px 12px 2px"}},[a("v-col",{attrs:{md:"3",cols:"6"}},[a("div",[e._v("Name")])]),a("v-col",{staticClass:"blueGrey--text font-weight-medium",attrs:{md:"3",cols:"6"}},[a("div",[e._v(" : "),a("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.get(e.employeeDetail,"full_name")||"N/A"))])])]),a("v-col",{attrs:{md:"3",cols:"6"}},[a("div",[e._v("Job Title")])]),a("v-col",{staticClass:"blueGrey--text font-weight-medium",attrs:{md:"3",cols:"6"}},[a("div",[e._v(": "+e._s(e.get(e.employeeDetail,"job_title")||"N/A"))])]),a("v-col",{attrs:{md:"3",cols:"6"}},[a("div",[e._v("Branch")])]),a("v-col",{staticClass:"blueGrey--text font-weight-medium",attrs:{md:"3",cols:"6"}},[a("div",[e._v(": "+e._s(e.get(e.employeeDetail,"branch")||"N/A"))])]),a("v-col",{attrs:{md:"3",cols:"6"}},[a("div",[e._v("Username")])]),a("v-col",{staticClass:"blueGrey--text font-weight-medium",attrs:{md:"3",cols:"6"}},[a("div",[e._v(": "+e._s(e.get(e.employeeDetail,"username")||"N/A"))])]),a("v-col",{attrs:{md:"3",cols:"6"}},[a("div",[e._v("Division")])]),a("v-col",{staticClass:"blueGrey--text font-weight-medium",attrs:{md:"3",cols:"6"}},[a("div",[e._v(": "+e._s(e.get(e.employeeDetail,"division.name")||"N/A"))])]),a("v-col",{attrs:{md:"3",cols:"6"}},[a("div",[e._v("Employee Code")])]),a("v-col",{staticClass:"blueGrey--text font-weight-medium",attrs:{md:"3",cols:"6"}},[a("div",[e._v(": "+e._s(e.get(e.employeeDetail,"code")||"N/A"))])]),a("v-col",{attrs:{md:"3",cols:"6"}},[a("div",[e._v("Joined Date")])]),a("v-col",{staticClass:"blueGrey--text font-weight-medium",attrs:{md:"3",cols:"6"}},[a("div",[e._v(": "+e._s(e.get(e.employeeDetail,"joined_date")||"N/A"))])]),a("v-col",{attrs:{md:"3",cols:"6"}},[a("div",[e._v("Marital status")])]),a("v-col",{staticClass:"blueGrey--text font-weight-medium",attrs:{md:"3",cols:"6"}},[a("div",[e._v(": "+e._s(e.get(e.employeeDetail,"marital_status")||"N/A"))])])],1):e._e(),e.results.length>0?a("div",{staticClass:"horizontal-scrollbar",staticStyle:{display:"block","white-space":"nowrap"}},[a("table",{staticClass:"custom-yearly-layout pa-1",staticStyle:{width:"100%"}},[a("thead",{staticClass:"white--text text-subtitle-2"},[a("tr",[a("th",{staticStyle:{width:"80%"}},[e._v("Particulars")]),a("th",{staticStyle:{width:"10%"}},[e._v("Paid")]),a("th",{staticStyle:{width:"10%"}},[e._v("Projected")])])]),a("tbody",{staticClass:"grey--text text--darken-3"},[e._l(e.results,(function(t,n){return[t.category?a("tr",{key:"category-"+n,staticClass:"font-weight-bold"},[a("td",{staticClass:"blue lighten-5",attrs:{colspan:"3"}},[a("span",{staticClass:"pl-2"},[e._v(e._s(t.category))])])]):e._e(),t.headings?e._l(t.headings,(function(i,r){return a("tr",{key:"category-"+n+"-heading-"+r},[a("td",{staticClass:"px-3 very-light-blue",staticStyle:{width:"80%"}},[a("v-row",{attrs:{dense:"",align:"center"}},[i.is_nested?a("v-col",{staticClass:"pa-0",attrs:{cols:"1"}}):e._e(),a("v-col",{staticClass:"pa-0",attrs:{md:e.readOnly?i.is_nested?"11":"12":i.is_nested?"9":"10",cols:e.readOnly?i.is_nested?"10":"11":i.is_nested?"8":"9"}},[e.readOnly?a("span",{staticClass:"grey--text text--darken-2",class:i.is_highlighted?"font-weight-bold":""},[e._v(e._s(i.heading_name)+" ")]):a("v-select",e._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],staticClass:"py-0 my-0",attrs:{items:e.computedHeadingList(i.heading),"item-text":"label","item-value":"id","hide-details":"",dense:"",height:"25"},scopedSlots:e._u([{key:"selection",fn:function(t){return[a("span",{staticClass:"grey--text text--darken-2",class:i.is_highlighted?"font-weight-bold":""},[e._v(e._s(t.item.label)+" ")])]}},{key:"append",fn:function(){return[a("v-icon",{staticClass:"mt-1",attrs:{small:""}},[e._v("mdi-menu-down")])]},proxy:!0}],null,!0),model:{value:i.heading,callback:function(t){e.$set(i,"heading",t)},expression:"heading.heading"}},"v-select",e.veeValidate("category-"+n+"-heading-"+r,""),!1))],1),e.readOnly?e._e():a("v-col",{staticClass:"pa-0",attrs:{md:"2",cols:"3"}},[a("v-row",{attrs:{dense:"",align:"center"}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-col",e._g({staticClass:"pa-0 pl-4",attrs:{cols:"3"}},n),[a("v-checkbox",{staticClass:"pa-0 ma-0",attrs:{dense:"","hide-details":""},model:{value:i.is_highlighted,callback:function(t){e.$set(i,"is_highlighted",t)},expression:"heading.is_highlighted"}})],1)]}}],null,!0)},[a("span",[e._v(" Bold heading ")])]),a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-col",e._g({staticClass:"pa-0 px-3",attrs:{cols:"3"}},n),[a("v-checkbox",{staticClass:"pa-0 ma-0",attrs:{dense:"","hide-details":""},model:{value:i.is_nested,callback:function(t){e.$set(i,"is_nested",t)},expression:"heading.is_nested"}})],1)]}}],null,!0)},[a("span",[e._v(" Nested heading ")])]),a("v-col",{staticClass:"pa-0 pl-3",attrs:{cols:"3"}},[t.headings.length>1?a("v-icon",{staticClass:"red--text",attrs:{size:"18"},on:{click:function(e){return t.headings.splice(r,1)}}},[e._v("mdi-trash-can-outline")]):e._e()],1),a("v-col",{staticClass:"pa-0 pl-1",attrs:{cols:"3"}},[r===t.headings.length-1?a("v-icon",{staticClass:"indigo--text",attrs:{size:"18"},on:{click:function(a){return e.addNewRow(n,r,t)}}},[e._v("mdi-plus-box-outline")]):e._e()],1)],1)],1)],1)],1),i.yearly_const||"Type2Cnst"===e.get(e.getHeadingInfo(i.heading),"type")?a("td",{staticClass:"text-right px-1 very-light-blue",staticStyle:{width:"20%"},attrs:{colspan:"2"}},[e.readOnly?a("span",[e._v(" "+e._s(e.formatCurrency(i.yearly_const)||"-")+" ")]):a("span",[e._v(" 0.00 ")])]):[a("td",{staticClass:"text-right px-1 very-light-blue",staticStyle:{width:"10%"}},[e.readOnly?a("span",[e._v(" "+e._s(e.formatCurrency(i.ytd_amount)||"-")+" ")]):a("span",[e._v(" 0.00 ")])]),a("td",{staticClass:"text-right px-1 very-light-blue",staticStyle:{width:"10%"}},[e.readOnly?a("span",[e._v(e._s(e.formatCurrency(i.remaining_after_ytd)||"-"))]):a("span",[e._v(" 0.00 ")])])]],2)})):e._e()]}))],2)])]):e._e()],1),e.loading&&e.results.length<1?a("default-svg-loader"):e._e()],1)],1):e._e(),e.readOnly?e._e():a("v-divider"),e.readOnly?e._e():a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{depressed:"",small:"",color:"primary"},on:{click:e.saveTaxReportSetting}},[e._v(" Save ")])],1)],1)},i=[],r=a("1da1"),o=(a("96cf"),a("a9e3"),a("7db0"),a("99af"),a("a434"),a("4de4"),a("d81d"),a("caad"),a("2532"),a("159b"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("c44a")),s=a("ab8a"),l=a("7f8f"),c={getTaxReportSettings:function(e){return"/payroll/".concat(e,"/tax-report-settings/")},postTaxReportSettings:function(e){return"/payroll/".concat(e,"/tax-report-settings/")},getEmployeeTaxReport:function(e,t){return"/payroll/employees/".concat(e,"/payslip/").concat(t,"/tax-report")}},d=a("d242"),u=a("f12b"),p=a("cf45"),m=a("c197"),h={components:{DefaultSvgLoader:m["default"],NonFieldFormErrors:s["default"]},mixins:[o["a"],d["a"],u["a"]],props:{readOnly:{type:Boolean,default:!1},userId:{type:Number,default:null},payrollId:{type:[String,Number],default:null},as:{type:String,default:""},organizationSlug:{type:String,default:""}},data:function(){return{results:[],headingList:[],employeeDetail:{},fiscalYear:"",from_date:"",to_date:""}},created:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchHeadings();case 2:e.readOnly?e.getBlockingData(c.getEmployeeTaxReport(e.userId,e.payrollId)+"?as=".concat(e.as,"&organization_slug=").concat(e.organizationSlug)).then((function(t){e.results=t.results,e.employeeDetail=t.employee,e.fiscalYear=t.fiscal_year_name,e.from_date=t.from_date,e.to_date=t.to_date})):e.getBlockingData(c.getTaxReportSettings(e.getOrganizationSlug)).then((function(t){e.results=t,e.results&&(void 0===e.results.find((function(e){return"Employment Income"===e.category}))&&e.results.push({category:"Employment Income",headings:[{}]}),void 0===e.results.find((function(e){return"Less: Allowable Deductions"===e.category}))&&e.results.push({category:"Less: Allowable Deductions",headings:[{}]}),void 0===e.results.find((function(e){return"Less: Allowable Reductions"===e.category}))&&e.results.push({category:"Less: Allowable Reductions",headings:[{}]}),void 0===e.results.find((function(e){return"Tax Calculation"===e.category}))&&e.results.push({category:"Tax Calculation",headings:[{}]}))}));case 3:case"end":return t.stop()}}),t)})))()},methods:{formatCurrency:p["d"],fetchHeadings:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getBlockingData(l["a"].getHeadingChoices+"?organization__slug=".concat(e.getOrganizationSlug,"&as=hr")).then((function(t){e.headingList=t}));case 2:case"end":return t.stop()}}),t)})))()},addNewRow:function(e,t){var a=this.results[e];a.headings&&a.headings.splice(t+1,0,{heading:"",is_highlighted:!1,is_nested:!1,ytd_amount:"0.00",remaining_after_ytd:"0.00",yearly_const:null})},computedHeadingList:function(e){var t=this;return this.headingList.filter((function(a){var n=[].concat.apply([],t.results.map((function(e){return e.headings}))).map((function(e){return e.heading}));return a.id===e||!n.includes(a.id)}))},saveTaxReportSetting:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$validator.validate();case 2:if(!t.sent){t.next=6;break}a=e.deepCopy(e.results),a.forEach((function(e){e.headings.forEach((function(t,a){"number"!==typeof t.heading&&e.headings.splice(a,1)}))})),e.insertData(c.postTaxReportSettings(e.getOrganizationSlug),{settings:a},!1).then((function(){e.crud.message="Successfully saved tax report settings."}));case 6:case"end":return t.stop()}}),t)})))()},getHeadingInfo:function(e){return this.headingList.filter((function(t){return t.id===e}))[0]},pushToTaxReportSettings:function(){this.$router.push({name:"admin-slug-payroll-settings-tax-report"})},downloadExcelReport:function(){var e="/payroll/employees/".concat(this.userId,"/payslip/").concat(this.payrollId,"/tax-report-excel/?organization_slug=").concat(this.organizationSlug,"&as=").concat(this.as);this.$http({url:e,method:"GET",responseType:"blob"}).then((function(e){var t=window.URL.createObjectURL(new Blob([e])),a=document.createElement("a");a.href=t,a.setAttribute("download","tax.xlsx"),document.body.appendChild(a),a.click()}))}}},f=h,g=(a("2f1b"),a("2877")),v=a("6544"),y=a.n(v),_=a("8336"),b=a("b0af"),x=a("99d9"),w=a("ac7c"),k=a("62ad"),C=a("ce7e"),D=a("132d"),S=a("0fd9b"),E=a("b974"),O=a("2fa4"),P=a("3a2f"),R=Object(g["a"])(f,n,i,!1,null,"621bcc32",null);t["a"]=R.exports;y()(R,{VBtn:_["a"],VCard:b["a"],VCardActions:x["a"],VCheckbox:w["a"],VCol:k["a"],VDivider:C["a"],VIcon:D["a"],VRow:S["a"],VSelect:E["a"],VSpacer:O["a"],VTooltip:P["a"]})},"41a5":function(e,t,a){},4919:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vue-page-wrapper",{attrs:{title:e.htmlTitle,"bread-crumbs":e.breadCrumbItems}},[a("payroll-collection-detail",{attrs:{"request-for-admin":"",as:"approver"}})],1)},i=[],r=a("0549"),o=a("962a"),s={components:{PayrollCollectionDetail:o["a"],VuePageWrapper:r["default"]},data:function(){return{htmlTitle:"Payroll Detail | Payroll | User",breadCrumbItems:[{text:"Payroll Requests",to:{name:"user-payroll-approval-request",params:{slug:this.$route.params.slug}},disabled:!1},{text:"Payroll Detail",disabled:!0}]}}},l=s,c=(a("0548"),a("2877")),d=Object(c["a"])(l,n,i,!1,null,null,null);t["default"]=d.exports},5660:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-flex space-between"},[a("v-autocomplete",{key:e.componentKey,ref:"autoComplete",class:e.appliedClass,attrs:{id:e.id,items:e.itemsSorted,"search-input":e.search,loading:e.isLoading,multiple:e.multiple,label:e.label,error:e.errorMessages.length>0,"error-messages":e.errorMessages,disabled:e.disabled,readonly:e.readonly,"data-cy":"autocomplete-"+e.dataCyVariable,"prepend-inner-icon":e.prependInnerIcon,clearable:e.clearable&&!e.readonly,"hide-details":e.hideDetails,"item-text":e.itemText,"item-value":e.itemValue,"small-chips":e.multiple||e.chips,"deletable-chips":e.multiple,hint:e.hint,"persistent-hint":e.persistentHint,chips:e.chips,solo:e.solo,flat:e.flat,"cache-items":e.cacheItems,placeholder:e.placeholder,dense:e.dense,"hide-selected":"","hide-no-data":""},on:{"update:searchInput":function(t){e.search=t},"update:search-input":function(t){e.search=t},focus:e.populateOnFocus,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.searchText())},change:e.updateState,blur:function(t){return e.$emit("blur")}},scopedSlots:e._u([{key:"selection",fn:function(t){return[e._t("selection",(function(){return[e.itemText&&t.item?a("div",[e.multiple||e.chips?a("v-chip",{attrs:{close:(e.clearable||!e.clearable&&!e.multiple)&&!e.readonly,small:""},on:{"click:close":function(a){return e.remove(t.item)}}},[t.item[e.itemText]?a("div",[t.item[e.itemText].length>40?a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(n){var i=n.on;return[a("span",e._g({},i),[e._v(" "+e._s(e._f("truncate")(t.item[e.itemText],40)))])]}}],null,!0)},[a("span",[e._v(e._s(t.item[e.itemText]))])]):a("span",[e._v(e._s(t.item[e.itemText]))])],1):a("div",[a("span",[e._v(e._s(t.item))])])]):a("div",[t.item[e.itemText]?a("div",[t.item[e.itemText].length>40?a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(n){var i=n.on;return[a("span",e._g({},i),[e._v(" "+e._s(e._f("truncate")(t.item[e.itemText],40)))])]}}],null,!0)},[a("span",[e._v(e._s(t.item[e.itemText]))])]):a("span",[e._v(e._s(t.item[e.itemText]))])],1):a("div",[a("span",[e._v(e._s(t.item))])])])],1):e._e()]}),{props:t})]}},{key:"item",fn:function(t){return[a("v-list-item-content",[a("v-list-item-title",[e._t("item",(function(){return[e.itemText&&t.item?a("div",[t.item[e.itemText]?a("div",[t.item[e.itemText].length>40?a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(n){var i=n.on;return[a("span",e._g({},i),[e._v(" "+e._s(e._f("truncate")(t.item[e.itemText],40)))])]}}],null,!0)},[a("span",[e._v(e._s(t.item[e.itemText]))])]):a("span",[e._v(e._s(t.item[e.itemText]))])],1):a("div",[a("span",[e._v(e._s(t.item))])])]):e._e()]}),{props:t})],2)],1)]}},{key:"append-item",fn:function(){return[!e.fullyLoaded&&e.showMoreIcon?a("div",[a("v-list-item-content",{staticClass:"px-4 pointer primary--text font-weight-bold"},[a("v-list-item-title",{on:{click:function(t){return e.fetchData()}}},[e._v(" Load More Items ... ")])],1)],1):e._e()]},proxy:!0}],null,!0),model:{value:e.selectedData,callback:function(t){e.selectedData=t},expression:"selectedData"}}),e._t("default")],2)},i=[],r=a("2909"),o=a("5530"),s=a("53ca"),l=a("1da1"),c=(a("96cf"),a("a9e3"),a("ac1f"),a("841c"),a("7db0"),a("d81d"),a("159b"),a("4de4"),a("4e827"),a("2ca0"),a("d3b7"),a("c740"),a("a434"),a("3ca3"),a("ddb0"),a("2b3d"),a("caad"),a("2532"),a("63ea")),d=a.n(c),u={props:{value:{type:[Number,String,Array,Object],default:void 0},id:{type:String,default:""},dataCyVariable:{type:String,default:""},endpoint:{type:String,default:""},itemText:{type:String,required:!0},itemValue:{type:String,required:!0},params:{type:Object,required:!1,default:function(){return{}}},itemsToExclude:{type:[Array,Number],default:null},forceFetch:{type:Boolean,default:!1},staticItems:{type:Array,default:function(){return[]}},errorMessages:{type:[String,Array],default:function(){return[]}},label:{type:String,default:""},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},hint:{type:String,default:void 0},persistentHint:{type:Boolean,required:!1,default:!1},multiple:{type:Boolean,required:!1,default:!1},clearable:{type:Boolean,default:!0},hideDetails:{type:Boolean,default:!1},solo:{type:Boolean,default:!1},flat:{type:Boolean,default:!1},chips:{type:Boolean,default:!1},prependInnerIcon:{type:String,default:void 0},cacheItems:{type:Boolean,default:!1},appliedClass:{type:String,default:""},placeholder:{type:String,default:""},dense:{type:Boolean,default:!1}},data:function(){return{componentKey:0,items:[],selectedData:null,search:null,initialFetchStarted:!1,nextLimit:null,nextOffset:null,showMoreIcon:!1,fullyLoaded:!1,isLoading:!1}},computed:{itemsSorted:function(){return this.sortBySearch(this.items,this.search?this.search.toLowerCase():"")}},watch:{value:{handler:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var a,n,i,r,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=10;break}if(!this.forceFetch||this.initialFetchStarted){e.next=6;break}return this.initialFetchStarted=!0,e.next=5,this.fetchData();case 5:this.removeDuplicateItem();case 6:Array.isArray(t)?(i=[],"object"===Object(s["a"])(t[0])?(this.selectedData=t.map((function(e){return e[o.itemValue]})),t.forEach((function(e){var t=o.items.find((function(t){return t===e}));t||i.push(e)}))):(t.forEach((function(e){var t=o.items.find((function(t){return t[o.itemValue]===e}));t||i.push(e)})),this.selectedData=t),i.length>0&&(r=this.items).push.apply(r,i)):"object"===Object(s["a"])(t)?(this.selectedData=t[this.itemValue],a=this.items.find((function(e){return e[o.itemValue]===t})),a||this.items.push(t)):(this.selectedData=t,n=this.items.find((function(e){return e===t})),n||this.items.push(t)),this.updateData(this.selectedData),e.next=11;break;case 10:t||(this.selectedData=null);case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),immediate:!0},selectedData:function(e){this.updateData(e)},params:{handler:function(e,t){d()(e,t)||(this.fullyLoaded=!1,this.initialFetchStarted=!1,this.items=[],this.componentKey+=1)},deep:!0}},methods:{sortBySearch:function(e,t){var a=this.itemText,n=e.filter((function(e){return"object"===Object(s["a"])(e)}));return n.sort((function(e,n){return e[a].toLowerCase().startsWith(t)&&n[a].toLowerCase().startsWith(t)?e[a].toLowerCase().localeCompare(n[a].toLowerCase()):e[a].toLowerCase().startsWith(t)?-1:n[a].toLowerCase().startsWith(t)?1:e[a].toLowerCase().localeCompare(n[a].toLowerCase())}))},populateOnFocus:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.initialFetchStarted){t.next=2;break}return t.abrupt("return");case 2:return e.initialFetchStarted=!0,t.next=5,e.fetchData();case 5:e.removeDuplicateItem();case 6:case"end":return t.stop()}}),t)})))()},fetchData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.staticItems.length>0)){t.next=3;break}return e.items=e.staticItems,t.abrupt("return");case 3:return a=e.nextLimit,n=e.nextOffset,e.search&&(a=null,n=null),e.isLoading=!0,t.next=9,e.$http.get(e.endpoint,{params:Object(o["a"])(Object(o["a"])({},e.params),{},{search:e.search,limit:a,offset:n})}).then((function(t){var a;t.results||(t.results=t),t.next?(e.showMoreIcon=!0,e.extractLimitOffset(t.next)):(e.showMoreIcon=!1,e.search||(e.fullyLoaded=!0)),e.itemsToExclude&&(t.results=e.excludeRecord(t.results)),(a=e.items).push.apply(a,Object(r["a"])(t.results))})).finally((function(){e.isLoading=!1}));case 9:case"end":return t.stop()}}),t)})))()},removeDuplicateItem:function(){var e=this,t=this.items.indexOf(this.selectedData);if(t>=0){var a=this.items.findIndex((function(t){return t[e.itemValue]===e.selectedData}));a>=0&&(this.items.splice(t,1),this.componentKey+=1)}},updateData:function(e){var t=this,a=[];e instanceof Array?e.forEach((function(e){a.unshift(t.items.find((function(a){return a[t.itemValue]===e})))})):a=this.items.find((function(a){return a[t.itemValue]===e})),this.$emit("input",e),this.$emit("update:selectedFullData",a)},searchText:function(){0!==this.$refs.autoComplete.filteredItems.length||this.fullyLoaded||this.fetchData()},extractLimitOffset:function(e){var t=new URL(e);this.nextLimit=t.searchParams.get("limit"),this.nextOffset=t.searchParams.get("offset")},excludeRecord:function(e){var t=this,a=[];return"number"===typeof this.itemsToExclude?a.push(this.itemsToExclude):a=this.itemsToExclude,e.filter((function(e){if(e[t.itemValue])return!a.includes(e[t.itemValue])}))},remove:function(e){if(this.selectedData instanceof Object){var t=this.selectedData.indexOf(e[this.itemValue]);t>=0&&this.selectedData.splice(t,1)}else this.selectedData=null},updateState:function(){this.search="",this.nextLimit&&(this.showMoreIcon=!0)}}},p=u,m=a("2877"),h=a("6544"),f=a.n(h),g=a("c6a6"),v=a("cc20"),y=a("5d23"),_=a("3a2f"),b=Object(m["a"])(p,n,i,!1,null,null,null);t["default"]=b.exports;f()(b,{VAutocomplete:g["a"],VChip:v["a"],VListItemContent:y["a"],VListItemTitle:y["c"],VTooltip:_["a"]})},"582c":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{attrs:{height:"100%"}},[a("vue-card-title",{attrs:{title:e.title,subtitle:e.subTitle,icon:e.icon}}),a("v-divider"),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("div",[e._v("Total Requests")]),a("div",{staticClass:"text-h4 info--text pointer",on:{click:function(t){return e.$emit("redirectToDetail")}}},[e._v(" "+e._s(e.total)+" ")])]),e.details?a("v-col",[a("div",[e._v("Pending")]),a("div",{staticClass:"orange--text pointer",on:{click:function(t){return e.showUsers(e.details,"pending")}}},[e._v(" "+e._s(e.details.pending||0)+" ")]),a("v-progress-linear",{attrs:{height:"4",value:"15",color:"warning"}})],1):e._e(),e.details?a("v-col",[a("div",[e._v("Forwarded")]),a("div",{staticClass:"info--text pointer",on:{click:function(t){return e.showUsers(e.details,"forwarded")}}},[e._v(" "+e._s(e.details.forwarded||0)+" ")]),a("v-progress-linear",{attrs:{height:"4",value:"15",color:"info"}})],1):e._e(),e.details?a("v-col",[a("div",[e._v("Approved")]),a("div",{staticClass:"primary--text pointer",on:{click:function(t){return e.showUsers(e.details,"approved")}}},[e._v(" "+e._s(e.details.approved||0)+" ")]),a("v-progress-linear",{attrs:{height:"4",value:"15",color:"primary"}})],1):e._e(),e.details.confirmed?a("v-col",[a("div",[e._v("Confirmed")]),a("div",{staticClass:"success--text pointer",on:{click:function(t){return e.showUsers(e.details,"confirmed")}}},[e._v(" "+e._s(e.details.confirmed||0)+" ")]),a("v-progress-linear",{attrs:{height:"4",value:"15",color:"success"}})],1):e._e()],1)],1),a("user-list-dialog",{attrs:{users:e.employeeList,title:e.eventTitle},on:{close:function(t){e.showUsersList=!1,e.employeeList=[]}},model:{value:e.showUsersList,callback:function(t){e.showUsersList=t},expression:"showUsersList"}})],1)},i=[],r=(a("159b"),a("07ac"),a("9815")),o={components:{UserListDialog:r["default"]},props:{title:{type:String,default:""},subTitle:{type:String,default:""},icon:{type:String,default:"mdi-file-document-outline"},details:{type:Object,default:function(){return{pending:0,forwarded:0,approved:0,confirmed:0}}}},data:function(){return{showUsersList:!1,employeeList:[],eventTitle:""}},computed:{total:function(){var e=0;return Object.values(this.details).forEach((function(t){"number"===typeof t&&(e+=t)})),e}},methods:{showUsers:function(e,t){"pending"===t?(this.eventTitle=this.title+" (Pending Users)",this.employeeList=e.pending_users):"forwarded"===t?(this.eventTitle=this.title+" (Forwarded Users)",this.employeeList=e.forwarded_users):"approved"===t?(this.eventTitle=this.title+" (Approved Users)",this.employeeList=e.approved_users):"confirmed"===t&&(this.eventTitle=this.title+" (Confirmed Users)",this.employeeList=e.confirmed_users),this.showUsersList=!0}}},s=o,l=a("2877"),c=a("6544"),d=a.n(c),u=a("b0af"),p=a("99d9"),m=a("62ad"),h=a("ce7e"),f=a("8e36"),g=a("0fd9b"),v=Object(l["a"])(s,n,i,!1,null,null,null);t["a"]=v.exports;d()(v,{VCard:u["a"],VCardText:p["c"],VCol:m["a"],VDivider:h["a"],VProgressLinear:f["a"],VRow:g["a"]})},"6c6f":function(e,t,a){"use strict";a("d3b7");t["a"]={data:function(){return{deleteNotification:{dialog:!1,heading:"Confirm Delete",text:"Are you sure you want to delete ?"}}},methods:{deleteData:function(e,t){var a=this;return new Promise((function(n,i){!a.loading&&e&&(a.loading=!0,a.$http.delete(e,t||{}).then((function(e){a.crud.message&&setTimeout((function(){a.notifyUser(a.crud.message)}),1e3),n(e),a.loading=!1})).catch((function(e){a.pushErrors(e),a.notifyInvalidFormResponse(),i(e),a.loading=!1})).finally((function(){a.deleteNotification.dialog=!1})))}))}}}},7791:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-alert",{staticClass:"ma-2",attrs:{dense:"",text:"",dismissible:"",type:"info"}},[e._v(" "+e._s(e.generateMessage)+" ")]),a("v-progress-linear",{staticClass:"px-5",attrs:{value:e.payrollGenerationDetail.completed_ratio,height:"8"}})],1)},i=[],r=a("5530"),o=(a("b0c0"),a("99af"),a("cf45")),s=a("df29"),l=a("2f62"),c={props:{name:{type:String,default:""}},data:function(){return{payrollGenerationDetail:{generated_employee_count:0,total_employee_count:0,current_employee_name:""},generateMessage:"",showPayrollGeneratedDetail:!1}},mounted:function(){var e=this;setInterval((function(){return e.getPayrollGenerationDetails()}),Object(o["f"])("DEFAULT_TIMEOUT_FOR_EMPLOYEE_COUNT")||5e3)},methods:Object(r["a"])(Object(r["a"])({},Object(l["d"])({setProgressBar:"setProgressBar"})),{},{getPayrollGenerationDetails:function(){var e=this;this.showPayrollGeneratedDetail=localStorage.getItem(this.name),this.generateMessage="Processing ".concat(this.payrollGenerationDetail.generated_employee_count," employees out of\n         ").concat(this.payrollGenerationDetail.total_employee_count,". Currently processing employee:\n         ").concat(this.payrollGenerationDetail.current_employee_name,"."),this.showPayrollGeneratedDetail&&this.$http.get(s["a"].getPayrollGenerationDetail,{params:{from:this.name}}).then((function(t){e.setProgressBar({display:!1,color:""}),e.payrollGenerationDetail=t,e.payrollGenerationDetail.completed_ratio=e.payrollGenerationDetail.generated_employee_count/e.payrollGenerationDetail.total_employee_count*100,e.payrollGenerationDetail.generated_employee_count===e.payrollGenerationDetail.total_employee_count&&(e.showPayrollGeneratedDetail=!1,e.$emit("success"))}))}})},d=c,u=a("2877"),p=a("6544"),m=a.n(p),h=a("0798"),f=a("8e36"),g=Object(u["a"])(d,n,i,!1,null,null,null);t["a"]=g.exports;m()(g,{VAlert:h["a"],VProgressLinear:f["a"]})},"7e77":function(e,t,a){"use strict";a("99af");t["a"]={getEmploymentType:function(e){return"/org/".concat(e,"/employment/status/")},postEmploymentType:function(e){return"/org/".concat(e,"/employment/status/")},getEmploymentStatusDetail:function(e,t){return"/org/".concat(e,"/employment/status/").concat(t,"/")},updateEmploymentType:function(e,t){return"/org/".concat(e,"/employment/status/").concat(t,"/")},deleteEmploymentType:function(e,t){return"/org/".concat(e,"/employment/status/").concat(t,"/")},downloadSampleEmploymentType:function(e){return"/org/".concat(e,"/employment/status/import/sample")},importEmploymentType:function(e){return"/org/".concat(e,"/employment/status/import/")}}},"7f8f":function(e,t,a){"use strict";t["a"]={postHeading:"/payroll/headings/",getHeadingById:function(e){return"/payroll/headings/".concat(e,"/")},updateHeadingById:function(e){return"/payroll/headings/".concat(e,"/")},deleteHeadingById:function(e){return"/payroll/headings/".concat(e,"/")},getVariables:"/payroll/headings/get_variables/",getHeadingChoices:"/payroll/headings/choices/",switchHeadingOrder:"/payroll/headings/switch_order/",updateUserPackageHeading:function(e){return"/payroll/headings/".concat(e,"/bulk-apply-to-users")},archiveUnArchivePayrollHeading:function(e){return"/payroll/headings/".concat(e,"/archive")}}},"86eb":function(e,t,a){"use strict";a("99af");t["a"]={getJobTitle:function(e){return"/org/".concat(e,"/employment/job-title/")},postJobTitle:function(e){return"/org/".concat(e,"/employment/job-title/")},getJobTitleDetail:function(e,t){return"/org/".concat(e,"/employment/job-title/").concat(t,"/")},updateJobTitle:function(e,t){return"/org/".concat(e,"/employment/job-title/").concat(t,"/")},deleteJobTitle:function(e,t){return"/org/".concat(e,"/employment/job-title/").concat(t,"/")},importJobTitle:function(e){return"/org/".concat(e,"/employment/job-title/import/")},downloadSampleJobTitle:function(e){return"/org/".concat(e,"/employment/job-title/import/sample")}}},"962a":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card",{directives:[{name:"show",rawName:"v-show",value:!e.loading&&!e.loadingHeaderData,expression:"!loading && !loadingHeaderData"}]},[a("vue-card-title",{attrs:{title:"Payroll Details",subtitle:"The list below contain generated payroll of all employee.",icon:"mdi-file-document-outline"}},[a("template",{slot:"actions"},[a("export-report",{key:e.exportReportKey,attrs:{"export-url":e.exportUrl,filters:e.DataTableFilter}}),["Generated","Rejected"].includes(e.payroll.status)?a("vue-context-menu",{attrs:{"context-list":[{name:"Upload Data",icon:"mdi-cloud-upload",color:"primary"}]},on:{click0:function(t){e.showUploadForm=!0}}}):e._e(),a("v-btn",{attrs:{icon:""},on:{click:function(t){e.showFilters=!e.showFilters}}},[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-filter-variant")}})],1)],1)],2),a("v-divider"),a("v-card-text",{staticClass:"scrollbar-md py-0"},[a("heading-list-select-checkbox",{attrs:{"show-download":["Generated","Rejected"].includes(e.payroll.status),"all-heading-list":e.allHeadings,"selected-heading-list":e.headingTypeSelect,"header-data":e.selectedHeader,"personal-heading-list":e.primaryHeading},on:{"update:allHeadingList":function(t){e.allHeadings=t},"update:all-heading-list":function(t){e.allHeadings=t},"update:headerData":function(t){e.selectedHeader=t},"update:header-data":function(t){e.selectedHeader=t},"update:personalHeadingList":function(t){e.primaryHeading=t},"update:personal-heading-list":function(t){e.primaryHeading=t},download:function(t){return e.downloadSample(t)},save:function(t){return e.saveHeadingSetting(t)}}})],1),a("v-divider"),e.showFilters?a("v-slide-y-transition",[a("v-row",{staticClass:"px-3"},[a("v-col",{attrs:{md:"3",cols:"12"}},[a("v-slide-y-transition",[e.showFilters?a("div",[a("vue-search",{attrs:{search:e.search,label:"Search by Name or Username"},on:{"update:search":function(t){e.search=t}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1):e._e()])],1),a("v-col",{attrs:{md:"3",cols:"12"}},[a("vue-auto-complete",{attrs:{endpoint:e.branchesEndpoint,params:{is_archived:!1},label:"Select Branch","item-text":"name","item-value":"slug","hide-details":""},model:{value:e.searchFilters.branch,callback:function(t){e.$set(e.searchFilters,"branch",t)},expression:"searchFilters.branch"}})],1),a("v-col",{attrs:{md:"3",cols:"12"}},[a("vue-auto-complete",{attrs:{endpoint:e.divisionEndpoint,params:{is_archived:!1},label:"Select Division","item-text":"name","item-value":"slug","hide-details":""},model:{value:e.searchFilters.division,callback:function(t){e.$set(e.searchFilters,"division",t)},expression:"searchFilters.division"}})],1),a("v-col",{attrs:{md:"3",cols:"12"}},[a("vue-auto-complete",{attrs:{endpoint:e.jobTitleEndpoint,label:"Select Job Title","item-text":"title","item-value":"slug","hide-details":""},model:{value:e.searchFilters.job_title,callback:function(t){e.$set(e.searchFilters,"job_title",t)},expression:"searchFilters.job_title"}})],1),a("v-col",{attrs:{md:"3",cols:"12"}},[a("vue-auto-complete",{attrs:{endpoint:e.employeeLevelEndpoint,params:{is_archived:"false"},label:"Select Employment Level","item-text":"title","item-value":"slug","hide-details":""},model:{value:e.searchFilters.employment_level,callback:function(t){e.$set(e.searchFilters,"employment_level",t)},expression:"searchFilters.employment_level"}})],1),a("v-col",{attrs:{md:"3",cols:"12"}},[a("vue-auto-complete",{attrs:{endpoint:e.employeeTypeEndpoint,params:{is_archived:"false"},label:"Select Employment Type","item-text":"title","item-value":"slug","hide-details":""},model:{value:e.searchFilters.employment_type,callback:function(t){e.$set(e.searchFilters,"employment_type",t)},expression:"searchFilters.employment_type"}})],1),a("v-col",{attrs:{md:"3",cols:"12"}},[a("vue-auto-complete",{attrs:{endpoint:e.bankEndpoint,label:"Select Bank","item-text":"bank_name","item-value":"bank.slug","hide-details":""},model:{value:e.searchFilters.bank,callback:function(t){e.$set(e.searchFilters,"bank",t)},expression:"searchFilters.bank"}})],1)],1)],1):e._e(),e.showFilters?a("v-divider"):e._e(),a("v-card-text",[a("v-row",[e.nonFieldErrors.length>0?a("v-col",{attrs:{cols:"12"}},[a("non-field-form-errors",{attrs:{"non-field-errors":e.nonFieldErrors}})],1):e._e()],1),a("v-row",[a("v-col",{attrs:{md:"3"}},[a("div",[e._v("Title")]),a("div",[e._v(e._s(e.payroll.title))])]),a("v-col",{attrs:{md:"2"}},[a("div",[e._v("From Date:")]),a("div",[e._v(" "+e._s(e.humanizeDate(e.payroll.from_date))+" ")]),e.payroll.from_date&&"true"===e.showCalendarChoice&&"true"!==e.useNepaliDate?a("div",[e._v(" "+e._s(e.getNepaliDay(e.payroll.from_date))+" "+e._s(e.getNepaliMonth(e.payroll.from_date))+", "+e._s(e.getBSYear(e.payroll.from_date))+" ")]):e._e()]),a("v-col",{attrs:{md:"2"}},[a("div",[e._v("To Date:")]),a("div",[e._v(" "+e._s(e.humanizeDate(e.payroll.to_date))+" ")]),e.payroll.to_date&&"true"===e.showCalendarChoice&&"true"!==e.useNepaliDate?a("div",[e._v(" "+e._s(e.getNepaliDay(e.payroll.to_date))+" "+e._s(e.getNepaliMonth(e.payroll.to_date))+", "+e._s(e.getBSYear(e.payroll.to_date))+" ")]):e._e()]),a("v-col",{attrs:{md:"2"}},[a("div",[e._v("Generated Timestamp:")]),a("div",[e._v(" "+e._s(e.formatDate(e.payroll.timestamp))+" ")])]),a("v-col",{attrs:{md:"2"}},[a("div",[e._v("Status:")]),a("div",{class:e.colors[e.payroll.status]+"--text"},[e._v(" "+e._s(e.payroll.status)+" ")])]),"Approval Pending"===e.payroll.status?a("v-col",{attrs:{md:"2"}},[a("div",[e._v("Pending At:")]),a("vue-user",{attrs:{user:e.payroll.approval_pending}})],1):e._e()],1)],1),a("v-divider"),e.showPayrollGeneratedDetail?a("show-employee-count",{attrs:{name:e.localStorageName},on:{success:function(t){return e.changePayrollGeneratedDetail()}}}):e._e(),a("v-divider"),a("div",[e.loading?e._e():a("v-data-table",{staticClass:"fixedHeader-height",attrs:{items:e.fetchedResults,"sort-desc":e.pagination.descending,"sort-by":e.pagination.sortBy,page:e.pagination.page,"items-per-page":e.pagination.rowsPerPage,"footer-props":e.footerProps,"server-items-length":e.pagination.totalItems,"mobile-breakpoint":0,"must-sort":"","hide-default-header":""},on:{"update:sortDesc":function(t){return e.$set(e.pagination,"descending",t)},"update:sort-desc":function(t){return e.$set(e.pagination,"descending",t)},"update:sortBy":function(t){return e.$set(e.pagination,"sortBy",t)},"update:sort-by":function(t){return e.$set(e.pagination,"sortBy",t)},"update:page":function(t){return e.$set(e.pagination,"page",t)},"update:itemsPerPage":function(t){return e.$set(e.pagination,"rowsPerPage",t)},"update:items-per-page":function(t){return e.$set(e.pagination,"rowsPerPage",t)}},scopedSlots:e._u([{key:"item",fn:function(t){return[a("tr",{attrs:{disabled:e.lockRow&&!t.item.beingEdited}},[a("td",{staticClass:"text-center",class:e.$vuetify.breakpoint.xsOnly?"":"fixedColumn"},[a("v-responsive",{attrs:{width:["Generated","Rejected"].includes(e.payroll.status)?"280":"240"}},[a("v-row",{attrs:{"no-gutters":""}},[a("vue-user",{attrs:{user:t.item.employee}}),["Generated","Rejected"].includes(e.payroll.status)?a("vue-context-menu",{attrs:{"context-list":[{name:"View Employee Payslip",icon:"mdi-sack-percent",color:"blue",hide:t.item.beingEdited||e.requestForAdmin},{name:"View Employee Tax",icon:"mdi-alpha-t-circle-outline",color:"blue",hide:t.item.beingEdited||e.requestForAdmin},{name:"Add Special Note",icon:"mdi-pound-box-outline",color:"blue",hide:t.item.beingEdited},{name:"Edit Payroll",icon:"mdi-pencil-outline",color:"blue",hide:t.item.beingEdited},{name:"Save Payroll",icon:"mdi-content-save-outline",color:"blue",hide:!t.item.beingEdited},{name:"Cancel Payroll Edit",icon:"mdi-close",color:"red",hide:!t.item.beingEdited},{name:"Payroll Edit History",icon:"mdi-history",color:"blue",hide:t.item.beingEdited},{name:"Delete Payroll",icon:"mdi-trash-can-outline",color:"error",hide:t.item.beingEdited}],small:"","show-icons":""},on:{click0:function(a){e.selectedEmployee=t.item.employee.id,e.showPayslip=!0},click1:function(a){return e.viewEmployeeTax(t.item.employee,t.item.employee.employee_payroll_id)},click2:function(a){e.specialNote.show=!0,e.specialNote.text="",e.specialNote.individual=!0,e.specialNote.suppressIndividualNote=!1,e.specialNote.global=!1,e.selectedEmployee=t.item.employee.id},click3:function(a){return e.enableEdit(t.item)},click4:function(a){return e.editPayroll(t.item)},click5:function(t){return e.resetData()},click6:function(a){return e.viewHistory(t.item.employee,t.item.employee.employee_payroll_id)},click7:function(a){e.deleteRequestDetails.id=t.item.employee.employee_payroll_id,e.deleteRequestDetails.index=t.index,e.deleteNotification.dialog=!0}}}):a("vue-context-menu",{attrs:{"context-list":[{name:"View Employee Payslip",icon:"mdi-sack-percent",color:"blue",hide:t.item.beingEdited},{name:"View Employee Tax",icon:"mdi-alpha-t-circle-outline",color:"blue",hide:t.item.beingEdited},{name:"Payroll Edit History",icon:"mdi-history",color:"blue",hide:t.item.beingEdited},{name:"Delete Payroll",icon:"mdi-trash-can-outline",color:"error",hide:t.item.beingEdited||!["Confirmed","Approved"].includes(e.payroll.status)||!e.verifyPermission(e.allPermissions.DELETE_CONFIRMED_EMPLOYEE_PAYROLL_PERMISSION)}],small:"","show-icons":""},on:{click0:function(a){e.selectedEmployee=t.item.employee.id,e.showPayslip=!0},click1:function(a){return e.viewEmployeeTax(t.item.employee,t.item.employee.employee_payroll_id)},click2:function(a){return e.viewHistory(t.item.employee,t.item.employee.employee_payroll_id)},click3:function(a){e.deleteRequestDetails.id=t.item.employee.employee_payroll_id,e.deleteRequestDetails.index=t.index,e.deleteNotification.dialog=!0}}})],1)],1)],1),e._l(e.primaryHeading,(function(n,i){return[n.visible&&i>0?a("td",{key:"primary-header-"+i,staticClass:"text-center"},[e._v(" "+e._s(e.getHeaderValue(t,n))+" ")]):e._e()]})),e._l(e.headings,(function(n){return a("td",{key:n.value,staticClass:"text-center"},[-1===["Extra Addition","Extra Deduction"].indexOf(e.edited_general_headings[t.item.employee.id][n.value].type)&&-1!==Object.keys(t.item.heading_amounts).indexOf(n.value.toString())?a("div",[e.lockRow?a("v-responsive",{staticClass:"initialPosition",attrs:{width:"100"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.edited_general_headings[t.item.employee.id][n.value].currentValue,expression:"\n                      edited_general_headings[props.item.employee.id][\n                        heading.value\n                      ].currentValue\n                    "}],key:t.item.employee.id+"-"+n.value,class:e.edited_general_headings[t.item.employee.id][n.value].isEdited?"red--text ml-1":"ml-1",staticStyle:{width:"90px",border:"solid 1px lightblue",padding:"2px"},attrs:{type:"number"},domProps:{value:e.edited_general_headings[t.item.employee.id][n.value].currentValue},on:{input:function(a){a.target.composing||e.$set(e.edited_general_headings[t.item.employee.id][n.value],"currentValue",a.target.value)}}})]):a("span",{staticClass:"text-right",staticStyle:{width:"100px",border:"solid 1px lightblue",padding:"3px"},domProps:{textContent:e._s(e.formatCurrency(e.edited_general_headings[t.item.employee.id][n.value].currentValue))}})],1):a("span",{key:t.item.employee.id+"-"+n.value,staticClass:"text-right",domProps:{textContent:e._s(e.formatCurrency(e.getExtraHeadingValue(t.item.employee.id,n.value)))}})])})),a("td",{directives:[{name:"show",rawName:"v-show",value:e.lockRow,expression:"lockRow"}],staticClass:"text-center"},[a("v-icon",{attrs:{disabled:!t.item.beingEdited,color:t.item.beingEdited?"blue":"",left:""},domProps:{textContent:e._s("mdi-plus")},on:{click:function(e){t.item.dialog=!0}}}),a("v-dialog",{attrs:{width:"700"},on:{keydown:function(a){if(!a.type.indexOf("key")&&e._k(a.keyCode,"esc",27,a.key,["Esc","Escape"]))return null;t.item.dialog=!1}},model:{value:t.item.dialog,callback:function(a){e.$set(t.item,"dialog",a)},expression:"props.item.dialog"}},[a("extra-heading",{key:t.item.employee.id,attrs:{"package-id":t.item.employee.package,as:e.as},on:{done:function(e){t.item.dialog=!1}},model:{value:e.extra_headings[t.item.employee.id],callback:function(a){e.$set(e.extra_headings,t.item.employee.id,a)},expression:"extra_headings[props.item.employee.id]"}})],1)],1),a("td",{directives:[{name:"show",rawName:"v-show",value:e.lockRow,expression:"lockRow"}],staticClass:"text-center"},[a("v-textarea",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required|max:255",expression:"'required|max:255'"}],attrs:{rows:e.lockRow&&t.item.beingEdited?"3":"1"},model:{value:t.item.editedRemarks,callback:function(a){e.$set(t.item,"editedRemarks",a)},expression:"props.item.editedRemarks"}},"v-textarea",e.veeValidate("remarks["+t.item.employee.id+"]","Remarks *"),!1))],1),a("td",{staticClass:"text-center",staticStyle:{"white-space":"nowrap"}},[e._v(" "+e._s(t.item.user_note)+" ")])],2)]}}],null,!1,221564252)},[a("template",{slot:"header"},[a("thead",[a("tr",[e._l(e.primaryHeading,(function(t,n){return[t.visible?a("th",{key:n,class:[e.pagination.descending?"desc":"asc",t.value===e.pagination.sortBy?"active":"",e.$vuetify.breakpoint.xsOnly?"":"fixedHeader"],style:"min-width: "+t.width},[a("v-hover",{scopedSlots:e._u([{key:"default",fn:function(n){var i=n.hover;return a("v-row",{attrs:{align:"center",justify:"center"}},[a("div",{class:t.sorting?"ml-3":"",attrs:{align:t.align}},[a("span",{staticClass:"text-subtitle-2 text--darken-4"},[e._v(" "+e._s(t.text)+" ")])]),a("a",{style:"visibility: "+(i?"visible":"hidden")},[t.sortable?a("span",[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s(e.pagination.descending&&t.value===e.pagination.sortBy?"mdi-arrow-up":"mdi-arrow-down")},on:{click:function(a){return e.changeSort(t.value)}}})],1):e._e()])])}}],null,!0)})],1):e._e()]})),e._l(e.headings,(function(t,n){return a("th",{key:"heading-"+n,staticClass:"fixedHeader text-right"},[e._v(" "+e._s(t.text)+" ")])})),a("th",{directives:[{name:"show",rawName:"v-show",value:e.lockRow,expression:"lockRow"}],staticClass:"text-center fixedHeader"},[e._v(" Extra Headings Control ")]),a("th",{directives:[{name:"show",rawName:"v-show",value:e.lockRow,expression:"lockRow"}],staticClass:"text-center fixedHeader",staticStyle:{"min-width":"200px"}},[e._v(" Remarks ")]),a("th",{staticClass:"text-center fixedHeader"},[e._v("Special Note")])],2)])])],2)],1),a("v-divider"),e.showRemarks?a("div",[a("v-timeline",{staticClass:"scrollbar-sm",attrs:{dense:"",clipped:""}},[e.excel_error?a("v-timeline-item",{staticClass:"py-1",attrs:{color:"green",icon:"mdi-check",small:"",dense:""}},[a("v-row",{staticClass:"text-body-2",attrs:{align:"center",justify:"center"}},[a("v-col",{staticClass:"py-0",attrs:{cols:"2"}},[a("div",{domProps:{textContent:e._s(e.humanizeDate(e.excel_error.created_on))}}),a("div",{domProps:{textContent:e._s(e.humanizeTime(e.excel_error.created_on))}})]),a("v-col",{staticClass:"py-0 px-3",attrs:{cols:"3"}},[a("vue-user",{attrs:{user:e.excel_error.actor}})],1),a("v-col",{staticClass:"py-0",attrs:{cols:"7"}},[a("span",{staticClass:"danger--text mr-4"},[e._v(e._s(e.excel_error.remarks))]),a("v-btn",{attrs:{small:"",color:"danger",outlined:"",href:e.excel_error.error_file,target:"_blank"}},[e._v(" Download ")])],1)],1)],1):e._e(),e._l(e.adminRemarksList,(function(t,n){return a("v-timeline-item",{key:n,staticClass:"py-1",attrs:{color:"green",icon:"mdi-check",small:"",dense:""}},[a("v-row",{staticClass:"text-body-2",attrs:{align:"center"}},[a("v-col",{staticClass:"py-0",attrs:{cols:"2"}},[a("div",{domProps:{textContent:e._s(e.humanizeDate(t.created_at))}}),a("div",{domProps:{textContent:e._s(e.humanizeTime(t.created_at))}})]),a("v-col",{staticClass:"py-0",attrs:{cols:"3"}},[a("vue-user",{attrs:{user:t.actor}})],1),a("v-col",{staticClass:"py-0",attrs:{cols:"7"}},[a("span",[e._v(e._s(t.message))])])],1)],1)}))],2)],1):e._e(),e.showRemarks?a("v-divider"):e._e(),e.showAttachment?a("div",[a("ul",e._l(e.attachmentList,(function(t,n){return a("li",{key:n},[a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(n){var i=n.on;return[t.attachment?a("span",e._g({staticClass:"primary--text text-body-2 pointer",on:{click:function(a){return e.previewReport(t.attachment)}}},i),[e._v(e._s(t.attachment))]):e._e()]}}],null,!0)},[a("span",[e._v("Preview Report")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-icon",e._g({staticClass:"px-2",attrs:{small:"",color:"primary"},domProps:{textContent:e._s("mdi-information-outline")}},n))]}}],null,!0)},[a("span",[e._v(e._s((t.is_latest?"Active":"Previous Attachment")+" (Created at: "+e.$dayjs(t.created_at).format("YYYY-MM-DD HH:mm:ss")+")"))])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(n){var i=n.on;return[a("v-icon",e._g({attrs:{small:"",color:"primary"},domProps:{textContent:e._s("mdi-download-outline")},on:{click:function(a){return e.downloadAttachment(t.attachment)}}},i))]}}],null,!0)},[a("span",[e._v("Download Attachment")])])],1)})),0),0===e.attachmentList.length?a("div",{staticClass:"mx-2 blueGrey--text"},[e._v(" There are no attachments yet. ")]):e._e()]):e._e(),e.showAttachment?a("v-divider"):e._e(),e.lockRow?e._e():a("v-card-actions",[a("v-row",{attrs:{align:"center"}},[a("v-col",{staticClass:"py-0"},[a("v-row",{staticClass:"px-2",attrs:{align:"center"}},[a("v-btn",{staticClass:"my-1",attrs:{small:"",outlined:e.showRemarks,color:"primary"},on:{click:e.viewRemarks}},[e._v(" "+e._s(e.showRemarks?"Hide Remarks":"Show Remarks")+" ")]),!e.requestForAdmin&&(!e.payroll.approval_required||["Approved","Confirmed"].includes(e.payroll.status)&&e.payroll.approval_required)?a("v-btn",{staticClass:"my-1",attrs:{small:"",outlined:e.showAttachment,color:"primary"},on:{click:e.viewAttachment}},[e._v(" "+e._s(e.showAttachment?"Hide Attachment":"Show Attachment")+" ")]):e._e(),e.requestForAdmin||e.payroll.approval_required&&!["Approved","Confirmed"].includes(e.payroll.status)?e._e():a("v-btn",{staticClass:"my-1",attrs:{small:"",color:"primary"},on:{click:function(t){e.showAttachmentDialog=!0}}},[e._v(" Add Attachments ")]),e.requestForAdmin?a("v-textarea",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"pa-0 ma-0 px-2 mt-2",attrs:{rows:"1",dense:""},model:{value:e.adminRemarks,callback:function(t){e.adminRemarks=t},expression:"adminRemarks"}},"v-textarea",e.veeValidate("remarks","Remarks *"),!1)):e._e(),["Approved","Confirmed"].includes(e.payroll.status)||"hr"!==e.as?e._e():a("v-btn",{staticClass:"my-1",attrs:{small:"",color:"primary"},on:{click:function(t){e.addMoreEmployee=!0}}},[e._v("Add Employee")])],1)],1),a("v-col",{staticClass:"text-right"},[e.requestForAdmin?[a("v-btn",{staticClass:"my-1",attrs:{small:"",color:"danger",dark:""},on:{click:function(t){return e.confirmAdminAction("reject")}}},[e._v(" Deny ")]),a("v-btn",{staticClass:"my-1",attrs:{small:"",color:"primary"},on:{click:function(t){return e.confirmAdminAction("approve")}}},[e._v(" Approve ")])]:["Generated"===e.payroll.status?a("v-btn",{staticClass:"my-1",attrs:{small:"",color:"primary"},on:{click:function(t){e.specialNote.show=!0,e.specialNote.text="",e.specialNote.individual=!1,e.specialNote.suppressIndividualNote=!1,e.specialNote.global=!0}}},[e._v(" Add Special Note ")]):e._e(),"Approved"===e.payroll.status||!e.payroll.approval_required&&"Generated"===e.payroll.status?a("v-btn",{staticClass:"my-1",attrs:{small:"",color:"primary"},on:{click:function(t){e.confirmHrAction("confirm"),e.fetchDataTable}}},[e._v(" Confirm ")]):e._e(),["Generated","Rejected"].includes(e.payroll.status)&&e.payroll.approval_required?a("v-btn",{staticClass:"my-1",attrs:{small:"",color:"primary"},on:{click:e.confirmForwardAction}},[e._v(" Forward for Approval ")]):e._e(),["Generated","Rejected"].includes(e.payroll.status)?a("v-btn",{staticClass:"my-1",attrs:{small:"",color:"danger",outlined:""},on:{click:function(t){e.deleteNotification.dialog=!0}}},[e._v(" Delete ")]):e._e(),["Generated","Confirmed"].includes(e.payroll.status)&&e.verifyPermission([e.allPermissions.CAN_CREATE_UPDATE_PAYROLL_SETTINGS,e.allPermissions.CAN_VIEW_PAYROLL_REPORTS,e.allPermissions.CAN_GENERATE_PAYROLL])?a("v-btn",{staticClass:"my-1",attrs:{small:"",color:"primary",depressed:""},on:{click:function(t){return e.$router.push({name:"admin-slug-payroll-collection-details-pk-reports-ssf",params:{slug:e.organizationSlug,pk:e.$route.params.pk}})}}},[e._v(" SSF Report ")]):e._e(),["Generated","Confirmed"].includes(e.payroll.status)?a("v-btn",{staticClass:"my-1",attrs:{small:"",color:"primary",depressed:""},on:{click:function(t){return e.$router.push({name:"admin-slug-payroll-collection-details-pk-reports-disbursement-sheet",params:{slug:e.organizationSlug,pk:e.$route.params.pk}})}}},[e._v(" Disbursement Sheet ")]):e._e(),["Generated","Confirmed"].includes(e.payroll.status)?a("v-btn",{staticClass:"my-1",attrs:{small:"",color:"primary",depressed:""},on:{click:function(t){return e.$router.push({name:"admin-slug-payroll-collection-details-pk-reports-pf-report",params:{slug:e.organizationSlug,pk:e.$route.params.pk}})}}},[e._v(" PF Report ")]):e._e(),(e.payroll.status,e._e()),["Generated","Confirmed"].includes(e.payroll.status)?a("v-btn",{staticClass:"my-1",attrs:{small:"",color:"primary",depressed:""},on:{click:function(t){return e.$router.push({name:"admin-slug-payroll-collection-details-pk-reports-tax-report`",params:{slug:e.organizationSlug,pk:e.$route.params.pk}})}}},[e._v(" Tax Report ")]):e._e()]],2)],1)],1)],1),a("default-svg-loader",{directives:[{name:"show",rawName:"v-show",value:e.loading||e.loadingHeaderData,expression:"loading || loadingHeaderData"}]}),a("vue-dialog",{attrs:{notify:e.deleteNotification},on:{close:function(t){e.deleteNotification.dialog=!1},agree:e.deletePayroll},model:{value:e.deleteNotification.dialog,callback:function(t){e.$set(e.deleteNotification,"dialog",t)},expression:"deleteNotification.dialog"}}),a("vue-dialog",{attrs:{notify:e.adminActionNotification},on:{close:function(t){e.adminActionNotification.dialog=!1},agree:function(t){return e.actionByAdmin()}},model:{value:e.adminActionNotification.dialog,callback:function(t){e.$set(e.adminActionNotification,"dialog",t)},expression:"adminActionNotification.dialog"}}),a("vue-dialog",{attrs:{notify:e.hrActionNotification},on:{close:function(t){e.hrActionNotification.dialog=!1},agree:function(t){return e.actionByHr()}},model:{value:e.hrActionNotification.dialog,callback:function(t){e.$set(e.hrActionNotification,"dialog",t)},expression:"hrActionNotification.dialog"}}),a("vue-dialog",{attrs:{notify:e.forwardNotification},on:{close:function(t){e.forwardNotification.dialog=!1},agree:function(t){return e.actionByHr()}},model:{value:e.forwardNotification.dialog,callback:function(t){e.$set(e.forwardNotification,"dialog",t)},expression:"forwardNotification.dialog"}},[e._t("default",(function(){return[a("div",[a("v-alert",{staticClass:"text-body-2",attrs:{text:"",type:"warning",dense:"",icon:"mdi-alert-outline"}},[e._v(" Below are the list of employees on order to whom the payroll data will be forwarded for approval. Action can not be undone later.")]),e._l(e.payrollApprovalList,(function(t,n){return a("v-row",{key:n,attrs:{"no-gutters":"",align:"center"}},[a("v-col",{staticClass:"py-2 text-body-2",attrs:{md:"1",cols:"1"}},[e._v(" "+e._s(t.approval_level)+". ")]),a("v-col",{staticClass:"py-2"},[a("vue-user",{attrs:{user:t.user}})],1)],1)}))],2)]}))],2),a("v-dialog",{attrs:{fullscreen:""},model:{value:e.showPayslip,callback:function(t){e.showPayslip=t},expression:"showPayslip"}},[e.showPayslip?a("payslip-base",{attrs:{"payroll-id":e.$route.params.pk,"user-id":e.selectedEmployee,"selected-template":e.selectedTemplate,"organization-slug":e.organizationSlug,as:e.as},on:{close:function(t){e.showPayslip=!1}}}):e._e()],1),a("v-dialog",{attrs:{"max-width":"650"},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.specialNote.show=!1}},model:{value:e.specialNote.show,callback:function(t){e.$set(e.specialNote,"show",t)},expression:"specialNote.show"}},[a("v-card",[a("vue-card-title",{attrs:{title:"Add Special Note",subtitle:"",icon:"mdi-pound-box-outline",dark:""}}),a("v-card-text",[!e.specialNote.suppressIndividualNote&&e.specialNote.global?a("v-alert",{staticClass:"text-body-2 mt-3",attrs:{text:"",type:"warning",dense:"",icon:"mdi-alert-outline"}},[e._v(" This Special Note will be only applied to those employees whose special notes are not filled. ")]):e._e(),a("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required|max:600",expression:"'required|max:600'"}],staticClass:"pb-0 mb-0",attrs:{counter:600},model:{value:e.specialNote.text,callback:function(t){e.$set(e.specialNote,"text",t)},expression:"specialNote.text"}},"v-text-field",e.veeValidate("special_note","Special Note *"),!1)),e.specialNote.global?a("v-checkbox",{staticClass:"ma-0",attrs:{label:"Override individual notes assigned previously.","hide-details":""},model:{value:e.specialNote.suppressIndividualNote,callback:function(t){e.$set(e.specialNote,"suppressIndividualNote",t)},expression:"specialNote.suppressIndividualNote"}}):e._e()],1),a("v-divider"),a("v-card-actions",[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"text-right"},[a("v-btn",{attrs:{small:"",text:""},on:{click:function(t){e.specialNote.show=!1}}},[e._v("Close")]),a("v-btn",{attrs:{color:"primary",small:""},on:{click:e.insertSpecialNote}},[e._v("Save")])],1)],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"650"},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.showAttachmentDialog=!1}},model:{value:e.showAttachmentDialog,callback:function(t){e.showAttachmentDialog=t},expression:"showAttachmentDialog"}},[a("v-card",[a("vue-card-title",{attrs:{title:"Add Attachment",subtitle:"",icon:"mdi-paperclip",dark:""}}),a("v-card-text",[e.nonFieldErrors?a("non-field-form-errors",{attrs:{"non-field-errors":e.nonFieldErrors}}):e._e(),a("attachments",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"show-caption":!1},model:{value:e.attachment,callback:function(t){e.attachment=t},expression:"attachment"}},"attachments",e.veeValidate("attachment","Attachment *"),!1))],1),a("v-divider"),a("v-card-actions",[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"text-right"},[a("v-btn",{attrs:{small:"",text:""},on:{click:function(t){e.showAttachmentDialog=!1}}},[e._v("Close")]),a("v-btn",{attrs:{color:"primary",small:""},on:{click:e.addAttachment}},[e._v("Save")])],1)],1)],1)],1)],1),e.showHistory?a("v-bottom-sheet",{attrs:{persistent:""},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.showHistory=!1}},model:{value:e.showHistory,callback:function(t){e.showHistory=t},expression:"showHistory"}},[a("payroll-history",{attrs:{user:e.selectedEmployee,"employee-payroll-id":e.employeePayrollId,as:e.as,"organization-slug":e.organizationSlug},on:{close:function(t){e.showHistory=!1}}})],1):e._e(),e.showEmployeeTax?a("v-bottom-sheet",{attrs:{persistent:"",fullscreen:""},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.showEmployeeTax=!1}},model:{value:e.showEmployeeTax,callback:function(t){e.showEmployeeTax=t},expression:"showEmployeeTax"}},[a("tax-report-table",{attrs:{"read-only":"","user-id":e.selectedEmployee.id,"payroll-id":e.$route.params.pk,as:e.as,"organization-slug":e.organizationSlug},on:{close:function(t){e.showEmployeeTax=!1}}})],1):e._e(),e.addMoreEmployee?a("v-bottom-sheet",{attrs:{scrollable:"",persistent:""},on:{close:function(t){e.addMoreEmployee=!1}},model:{value:e.addMoreEmployee,callback:function(t){e.addMoreEmployee=t},expression:"addMoreEmployee"}},[a("add-employee",{attrs:{"payroll-data":e.payroll},on:{close:function(t){e.addMoreEmployee=!1,e.resetData()}}})],1):e._e(),e.showUploadForm?a("v-dialog",{attrs:{"max-width":"650"},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.showUploadForm=!1}},model:{value:e.showUploadForm,callback:function(t){e.showUploadForm=t},expression:"showUploadForm"}},[a("v-card",{attrs:{height:"100%"}},[a("vue-card-title",{attrs:{title:"Import Payroll Data",subtitle:"Import Payroll Data",icon:"mdi-download",closable:""},on:{close:function(t){e.showUploadForm=!1}}}),a("v-divider"),a("v-card-text",[a("file-upload",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],model:{value:e.importFile,callback:function(t){e.importFile=t},expression:"importFile"}},"file-upload",e.veeValidate("file","Upload File"),!1)),a("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required|max:600",expression:"'required|max:600'"}],staticClass:"pb-0 mb-0",attrs:{counter:600},model:{value:e.importRemarks,callback:function(t){e.importRemarks=t},expression:"importRemarks"}},"v-text-field",e.veeValidate("","Remarks *"),!1))],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{disabled:e.errors.any(),color:"primary"},on:{click:e.uploadData}},[e._v(" Import ")])],1)],1)],1):e._e()],1)},i=[],r=a("ade3"),o=a("2909"),s=a("5530"),l=a("1da1"),c=(a("96cf"),a("d3b7"),a("3ca3"),a("ddb0"),a("ac1f"),a("841c"),a("1276"),a("a9e3"),a("d81d"),a("a434"),a("99af"),a("159b"),a("4de4"),a("caad"),a("b64b"),a("7db0"),a("b0c0"),a("17cc")),d=a("5a0c"),u=a.n(d),p=a("3186"),m=a("2f62"),h=a("02cb"),f=a("7791"),g=a("c44a"),v=a("8da0"),y=a("edc0"),_=a("ab8a"),b=a("338b"),x=a("cf45"),w=a("2837"),k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("vue-card-title",{attrs:{title:"Extra Heading",subtitle:"Add extra heading.",icon:"mdi-file-document-outline",dark:""}}),a("v-divider",{staticClass:"py-2"}),a("v-card-text",[e._l(e.return_datas,(function(t,n){return a("v-row",{key:n,attrs:{align:"center","no-gutters":""}},[a("v-col",{attrs:{cols:"12",sm:"5"}},[a("v-autocomplete",{attrs:{items:e.extra_headings.remainingExtraHeading(t.extraHeading,e.selectedExtraHeadings),label:"Select Extra Heading","item-text":"label","return-object":"",autocomplete:""},model:{value:t.extraHeading,callback:function(a){e.$set(t,"extraHeading",a)},expression:"r_data.extraHeading"}})],1),a("v-col",{staticClass:"pl-2",attrs:{cols:"12",sm:"5"}},[a("v-text-field",{attrs:{"error-messages":t.error_message,readonly:!(t._extraHeading.is_editable||t.editable),type:"number",label:"Value"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"r_data.value"}})],1),a("v-col",{staticClass:"px-2",attrs:{cols:"12",sm:"2"}},[a("v-btn",{staticClass:"white--text",attrs:{color:"danger",small:""},on:{click:function(t){return e.removeRData(n)}}},[e._v(" Remove ")])],1)],1)})),0===e.return_datas.length?a("div",[e._v(" There is no extra heading available. ")]):e._e(),e.extra_headings.extra_headings.length!==e.selectedExtraHeadings.length?a("v-btn",{staticClass:"primary mx-1",attrs:{small:""},on:{click:e.addNewExtraHeading}},[a("v-icon",[e._v("mdi-plus")])],1):e._e(),e.isValid?a("v-btn",{attrs:{color:"primary mx-1",small:""},on:{click:e.emitValue}},[e._v(" Done ")]):e._e()],2)],1)},C=[],D=a("d4ec"),S=a("bee2"),E=(a("4d63"),a("25f0"),function(){function e(t){Object(D["a"])(this,e),this.extra_headings=t}return Object(S["a"])(e,[{key:"remainingExtraHeading",value:function(e,t){return this.extra_headings.filter((function(a){if(a===e)return!0;var n=t.find((function(e){return e.id===a.id}));return!n}))}}]),e}()),O=function(){function e(){Object(D["a"])(this,e),this._extraHeading={},this._value=null,this.is_valid=!1,this.error_message="",this.editable=!0}return Object(S["a"])(e,[{key:"extraHeading",get:function(){return this._extraHeading},set:function(e){this._extraHeading=e,this._onPropertyChanged("extraHeading",e)}},{key:"value",get:function(){return this._value},set:function(e){this._value=e,this._onPropertyChanged("value",e)}},{key:"_onPropertyChanged",value:function(e,t){var a={extraHeading:function(e){var t=JSON.parse(e.rules);this.value=t[0].rule,this.editable=t[0].rule_validator.editable},value:function(e){this.validate(e)}},n=a[e].bind(this);n(t)}},{key:"filterFloat",value:function(e){var t=new RegExp("^(\\-|\\+)?([0-9]+(\\.[0-9]+)?|Infinity)$","g");return t.test(e)?Number(e):NaN}},{key:"validate",value:function(e){var t=[];if(this.extraHeading.rules){var a=JSON.parse(this.extraHeading.rules),n=a[0].rule_validator;if(n&&n.numberOnly){var i=this.filterFloat(e);isNaN(i)&&t.push("Please provide float type input"),n.hasRange&&(n.min&&n.max?(i<this.filterFloat(n.min)||i>this.filterFloat(n.max))&&t.push("Number out of given range"):t.push("Please provide minimum and maximum range."))}}this.is_valid=!t.length>0,this.error_message=t.length>0?t[0]:""}}],[{key:"cleanRDatas",value:function(e){var t={};return e.forEach((function(e){e.extraHeading.id&&(t[e.extraHeading.heading]={value:e.value,package_heading_id:e.extraHeading.id})})),t}}]),e}(),P={props:{packageId:{type:null,default:null},as:{type:null,default:null},value:{type:null,default:null}},data:function(){return{return_datas:[],extra_headings:new E([])}},computed:{selectedExtraHeadings:function(){var e=this;return this.extra_headings.extra_headings.filter((function(t){var a=e.return_datas.find((function(e){return t.id===e.extraHeading.id}));return!!a}))},isValid:function(){var e=!0;return this.return_datas.forEach((function(t){t.is_valid||(e=!1)})),e}},watch:{value:function(e){var t=this.prepareValueProp(e);this.getExtraHeadings(t)}},created:function(){var e=this.prepareValueProp(this.value);this.getExtraHeadings(e)},methods:{prepareValueProp:function(e){return e?Object.keys(e).map((function(t){return{id:t,package_heading_id:e[t].package_heading_id,value:e[t].value}})):null},getExtraHeadings:function(e){var t=this;this.$http.get("/payroll/package-headings/choices/?package__organization__slug=".concat(this.getOrganizationSlug,"&package__id=").concat(this.packageId,"&extra_headings=True&as=").concat(this.as)).then((function(a){t.extra_headings=new E(a),e&&t.$set(t.$data,"return_datas",e.map((function(e){var a=new O;return a.extraHeading=t.extra_headings.extra_headings.find((function(t){return parseInt(t.id,10)===parseInt(e.package_heading_id,10)})),a.value=e.value,a})))}))},addNewExtraHeading:function(){this.return_datas.push(new O)},removeRData:function(e){this.return_datas.splice(e,1)},emitValue:function(){this.$emit("input",O.cleanRDatas(this.return_datas)),this.$emit("done")}}},R=P,T=a("2877"),A=a("6544"),V=a.n(A),$=a("c6a6"),N=a("8336"),j=a("b0af"),L=a("99d9"),I=a("62ad"),B=a("ce7e"),F=a("132d"),H=a("0fd9b"),U=a("8654"),z=Object(T["a"])(R,k,C,!1,null,null,null),G=z.exports;V()(z,{VAutocomplete:$["a"],VBtn:N["a"],VCard:j["a"],VCardText:L["c"],VCol:I["a"],VDivider:B["a"],VIcon:F["a"],VRow:H["a"],VTextField:U["a"]});var q=a("c197"),M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("vue-card-title",{attrs:{title:"View Edit History",subtitle:"View edit history",icon:"mdi-calendar-alert",dark:"",closable:""},on:{close:function(t){return e.$emit("close")}}}),e.loading?a("v-card-text",[a("default-svg-loader")],1):a("div",[a("v-divider"),a("v-row",{attrs:{"no-gutters":""}},[a("v-col",[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",{staticClass:"grey--text text-body-2",domProps:{textContent:e._s("Payroll modified of:")}}),a("v-list-item-subtitle",[a("vue-user",{attrs:{user:e.user}})],1)],1)],1)],1)],1),a("v-divider"),e.listOfHistory.length>0?a("div",{staticClass:"scrollbar-md"},[a("v-row",[a("v-col",{attrs:{cols:"3"}},[a("v-list-item",[a("v-list-item-content",{staticClass:"py-0"},[a("v-list-item-title",{staticClass:"mb-1 grey--text text-body-2",domProps:{textContent:e._s("Payroll modified by:")}}),a("v-list-item-subtitle",e._l(e.listOfHistory,(function(t,n){return a("div",{key:n,class:e.selectedIndex===n?"very-light-blue":"",on:{click:function(t){return e.loadSelectedHistory(n)}}},[a("v-row",{staticClass:"my-1 ml-1 pointer",attrs:{align:"center"}},[a("v-avatar",{attrs:{size:35}},[a("v-img",{attrs:{src:t.created_by.profile_picture_thumb||t.created_by.profile_picture}})],1),a("v-col",{staticClass:"text-left",class:e.selectedIndex===n?"light-blue--text":""},[a("div",{staticClass:"text-subtitle-2"},[e._v(" "+e._s(e._f("truncate")(t.created_by.full_name,20))+" ")]),a("div",{staticClass:"text-caption grey--text"},[e._v(" "+e._s(t.created_by.job_title)+" ")])])],1),a("v-row",{staticClass:"my-1 ml-1"},[a("div",{staticClass:"text-caption"},[e._v(" Modified Date: "+e._s(e._f("dayjs")(t.created_at,"YYYY-MM-DD"))+" "+e._s(e._f("dayjs")(t.created_at,"hh:mm A"))+" ")])]),a("v-divider")],1)})),0)],1)],1)],1),a("v-divider",{attrs:{vertical:""}}),a("v-col",{attrs:{cols:"6"}},[e.fetchedResults.length>0?a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.fetchedResults,loading:e.loading,"sort-desc":e.pagination.descending,"sort-by":e.pagination.sortBy,page:e.pagination.page,"items-per-page":e.pagination.rowsPerPage,"footer-props":e.footerProps,"server-items-length":e.pagination.totalItems,dense:"","hide-default-footer":"","must-sort":""},on:{"update:sortDesc":function(t){return e.$set(e.pagination,"descending",t)},"update:sort-desc":function(t){return e.$set(e.pagination,"descending",t)},"update:sortBy":function(t){return e.$set(e.pagination,"sortBy",t)},"update:sort-by":function(t){return e.$set(e.pagination,"sortBy",t)},"update:page":function(t){return e.$set(e.pagination,"page",t)},"update:itemsPerPage":function(t){return e.$set(e.pagination,"rowsPerPage",t)},"update:items-per-page":function(t){return e.$set(e.pagination,"rowsPerPage",t)}},scopedSlots:e._u([{key:"item",fn:function(t){return[a("tr",[a("td",{class:{"blue--text":t.item.is_edited,"danger--text":t.item.old_amount!==t.item.new_amount&&!t.item.is_edited}},[e._v(" "+e._s(t.item.package)+" ")]),a("td",{staticClass:"text-right",class:{"blue--text":t.item.is_edited,"danger--text":t.item.old_amount!==t.item.new_amount&&!t.item.is_edited}},[e._v(" "+e._s(t.item.old_amount)+" ")]),a("td",{staticClass:"text-right",class:{"blue--text":t.item.is_edited,"danger--text":t.item.old_amount!==t.item.new_amount&&!t.item.is_edited}},[e._v(" "+e._s(t.item.new_amount)+" ")])])]}}],null,!1,731890219)},[a("template",{slot:"no-data"},[a("data-table-no-data",{attrs:{loading:e.loading}})],1)],2):e._e(),e.fetchedResults.length>0?a("v-divider"):e._e(),a("div",{staticClass:"grey--text text-body-2 mt-3"},[e._v("Remarks for edit:")]),a("div",{staticClass:"blue-grey--text text-body-2"},[e._v(e._s(e.selectedRemarks))])],1)],1),a("v-divider"),a("v-row",[a("v-col",{staticClass:"py-0 text-right"},[a("v-btn",{attrs:{text:""},on:{click:function(t){return e.$emit("close")}}},[e._v(" Cancel ")])],1)],1)],1):a("div",[a("vue-no-data")],1)],1)],1)},Y=[],J=a("a51f"),W=a("e585"),K={components:{VueNoData:W["default"],DataTableNoData:J["default"],VueUser:h["default"],DefaultSvgLoader:q["default"]},mixins:[c["a"]],props:{user:{type:Object,required:!0},employeePayrollId:{type:[String,Number],required:!0},as:{type:String,default:""},organizationSlug:{type:String,default:""}},data:function(){return{headers:[{text:"Particulars",align:"left",sortable:!1},{text:"Previous Amount",align:"right",sortable:!1},{text:"New Amount",align:"right",sortable:!1}],loading:!1,listOfHistory:[],selectedRemarks:"",selectedIndex:0}},computed:{},created:function(){this.loadDataTableChange()},methods:{fetchDataTable:function(){var e=this;this.loading=!0,this.$http.get(v["a"].getUserPayrollHistory(this.employeePayrollId)+"?employee__detail__organization__slug=".concat(this.organizationSlug,"&as=").concat(this.as)).then((function(t){e.listOfHistory=t.results,t.results.length>0&&(e.fetchedResults=t.results[0].edited_packages,e.selectedRemarks=t.results[0].remarks),e.pagination.totalItems=t.count,e.triggerDataTable=!0})).finally((function(){return e.loading=!1}))},loadSelectedHistory:function(e){this.selectedIndex=e,this.fetchedResults=this.listOfHistory[e].edited_packages,this.selectedRemarks=this.listOfHistory[e].remarks}}},Q=K,X=a("8212"),Z=a("8fea"),ee=a("adda"),te=a("da13"),ae=a("5d23"),ne=Object(T["a"])(Q,M,Y,!1,null,null,null),ie=ne.exports;V()(ne,{VAvatar:X["a"],VBtn:N["a"],VCard:j["a"],VCardText:L["c"],VCol:I["a"],VDataTable:Z["a"],VDivider:B["a"],VImg:ee["a"],VListItem:te["a"],VListItemContent:ae["a"],VListItemSubtitle:ae["b"],VListItemTitle:ae["c"],VRow:H["a"]});var re=a("e4bf"),oe=a("a173"),se=a("a79c"),le=a("03df"),ce=a("36e4"),de=a("f82f"),ue=a("f7ed"),pe=a("5660"),me=a("86eb"),he=a("1229"),fe=a("2c2a"),ge=a("7e77"),ve=a("e59e"),ye=a("d986"),_e=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("vue-card-title",{attrs:{title:"Add Employees",subtitle:"Here you can add employee in payroll.",icon:"mdi-cash",closable:""},on:{close:function(t){return e.$emit("close")}}}),a("v-divider"),a("v-card-text",[a("v-row",{staticClass:"mx-4 my-0 py-0",attrs:{align:"center"}},[a("v-col",{staticClass:"pb-0",attrs:{md:"3"}},[a("v-switch",{attrs:{label:"Exclude Non Eligible Employee"},on:{change:function(t){return e.error.clear(t)}},model:{value:e.exclude_not_eligible,callback:function(t){e.exclude_not_eligible=t},expression:"exclude_not_eligible"}})],1),a("v-col",{staticClass:"pb-0",attrs:{md:"2"}},[a("v-switch",{attrs:{label:"Past Employee"},model:{value:e.isPastEmployee,callback:function(t){e.isPastEmployee=t},expression:"isPastEmployee"}})],1),a("v-col",{staticClass:"pb-0",attrs:{md:"2"}},[a("v-switch",{attrs:{label:"Search by username"},model:{value:e.searchByUsername,callback:function(t){e.searchByUsername=t},expression:"searchByUsername"}})],1),a("v-col",{staticClass:"pb-0 py-0",attrs:{md:"4"}},[a("VueDynamicUserFieldAutoComplete",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{params:{user_status:e.isPastEmployee?"past":"current",organization:e.getOrganizationSlug},"items-to-exclude":e.employees_filter.id__excludes,multiple:"",field:e.dynamicAutoCompleteField},model:{value:e.employees_filter.id__in,callback:function(t){e.$set(e.employees_filter,"id__in",t)},expression:"employees_filter.id__in"}},"VueDynamicUserFieldAutoComplete",e.veeValidate("employees_filter","Include Selected Employee"),!1))],1),a("v-col",{staticClass:"py-0",attrs:{md:"4"}},[a("VueDynamicUserFieldAutoComplete",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{params:{user_status:e.isPastEmployee?"past":"current",organization:e.getOrganizationSlug},"items-to-exclude":e.employees_filter.id__in,field:e.dynamicAutoCompleteField,multiple:""},model:{value:e.employees_filter.id__excludes,callback:function(t){e.$set(e.employees_filter,"id__excludes",t)},expression:"employees_filter.id__excludes"}},"VueDynamicUserFieldAutoComplete",e.veeValidate("employees_filter","Exclude Selected Employee"),!1))],1),a("v-col",{staticClass:"mb-5",attrs:{md:"4"}},[a("vue-auto-complete",{attrs:{endpoint:e.branchesEndpoint,params:{is_archived:!1},multiple:!0,label:"Select Branch","prepend-inner-icon":"mdi-account-multiple-outline","item-text":"name","hide-details":"","item-value":"id"},model:{value:e.employees_filter.detail__branch__in,callback:function(t){e.$set(e.employees_filter,"detail__branch__in",t)},expression:"employees_filter.detail__branch__in"}})],1),a("v-col",{staticClass:"mb-5",attrs:{md:"4"}},[a("vue-auto-complete",{attrs:{endpoint:e.divisionEndpoint,params:{is_archived:!1},multiple:!0,label:"Select Division","prepend-inner-icon":"mdi-account-multiple-outline","item-text":"name","hide-details":"","item-value":"id"},model:{value:e.employees_filter.detail__division__in,callback:function(t){e.$set(e.employees_filter,"detail__division__in",t)},expression:"employees_filter.detail__division__in"}})],1)],1),e.loading?a("v-divider"):e._e(),e.loading?a("default-svg-loader",{attrs:{message:"Validating data before payroll generation..."}}):e._e(),e.error.get("non_field_errors")?a("v-divider"):e._e(),e._l(e.error.get("non_field_errors"),(function(t,n){return a("div",{key:n},[a("v-alert",{staticClass:"ma-2 text-body-1",attrs:{dense:"",text:"",dismissible:"",type:"error"}},[e._v(" "+e._s(t)+" ")])],1)})),e.preparationDataDetails?a("v-divider"):e._e(),a("v-row",[!e.preparationDataDetails||0===e.preparationDataDetails.adjustment_requests_summary.pending&&0===e.preparationDataDetails.adjustment_requests_summary.forwarded?e._e():a("v-col",{attrs:{cols:"12",md:"4",sm:"12"}},[a("requests",{attrs:{details:e.preparationDataDetails.adjustment_requests_summary,title:"Attendance Entries To Verify","sub-title":""},on:{redirectToDetail:function(t){return e.redirectToDetail("admin-slug-attendance-requests-adjustments",5)}}})],1),!e.preparationDataDetails||0===e.preparationDataDetails.leave_requests_summary.pending&&0===e.preparationDataDetails.leave_requests_summary.forwarded?e._e():a("v-col",{attrs:{cols:"12",md:"4"}},[a("requests",{attrs:{details:e.preparationDataDetails.leave_requests_summary,title:"Leave Requests To Verify","sub-title":""},on:{redirectToDetail:function(t){return e.redirectToDetail("admin-slug-leave-employees-request",4)}}})],1),!e.preparationDataDetails||0===e.preparationDataDetails.attendance_request.pending&&0===e.preparationDataDetails.attendance_request.forwarded?e._e():a("v-col",{attrs:{cols:"12",md:"4",sm:"12"}},[a("requests",{attrs:{details:e.preparationDataDetails.attendance_request,title:"Web Attendance To Verify","sub-title":""},on:{redirectToDetail:function(t){return e.redirectToDetail("admin-slug-attendance-requests-web-attendance",4)}}})],1),e.preparationDataDetails&&e.preparationDataDetails.employment_review.stat.length>0?a("v-col",{attrs:{cols:"12",md:"4",sm:"12"}},[a("employee-review",{attrs:{details:e.preparationDataDetails.employment_review}})],1):e._e(),e.preparationDataDetails&&e.preparationDataDetails.overtime_request&&(0!==e.preparationDataDetails.overtime_request.pending||0!==e.preparationDataDetails.overtime_request.forwarded||0!==e.preparationDataDetails.overtime_request.approved)?a("v-col",{attrs:{cols:"12",md:"4",sm:"12"}},[a("requests",{attrs:{details:e.preparationDataDetails.overtime_request,title:"Overtime Requests To Verify","sub-title":""},on:{redirectToDetail:function(t){return e.redirectToDetail("admin-slug-attendance-requests-overtime-claim",4)}}})],1):e._e()],1),e.errorLogId||e.notEligibleEmployeeList.length>0?a("v-divider"):e._e(),e.errorLogId||e.notEligibleEmployeeList.length>0?a("payroll-error-table",{attrs:{"log-id":e.errorLogId,"error-list":e.notEligibleEmployeeList}}):e._e(),e.successMessage?a("v-alert",{staticClass:"ma-2",attrs:{dense:"",text:"",dismissible:"",type:"info"}},[e._v(" "+e._s(e.successMessage)+" ")]):e._e(),e.showPayrollGeneratedDetail?a("show-employee-count",{attrs:{name:e.localStorageName},on:{success:function(t){return e.changePayrollGeneratedDetail()}}}):e._e(),a("v-divider")],2),e.loading?e._e():a("v-card-actions",[a("v-spacer"),e.errorLogId||e.notEligibleEmployeeList.length>0?a("v-btn",{attrs:{color:"danger white--text",depressed:"",small:""},on:{click:function(t){return e.generateExcel("errTable","PayrollError","ms-excel")}}},[e._v(" Download error ")]):e._e(),e.preparationDataDetails||e.errorLogId||e.notEligibleEmployeeList.length>0?a("v-btn",{attrs:{color:"orange white--text",depressed:"",small:""},on:{click:function(t){e.confirmGenerate.dialog=!0}}},[e._v(" Exclude Non Eligible and Generate ")]):e._e(),a("v-btn",{attrs:{color:"primary",depressed:"",small:"",disabled:e.showPayrollGeneratedDetail},on:{click:function(t){e.pageLoaded=!0,e.generatePayroll()}}},[e._v(" Add Employee ")])],1),a("vue-dialog",{attrs:{notify:e.confirmGenerate},on:{agree:function(t){return e.generatePayroll(!0)},close:function(t){e.confirmGenerate.dialog=!1}}})],1)},be=[],xe=(a("07ac"),a("582c")),we=a("2eda"),ke=a("df29"),Ce=a("21d9"),De=a("7bb1"),Se=a("edc2"),Ee=a("9dc8");De["b"].Validator.extend("mustBePastDate",{validate:function(e){var t=new Date(e.start_date);t.setHours(0,0,0,0);var a=new Date(e.end_date);a.setHours(0,0,0,0);var n=new Date;return n.setHours(0,0,0,0),t<n&&t<a},getMessage:function(){return"Start Date must be past date and less than end date."}});var Oe={components:{VueDynamicUserFieldAutoComplete:Se["a"],DefaultSvgLoader:q["default"],VueAutoComplete:pe["default"],PayrollErrorTable:Ce["a"],Requests:xe["a"],EmployeeReview:we["a"],ShowEmployeeCount:f["a"]},mixins:[g["a"],Ee["a"]],props:{payrollData:{type:Object},as:{type:String,default:""}},data:function(){return{title:"",dateFilter:{},cutoff_date:null,isPastEmployee:!1,searchByUsername:!1,exclude_not_eligible:!1,employees_filter:{},error:new w["c"],preparationDataDetails:null,pageLoaded:!1,loading:!1,successMessage:"",errorLogId:"",notEligibleEmployeeList:[],extraHeadings:[],statDetails:null,localStorageName:"showPayrollGeneratedDetail1",divisionEndpoint:he["a"].getDivision(this.$route.params.slug),showPayrollGeneratedDetail:localStorage.getItem("showPayrollGeneratedDetail1"),confirmGenerate:{dialog:!1,heading:"Exclude Non Eligible and Generate Payroll",subheading:"Confirm your action.",text:"Are you sure you want exclude all non eligible employee and generate payroll?"},branchesEndpoint:""}},computed:{clean_employee_filter:function(){var e={};for(var t in this.employees_filter)this.employees_filter[t]&&(e[t]=this.employees_filter[t]);return e},dynamicAutoCompleteField:function(){return this.searchByUsername?"username":"full_name"}},watch:{dateFilter:function(){this.clearErrors(),this.getStats()},getOrganizationSlug:{handler:function(e){this.$set(this.employees_filter,"detail__organization__slug",e)},immediate:!0},$route:function(e,t){var a=this;e!==t&&(this.successMessage="",this.errorLogId="",this.$nextTick((function(){a.errorLogId=a.$route.query.log_id})))}},created:function(){this.errorLogId=this.$route.query.log_id,this.branchesEndpoint=ve["a"].getBranch(this.getOrganizationSlug)},methods:{getStats:function(){var e=this;this.$http.get(ke["a"].getPayrollStat+"?as=hr&organization__slug=".concat(this.getOrganizationSlug,"&from_date=").concat(this.dateFilter.start_date,"&to_date=").concat(this.dateFilter.end_date)).then((function(t){e.statDetails=t}))},generatePayroll:function(){var e=arguments,t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=e.length>0&&void 0!==e[0]&&e[0],t.pageLoaded){a.next=3;break}return a.abrupt("return");case 3:return t.error.setErrors({}),t.clearErrors(),t.preparationDataDetails=0,t.errorLogId="",t.notEligibleEmployeeList=[],t.setSnackBar({display:!1}),a.next=11,t.validateAllFields();case 11:if(!a.sent){a.next=17;break}if(!t.loading){a.next=14;break}return a.abrupt("return");case 14:t.loading=!0,i={title:t.payrollData.tilte,from_date:t.payrollData.start_date,to_date:t.payrollData.end_date,exclude_not_eligible:t.exclude_not_eligible||n,employees_filter:t.clean_employee_filter,organization_slug:t.$route.params.slug,cutoff_date:t.payrollData.cutoff_date||null,initial_extra_headings:t.payrollData.extraHeadings,include_past_employee:t.isPastEmployee},t.loading&&t.$http.post(ke["a"].addEmployeeInPayroll(t.payrollData.id)+"?as=hr&organization__slug="+t.getOrganizationSlug,i).then((function(e){e.message&&(localStorage.setItem(t.localStorageName,"true"),t.showPayrollGeneratedDetail=!0,t.successMessage="Payroll generation is being processed. You will be notified through notification once payroll generation is completed.",t.notifyUser(t.successMessage))})).catch((function(e){if(t.pushErrors(e),t.notEligibleEmployeeList=e.response.data.not_eligibles||[],t.preparationDataDetails=e.response.data.preparation_sheet||0,0!==t.preparationDataDetails)t.setSnackBar({text:"Please resolve pending request in order to generate payroll.",color:"red"});else{var a=Object.values(e.response.data);"string"===typeof a[0]?t.notifyInvalidFormResponse(a[0]):t.notifyInvalidFormResponse(),t.error.setErrors(e.response.data)}})).finally((function(){t.loading=!1,n&&(t.confirmGenerate.dialog=!1)}));case 17:case"end":return a.stop()}}),a)})))()},clearErrors:function(){this.errorLogId&&this.$router.push(this.$route.path)},redirectToDetail:function(e,t){var a=this.$router.resolve({name:e,params:{slug:this.getOrganizationSlug},query:{start_date:this.dateFilter.start_date,end_date:this.dateFilter.end_date,active:t}});window.open(a.href,"_blank")},changePayrollGeneratedDetail:function(){this.showPayrollGeneratedDetail=!1,this.successMessage="Payroll generation is completed. Please view the payroll collection.",localStorage.removeItem(this.localStorageName)}}},Pe=Oe,Re=a("0798"),Te=a("2fa4"),Ae=a("b73d"),Ve=Object(T["a"])(Pe,_e,be,!1,null,null,null),$e=Ve.exports;V()(Ve,{VAlert:Re["a"],VBtn:N["a"],VCard:j["a"],VCardActions:L["a"],VCardText:L["c"],VCol:I["a"],VDivider:B["a"],VRow:H["a"],VSpacer:Te["a"],VSwitch:Ae["a"]});var Ne={components:{AddEmployee:$e,VueAutoComplete:pe["default"],HeadingListSelectCheckbox:ue["a"],TaxReportTable:ce["a"],FileUpload:de["a"],ExportReport:le["a"],Attachments:oe["a"],VueContextMenu:re["default"],PayrollHistory:ie,DefaultSvgLoader:q["default"],ExtraHeading:G,VueUser:h["default"],ShowEmployeeCount:f["a"],NonFieldFormErrors:_["default"],PayslipBase:function(){return a.e("chunk-f3b87ecc").then(a.bind(null,"a1b4"))}},mixins:[c["a"],g["a"],b["a"]],props:{requestForAdmin:{type:Boolean,default:!1},as:{type:String,default:""}},data:function(){return{primaryHeading:[],excel_error:{file:null,created_on:null,actor:null,remarks:null},edited_general_headings:new w["a"],headings:[],extraHeadingsData:[],payroll:{},extra_headings:{},loading:!1,loadingHeaderData:!0,showPayslip:!1,showHistory:!1,showEmployeeTax:!1,selectedEmployee:"",employeePayrollId:"",colors:{Approved:"green",Confirmed:"cyan","Approval Pending":"purple",Rejected:"red",Generated:"orange"},deleteNotification:{dialog:!1,heading:"Confirm Delete",text:"Are you sure you want to delete this payroll?"},adminRemarks:"",adminActionNotification:{dialog:!1,heading:"Confirm Your Action."},hrActionNotification:{dialog:!1,heading:"Confirm Your Action."},forwardNotification:{dialog:!1,heading:"Confirm Your Action."},specialNote:{text:"",individual:!1,global:!1,suppressIndividualNote:!1,show:!1},hrAction:"",adminAction:"",adminRemarksList:[],attachmentList:[],exportUrl:"",exportReportKey:0,lockRow:!1,showFilters:!1,search:"",username:"",deleteRequestDetails:{},showRemarks:!1,showAttachment:!1,showAttachmentDialog:!1,attachment:null,addMoreEmployee:!1,payrollApprovalList:[],selectedTemplate:"",showUploadForm:!1,importFile:null,importRemarks:"",showHeadings:!1,selectedHeader:[],headingTypeSelect:[],allHeadings:[],localStorageName:"showPayrollGeneratedDetail2",showPayrollGeneratedDetail:localStorage.getItem("showPayrollGeneratedDetail2"),jobTitleEndpoint:"",divisionEndpoint:"",employeeLevelEndpoint:"",employeeTypeEndpoint:"",branchesEndpoint:"",bankEndpoint:"",searchFilters:{job_title:"",employment_level:"",employment_type:"",division:"",branch:"",bank:""},showCalendarChoice:Object(x["f"])("VUE_APP_SHOW_CALENDAR_CHOICE"),useNepaliDate:localStorage.useNepaliDate}},computed:{DataTableFilter:function(){return{full_name:this.search,username:this.username,organization__slug:this.organizationSlug,as:this.as,branch:this.searchFilters.branch||"",division:this.searchFilters.division||"",job_title:this.searchFilters.job_title||"",employment_level:this.searchFilters.employment_level||"",employment_type:this.searchFilters.employment_type||"",bank:this.searchFilters.bank||""}},organizationSlug:function(){return this.requestForAdmin?this.$route.query.org_slug:this.getOrganizationSlug}},watch:{"$route.params.id":{handler:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.exportReportKey+=1,e.next=3,this.getHeadingSetting();case 3:this.loadDataTableChange();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),deep:!0},allHeadings:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getHeadingSetting();case 2:e.loadDataTableChange();case 3:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.initializeDynamicUrls(),e.exportUrl=p["a"].downloadsPayroll(e.$route.params.pk);case 2:case"end":return t.stop()}}),t)})))()},methods:Object(s["a"])(Object(s["a"])({},Object(m["d"])({setSnackBar:"common/setSnackBar"})),{},{formatCurrency:x["d"],getNepaliDay:function(e){return this.getBSDate(e)},getNepaliMonth:function(e){var t=["Baishakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Poush","Magh","Falgun","Chaitra"];return t[this.getBSMonth(e)-1]},humanizeDate:function(e){if("true"!==this.useNepaliDate)return this.$dayjs(e).format("MMM-D, YYYY");if(e){var t=e.split("-"),a=this.getMonths();return a[Number(t[1])]+" "+t[2]+", "+t[0]}return e},getHeadingSetting:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get(v["a"].setPayrollDetailReportSetting(e.getOrganizationSlug)+"?as=hr").then((function(t){e.loadingHeaderData=!1,e.headingTypeSelect=t.headings}));case 2:case"end":return t.stop()}}),t)})))()},saveHeadingSetting:function(e){this.$http.post(v["a"].setPayrollDetailReportSetting(this.getOrganizationSlug)+"?as=hr",{headings:e}),this.loadDataTableChange()},fetchDataTable:function(){var e=this;this.loading=!0,this.$http.get(p["a"].getPayrollDetail(this.$route.params.pk),{params:this.fullParams}).then((function(t){e.results=t.results.map((function(t){var a;return t.dialog=!1,t.beingEdited=!1,t.editedRemarks="",e.edited_general_headings.hasEmployee(t.employee.id)||e.$set(e.edited_general_headings,t.employee.id,new w["b"]),(a=e.headings).splice.apply(a,[0,e.headings.length].concat(Object(o["a"])(e.selectedHeader))),e.headings.forEach((function(a){e.edited_general_headings[t.employee.id].hasHeading(a.value)||e.$set(e.edited_general_headings[t.employee.id],a.value,new w["d"](t.heading_amounts[a.value],a.type))})),t})),e.loadDataTable(t),e.payroll=t.extra_data,e.selectedTemplate=t.payslip_template||"Template 1"})).finally((function(){e.loading=!1}))},getExtraHeadingValue:function(e,t){var a=0;return this.extra_headings[e]&&this.extra_headings[e][t]?Object(y["a"])(this.extra_headings[e][t].value)||0:this.edited_general_headings[e][t].currentValue||a},formatDate:function(e){return u()(e).format("YYYY-MM-DD HH:mm:ss")},deletePayroll:function(){var e=this;this.deleteRequestDetails&&this.deleteRequestDetails.id?this.$http.delete("/payroll/employee-payroll/".concat(this.deleteRequestDetails.id,"/?employee__detail__organization__slug=").concat(this.organizationSlug,"&as=").concat(this.as)).then((function(){e.setSnackBar({text:"Successfully Deleted Payroll Detail.",color:"green"}),e.deleteNotification.dialog=!1,e.fetchedResults.splice(e.deleteRequestDetails.index,1),e.deleteRequestDetails={}})).catch((function(t){var a=t.response;e.setSnackBar({text:a.data.error_message,color:"red"})})):this.$http.delete("/payroll/payrolls/".concat(this.$route.params.pk,"/?organization__slug=").concat(this.organizationSlug,"&as=").concat(this.as)).then((function(){e.setSnackBar({text:"Successfully Deleted Payroll Detail.",color:"green"}),e.$router.push({name:"admin-slug-payroll-collection",params:{slug:e.organizationSlug}})})).catch((function(t){var a=t.response;e.setSnackBar({text:a.data.error_message,color:"red"})}))},enableEdit:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.beingEdited=!0,t.lockRow=!0,n=t.results.filter((function(t){return t.employee.id===e.employee.id}))[0],a.next=5,t.$http.get("/payroll/package-headings/choices/?package__organization__slug=".concat(t.organizationSlug,"&as=").concat(t.as,"&package__id=").concat(n.employee.package,"&extra_headings=True")).then((function(e){t.extraHeadingsData=e}));case 5:if(0!==t.extraHeadingsData.length){a.next=7;break}return a.abrupt("return");case 7:t.extra_headings[n.employee.id]={},t.headings.forEach((function(e){if(["Extra Addition","Extra Deduction"].includes(e.type)&&n.heading_amounts[e.id]){var a=t.extraHeadingsData.filter((function(t){return t.heading===e.id})).map((function(e){return e.id}))[0];t.$set(t.extra_headings[n.employee.id],e.id,{package_heading_id:a,value:n.heading_amounts[e.id]})}}));case 9:case"end":return a.stop()}}),a)})))()},editPayroll:function(e){var t=this;if(!this.loading){this.loading=!0;var a=Object.keys(this.edited_general_headings).filter((function(t){return parseInt(t)===e.employee.id})).reduce((function(e,a){return Object(s["a"])(Object(s["a"])({},e),{},Object(r["a"])({},a,t.edited_general_headings[a]))}),{}),n={extra_headings:this.extra_headings,edited_general_headings:w["a"].clean(a),remarks:Object(r["a"])({},e.employee.id,e.editedRemarks)};this.$http.post("payroll/payrolls/".concat(this.$route.params.pk,"/edit/?organization__slug=").concat(this.organizationSlug,"&as=").concat(this.as),n).then((function(){t.resetData(),t.setSnackBar({text:"Successfully updated payroll detail for user ".concat(e.employee.full_name,"."),color:"green"})})).catch((function(e){t.pushErrors(e)})).finally((function(){t.loading=!1}))}},resetData:function(){this.clearNonFieldErrors(),this.lockRow=!1,this.fetchedResults=[],this.edited_general_headings=new w["a"],this.fetchDataTable()},confirmHrAction:function(e){this.hrAction=e,this.hrActionNotification.dialog=!0,this.hrActionNotification.subheading="You are about to ".concat(e," payroll. Confirm your action."),this.hrActionNotification.text="Are you sure you want to ".concat(e," this payroll?")},confirmForwardAction:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.payrollApprovalList.length){t.next=3;break}return t.next=3,e.$http.get(v["a"].approvePayroll(e.getOrganizationSlug)+"?as=".concat(e.as)).then((function(t){e.payrollApprovalList=t.results}));case 3:e.hrAction="forward",e.forwardNotification.subheading="You are about to forward payroll data. Confirm your action.",e.forwardNotification.dialog=!0;case 6:case"end":return t.stop()}}),t)})))()},confirmAdminAction:function(e){this.validateAllFields(),this.adminRemarks&&(this.adminAction=e,this.adminActionNotification.dialog=!0,this.adminActionNotification.subheading="You are about to ".concat(e," payroll. Confirm your action."),this.adminActionNotification.text="Are you sure you want to ".concat(e," this payroll?"))},actionByHr:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("forward"!==e.hrAction){t.next=6;break}return t.next=3,e.forwardForApproval();case 3:e.forwardNotification.dialog=!1,t.next=10;break;case 6:if("confirm"!==e.hrAction){t.next=10;break}return t.next=9,e.updateStatus("Confirmed");case 9:e.hrActionNotification.dialog=!1;case 10:case"end":return t.stop()}}),t)})))()},actionByAdmin:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a="Approved","reject"===e.adminAction&&(a="Rejected"),e.$http.post("/payroll/approvals/".concat(e.$route.params.pk,"/").concat(e.adminAction,"/?as=").concat(e.as),{remarks:e.adminRemarks}).then((function(){e.payroll.status=a,e.$router.push({name:"user-payroll-approval-request",params:{slug:e.$route.params.slug}}),e.setSnackBar({text:"Successfully ".concat(a," Payroll."),color:"green"})})).finally((function(){e.adminActionNotification.dialog=!1}));case 3:case"end":return t.stop()}}),t)})))()},forwardForApproval:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.put("/payroll/payrolls/".concat(e.$route.params.pk,"/?organization__slug=").concat(e.organizationSlug,"&as=").concat(e.as),{status:"Approval Pending"}).then((function(){e.payroll.status="Forwarded",e.setSnackBar({text:"Successfully Forwarded Payroll for Approvals.",color:"green"})}));case 2:case"end":return t.stop()}}),t)})))()},updateStatus:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=Object(se["b"])({status:e}),a.next=3,t.$http.patch("/payroll/payrolls/".concat(t.$route.params.pk,"/?organization__slug=").concat(t.organizationSlug,"&as=").concat(t.as),n).then((function(){t.payroll.status=e,t.fetchDataTable(),t.setSnackBar({text:"Successfully "+e+" Payroll",color:"green"})}));case 3:case"end":return a.stop()}}),a)})))()},insertSpecialNote:function(){var e=this,t="",a={user_note:this.specialNote.text},n="";this.specialNote.individual?(t="/payroll/payrolls/".concat(this.$route.params.pk,"/user/").concat(this.selectedEmployee,"/note/?organization__slug=").concat(this.getOrganizationSlug,"&as=").concat(this.as),n="patch"):(t="/payroll/payrolls/".concat(this.$route.params.pk,"/global/note/?organization__slug=").concat(this.getOrganizationSlug,"&as=").concat(this.as,"&for_all=").concat(this.specialNote.suppressIndividualNote),n="post"),this.$http[n](t,a).then((function(){e.setSnackBar({text:"Successfully added special note.",color:"green"}),e.specialNote.show=!1,e.resetData()}))},addAttachment:function(){var e=this,t="payroll/payrolls/".concat(this.$route.params.pk,"/signed-payrolls/?organization__slug=").concat(this.getOrganizationSlug,"&as=").concat(this.as),a=Object(se["b"])({attachment:this.attachment});this.$http.post(t,a).then((function(){e.setSnackBar({text:"Successfully added attachment.",color:"green"}),e.attachment=null,e.showAttachmentDialog=!1,e.showAttachment=!1,e.resetData()})).catch((function(t){e.notifyInvalidFormResponse(),e.pushErrors(t)}))},getRemarksHistory:function(){var e=this;this.$http.get("/payroll/payrolls/".concat(this.$route.params.pk,"/approval-history?organization__slug=").concat(this.organizationSlug,"&as=").concat(this.as)).then((function(t){e.adminRemarksList=t.results,e.excel_error=t.excel_error,e.showRemarks=!0}))},viewRemarks:function(){this.showRemarks?this.showRemarks=!1:this.getRemarksHistory()},viewAttachment:function(){var e=this;this.showAttachment?this.showAttachment=!1:this.$http.get("payroll/payrolls/".concat(this.$route.params.pk,"/signed-payrolls/?organization__slug=").concat(this.organizationSlug,"&as=").concat(this.as)).then((function(t){e.attachmentList=t.results,e.showAttachment=!0}))},viewHistory:function(e,t){this.showHistory=!0,this.selectedEmployee=e,this.employeePayrollId=t},viewEmployeeTax:function(e,t){this.showEmployeeTax=!0,this.selectedEmployee=e,this.employeePayrollId=t},changeSort:function(e){e&&(this.pagination.sortBy===e?this.pagination.descending=!this.pagination.descending:(this.pagination.sortBy=e,this.pagination.descending=!1))},previewReport:function(e){var t="https://docs.google.com/viewerng/viewer?url=".concat(e);window.open(t,"_blank")},downloadAttachment:function(e){window.open(e,"_blank")},downloadSample:function(e){var t=this;this.$http({url:"payroll/payrolls/excel-update-sample/?organization__slug=".concat(this.getOrganizationSlug,"&as=").concat(this.as),method:"POST",data:{headings:e},responseType:"blob"}).then((function(e){t.notifyUser("Your file is being Downloaded","green"),Object(x["a"])(e,"payroll-sample-data.xlsx")})).catch((function(e){t.pushErrors(e)}))},uploadData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=new FormData,a.append("file",e.importFile),a.append("remarks",e.importRemarks),e.$http.put("payroll/payrolls/".concat(e.$route.params.pk,"/excel-update/?organization__slug=").concat(e.getOrganizationSlug,"&as=").concat(e.as),a).then((function(){e.getRemarksHistory(),localStorage.setItem(e.localStorageName,"true"),e.showPayrollGeneratedDetail=!0,e.importFile=null,e.notifyUser("File sent for background processing","green"),e.clearNonFieldErrors()})).catch((function(t){e.notifyInvalidFormResponse(),e.pushErrors(t)})).finally((function(){e.showUploadForm=!1}));case 4:case"end":return t.stop()}}),t)})))()},getHeaderValue:function(e,t){return["package_name","working_days","worked_days","absent_days","worked_hours","overtime_hours"].includes(t.value)?this.getNestedValues(e.item,t.value):this.getNestedValues(e.item.employee,t.value)},getNestedValues:function(e,t){if("step"===t&&e.set_as_grade){var a=e.level_grades.find((function(t){return t.scale===e.step}));return a?a.name:"N/A"}return t.split(".").reduce((function(e,t){return null===e[t]?"N/A":e[t]}),e)},changePayrollGeneratedDetail:function(){this.showPayrollGeneratedDetail=!1,localStorage.removeItem(this.localStorageName)},initializeDynamicUrls:function(){this.jobTitleEndpoint=me["a"].getJobTitle(this.getOrganizationSlug),this.divisionEndpoint=he["a"].getDivision(this.getOrganizationSlug),this.employeeLevelEndpoint=fe["a"].getEmploymentLevel(this.getOrganizationSlug),this.employeeTypeEndpoint=ge["a"].getEmploymentType(this.getOrganizationSlug),this.branchesEndpoint=ve["a"].getBranch(this.getOrganizationSlug),this.bankEndpoint=ye["a"].getBank(this.getOrganizationSlug)}})},je=Ne,Le=(a("f1f7"),a("288c")),Ie=a("ac7c"),Be=a("169a"),Fe=a("ce87"),He=a("6b53"),Ue=a("0789"),ze=a("a844"),Ge=a("8414"),qe=a("1e06"),Me=a("3a2f"),Ye=Object(T["a"])(je,n,i,!1,null,null,null);t["a"]=Ye.exports;V()(Ye,{VAlert:Re["a"],VBottomSheet:Le["a"],VBtn:N["a"],VCard:j["a"],VCardActions:L["a"],VCardText:L["c"],VCheckbox:Ie["a"],VCol:I["a"],VDataTable:Z["a"],VDialog:Be["a"],VDivider:B["a"],VHover:Fe["a"],VIcon:F["a"],VResponsive:He["a"],VRow:H["a"],VSlideYTransition:Ue["g"],VTextField:U["a"],VTextarea:ze["a"],VTimeline:Ge["a"],VTimelineItem:qe["a"],VTooltip:Me["a"]})},9815:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{width:"500",persistent:"",scrollable:""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.$emit("input",!1)}},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("vue-card-title",{attrs:{title:e.title,subtitle:"List of Employees",icon:"mdi-account-group-outline",dark:"",closable:""},on:{close:function(t){return e.$emit("input",!1)}}}),a("v-divider"),e.headerInfo?a("v-list",{staticClass:"primaryLight pl-9 pr-5 py-0"},[a("v-list-item",[a("v-list-item-content",{staticClass:"text-body-1",attrs:{md:"5"}},[e._v(" Name ")]),a("v-list-item-action",{staticClass:"text-body-1 text-center"},[e._v(" "+e._s(e.headerInfo)+" ")])],1)],1):e._e(),a("v-divider"),a("v-card-text",{staticClass:"pb-0"},[e.endpoint||0!==e.users.length?e._e():a("div",[a("vue-no-data")],1),e.userInstance&&e.userInstance.length?a("v-list",e._l(e.userInstance,(function(t){return a("v-list-item",{key:t.id},[a("v-list-item-content",[a("vue-user",{attrs:{user:t.liked_by||t.user||t}})],1),e._l(e.infoList,(function(n,i){return[a("v-list-item-action",{key:i},[a("span",[i>0?a("span",[a("span",[e._v("|")])]):e._e(),e._v(" "+e._s(t[n])+" ")])])]})),a("v-list-item-action",[e._t("info",null,{user:t})],2)],2)})),1):e._e(),e.dialog&&e.endpoint?a("div",[a("infinite-loading-base",{attrs:{endpoint:e.endpoint,"response-key":e.responseKey},on:{setInfiniteResponse:e.setInfiniteResponse}})],1):e._e()],1)],1)],1)},i=[],r=a("2909"),o=(a("99af"),a("e585")),s=a("02cb"),l=a("cdd1"),c={components:{VueUser:s["default"],VueNoData:o["default"],InfiniteLoadingBase:l["a"]},extends:l["a"],props:{value:{type:Boolean,default:!1},users:{type:Array,default:function(){return[]}},title:{type:String,default:"List Of Employees"},infoList:{type:Array,default:function(){return[]}},endpoint:{type:String,default:""},headerInfo:{type:String,default:""},responseKey:{type:String,default:"results"}},data:function(){return{userInstance:[],dialog:this.value,fetched:!this.endpoint}},watch:{value:function(e){this.dialog=e,this.userInstance=this.users}},created:function(){this.userInstance=Object(r["a"])(this.users)},methods:{setInfiniteResponse:function(e){this.userInstance=this.userInstance.concat(e[this.responseKey])}}},d=c,u=a("2877"),p=a("6544"),m=a.n(p),h=a("b0af"),f=a("99d9"),g=a("169a"),v=a("ce7e"),y=a("8860"),_=a("da13"),b=a("1800"),x=a("5d23"),w=Object(u["a"])(d,n,i,!1,null,null,null);t["default"]=w.exports;m()(w,{VCard:h["a"],VCardText:f["c"],VDialog:g["a"],VDivider:v["a"],VList:y["a"],VListItem:_["a"],VListItemAction:b["a"],VListItemContent:x["a"]})},"9d01":function(e,t,a){},"9dc8":function(e,t,a){"use strict";var n=a("1da1"),i=a("5530"),r=(a("96cf"),a("7db0"),a("ac1f"),a("5319"),a("2f62")),o=a("1157"),s=a.n(o);t["a"]={data:function(){return{downloading:!1}},methods:Object(i["a"])(Object(i["a"])({},Object(r["d"])({setSnackBar:"common/setSnackBar"})),{},{generateExcel:function(e){var t=arguments,a=this;return Object(n["a"])(regeneratorRuntime.mark((function n(){var i,r,o,l,c,d,u,p,m;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=t.length>1&&void 0!==t[1]?t[1]:"",r=t.length>2?t[2]:void 0,o={"ms-word":".doc","ms-excel":".xls"},c="application/vdn.".concat(r),a.setSnackBar({text:"Your excel file will be downloaded shortly.",color:"info",persist:!1}),d=document.getElementById(e),u=d.cloneNode(!0),s()(u).find(".excel-hidden").remove(),p=u.outerHTML.replace(/ /g,"%20"),i=i?i+o[r]:"excel_data".concat(o[r]),l=document.createElement("a"),document.body.appendChild(l),navigator.msSaveOrOpenBlob)m=new Blob(["\ufeff",p],{type:c}),navigator.msSaveOrOpenBlob(m,i);else{l.href="data:"+c+", "+p,l.download=i;try{l.click()}catch(h){a.setSnackBar({text:"Your request was not successful.",color:"red"}),a.downloading=!1}}case 13:case"end":return n.stop()}}),n)})))()}})}},a173:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-row",{attrs:{dense:"",align:"start"}},[a("v-col",{staticClass:"pr-2",attrs:{md:e.showCaption?"6":"8",cols:"12"}},[a("div",[a("v-text-field",{attrs:{id:e.id,label:e.label,"data-cy":"input-file-upload",error:e.errorMessages.length>0,"error-messages":e.errorMessages,"hide-details":e.hideDetails,hint:e.hint,"persistent-hint":!!e.hint,disabled:e.disabled,readonly:"","prepend-inner-icon":"mdi-attachment","append-icon":e.fileName?"mdi-close":""},on:{"click:prepend":e.pickFile,"click:append":function(t){return e.clear()},click:e.pickFile,blur:function(t){return e.$emit("blur")}},model:{value:e.fileName,callback:function(t){e.fileName=t},expression:"fileName"}}),a("input",{ref:"upload",staticClass:"d-none",attrs:{id:"fileUpload",type:"file",multiple:"multiple"},on:{change:e.upload}})],1)]),e.showCaption?a("v-col",{attrs:{md:"5",cols:"8"}},[a("v-text-field",{staticClass:"pl-2",attrs:{disabled:!e.attachment,label:"Caption"},model:{value:e.caption,callback:function(t){e.caption=t},expression:"caption"}})],1):e._e(),e.multiple?a("v-col",{attrs:{md:e.showCaption?"1":"4",cols:e.showCaption?"4":"6"}},[a("v-icon",{staticClass:"mt-5",attrs:{color:"primary"},on:{click:e.appendFile}},[e._v(" mdi-plus-box-outline ")])],1):e._e()],1)],1)},i=[],r=a("1da1"),o=a("5530"),s=(a("96cf"),a("ac1f"),a("1276"),a("b0c0"),a("2f62")),l={props:{default:{type:[String,File],default:void 0},text:{type:String,default:void 0},id:{type:String,default:""},label:{type:String,default:"Attachment"},hint:{type:String,default:"Files with jpg, png, odt extensions are not available for preview."},errorMessages:{type:[String,Array],default:function(){return[]}},hideDetails:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},value:{type:[File,Array],default:function(){return[]}},showCaption:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1}},data:function(){return{fileName:"",attachment:null,caption:"",attachments:[]}},watch:{default:{handler:function(e){!e||e instanceof File||(this.attachment=e)},immediate:!0},value:{handler:function(e){this.attachments=e,e||(this.fileName="")},immediate:!0},attachment:function(e){this.multiple||this.$emit("input",e)},attachments:function(e){this.$emit("input",e)}},methods:Object(o["a"])(Object(o["a"])({},Object(s["d"])({setSnackBar:"common/setSnackBar"})),{},{pickFile:function(){this.$refs.upload.click()},upload:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=new FileReader,n.readAsDataURL(e.target.files[0]),i="",1===e.target.files[0].name.split(".").length?i="Please upload known file type.":e.target.files[0].size>5242880?i="File size cannot be greater than 5MB.":"svg"===e.target.files[0].name.split(".").pop()&&(i="SVG image not allowed here."),i?t.setSnackBar({text:i,color:"red"}):n.onload=function(){t.$emit("input",e.target.files[0]),t.$emit("blur"),t.$emit("update",n.result),t.attachment=e.target.files[0],t.fileName=e.target.files[0].name};case 5:case"end":return a.stop()}}),a)})))()},clear:function(){this.attachment=null,this.fileName="",this.$emit("input",this.attachment)},appendFile:function(){if(!this.attachment||this.showCaption&&!this.caption){var e=this.attachment?"Please add both attachment and caption":"Please add attachment";this.setSnackBar({text:e,color:"red"})}else{this.setSnackBar({display:!1});var t={};t=this.showCaption?{file:this.attachment,caption:this.caption}:{file:this.attachment},this.multiple||(this.attachments=[]),this.attachments.unshift(t),this.attachment=null,this.caption=""}}})},c=l,d=a("2877"),u=a("6544"),p=a.n(u),m=a("62ad"),h=a("132d"),f=a("0fd9b"),g=a("8654"),v=Object(d["a"])(c,n,i,!1,null,null,null);t["a"]=v.exports;p()(v,{VCol:m["a"],VIcon:h["a"],VRow:f["a"],VTextField:g["a"]})},a79c:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return r}));var n=a("53ca");a("b0c0");function i(e,t,a){var o,s,l=t||new FormData;for(var c in e)if(Object.prototype.hasOwnProperty.call(e,c))if(o=a?a+"."+c:c,s=e[c],"boolean"===typeof s||"number"===typeof s)l.append(o,s);else if(Array.isArray(s))for(var d=0;d<s.length;d++)l.append(o,s[d]);else"object"!==Object(n["a"])(s)||r(s)?r(s)?l.append(o,s,s.name):s?l.append(o,s):s||"undefined"!==typeof s&&l.append(o,""):i(s,l,c);return l}function r(e){return e instanceof File||e instanceof Blob}},ab8a:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.changeType&&0!==e.nonFieldErrors.length?a("div",e._l(e.nonFieldErrors,(function(t,n){return a("v-col",{key:n},e._l(t,(function(t,n){return a("div",{key:n},[a("span",{domProps:{textContent:e._s(e.key)}}),a("span",{domProps:{textContent:e._s(t.toString())}})])})),0)})),1):e._e(),e.changeType||0===e.nonFieldErrors.length?e._e():a("v-alert",{staticClass:"ma-3",attrs:{outlined:"",dense:"",tile:"",dismissible:"",color:"danger"}},[a("span",{domProps:{textContent:e._s("There are some errors")}}),e._l(e.nonFieldErrors,(function(t,n){return a("div",{key:n},e._l(t,(function(t,n){return a("div",{key:n},[a("ul",[a("li",[a("span",{domProps:{textContent:e._s(e.key)}}),a("span",{domProps:{textContent:e._s(t.toString())}})])])])})),0)}))],2)],1)},i=[],r={props:{nonFieldErrors:{type:Array,required:!0},changeType:{type:Boolean,default:!1}},data:function(){return{key:""}}},o=r,s=a("2877"),l=a("6544"),c=a.n(l),d=a("0798"),u=a("62ad"),p=Object(s["a"])(o,n,i,!1,null,null,null);t["default"]=p.exports;c()(p,{VAlert:d["a"],VCol:u["a"]})},b73d:function(e,t,a){"use strict";var n=a("5530"),i=(a("0481"),a("ec29"),a("9d01"),a("fe09")),r=a("c37a"),o=a("c3f0"),s=a("0789"),l=a("490a"),c=a("80d2");t["a"]=i["a"].extend({name:"v-switch",directives:{Touch:o["a"]},props:{inset:Boolean,loading:{type:[Boolean,String],default:!1},flat:{type:Boolean,default:!1}},computed:{classes:function(){return Object(n["a"])(Object(n["a"])({},r["a"].options.computed.classes.call(this)),{},{"v-input--selection-controls v-input--switch":!0,"v-input--switch--flat":this.flat,"v-input--switch--inset":this.inset})},attrs:function(){return{"aria-checked":String(this.isActive),"aria-disabled":String(this.isDisabled),role:"switch"}},validationState:function(){return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0},switchData:function(){return this.setTextColor(this.loading?void 0:this.validationState,{class:this.themeClasses})}},methods:{genDefaultSlot:function(){return[this.genSwitch(),this.genLabel()]},genSwitch:function(){return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",Object(n["a"])(Object(n["a"])({},this.attrs),this.attrs$)),this.genRipple(this.setTextColor(this.validationState,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",Object(n["a"])({staticClass:"v-input--switch__track"},this.switchData)),this.$createElement("div",Object(n["a"])({staticClass:"v-input--switch__thumb"},this.switchData),[this.genProgress()])])},genProgress:function(){return this.$createElement(s["c"],{},[!1===this.loading?null:this.$slots.progress||this.$createElement(l["a"],{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft:function(){this.isActive&&this.onChange()},onSwipeRight:function(){this.isActive||this.onChange()},onKeydown:function(e){(e.keyCode===c["y"].left&&this.isActive||e.keyCode===c["y"].right&&!this.isActive)&&this.onChange()}}})},c197:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.divClass},[a("v-img",{class:e.imgClass,attrs:{src:"/svg/three-dots.svg",height:e.height,contain:""}}),a("h3",{staticClass:"text-center grey--text",domProps:{textContent:e._s(e.message)}})],1)},i=[],r={props:{message:{type:String,default:"Please wait. Fetching data just for you ..."},divClass:{type:String,default:"pa-12"},imgClass:{type:String,default:"my-6"},height:{type:String,default:"20"}},data:function(){return{}}},o=r,s=a("2877"),l=a("6544"),c=a.n(l),d=a("adda"),u=Object(s["a"])(o,n,i,!1,null,null,null);t["default"]=u.exports;c()(u,{VImg:d["a"]})},ce87:function(e,t,a){"use strict";var n=a("16b7"),i=a("f2e7"),r=a("58df"),o=a("d9bd");t["a"]=Object(r["a"])(n["a"],i["a"]).extend({name:"v-hover",props:{disabled:{type:Boolean,default:!1},value:{type:Boolean,default:void 0}},methods:{onMouseEnter:function(){this.runDelay("open")},onMouseLeave:function(){this.runDelay("close")}},render:function(){return this.$scopedSlots.default||void 0!==this.value?(this.$scopedSlots.default&&(e=this.$scopedSlots.default({hover:this.isActive})),Array.isArray(e)&&1===e.length&&(e=e[0]),e&&!Array.isArray(e)&&e.tag?(this.disabled||(e.data=e.data||{},this._g(e.data,{mouseenter:this.onMouseEnter,mouseleave:this.onMouseLeave})),e):(Object(o["c"])("v-hover should only contain a single element",this),e)):(Object(o["c"])("v-hover is missing a default scopedSlot or bound value",this),null);var e}})},d242:function(e,t,a){"use strict";var n=a("1da1"),i=a("5530"),r=(a("96cf"),a("d3b7"),a("3ca3"),a("ddb0"),a("caad"),a("159b"),a("99af"),a("b0c0"),a("7db0"),a("fb6a"),a("2f62")),o=a("f1d0"),s=a("1f04"),l=a("cf45");t["a"]={data:function(){return{orgInfo:null,serverTime:null,downloading:!1}},methods:Object(i["a"])(Object(i["a"])({},Object(r["d"])({setSnackBar:"common/setSnackBar"})),{},{downloadPdf:function(e){var t=arguments,i=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var o,c,d,u,p,m,h;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(o=t.length>1&&void 0!==t[1]?t[1]:"p",c=t.length>2?t[2]:void 0,d=t.length>3&&void 0!==t[3]?t[3]:35,u=t.length>4&&void 0!==t[4]?t[4]:1245,p=t.length>5&&void 0!==t[5]?t[5]:1475,e.$el&&(e=e.$el),!i.loading){r.next=8;break}return r.abrupt("return");case 8:return scroll(0,0),r.prev=9,i.loading=!0,i.downloading=!0,i.setSnackBar({text:"File Downloading. Please wait...",color:"info",persist:!0}),r.next=15,i.loadOrganizationInfo();case 15:m=0,h=0,"l"===o&&(m=805,h=86),setTimeout(Object(n["a"])(regeneratorRuntime.mark((function t(){var r,f,g,v,y,_;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.getBoundingClientRect().top,f=e.getBoundingClientRect().left,g=e.offsetHeight+parseInt(getComputedStyle(e).marginTop),v=[],y=document.getElementsByClassName("download-only"),_=document.getElementsByClassName("download-hidden"),t.next=8,a.e("chunk-2d216257").then(a.t.bind(null,"c0e9",7)).then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var i,o,s,l,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=a.default;case 1:if(!(g>=40)){t.next=8;break}for(o=0;o<y.length;o++)y[o].style.display="block";for(s=0;s<_.length;s++)_[s].style.display="none";return t.next=6,i(e,{x:f-d,y:r,width:u,height:p-m,type:"dataURL",scale:2,useCORS:!0,windowWidth:1300}).then(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:v.push(t.toDataURL("image/png")),g-=p-m,r+=p-m;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:t.next=1;break;case 8:for(l=0;l<y.length;l++)y[l].style.display="none";for(c=0;c<_.length;c++)_[c].style.display="";case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 8:a.e("chunk-e0378ed4").then(a.bind(null,"8baf")).then(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,n,r,d,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.default,n=new a(o,"mm"),!["manualtesting","development"].includes(Object(l["f"])("VUE_APP_ENV"))){e.next=8;break}return e.next=5,Object(s["b"])("https://i.imgur.com/fHyEMsl.jpg");case 5:r=e.sent,e.next=11;break;case 8:return e.next=10,Object(s["b"])(i.orgInfo.logo);case 10:r=e.sent;case 11:d=210+h,u=32,v.forEach((function(e,t){t>0&&n.addPage(),n.addImage(e,"PNG",0,u,d,0,void 0,"FAST"),i.setHeaderAndFooter(t,n,r,v.length,o)})),n.save(c||"file.pdf"),i.loading=!1,i.setSnackBar({text:"",color:"",display:!1,error:!1});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 9:case"end":return t.stop()}}),t)}))),500),r.next=27;break;case 21:r.prev=21,r.t0=r["catch"](9),console.error("Error while downloading pdf",r.t0),i.setSnackBar({text:"Your request was not successful.",color:"red"}),i.loading=!1,i.downloading=!1;case 27:case"end":return r.stop()}}),r,null,[[9,21]])})))()},setHeaderAndFooter:function(e,t,a,n,i){var r=0,o=0;"l"===i&&(r=2.5,o=84);var s=e+1,l=t.internal.pageSize.getWidth(),c=t.internal.pageSize.getHeight(),d=this.serverTime,u="Page ".concat(s," of ").concat(n);t.setPage(s),t.setFont("Helvetica","normal"),t.setLineWidth(.2),t.setDrawColor(150),t.line(7.5+r,27,203+o,27),t.line(7.5+r,c-12,203+o,c-12),t.setTextColor(150),t.setFontSize(8),t.text(u,7.5+r,c-7),t.text(d,l-8-r,c-7,{align:"right"});var p=this.orgInfo.address?this.orgInfo.address+",":"",m=this.orgInfo.phone_no?"Tel: ".concat(this.orgInfo.phone_no):"";t.text("".concat(p," ").concat(m),l-8-r,17,{align:"right"});var h=this.orgInfo.email?this.orgInfo.email+",":"",f=this.orgInfo.website||"";t.text("".concat(h," ").concat(f),l-8-r,21,{align:"right"}),t.setTextColor(100),t.setFontSize(14),t.setFont("Helvetica","bold"),t.text("".concat(this.orgInfo.name),l-8-r,13,{align:"right"}),t.addImage(a,"JPEG",7.5+r,7,18,18,void 0,"FAST")},loadOrganizationInfo:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.getOrganizationSlug,n=JSON.parse(localStorage.getItem("org-info"))||[],!(n.length>0&&n.some((function(e){return e.slug===a})))){t.next=6;break}e.orgInfo=n.find((function(e){return e.slug===a})),t.next=8;break;case 6:return t.next=8,e.$http.get(o["a"].getOrganization(a)).then((function(t){var a=t.name,i=t.slug,r=t.appearance.logo,o=t.address?t.address.address:"",s=t.email,l=t.contacts.Phone,c=t.website,d={name:a,slug:i,logo:r,address:o,email:s,phone_no:l,website:c};n.push(d),localStorage.setItem("org-info",JSON.stringify(n)),e.orgInfo=d}));case 8:return t.next=10,e.$http.get("server-info/?fields=server_time").then((function(t){var a=t.server_time;a=a.slice(0,-6),e.serverTime=e.$dayjs(a).format("YYYY-MM-DD HH:mm:ss A")}));case 10:case"end":return t.stop()}}),t)})))()}})}},d986:function(e,t,a){"use strict";a("99af");t["a"]={getBank:function(e){return"/org/".concat(e,"/bank/")},postBank:function(e){return"/org/".concat(e,"/bank/")},getBankDetails:function(e,t){return"/org/".concat(e,"/bank/").concat(t,"/")},putBank:function(e,t){return"/org/".concat(e,"/bank/").concat(t,"/")},deleteBank:function(e,t){return"/org/".concat(e,"/bank/").concat(t,"/")}}},df29:function(e,t,a){"use strict";t["a"]={generatePayroll:"/payroll/payrolls/",downloadPayroll:"/payroll/payrolls/export/",getPayrollStat:"/payroll/payrolls/stat/",getPayrollGenerationDetail:"/payroll/get-payroll-generated-employee-detail",addEmployeeInPayroll:function(e){return"/payroll/payrolls/".concat(e,"/add-employee/")},getPayrollDifference:function(e){return"/payroll/".concat(e,"/payrolls-difference/")}}},e2c4:function(e,t,a){},e4bf:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.contextList.filter((function(e){return!e.hide})).length<3&&!e.hideIcons||e.showIcons?a("div",e._l(e.contextList,(function(t,n){return a("span",{key:n},[t.hide?e._e():a("v-tooltip",{attrs:{disabled:e.$vuetify.breakpoint.xs,top:""},scopedSlots:e._u([{key:"activator",fn:function(i){var r=i.on;return[a("v-btn",e._g({staticClass:"mx-0",attrs:{text:"",width:e.small?"18":"22",depressed:"",icon:""}},r),[a("v-icon",{attrs:{disabled:t.disabled,color:t.color,"data-cy":e.dataCyVariable+"btn-dropdown-menu-item-"+(n+1),dark:!t.disabled,small:e.small,size:"20",dense:""},domProps:{textContent:e._s(t.icon)},on:{click:function(t){return e.$emit("click"+n)}}})],1)]}}],null,!0)},[a("span",{domProps:{textContent:e._s(t.disabled&&t.disable_message||t.name)}})])],1)})),0):a("v-menu",{attrs:{"offset-y":"",left:"",transition:"slide-y-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-btn",e._g({attrs:{small:"",text:"",icon:""}},n),[a("v-icon",{attrs:{"data-cy":"btn-dropdown-menu"},domProps:{textContent:e._s("mdi-dots-vertical")}})],1)]}}])},e._l(e.contextList,(function(t,n){return a("v-list",{key:n,staticClass:"pa-0",attrs:{dense:""}},[t.hide?e._e():a("div",[t.disabled?a("v-list-item",{attrs:{"data-cy":"btn-dropdown-menu-item"}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(n){var i=n.on;return[a("v-list-item-title",e._g({},i),[a("v-icon",{attrs:{disabled:"",small:"",color:t.color},domProps:{textContent:e._s(t.icon)}}),a("span",{staticClass:"ml-1 grey--text",domProps:{textContent:e._s(t.name)}})],1)]}}],null,!0)},[a("span",{domProps:{textContent:e._s(t.disabled&&t.disable_message||t.name)}})])],1):a("v-list-item",{attrs:{"data-cy":"btn-dropdown-menu-item"},on:{click:function(t){return e.$emit("click"+n)}}},[a("v-list-item-title",[a("v-icon",{attrs:{color:t.color,small:"",dense:""},domProps:{textContent:e._s(t.icon)}}),a("span",{staticClass:"ml-1",class:t.text_color,domProps:{textContent:e._s(t.name)}})],1)],1)],1)])})),1)],1)},i=[],r={name:"VueContextMenu",props:{contextList:{type:Array,default:function(){return[]}},dataCyVariable:{type:String,default:""},showIcons:{type:Boolean,default:!1},hideIcons:{type:Boolean,default:!1},small:{type:Boolean,default:!1}}},o=r,s=a("2877"),l=a("6544"),c=a.n(l),d=a("8336"),u=a("132d"),p=a("8860"),m=a("da13"),h=a("5d23"),f=a("e449"),g=a("3a2f"),v=Object(s["a"])(o,n,i,!1,null,"71ee785c",null);t["default"]=v.exports;c()(v,{VBtn:d["a"],VIcon:u["a"],VList:p["a"],VListItem:m["a"],VListItemTitle:h["c"],VMenu:f["a"],VTooltip:g["a"]})},e59e:function(e,t,a){"use strict";a("99af");t["a"]={getBranch:function(e){return"/org/".concat(e,"/branch/")},postBranch:function(e){return"/org/".concat(e,"/branch/")},getBranchDetail:function(e,t){return"/org/".concat(e,"/branch/").concat(t,"/")},updateBranch:function(e,t){return"/org/".concat(e,"/branch/").concat(t,"/")},deleteBranch:function(e,t){return"/org/".concat(e,"/branch/").concat(t,"/")},importBranch:function(e){return"/org/".concat(e,"/branch/import/")},downloadSampleBranch:function(e){return"/org/".concat(e,"/branch/import/sample")},exportBranch:function(e){return"/org/".concat(e,"/branch/export")},branchType:function(e){return"/org/".concat(e,"/branch-type")},branchTypeDetail:function(e,t){return"org/".concat(e,"/branch-type/").concat(t)}}},edc0:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"d",(function(){return o}));a("4d63"),a("ac1f"),a("25f0"),a("a9e3"),a("1276"),a("35b3");var n=function(e){var t=new RegExp("^(\\-|\\+)?([0-9]+(\\.[0-9]+)?|Infinity)$","g");return t.test(e)?Number(e):NaN},i=function(e){e=e||window.event;var t=e.which?e.which:e.keyCode;if(!(t>31&&(t<48||t>57)&&46!==t))return!0;e.preventDefault()},r=function(e,t){if(e){var a=!0;if(e.indexOf(".")>=0&&(a=e.split(".")[1].length<2),a||!t)return a;t.preventDefault()}},o=function(e){return Math.round(100*(Number(e)+Number.EPSILON))/100}},edc2:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-autocomplete",{class:e.appliedClass,attrs:{items:e.itemsSorted,loading:e.isLoading,"search-input":e.search,multiple:e.multiple,label:e.label,error:e.errorMessages.length>0,"error-messages":e.errorMessages,disabled:e.disabled,"prepend-inner-icon":e.prependInnerIcon,clearable:e.clearable&&!e.readonly,readonly:!!e.readonly,"hide-details":e.hideDetails,"data-cy":"input-user-autocomplete-"+e.dataCyVariable,placeholder:e.placeholder,"hide-selected":"","hide-no-data":"","item-text":e.field,"item-value":"id"},on:{"update:searchInput":function(t){e.search=t},"update:search-input":function(t){e.search=t},blur:function(t){return e.$emit("blur")}},scopedSlots:e._u([{key:"selection",fn:function(t){return[a("v-chip",{attrs:{"input-value":t.selected,close:(e.clearable||!e.clearable&&!e.multiple)&&!e.readonly,small:""},on:{"click:close":function(a){return e.remove(t.item)}}},[a("v-avatar",{attrs:{left:""}},[a("v-img",{attrs:{src:t.item.profile_picture,cover:""}})],1),e._v(" "+e._s(e._f("truncate")(t.item[e.field],e.truncate))+" ")],1)]}},{key:"item",fn:function(t){var n=t.item;return[a("v-list-item-avatar",[a("v-avatar",{attrs:{size:"30"}},[a("v-img",{attrs:{src:n.profile_picture,cover:""}})],1)],1),a("v-list-item-content",[a("v-list-item-title",[e._v(" "+e._s(e._f("truncate")(n[e.field],20))+" "),n.employee_code?[e._v(" ("+e._s(n.employee_code)+") ")]:e._e()],2),n.division?a("v-list-item-subtitle",{domProps:{textContent:e._s(n.division)}}):e._e()],1)]}}]),model:{value:e.selectedData,callback:function(t){e.selectedData=t},expression:"selectedData"}})],1)},i=[],r=a("53ca"),o=(a("a9e3"),a("ac1f"),a("841c"),a("4e827"),a("2ca0"),a("d81d"),a("a434"),a("d3b7"),a("159b"),a("7db0"),a("4de4"),a("caad"),a("2532"),a("fab2")),s=a("63ea"),l=a.n(s),c={props:{value:{type:[Number,String,Array,Object],required:!1,default:function(){return null}},dataCyVariable:{type:String,default:""},userObject:{type:[Object,Array],required:!1,default:function(){return{}}},params:{type:[Object,Array],required:!1,default:function(){return{}}},multiple:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1},errorMessages:{type:[String,Array],default:function(){return[]}},label:{type:String,default:"Select Employee"},prependInnerIcon:{type:String,default:"mdi-account-plus-outline"},itemsToExclude:{type:[Array,Number],default:null},itemsToInclude:{type:[Array,Number],default:null},clearable:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},hideDetails:{type:Boolean,default:!1},appliedClass:{type:String,default:""},truncate:{type:Number,default:10},placeholder:{type:String,default:""},field:{type:String,default:"full_name"}},data:function(){return{isLoading:!1,items:[],allUsers:[],selectedData:null,search:null}},computed:{itemsSorted:function(){return this.sortBySearch(this.items,this.search?this.search.toLowerCase():"")}},watch:{value:{handler:function(e,t){!e&&t&&(this.selectedData="",this.populateInitialUsers()),!t&&e&&this.populateInitialUsers()},immediate:!0},search:function(e){!e||this.items.length>0||this.fetchUsers()},selectedData:function(e){this.search="",this.syncUserData(e),this.$emit("input",e)},itemsToExclude:function(){this.items=this.excludeRecord(this.allUsers)},itemsToInclude:function(){this.items=this.includeRecord(this.allUsers)},params:{handler:function(e,t){l()(e,t)||this.fetchUsers()},deep:!0}},methods:{sortBySearch:function(e,t){var a=this.field;return e.sort((function(e,n){return e[a].toLowerCase().startsWith(t)&&n[a].toLowerCase().startsWith(t)?e[a].toLowerCase().localeCompare(n[a].toLowerCase()):e[a].toLowerCase().startsWith(t)?-1:n[a].toLowerCase().startsWith(t)?1:e[a].toLowerCase().localeCompare(n[a].toLowerCase())}))},populateInitialUsers:function(){this.fetchUsers(this.value),Array.isArray(this.value)?"object"===Object(r["a"])(this.value[0])?this.selectedData=this.value.map((function(e){return e.user.id})):this.selectedData=this.value:null===this.value?this.selectedData="":"object"===Object(r["a"])(this.value)?this.selectedData=this.value.id:this.selectedData=this.value,this.$emit("input",this.selectedData)},remove:function(e){if(this.selectedData instanceof Object){var t=this.selectedData.indexOf(e.id);t>=0&&this.selectedData.splice(t,1),this.$emit("remove",e)}else this.selectedData=""},fetchUsers:function(e){var t=this;this.isLoading||(this.isLoading=!0,this.$http.get(o["a"].autocomplete,{params:this.params}).then((function(a){t.allUsers=a,t.itemsToExclude&&(a=t.excludeRecord(a)),t.itemsToInclude&&(a=t.includeRecord(a)),t.items=a,e&&t.syncUserData(e)})).finally((function(){return t.isLoading=!1})))},syncUserData:function(e){var t=this;if(e instanceof Array){var a=[];e.forEach((function(e){a.unshift(t.items.find((function(t){return t.id===e})))})),this.$emit("update:userObject",a)}else{var n=this.items.find((function(t){return t.id===e}));this.$emit("update:userObject",n)}},excludeRecord:function(e){var t=[];return"number"===typeof this.itemsToExclude?t.push(this.itemsToExclude):t=this.itemsToExclude,e.filter((function(e){return!t.includes(e.id)}))},includeRecord:function(e){var t=this;return e.filter((function(e){return t.itemsToInclude.includes(e.id)}))}}},d=c,u=a("2877"),p=a("6544"),m=a.n(p),h=a("c6a6"),f=a("8212"),g=a("cc20"),v=a("adda"),y=a("8270"),_=a("5d23"),b=Object(u["a"])(d,n,i,!1,null,null,null);t["a"]=b.exports;m()(b,{VAutocomplete:h["a"],VAvatar:f["a"],VChip:g["a"],VImg:v["a"],VListItemAvatar:y["a"],VListItemContent:_["a"],VListItemSubtitle:_["b"],VListItemTitle:_["c"]})},f12b:function(e,t,a){"use strict";var n=a("f0d5"),i=a("983c"),r=a("f70a"),o=a("6c6f");t["a"]={mixins:[n["a"],i["a"],r["a"],o["a"]]}},f1d0:function(e,t,a){"use strict";t["a"]={getOrganizationList:"/org/",getOrganization:function(e){return"/org/".concat(e,"/")},updateOrganization:function(e){return"/org/".concat(e,"/")},getOrgEmployeeData:function(e){return"/org/".concat(e,"/employee-data/")}}},f1f7:function(e,t,a){"use strict";a("e2c4")},f82f:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-text-field",{class:e.appliedClass,attrs:{id:e.id,label:e.label,"data-cy":"input-file-upload",error:e.errorMessages.length>0,"error-messages":e.errorMessages,"hide-details":e.hideDetails,hint:e.hint,"persistent-hint":!!e.hint,disabled:e.disabled,readonly:"","prepend-inner-icon":"mdi-attachment","append-icon":"mdi-close"},on:{"click:prepend":e.pickFile,"click:append":function(t){return e.clear()},click:e.pickFile,blur:function(t){return e.$emit("blur")}},model:{value:e.fileName,callback:function(t){e.fileName=t},expression:"fileName"}}),a("input",{ref:"upload",staticClass:"d-none",attrs:{id:"fileUpload",type:"file",multiple:"multiple"},on:{change:e.upload}})],1)},i=[],r=a("1da1"),o=a("5530"),s=(a("96cf"),a("a9e3"),a("ac1f"),a("1276"),a("b0c0"),a("2f62")),l={props:{value:{type:[String,File,Object],default:void 0},default:{type:[String,File],default:void 0},text:{type:String,default:void 0},id:{type:String,default:""},label:{type:String,default:"Browse file from here"},hint:{type:String,default:void 0},errorMessages:{type:[String,Array],default:function(){return[]}},hideDetails:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},appliedClass:{type:String,default:""},returnObject:{type:Boolean,default:!1},maxSize:{type:Number,default:5}},data:function(){return{fileName:null}},watch:{default:{handler:function(e){!e||e instanceof File||(this.fileName=e)},immediate:!0},value:function(e){e||(this.fileName=""),document.getElementById("fileUpload").value=null}},methods:Object(o["a"])(Object(o["a"])({},Object(s["d"])({setSnackBar:"common/setSnackBar"})),{},{pickFile:function(){this.$refs.upload.click()},upload:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=new FileReader,n.readAsDataURL(e.target.files[0]),i="",1===e.target.files[0].name.split(".").length?i="Please upload known file type.":e.target.files[0].size>1024*t.maxSize*1024?i="File size cannot be greater than ".concat(t.maxSize,"MB."):"svg"===e.target.files[0].name.split(".").pop()&&(i="SVG image not allowed here."),i?t.setSnackBar({text:i,color:"red"}):n.onload=function(){t.returnObject?t.$emit("input",{file_name:e.target.files[0].name,file_content:e.target.files[0]}):t.$emit("input",e.target.files[0]),t.$emit("blur"),t.$emit("update",n.result),t.fileName=e.target.files[0].name};case 5:case"end":return a.stop()}}),a)})))()},clear:function(){this.fileName=null,this.returnObject?this.$emit("input",{file_name:"",file_content:""}):this.$emit("input",this.fileName)}})},c=l,d=a("2877"),u=a("6544"),p=a.n(u),m=a("8654"),h=Object(d["a"])(c,n,i,!1,null,null,null);t["a"]=h.exports;p()(h,{VTextField:m["a"]})},fab2:function(e,t,a){"use strict";t["a"]={getUserList:"/users/",postUser:"/users/",autocomplete:"/users/autocomplete/",postImportUser:"/users/import/",downloadUserImportSample:function(e){return"/users/import/sample/?organization=".concat(e)},getUserDetail:function(e){return"/users/".concat(e,"/")},getInternalUserDetail:function(e){return"/users/".concat(e,"/internal-detail")},deleteUser:function(e){return"/users/".concat(e,"/")},updateUser:function(e){return"/users/".concat(e,"/")},changePassword:function(e){return"/users/".concat(e,"/change-password/")},getUserCV:function(e){return"/users/".concat(e,"/cv/")},getProfileCompleteness:function(e){return"users/".concat(e,"/profile-completeness/")}}}}]);