(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages/user/expense-management/cancel-advance"],{"47c9":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card",[a("vue-card-title",{attrs:{title:e.heading.title,subtitle:e.heading.subheading,icon:"mdi-send"}},[a("template",{slot:"actions"},["approver"!==e.as?a("v-btn",{attrs:{icon:"","data-cy":"btn-filter"},on:{click:function(t){e.filter.show=!e.filter.show}}},[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-filter-variant")}})],1):e._e()],1)],2),e.filter.show?a("v-divider"):e._e(),a("v-slide-y-transition",[a("v-row",{directives:[{name:"show",rawName:"v-show",value:e.filter.show,expression:"filter.show"}],attrs:{"no-gutters":""}},[["hr","approver"].includes(e.as)?a("v-col",{staticClass:"px-2",attrs:{cols:"6",md:"3"}},[a("vue-users-auto-complete",{attrs:{params:{organization:e.getOrganizationSlug}},model:{value:e.filter.user,callback:function(t){e.$set(e.filter,"user",t)},expression:"filter.user"}})],1):e._e(),a("v-col",{staticClass:"px-2",attrs:{cols:"6",md:"3"}},[a("vue-search",{attrs:{search:e.filter.search},on:{"update:search":function(t){return e.$set(e.filter,"search",t)}},model:{value:e.filter.search,callback:function(t){e.$set(e.filter,"search",t)},expression:"filter.search"}})],1),a("v-col",{staticClass:"px-2",attrs:{cols:"6",md:"3"}},[a("date-filter-menu",{attrs:{default:"This Year"},model:{value:e.dateFilter,callback:function(t){e.dateFilter=t},expression:"dateFilter"}})],1),a("v-col",{staticClass:"px-2",attrs:{cols:"6",md:"3"}},[a("v-select",{attrs:{"data-cy":"input-filter-type",items:["Travel","Business","Medical","Other"],clearable:"",label:"Filter by Type"},model:{value:e.filter.type,callback:function(t){e.$set(e.filter,"type",t)},expression:"filter.type"}})],1)],1)],1),a("v-divider"),a("v-tabs",{attrs:{"show-arrows":"","slider-color":"blue"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},e._l(Object.keys(e.$options.tabs),(function(t){return a("v-tab",{key:t,attrs:{"data-cy":"tab-status",ripple:"",disabled:e.loading},on:{change:function(a){e.selectedTab=t}}},[a("span",{staticClass:"text-capitalize mr-2",domProps:{textContent:e._s(t)}}),a("v-chip",{staticClass:"white--text",attrs:{color:e.$options.tabs[t],small:""},domProps:{textContent:e._s(e.response.stats?e.response.stats[t]:"")}})],1)})),1),a("v-divider"),a("v-data-table",{attrs:{headers:e.headers,items:e.fetchedResults,"sort-desc":e.pagination.descending,"sort-by":e.pagination.sortBy,page:e.pagination.page,"items-per-page":e.pagination.rowsPerPage,"footer-props":e.footerProps,"server-items-length":e.pagination.totalItems,"mobile-breakpoint":0,"must-sort":""},on:{"update:sortDesc":function(t){return e.$set(e.pagination,"descending",t)},"update:sort-desc":function(t){return e.$set(e.pagination,"descending",t)},"update:sortBy":function(t){return e.$set(e.pagination,"sortBy",t)},"update:sort-by":function(t){return e.$set(e.pagination,"sortBy",t)},"update:page":function(t){return e.$set(e.pagination,"page",t)},"update:itemsPerPage":function(t){return e.$set(e.pagination,"rowsPerPage",t)},"update:items-per-page":function(t){return e.$set(e.pagination,"rowsPerPage",t)}},scopedSlots:e._u([{key:"item",fn:function(t){return[a("tr",[["hr","approver"].includes(e.as)?a("td",[a("vue-user",{attrs:{user:t.item.advance_expense.employee}})],1):e._e(),a("td",[e._v(" "+e._s(e._f("truncate")(t.item.advance_expense.reason,60))+" ")]),a("td",{staticClass:"text-center"},[e._v(" "+e._s(t.item.advance_expense.total_amount?e.formatCurrency(t.item.advance_expense.total_amount):"N/A")+" ")]),a("td",[a("div",{staticClass:"black--text"},[e._v(" "+e._s(t.item.advance_expense.created_at.substring(0,10))+" ")]),a("div",{staticClass:"text-caption"},[e._v(" "+e._s(e.getTime(t.item.advance_expense.created_at))+" ")])]),a("td",[e._v(" "+e._s(t.item.advance_expense.type)+" ")]),a("td",{staticClass:"text-center"},["Requested"===t.item.status?a("approval-chip",{attrs:{"user-detail":t.item.recipient[0],status:t.item.status}}):a("v-chip",{attrs:{color:e.$options.tabs[t.item.status],outlined:"",small:""}},[e._v(" "+e._s(t.item.status)+" ")])],1),a("td",[a("vue-context-menu",{attrs:{"context-list":[{name:"View Details",icon:"mdi-eye-outline",color:"blue"}]},on:{click0:function(a){return e.openViewForm(t.item.id,t.item.advance_expense.type)}}})],1)])]}}])},[a("template",{slot:"no-data"},[a("data-table-no-data",{attrs:{loading:e.loading,search:e.filter.search}})],1)],2)],1),a("v-bottom-sheet",{attrs:{scrollable:"",persistent:""},model:{value:e.openRequestDetail,callback:function(t){e.openRequestDetail=t},expression:"openRequestDetail"}},[e.openRequestDetail?a("others-detail",{attrs:{as:e.as,"request-id":e.selectedRequestId,"expense-type":e.expenseType},on:{close:function(t){e.openRequestDetail=!1,e.loadDataTableChange()},create:function(t){e.openRequestDetail=!1,e.loadDataTableChange()}}}):e._e()],1),a("v-bottom-sheet",{attrs:{scrollable:"",persistent:""},model:{value:e.travelRequestDetail,callback:function(t){e.travelRequestDetail=t},expression:"travelRequestDetail"}},[e.travelRequestDetail?a("cancel-request-detail",{attrs:{as:e.as,"request-id":e.selectedRequestId},on:{close:function(t){e.travelRequestDetail=!1,e.loadDataTableChange()},create:function(t){e.travelRequestDetail=!1,e.loadDataTableChange()}}}):e._e()],1)],1)},n=[],i=a("5530"),o=(a("ac1f"),a("841c"),a("4de4"),a("caad"),a("17cc")),r=a("cf45"),l=a("a51f"),c=a("e4bf"),d=a("6e28"),u=a("ac94"),v=a("2f62"),m=a("ef8c"),p=a("02cb"),_=a("c44a"),f=a("1806"),h=a("e88d"),x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.requestDetail.advance_expense?a("v-card",[a("vue-card-title",{attrs:{title:"View Travel Expenses Cancel Request Details",subtitle:"Here you can view travel expense cancel request detail",icon:"mdi-eye",dark:""}},[a("template",{slot:"actions"},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-btn",e._g({attrs:{icon:"",dark:""},on:{click:function(t){return e.downloadPdf(e.$refs.request_detail,"p",e.requestDetail.advance_code)}}},s),[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-download-outline")}})],1)]}}],null,!1,3931237658)},[a("span",[e._v(" Download Pdf ")])]),a("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){return e.$emit("close")}}},[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-close")}})],1)],1)],2),a("v-card-text",{staticClass:"scrollbar-md"},[a("v-container",{ref:"request_detail",staticClass:"px-6"},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{staticClass:"download-only pb-6",attrs:{md:"12",cols:"12"}},[a("div",{staticClass:"text-h5 text-center"},[e._v(" Travel Authorization and Advance Request Cancel Form ")])]),a("v-col",{attrs:{md:"4",cols:"6"}},[a("div",{staticClass:"font-weight-medium"},[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-account")}}),e._v(" Requested By ")],1),a("vue-user",{staticClass:"mx-5",attrs:{user:e.requestDetail.advance_expense.employee}})],1),a("v-col",{attrs:{md:"4",cols:"6"}},[a("div",{staticClass:"font-weight-medium"},[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-information-outline")}}),e._v(" TAARF Number ")],1),a("div",{staticClass:"mx-5 black--text"},[e._v(" "+e._s(e.requestDetail.advance_expense.advance_code||"N/A")+" ")])]),a("v-col",{attrs:{md:"4",cols:"6"}},[a("div",{staticClass:"font-weight-medium"},[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-information-outline")}}),e._v(" Reason for Travel ")],1),a("div",{staticClass:"mx-5 black--text"},[e._v(" "+e._s(e.requestDetail.advance_expense.reason)+" ")])]),a("v-col",{attrs:{md:"4",cols:"6"}},[a("div",{staticClass:"font-weight-medium"},[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-calendar")}}),e._v(" Requested Date ")],1),e.requestDetail.advance_expense.created_at?a("div",{staticClass:"mx-5 black--text"},[e._v(" "+e._s(e.requestDetail.advance_expense.created_at.substring(0,10)||"N/A")+" ")]):e._e(),a("div",{staticClass:"mx-5"},[e._v(" "+e._s(e.$dayjs(e.requestDetail.advance_expense.created_at).format("hh:mm:ss a"))+" ")])]),a("v-col",{attrs:{md:"4",cols:"6"}},[a("div",{staticClass:"font-weight-medium"},[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-information-outline")}}),e._v(" Type ")],1),a("div",{staticClass:"mx-5 black--text"},[e._v(" "+e._s(e.requestDetail.advance_expense.type)+" ")])]),a("v-col",{attrs:{md:"4",cols:"6"}},[a("div",{staticClass:"font-weight-medium"},[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-information-outline")}}),e._v(" Currency ")],1),a("div",{staticClass:"mx-5 black--text"},[e._v(" "+e._s(e.requestDetail.advance_expense.currency)+" ")])]),a("v-col",{attrs:{md:"4",cols:"6"}},[a("div",{staticClass:"font-weight-medium"},[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-file")}}),e._v(" Attachments ")],1),e.requestDetail.advance_expense.documents&&e.requestDetail.advance_expense.documents.length?e._l(e.requestDetail.advance_expense.documents,(function(t,s){return a("div",{key:s,staticClass:"mx-5 black--text"},[e._v(" "+e._s(s+1+". "+t.name)+" "),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(s){var n=s.on;return[a("v-icon",e._g({staticClass:"pointer",attrs:{color:"blue",small:""},domProps:{textContent:e._s("mdi-file-download-outline")},on:{click:function(a){return e.openAttachments(t.attachment)}}},n))]}}],null,!0)},[a("span",[e._v(" View/Download ")])])],1)})):a("div",{staticClass:"mx-5 black--text"},[e._v("No File Uploaded")])],2),a("v-col",{attrs:{md:"4",cols:"6"}},[a("div",{staticClass:"font-weight-medium"},[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-account-box-multiple-outline")}}),e._v(" Associate Employees ")],1),a("div",{staticClass:"mx-5 black--text"},[a("user-thumbnails",{attrs:{users:e.requestDetail.advance_expense.associates,"total-users":e.requestDetail.advance_expense.associates?e.requestDetail.advance_expense.associates.length:0},on:{showMore:function(t){e.showMoreUsers=!0}}})],1)]),a("v-col",{attrs:{md:"4"}}),a("v-col",{attrs:{md:"12",cols:"12"}},[a("div",{staticClass:"font-weight-medium"},[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-information-outline")}}),e._v(" Description ")],1),a("div",{staticClass:"mx-5 black--text"},[e._v(" "+e._s(e.requestDetail.advance_expense.description||"N/A")+" ")])]),a("v-col",{attrs:{md:"12",cols:"12"}},[a("detail-table",{attrs:{"hide-item":"Bill","action-data":e.requestDetail.advance_expense,currency:e.requestDetail.advance_expense.currency,as:e.as,recipient:e.recipient,"request-id":e.requestId,"edit-advance-amount":""},on:{close:function(t){return e.$emit("close")},refresh:function(t){return e.fetchRequestDetail()}}})],1),e.requestDetail.advance_expense.travel_request&&!e.isObjectEmpty(e.requestDetail.advance_expense.travel_request)?a("v-col",{attrs:{cols:"12"}},[a("v-card",{attrs:{outlined:""}},[a("v-col",{attrs:{md:"12",cols:"12"}},[a("div",{staticClass:"mx-1 font-weight-bold"},[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-send-outline")}}),e._v(" Travel Request ")],1)]),a("v-row",{staticClass:"mx-2"},[a("v-col",{attrs:{cols:"12",md:"3"}},[a("div",{staticClass:"font-weight-medium"},[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-calendar-month-outline")}}),e._v(" From Date : ")],1),a("div",{staticClass:"font-weight-bold pl-5",domProps:{textContent:e._s(e.requestDetail.advance_expense.travel_request.start)}})]),a("v-col",{attrs:{cols:"12",md:"3"}},[a("div",{staticClass:"font-weight-medium"},[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-calendar-month-outline")}}),e._v(" Start Time : ")],1),a("div",{staticClass:"font-weight-bold pl-5",domProps:{textContent:e._s(e.requestDetail.advance_expense.travel_request.start_time)}})]),a("v-col",{attrs:{cols:"12",md:"3"}},[a("div",{staticClass:"font-weight-medium"},[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-calendar-month-outline")}}),e._v(" To Date : ")],1),a("div",{staticClass:"font-weight-bold pl-5",domProps:{textContent:e._s(e.requestDetail.advance_expense.travel_request.end)}})]),a("v-col",{attrs:{cols:"12",md:"3"}},[a("div",{staticClass:"font-weight-medium"},[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-calendar-month-outline")}}),e._v(" End Time : ")],1),a("div",{staticClass:"font-weight-bold pl-5",domProps:{textContent:e._s(e.requestDetail.advance_expense.travel_request.end_time)}})])],1)],1)],1):e._e(),a("v-col",{attrs:{md:"12",cols:"12"}},[a("div",{staticClass:"font-weight-medium"},[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-information-outline")}}),e._v(" Remarks: ")],1),a("div",{staticClass:"mx-5 black--text"},[e._v(" "+e._s(e.requestDetail.advance_expense.remarks||"N/A")+" ")])]),["Requested","Approved","Canceled"].includes(e.requestDetail.advance_expense.status)?a("v-col",{attrs:{cols:"12"}},[a("signature-component",{attrs:{"approvals-detail":e.requestDetail.approvals,status:e.requestDetail.advance_expense.status,history:e.requestDetail.advance_expense.history,user:e.requestDetail.advance_expense.employee}})],1):e._e()],1),a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12"}},[a("supervisor-level-detail",{attrs:{"approvals-detail":e.requestDetail.approvals}})],1),e.requestDetail.advance_expense.history&&e.requestDetail.advance_expense.history.length?a("v-col",{staticClass:"blue-grey lighten-5",attrs:{cols:"12"}},[a("timeline-history",{attrs:{"history-detail":e.requestDetail.advance_expense.history}})],1):e._e()],1)],1)],1),["hr","approver"].includes(e.as)?a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"black--text",attrs:{text:"","data-cy":"btn-cancel"},on:{click:function(t){return e.$emit("close")}}},[e._v(" Cancel ")]),["approver"].includes(e.as)&&["Approved"].includes(e.requestDetail.advance_expense.status)&&e.recipient||["hr"].includes(e.as)&&["Requested"].includes(e.requestDetail.status)?a("v-btn",{staticClass:"white--text",attrs:{"data-cy":"btn-proceed",depressed:"",color:"primary"},on:{click:function(t){e.showActionForm=!0}}},[e._v(" Proceed ")]):e._e()],1):e._e(),e.showMoreUsers?a("user-list-dialog",{attrs:{users:e.requestDetail.advance_expense.associates},on:{close:function(t){e.showMoreUsers=!1}},model:{value:e.showMoreUsers,callback:function(t){e.showMoreUsers=t},expression:"showMoreUsers"}}):e._e(),e.showActionForm?a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.showActionForm,callback:function(t){e.showActionForm=t},expression:"showActionForm"}},[a("cancel-proceed",{attrs:{as:e.as,"request-detail":e.requestDetail,"request-id":e.requestId},on:{close:function(t){e.showActionForm=!1},update:function(t){e.showActionForm=!1,e.$emit("close")}}})],1):e._e()],1):e._e()},b=[],g=(a("a9e3"),a("159b"),a("cde3")),C=a("6a79"),q=a("4c75"),y=a("9815"),D=a("70da"),w=a("d242"),k=a("0eb3"),A=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("vue-card-title",{attrs:{title:"Advance Expense Cancel Request",subtitle:"",icon:"mdi-file-document-outline",closable:""},on:{close:function(t){return e.$emit("close")}}}),a("v-divider"),e.nonFieldErrors?a("non-field-form-errors",{attrs:{"non-field-errors":e.nonFieldErrors}}):e._e(),a("v-card-text",{staticClass:"scrollbar-md"},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"12"}},[e._v(" Select Your Action *: "),a("v-btn-toggle",{staticClass:"mt-3",attrs:{mandatory:"",text:""},model:{value:e.actionButtonToggle,callback:function(t){e.actionButtonToggle=t},expression:"actionButtonToggle"}},[["approver"].includes(e.as)?a("v-btn",{class:"approve"===e.actionButtonToggle?"cyan white--text":"text-capitalize",attrs:{small:"",value:"approve","data-cy":"btn-approve"}},[e._v(" Approve ")]):e._e(),["approver"].includes(e.as)||["hr"].includes(e.as)&&["Requested"].includes(e.requestDetail.status)?a("v-btn",{class:"deny"===e.actionButtonToggle?"red white--text":"text-capitalize",attrs:{value:"deny",small:"","data-cy":"btn-deny"}},[e._v(" Deny ")]):e._e()],1)],1),["approve"].includes(e.actionButtonToggle)?a("v-col",{attrs:{cols:"12"}},[a("v-checkbox",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required|true",expression:"'required|true'"}],attrs:{label:"Use your default signature *"},model:{value:e.formValues.add_signature,callback:function(t){e.$set(e.formValues,"add_signature",t)},expression:"formValues.add_signature"}},"v-checkbox",e.veeValidate("add_signature","Signature"),!1))],1):e._e(),a("v-col",{attrs:{cols:"12"}},[a("v-textarea",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required|max:255",expression:"'required|max:255'"}],attrs:{counter:"255","prepend-inner-icon":"mdi-file-document-outline"},model:{value:e.formValues.remarks,callback:function(t){e.$set(e.formValues,"remarks",t)},expression:"formValues.remarks"}},"v-textarea",e.veeValidate("remarks","Remarks *"),!1))],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"black--text",attrs:{text:"",small:""},on:{click:function(t){return e.$emit("close")}}},[e._v(" Cancel ")]),a("v-btn",{attrs:{"data-cy":"btn-save",color:"primary",small:""},on:{click:function(t){return e.changeStatus()}}},[e._v(" Save ")])],1)],1)},T=[],V=a("1da1"),R=(a("96cf"),a("99af"),a("ab8a")),P=a("7bb1");P["b"].Validator.extend("true",{getMessage:function(e){return e+" must be selected to use your default signature."},validate:function(e){return!0===e}});var F={components:{NonFieldFormErrors:R["default"]},mixins:[_["a"]],props:{as:{type:String,default:""},requestId:{type:[String,Number],default:""},requestDetail:{type:Object,default:function(){return{}}}},data:function(){return{actionButtonToggle:"",formValues:{}}},methods:{changeStatus:function(){var e=this;return Object(V["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.validateAllFields();case 2:if(!t.sent){t.next=4;break}e.$http.post(d["a"].cancelAction(e.getOrganizationSlug,e.requestId,e.actionButtonToggle)+"?as=".concat(e.as||"","&cancel-id=").concat(e.requestDetail.id),e.getFormValues()).then((function(){setTimeout((function(){e.notifyUser("Successfully ".concat(e.actionButtonToggle," expense request."))}),1e3),e.$emit("update")})).catch((function(t){e.pushErrors(t),e.notifyInvalidFormResponse()}));case 4:case"end":return t.stop()}}),t)})))()},getFormValues:function(){return this.formValues}}},S=F,$=a("2877"),E=a("6544"),U=a.n(E),B=a("8336"),N=a("a609"),I=a("b0af"),O=a("99d9"),M=a("ac7c"),j=a("62ad"),z=a("ce7e"),H=a("0fd9b"),L=a("2fa4"),Y=a("a844"),J=Object($["a"])(S,A,T,!1,null,null,null),Q=J.exports;U()(J,{VBtn:B["a"],VBtnToggle:N["a"],VCard:I["a"],VCardActions:O["a"],VCardText:O["c"],VCheckbox:M["a"],VCol:j["a"],VDivider:z["a"],VRow:H["a"],VSpacer:L["a"],VTextarea:Y["a"]});var W={components:{CancelProceed:Q,UserListDialog:y["default"],VueUser:p["default"],DetailTable:k["a"],UserThumbnails:g["default"],SupervisorLevelDetail:q["a"],SignatureComponent:D["a"],TimelineHistory:C["a"]},mixins:[w["a"]],props:{requestId:{type:[String,Number],default:""},as:{type:String,default:""}},data:function(){return{showActionForm:!1,showMoreUsers:!1,requestDetail:{},recipient:!1}},created:function(){this.fetchRequestDetail()},methods:{fetchRequestDetail:function(){var e=this;this.$http.get(d["a"].getCancelDetail(this.getOrganizationSlug,this.requestId)+"?as=".concat(this.as,"&expense_type=travel")).then((function(t){e.requestDetail=t,e.checkRecipient(t)}))},openAttachments:function(e){window.open(e,"_blank")},checkRecipient:function(e){var t=this;e.recipient.forEach((function(e){e.id===t.getAuthStateUserId&&(t.recipient=!0)}))}}},G=W,K=a("a523"),X=a("169a"),Z=a("132d"),ee=a("3a2f"),te=Object($["a"])(G,x,b,!1,null,"18440107",null),ae=te.exports;U()(te,{VBtn:B["a"],VCard:I["a"],VCardActions:O["a"],VCardText:O["c"],VCol:j["a"],VContainer:K["a"],VDialog:X["a"],VIcon:Z["a"],VRow:H["a"],VSpacer:L["a"],VTooltip:ee["a"]});var se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.requestDetail.advance_expense?a("v-card",[a("vue-card-title",{attrs:{title:"View Advance Expenses Cancel Request Details",subtitle:"Here you can view expense cancel request detail",icon:"mdi-eye",dark:""}},[a("template",{slot:"actions"},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-btn",e._g({attrs:{icon:"",dark:""},on:{click:function(t){return e.downloadPdf(e.$refs.request_detail,"p","request")}}},s),[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-download-outline")}})],1)]}}],null,!1,433026989)},[a("span",[e._v(" Download Pdf ")])]),a("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){return e.$emit("close")}}},[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-close")}})],1)],1)],2),a("v-card-text",{staticClass:"scrollbar-md"},[a("v-container",{ref:"request_detail",staticClass:"px-6"},[a("v-row",[a("v-col",{attrs:{md:"4",cols:"6"}},[a("div",{staticClass:"font-weight-medium"},[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-account")}}),e._v(" Requested By ")],1),a("vue-user",{staticClass:"mx-5",attrs:{user:e.requestDetail.advance_expense.employee}})],1),a("v-col",{attrs:{md:"4",cols:"6"}},[a("div",{staticClass:"font-weight-medium"},[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-information-outline")}}),e._v(" TAARF Number ")],1),a("div",{staticClass:"mx-5 black--text"},[e._v(" "+e._s(e.requestDetail.advance_expense.advance_code||"N/A")+" ")])]),a("v-col",{attrs:{md:"4",cols:"6"}},[a("div",{staticClass:"font-weight-medium"},[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-calendar")}}),e._v(" Requested Date ")],1),a("div",{staticClass:"mx-5 black--text"},[e._v(" "+e._s(e.requestDetail.advance_expense.created_at?e.requestDetail.advance_expense.created_at.substring(0,10):"N/A")+" ")]),a("div",{staticClass:"mx-5"},[e._v(" "+e._s(e.$dayjs(e.requestDetail.advance_expense.created_at).format("hh:mm:ss a"))+" ")])]),a("v-col",{attrs:{md:"4",cols:"6"}},[a("div",{staticClass:"font-weight-medium"},[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-information-outline")}}),e._v(" Type ")],1),a("div",{staticClass:"mx-5 black--text"},[e._v(" "+e._s(e.requestDetail.advance_expense.type)+" ")])]),a("v-col",{attrs:{md:"4",cols:"6"}},[a("div",{staticClass:"font-weight-medium"},[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-information-outline")}}),e._v(" Reason for "+e._s(e.expenseType)+" ")],1),a("div",{staticClass:"mx-5 black--text"},[e._v(" "+e._s(e.requestDetail.advance_expense.reason)+" ")])]),a("v-col",{attrs:{md:"4",cols:"6"}},[a("div",{staticClass:"font-weight-medium"},[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-account-box-multiple-outline")}}),e._v(" Associate Employees ")],1),a("div",{staticClass:"mx-5 black--text"},[a("user-thumbnails",{attrs:{users:e.requestDetail.advance_expense.associates,"total-users":e.requestDetail.advance_expense.associates.length},on:{showMore:function(t){e.showMoreUsers=!0}}})],1)]),a("v-col",{attrs:{md:"4",cols:"6"}},[a("div",{staticClass:"font-weight-medium"},[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-file")}}),e._v(" Attachments ")],1),e.requestDetail.advance_expense.documents&&e.requestDetail.advance_expense.documents.length?e._l(e.requestDetail.advance_expense.documents,(function(t,s){return a("div",{key:s,staticClass:"mx-5 black--text"},[e._v(" "+e._s(s+1+". "+t.name)+" "),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(s){var n=s.on;return[a("v-icon",e._g({staticClass:"pointer",attrs:{color:"blue",small:""},domProps:{textContent:e._s("mdi-file-download-outline")},on:{click:function(a){return e.openAttachments(t.attachment)}}},n))]}}],null,!0)},[a("span",[e._v(" View/Download ")])])],1)})):a("div",{staticClass:"mx-5 black--text"},[e._v("No File Uploaded")])],2),a("v-col",{attrs:{md:"8",cols:"12"}},[a("div",{staticClass:"font-weight-medium"},[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-information-outline")}}),e._v(" Description ")],1),a("div",{staticClass:"mx-5 black--text"},[e._v(" "+e._s(e.requestDetail.advance_expense.description||"N/A")+" ")])]),a("v-col",{attrs:{cols:"12"}},[a("v-divider")],1),a("v-col",{attrs:{cols:"12"}},[a("div",{staticClass:"font-weight-bold blue-grey--text mb-3 text-subtitle-1"},[e._v(" Advance Expense Detail ")]),a("v-card",{attrs:{outlined:""}},[a("v-card-text",{staticClass:"pa-0"},[a("v-data-table",{attrs:{items:e.requestDetail.advance_expense.detail,"items-per-page":e.requestDetail.advance_expense.detail.length,headers:e.heading,"hide-default-footer":"","hide-default-header":""},scopedSlots:e._u([{key:"item",fn:function(t){return[a("tr",[a("td",[e._v(" "+e._s(t.index+1)+" ")]),a("td",[e._v(" "+e._s(t.item.heading)+" ")]),a("td",[e._v(" "+e._s(t.item.particulars||"N/A")+" ")]),a("td",[e._v(" "+e._s(t.item.quantity)+" ")]),a("td",[e._v(" "+e._s(t.item.rate)+" ")]),a("td",{staticClass:"text-right font-weight-bold"},[e._v(" "+e._s(e.formatCurrency(t.item.quantity*t.item.rate))+" ")]),a("td",[e._v(" "+e._s(t.item.remarks)+" ")])])]}}],null,!1,2686704284)},[a("template",{slot:"header"},[a("tr",e._l(e.heading,(function(t,s){return a("th",{key:s,staticClass:"blue-grey--text",class:"Total Amount"===t?"text-right":"text-left pl-4"},[e._v(" "+e._s(t)+" ")])})),0)])],2)],1)],1)],1),a("v-col",{staticClass:"text-right",attrs:{cols:"12"}},[a("span",{staticClass:"black--text"},[e._v("Total Amount: ")]),a("span",{staticClass:"blue-grey--text font-weight-bold"},[e._v(e._s(e.requestDetail.advance_expense.currency+". "+e.formatCurrency(e.requestDetail.advance_expense.total_amount)))])]),a("v-col",{staticClass:"text-right",attrs:{cols:"12"}},[a("span",{staticClass:"black--text"},[e._v("Advance Amount: ")]),a("span",{staticClass:"blue-grey--text font-weight-bold"},[e._v(e._s(e.requestDetail.advance_expense.currency+". "+e.formatCurrency(e.requestDetail.advance_expense.advance_amount)))]),e.checkApproverAndStatus(e.requestDetail.advance_expense)?a("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){e.openEditForm=!0}}},[a("v-icon",{attrs:{size:"20",color:"blue"},domProps:{textContent:e._s("mdi-pencil")}})],1):e._e()],1),["Requested","Approved","Canceled"].includes(e.requestDetail.advance_expense.status)?a("v-col",{attrs:{cols:"12"}},[a("div",{staticClass:"font-weight-bold blue-grey--text mb-3 text-subtitle-1"},[e._v(" Signature ")]),a("signature-component",{attrs:{"approvals-detail":e.requestDetail.approvals,status:e.requestDetail.advance_expense.status,history:e.requestDetail.advance_expense.history,user:e.requestDetail.advance_expense.employee}})],1):e._e()],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("supervisor-level-detail",{attrs:{"approvals-detail":e.requestDetail.approvals}})],1),e.requestDetail.advance_expense.history&&e.requestDetail.advance_expense.history.length?a("v-col",{staticClass:"blue-grey lighten-5",attrs:{cols:"12"}},[a("timeline-history",{attrs:{"history-detail":e.requestDetail.advance_expense.history}})],1):e._e()],1)],1)],1),["hr","approver"].includes(e.as)?a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"black--text",attrs:{"data-cy":"btn-cancel",text:""},on:{click:function(t){return e.$emit("close")}}},[e._v(" Cancel ")]),e.checkApproverAndStatus(e.requestDetail.advance_expense)||e.checkHrAndStatus(e.requestDetail.advance_expense)?a("v-btn",{staticClass:"white--text",attrs:{"data-cy":"btn-proceed",depressed:"",color:"primary"},on:{click:function(t){e.showActionForm=!0}}},[e._v(" Proceed ")]):e._e()],1):e._e(),e.showMoreUsers?a("user-list-dialog",{attrs:{users:e.requestDetail.advance_expense.associates},on:{close:function(t){e.showMoreUsers=!1}},model:{value:e.showMoreUsers,callback:function(t){e.showMoreUsers=t},expression:"showMoreUsers"}}):e._e(),e.showActionForm?a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.showActionForm,callback:function(t){e.showActionForm=t},expression:"showActionForm"}},[a("cancel-proceed",{attrs:{as:e.as,"request-detail":e.requestDetail,"request-id":e.requestId},on:{close:function(t){e.showActionForm=!1},update:function(t){e.showActionForm=!1,e.$emit("close")}}})],1):e._e(),a("v-dialog",{attrs:{persistent:"",scrollable:"",width:"520"},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.openEditForm=!1}},model:{value:e.openEditForm,callback:function(t){e.openEditForm=t},expression:"openEditForm"}},[e.openEditForm?a("advance-amount-form",{attrs:{"advance-amount":e.requestDetail.advance_expense.advance_amount,"request-id":e.requestId,as:e.as},on:{close:function(t){e.openEditForm=!1},update:function(t){e.openEditForm=!1,e.fetchRequestDetail()}}}):e._e()],1)],1):e._e()},ne=[],ie=a("3d99"),oe={components:{CancelProceed:Q,UserListDialog:y["default"],VueUser:p["default"],UserThumbnails:g["default"],SupervisorLevelDetail:q["a"],SignatureComponent:D["a"],TimelineHistory:C["a"],AdvanceAmountForm:ie["a"]},mixins:[_["a"],w["a"]],props:{requestId:{type:[String,Number],default:""},as:{type:String,default:""},expenseType:{type:String,default:""}},data:function(){return{heading:["SN","Heading","Particular","Quantity","Rate","Total Amount","Remarks"],showMoreUsers:!1,showActionForm:!1,openEditForm:!1,recipient:!1,requestDetail:{detail:[]},remarks:""}},created:function(){this.fetchRequestDetail()},methods:{formatCurrency:r["d"],fetchRequestDetail:function(){var e=this;this.$http.get(d["a"].getOtherDetail(this.getOrganizationSlug,this.requestId)+"?as=".concat(this.as,"&expense_type=").concat(this.expenseType)).then((function(t){e.requestDetail=t,e.checkRecipient(t)}))},openAttachments:function(e){window.open(e,"_blank")},checkRecipient:function(e){var t=this;e.recipient.forEach((function(e){e.id===t.getAuthStateUserId&&(t.recipient=!0)}))},checkApproverAndStatus:function(e){return"approver"===this.as&&"Approved"==e.status&&this.recipient},checkHrAndStatus:function(e){return"hr"===this.as&&["Requested","Approved"].includes(e.status)}}},re=oe,le=a("8fea"),ce=Object($["a"])(re,se,ne,!1,null,"6aad2879",null),de=ce.exports;U()(ce,{VBtn:B["a"],VCard:I["a"],VCardActions:O["a"],VCardText:O["c"],VCol:j["a"],VContainer:K["a"],VDataTable:le["a"],VDialog:X["a"],VDivider:z["a"],VIcon:Z["a"],VRow:H["a"],VSpacer:L["a"],VTooltip:ee["a"]});var ue={requestTypes:["Travel","Business","Medical","Other"],components:{OthersDetail:de,CancelRequestDetail:ae,ApprovalChip:h["a"],VueContextMenu:c["default"],DataTableNoData:l["default"],DateFilterMenu:u["a"],VueUsersAutoComplete:m["default"],VueUser:p["default"]},mixins:[o["a"],_["a"],f["a"]],props:{heading:{type:Object,default:function(){return{}}},as:{type:String,default:""},endpoint:{type:String,default:null}},tabs:{Requested:"orange",Approved:"green",Denied:"red",All:"blue"},data:function(){return{deleteNotification:{dialog:!1},expenseType:"",settleExpenseDetail:{},showSettleForm:!1,showSettleTravelExpenseForm:!1,headers:[{text:"Employee Name",align:"left",value:"employee"},{text:"Reason for Advance",align:"left",value:"reason"},{text:"Requested Total Amount",value:"total_amount"},{text:"Requested Date",align:"left",value:"created_at"},{text:"Type",align:"left",value:"type",sortable:!0},{text:"Status",align:"center",sortable:!1},{text:"Action",align:"",sortable:!1}],selectedRequestId:"",openRequestForm:!1,openNewRequestForm:!1,formType:"",crud:{endpoint:{common:""},id:"id",dataTableFetch:!0},openRequestDetail:!1,travelRequestDetail:!1,openTravelAttendanceForm:!1,selectedTab:"Requested",counts:{},rowsPerPageItems:[10,20,30,40,50],filter:{search:"",type:"",user:"",show:!1},dateFilter:{},activeTab:0,loading:!1,remarks:""}},computed:{DataTableFilter:function(){return{search:this.filter.search||"",type:this.filter.type||"",as:this.as||"",status:"All"===this.selectedTab?"":this.selectedTab,employee:this.filter.user||"",from_date:this.dateFilter.start_date||"",to_date:this.dateFilter.end_date||""}}},created:function(){this.crud.endpoint.common=this.endpoint||d["a"].getCancelRequest(this.getOrganizationSlug),["hr","approver"].includes(this.as)||this.headers.shift()},methods:Object(i["a"])(Object(i["a"])({},Object(v["d"])({setSnackbar:"common/setSnackBar"})),{},{formatCurrency:r["d"],openViewForm:function(e,t){this.selectedRequestId=e,"Travel"===t?this.travelRequestDetail=!0:(this.openRequestDetail=!0,this.expenseType=t)},getTime:function(e){return this.$dayjs(e).format("hh:mm:ss a")}})},ve=ue,me=a("288c"),pe=a("cc20"),_e=a("b974"),fe=a("0789"),he=a("71a3"),xe=a("fe57"),be=Object($["a"])(ve,s,n,!1,null,null,null);t["a"]=be.exports;U()(be,{VBottomSheet:me["a"],VBtn:B["a"],VCard:I["a"],VChip:pe["a"],VCol:j["a"],VDataTable:le["a"],VDivider:z["a"],VIcon:Z["a"],VRow:H["a"],VSelect:_e["a"],VSlideYTransition:fe["g"],VTab:he["a"],VTabs:xe["a"]})},"63c8":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vue-page-wrapper",{attrs:{title:e.htmlTitle,"bread-crumbs":e.breadCrumbItems}},[a("cancel-data-table",{attrs:{heading:{title:"Advance Cancel Request History.",subheading:"This table contains list of cancel advance expense request."}}})],1)},n=[],i=a("0549"),o=a("47c9"),r={components:{VuePageWrapper:i["default"],CancelDataTable:o["a"]},data:function(){return{htmlTitle:"Advance Expense Request | User",breadCrumbItems:[{text:"Expense management",disabled:!0},{text:"Advance Request",disabled:!0}]}}},l=r,c=a("2877"),d=Object(c["a"])(l,s,n,!1,null,"4b716df9",null);t["default"]=d.exports}}]);