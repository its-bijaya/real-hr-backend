(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages/user/events/_id/posts/_postId/index","chunk-31f8a6e6"],{"0151":function(t,e,n){"use strict";n("a7ef")},"0549":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-row",{staticClass:"mb-3",attrs:{"no-gutters":""}},[t.breadCrumbs?n("v-col",{attrs:{cols:"12"}},[n("v-card",{attrs:{flat:""}},[n("v-breadcrumbs",{staticClass:"text-body-1 pa-2",class:{"text-caption pa-1":t.$vuetify.breakpoint.xs},attrs:{items:t.breadCrumbs},scopedSlots:t._u([{key:"item",fn:function(e){return[n("span",{class:e.item.disabled?"grey--text":"baseColor--text text--accent-2 pointer",domProps:{textContent:t._s(e.item.text)},on:{click:function(n){return t.$router.push(e.item.to)}}})]}}],null,!1,1670153796)},[n("v-icon",{attrs:{slot:"divider"},slot:"divider"},[t._v("mdi-chevron-right")])],1)],1)],1):t._e()],1),n("v-row",{attrs:{"no-gutters":""}},[n("v-col",{attrs:{cols:"12"}},[t._t("default")],2)],1)],1)},o=[],s=n("5530"),a=(n("ac1f"),n("1276"),n("b0c0"),n("2f62")),r={props:{title:{type:String,required:!0},breadCrumbs:{type:Array,default:function(){return[]}}},computed:Object(s["a"])({},Object(a["c"])({getOrganizationName:"organization/getOrganizationName",getSupervisorSwitchedOrganization:"supervisor/getSwitchedOrganization"})),mounted:function(){document.title="".concat(this.title," | RealHRsoft");var t=this.$route.params.slug?"admin-slug-dashboard":"root",e=this.$route.name.split("-"),n=this.getOrganizationName;this.getSupervisorSwitchedOrganization&&"user"===e[0]&&"supervisor"===e[1]&&(n=this.getSupervisorSwitchedOrganization.name),this.breadCrumbs.unshift({text:n,disabled:!1,to:{name:t,params:{slug:this.$route.params.slug}}})}},c=r,d=n("2877"),l=n("6544"),m=n.n(l),u=n("2bc5"),p=n("b0af"),h=n("62ad"),f=n("132d"),v=n("0fd9b"),g=Object(d["a"])(c,i,o,!1,null,null,null);e["default"]=g.exports;m()(g,{VBreadcrumbs:u["a"],VCard:p["a"],VCol:h["a"],VIcon:f["a"],VRow:v["a"]})},"0f05":function(t,e,n){"use strict";n("99af");e["a"]={getEvents:"/event/",postEvent:"/event/",patchEvent:function(t){return"/event/".concat(t,"/")},deleteEvent:function(t){return"/event/".concat(t,"/")},acceptEvent:function(t){return"/event/".concat(t,"/accept/")},getEventByEventId:function(t){return"/event/".concat(t,"/")},getEventPostsByEventId:function(t){return"/event/".concat(t,"/post/")},getTopLikes:function(t){return"/event/".concat(t,"/top-likes/")},getTopComments:function(t){return"/event/".concat(t,"/top-comments/")},submitEventPost:"/noticeboard/posts/",updateComment:function(t,e){return"/noticeboard/post/comment/".concat(t,"/").concat(e,"/")},toggleEvent:function(t){return"/event/".concat(t,"/")},postAttachment:function(t){return"/event/".concat(t,"/meeting/document/")},getAttachments:function(t){return"/event/".concat(t,"/meeting/document/")},deleteAttachment:function(t,e){return"/event/".concat(t,"/meeting/document/").concat(e)},getMeetingEvent:function(t){return"/event/".concat(t,"/meeting/")},getExportEventDetails:function(t){return"/event/event/".concat(t,"/export-event-details/")},postMeetingInformation:function(t,e){return"/event/".concat(t,"/meeting/agenda/").concat(e,"/")},getAgendaById:function(t,e){return"/event/".concat(t,"/meeting/agenda/").concat(e,"/")},getAgendaComments:function(t){return"/event/meeting/agenda/".concat(t,"/comment/")},postAgendaComments:function(t){return"/event/meeting/agenda/".concat(t,"/comment/")},updateAgendaComments:function(t,e){return"/event/meeting/agenda/".concat(t,"/comment/").concat(e,"/")},deleteAgendaComments:function(t,e){return"/event/meeting/agenda/".concat(t,"/comment/").concat(e,"/")},getAllAgendas:function(t){return"/event/".concat(t,"/meeting/agenda/")},updateAgenda:function(t,e){return"/event/".concat(t,"/meeting/agenda/").concat(e,"/")},deleteAgenda:function(t,e){return"/event/".concat(t,"/meeting/agenda/").concat(e,"/")},postOtherInformation:function(t){return"/event/event/".concat(t,"/")},prepareMeeting:function(t){return"/event/event/".concat(t,"/")},acknowledgeMeeting:function(t){return"/event/".concat(t,"/meeting/acknowledge/")},createTask:function(t,e){return"event/".concat(t,"/meeting/agenda/").concat(e,"/task/")},removeMember:function(t,e){return"/event/".concat(t,"/member/").concat(e)}}},"2bc5":function(t,e,n){"use strict";var i=n("5530"),o=(n("a15b"),n("abd3"),n("ade3")),s=n("1c87"),a=n("58df"),r=Object(a["a"])(s["a"]).extend({name:"v-breadcrumbs-item",props:{activeClass:{type:String,default:"v-breadcrumbs__item--disabled"},ripple:{type:[Boolean,Object],default:!1}},computed:{classes:function(){return Object(o["a"])({"v-breadcrumbs__item":!0},this.activeClass,this.disabled)}},render:function(t){var e=this.generateRouteLink(),n=e.tag,o=e.data;return t("li",[t(n,Object(i["a"])(Object(i["a"])({},o),{},{attrs:Object(i["a"])(Object(i["a"])({},o.attrs),{},{"aria-current":this.isActive&&this.isLink?"page":void 0})}),this.$slots.default)])}}),c=n("80d2"),d=Object(c["i"])("v-breadcrumbs__divider","li"),l=n("7560");e["a"]=Object(a["a"])(l["a"]).extend({name:"v-breadcrumbs",props:{divider:{type:String,default:"/"},items:{type:Array,default:function(){return[]}},large:Boolean},computed:{classes:function(){return Object(i["a"])({"v-breadcrumbs--large":this.large},this.themeClasses)}},methods:{genDivider:function(){return this.$createElement(d,this.$slots.divider?this.$slots.divider:this.divider)},genItems:function(){for(var t=[],e=!!this.$scopedSlots.item,n=[],i=0;i<this.items.length;i++){var o=this.items[i];n.push(o.text),e?t.push(this.$scopedSlots.item({item:o})):t.push(this.$createElement(r,{key:n.join("."),props:o},[o.text])),i<this.items.length-1&&t.push(this.genDivider())}return t}},render:function(t){var e=this.$slots.default||this.genItems();return t("ul",{staticClass:"v-breadcrumbs",class:this.classes},e)}})},"6a44":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("vue-page-wrapper",{attrs:{title:t.htmlTitle,"bread-crumbs":t.breadCrumbItems}},[t.fetched?n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-row",[n("v-col",{attrs:{md:"8",cols:"12"}},[n("individual-post",{attrs:{"post-instance":t.post,pinned:t.post.pinned}})],1)],1)],1)],1):t._e()],1)},o=[],s=n("0549"),a=n("8190"),r={components:{IndividualPost:a["a"],VuePageWrapper:s["default"]},data:function(){return{htmlTitle:"Individual Notice",breadCrumbItems:[{text:"Calendar & Event",disabled:!0},{text:"Event",disabled:!0}],post:{},id:this.$route.params.postId,fetched:!1}},created:function(){this.init()},methods:{init:function(){var t=this;this.$http.get("/noticeboard/posts/".concat(this.id,"/")).then((function(e){t.fetched=!0,t.post=e}))}}},c=r,d=n("2877"),l=n("6544"),m=n.n(l),u=n("62ad"),p=n("0fd9b"),h=Object(d["a"])(c,i,o,!1,null,null,null);e["default"]=h.exports;m()(h,{VCol:u["a"],VRow:p["a"]})},"6d3b":function(t,e,n){"use strict";n("e455")},7479:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-row",{staticClass:"pa-3"},[n("v-col",{staticClass:"py-0",attrs:{cols:"1"}},[n("v-avatar",{attrs:{size:"35"}},[n("v-img",{attrs:{src:t.comment.commented_by.profile_picture}})],1)],1),n("v-col",{staticClass:"pa-0"},[n("div",[n("a",{staticClass:"ml-3",domProps:{textContent:t._s(t.comment.commented_by.full_name)},on:{click:function(e){return t.viewProfileDetail(t.comment.commented_by.id)}}}),n("span",{staticClass:"grey--text text-caption pl-2",domProps:{textContent:t._s(t.humanizeDate(t.comment.created_at))}}),t.humanizedTime(t.comment.created_at)!==t.humanizedTime(t.comment.modified_at)?n("span",{domProps:{textContent:t._s(" - Edited")}}):t._e(),t.isHrAdmin||(t.editComment||!t.isAuthorized)&&t.eventCreatorId!==t.getAuthStateUser.user.id?t._e():n("v-menu",{attrs:{bottom:"",right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("v-icon",t._g({attrs:{small:""},domProps:{textContent:t._s("mdi-menu-down")}},i))]}}],null,!1,699550511)},[n("v-list",[t.isAuthorized?n("v-list-item",{on:{click:function(e){t.update.text=t.comment.content,t.editComment=!0,t.update.image.url=t.comment.image}}},[n("v-list-item-title",[n("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-pencil")}}),n("span",{domProps:{textContent:t._s("Update "+(t.isReply?"Reply":"Comment"))}})],1)],1):t._e(),t.eventCreatorId===t.getAuthStateUser.user.id||t.comment.commented_by.id===t.getAuthStateUser.user.id?n("v-list-item",{on:{click:function(e){t.deleteNotification.dialog=!0}}},[n("v-list-item-title",[n("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-delete")}}),n("span",{domProps:{textContent:t._s("Delete "+(t.isReply?"Reply":"Comment"))}})],1)],1):t._e()],1)],1)],1),t.editComment?t._e():n("div",{staticClass:"ml-3",domProps:{textContent:t._s(t.comment.content)}}),t.comment.image&&!t.editComment?n("div",{staticClass:"my-1 mt-3 ml-3"},[n("v-img",{attrs:{height:150,width:150,src:t.comment.image},on:{click:function(e){t.attachments=[t.comment],t.showImageViewer=!0}}})],1):t._e(),t.editComment?n("div",[n("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"append-icon":t.isReply?"":"mdi-camera","hide-details":""},on:{"click:append":function(e){return t.$refs.updateImage.click()}},model:{value:t.update.text,callback:function(e){t.$set(t.update,"text",e)},expression:"update.text"}}),n("input",{ref:"updateImage",staticClass:"d-none",attrs:{type:"file",accept:"image/*"},on:{change:t.addCommentImage}}),t.update.image.url?n("v-row",{attrs:{justify:"start"}},[n("v-img",{attrs:{height:150,src:t.update.image.url}},[n("v-icon",{domProps:{textContent:t._s("mdi-close")},on:{click:function(e){t.update.image.url=null}}})],1),n("v-spacer")],1):t._e()],1):t._e(),t.editComment?n("v-row",{attrs:{align:"center"}},[n("v-btn",{attrs:{disabled:t.update.text===t.comment.content&&t.update.image.url===t.comment.image,small:"",depressed:"",color:"primary"},domProps:{textContent:t._s("Save")},on:{click:function(e){t.isReply?t.updateReply():t.updateComment()}}}),n("v-btn",{attrs:{outlined:"",small:""},domProps:{textContent:t._s("Cancel")},on:{click:function(e){t.editComment=!1}}}),n("v-spacer")],1):t._e(),t.editComment?t._e():n("div",[t.isReply?t._e():n("span",{class:(t.liked?"blue":"grey")+"--text text-caption"},[n("v-btn",{attrs:{disabled:t.isHrAdmin,icon:"",small:""},on:{click:t.likeComment}},[n("v-icon",{attrs:{color:t.liked?"blue":"grey",size:12},domProps:{textContent:t._s("mdi-thumb-up")}})],1),n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[t.likesCount>0?n("span",t._g({domProps:{textContent:t._s(t.formatCount(t.likesCount))},on:{click:function(e){t.displayLikers=!0}}},i)):t._e()]}}],null,!1,4099614116)},[n("span",[t._v(" "+t._s(t.likesCount)+" ")])])],1),t.isReply?t._e():n("span",[n("v-btn",{attrs:{icon:"",small:""},on:{click:t.toggleReply}},[n("v-icon",{attrs:{size:"15"},domProps:{textContent:t._s("mdi-reply")}})],1),n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[t.repliesCount>0?n("span",t._g({domProps:{textContent:t._s(t.formatCount(t.repliesCount))}},i)):t._e()]}}],null,!1,3574287543)},[n("span",[t._v(" "+t._s(t.repliesCount)+" ")])])],1)]),t.showReply&&!t.isReply?n("v-col",[n("v-row",[t.replies.length?n("v-divider",{attrs:{vertical:""}}):t._e(),n("v-col",[t.loadingReply&&!t.replies.length?n("v-progress-linear",{attrs:{height:3,indeterminate:""}}):t._e(),t.repliesCount&&t.eventCreatorId?n("span",[t._l(t.replies,(function(e,i){return n("comment-section",{key:e.id,attrs:{"post-id":t.postId,"comment-id":t.comment.id,"is-reply":!0,"comment-instance":t.prepareReply(e),"is-hr-admin":t.isHrAdmin,"event-creator-id":t.eventCreatorId},on:{delete:function(e){t.replies.splice(i,1),t.repliesCount-=1,t.offset-=1}}})})),t.repliesCount>3&&t.repliesCount>t.replies.length?n("div",[n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("a",t._g({domProps:{textContent:t._s("View "+t.formatCount(t.repliesCount-t.replies.length)+" More Replies")},on:{click:t.getReplies}},i))]}}],null,!1,1274894366)},[n("span",[t._v(" "+t._s(t.repliesCount-t.replies.length)+" ")])])],1):t._e()],2):t._e(),n("v-divider"),t.isReply?t._e():n("v-col",[n("v-row",{attrs:{align:"center","no-gutters":""}},[n("v-col",{staticClass:"pa-0",attrs:{md:"1"}},[n("v-avatar",{attrs:{size:"25"}},[n("v-img",{attrs:{src:t.getAuthStateUser.user.profile_picture}})],1)],1),n("v-col",[n("v-text-field",{staticStyle:{width:"100%"},attrs:{disabled:t.isHrAdmin,placeholder:"Post a reply",type:"text"},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.postReply.apply(null,arguments))}},model:{value:t.reply,callback:function(e){t.reply=e},expression:"reply"}})],1)],1)],1)],1)],1)],1):t._e()],1)],1),n("vue-dialog",{attrs:{notify:t.deleteNotification},on:{close:function(e){t.deleteNotification.dialog=!1},agree:function(e){t.isReply?t.deleteReply():t.deleteComment()}}}),n("user-list-dialog",{attrs:{endpoint:t.userEndpoint,title:"People who liked this comment"},on:{close:function(e){t.displayLikers=!1}},model:{value:t.displayLikers,callback:function(e){t.displayLikers=e},expression:"displayLikers"}}),t.showImageViewer?n("image-viewer",{attrs:{items:t.attachments},on:{close:function(e){t.showImageViewer=!1}}}):t._e()],1)},o=[],s=n("5530"),a=(n("d3b7"),n("3ca3"),n("ddb0"),n("a9e3"),n("99af"),n("b0c0"),n("498a"),n("2f62")),r=n("9815"),c=n("ea98"),d=n("8448"),l=n("6d1c"),m=n("c44a"),u=n("0f05"),p=n("cf45"),h={name:"Comments",components:{CommentSection:function(){return Promise.resolve().then(n.bind(null,"7479"))},VueDialog:c["a"],UserListDialog:r["default"],ImageViewer:d["a"]},mixins:[m["a"],m["a"]],props:{commentInstance:{type:Object,required:!0},postId:{type:[Number,String],required:!0},commentId:{type:[Number,String],default:void 0},isReply:{type:Boolean,default:!1},isHrAdmin:{type:Boolean,default:!1},eventCreatorId:{type:[Number,String],required:!0}},data:function(){return{comment:this.deepCopy(this.commentInstance),liked:!1,likesCount:0,repliesCount:0,replies:[],showReply:!1,reply:"",offset:0,loadingReply:!1,editComment:!1,update:{text:null,image:{url:"",file:""}},displayLikers:!1,deleteNotification:{dialog:!1,heading:"Confirm Delete",text:"Are you sure you want to delete this ".concat(this.isReply?"reply?":"comment?")},userEndpoint:"",showImageViewer:!1,attachments:[],eventId:this.$route.params.id}},computed:Object(s["a"])(Object(s["a"])({},Object(a["c"])({getAuthStateUser:"auth/getAuthStateUser",getUserCategory:"organization/getUserCategory"})),{},{isAuthorized:function(){return this.comment.commented_by.id===this.getAuthStateUser.user.id}}),created:function(){this.liked=this.comment.liked_by_user,this.likesCount=this.comment.likes_count,this.repliesCount=this.comment.replies_count,this.userEndpoint=l["a"].getLikedCommentById(this.comment.id)},methods:Object(s["a"])(Object(s["a"])({},Object(a["d"])({setSnackBar:"common/setSnackBar"})),{},{formatCount:p["c"],humanizedTime:function(t){return this.$dayjs(t).format("YYYY-MM-DD hh:mm:ss")},viewProfileDetail:function(t){this.$router.push({name:"user-employee-directory-id-profile-detail",params:{id:t}})},updateComment:function(){var t=this;if(this.update.text){var e="/noticeboard/post/comment/".concat(this.postId,"/").concat(this.comment.id,"/");if(this.update.image.url){var n=new FormData;n.append("content",this.update.text),this.update.image.file&&n.append("image",this.update.image.file,this.update.image.file.name),this.$http.put(e,n).then((function(e){t.editComment=!1,t.showReply=!1,t.comment=e}))}else{var i={content:this.update.text,image:null};this.$http.put(u["a"].updateComment(this.postId,this.comment.id),i).then((function(e){t.editComment=!1,t.showReply=!1,t.comment=e}))}}else this.notifyUser("Please add a comment","red")},addCommentImage:function(t){var e=this,n=t.target.files;if(n[0]){var i=new FileReader;i.readAsDataURL(n[0]),i.addEventListener("load",(function(){e.update.image={file:n[0],url:i.result}}))}},deleteComment:function(){var t=this,e="/noticeboard/post/comment/".concat(this.postId,"/").concat(this.comment.id,"/");this.$http.delete(e).then((function(){t.setSnackBar({text:"Successfully Deleted Comment",color:"green"}),t.$emit("delete")}))},likeComment:function(){var t=this;this.liked?this.likesCount-=1:this.likesCount+=1,this.liked=!this.liked;var e="/noticeboard/post/comment/like/"+this.comment.id+"/";this.$http.post(e,{liked:this.liked}).catch((function(e){t.notifyInvalidFormResponse(e.response.data.non_field_errors[0]),t.pushErrors(e),t.liked=!t.liked,t.liked?t.likesCount+=1:t.likesCount-=1}))},toggleReply:function(){this.showReply=!this.showReply,this.showReply&&this.getReplies()},getReplies:function(){var t=this;this.loadingReply=!0;var e={offset:this.offset,limit:3},n="/noticeboard/post/comment/reply/".concat(this.comment.id,"/");this.$http.get(n,{params:e}).then((function(e){t.replies=t.replies.concat(e.results),t.loadingReply=!1,t.offset+=3}))},postReply:function(){var t=this;if(this.reply.trim()){if(this.reply.length>1e3)return void this.notifyUser("The Reply field may not be greater than 1000 characters.","red");var e="/noticeboard/post/comment/reply/".concat(this.comment.id,"/");this.$http.post(e,{reply:this.reply}).then((function(e){t.replies.unshift(t.prepareReply(e)),t.reply="",t.repliesCount+=1})).catch((function(e){t.notifyInvalidFormResponse(e.response.data.non_field_errors[0]),t.pushErrors(e)}))}else this.notifyUser("Please add a reply.","red")},updateReply:function(){var t=this,e="/noticeboard/post/comment/reply/".concat(this.commentId,"/").concat(this.comment.id,"/");this.$http.put(e,{reply:this.update.text}).then((function(e){t.comment=t.prepareReply(e),t.editComment=!1,t.setSnackBar({text:"Successfully deleted reply",color:"green"})}))},deleteReply:function(){var t=this,e="/noticeboard/post/comment/reply/".concat(this.commentId,"/").concat(this.comment.id,"/");this.$http.delete(e).then((function(){t.$emit("delete"),t.setSnackBar({text:"Successfully deleted reply",color:"green"})}))},prepareReply:function(t){return Object(s["a"])(Object(s["a"])({},t),{},{content:t.reply,commented_by:t.reply_by})}})},f=h,v=(n("6d3b"),n("2877")),g=n("6544"),y=n.n(g),b=n("8212"),_=n("8336"),C=n("62ad"),x=n("ce7e"),P=n("132d"),k=n("adda"),w=n("8860"),I=n("da13"),S=n("5d23"),N=n("e449"),R=n("8e36"),A=n("0fd9b"),$=n("2fa4"),O=n("8654"),V=n("3a2f"),z=Object(v["a"])(f,i,o,!1,null,"efb85faa",null);e["default"]=z.exports;y()(z,{VAvatar:b["a"],VBtn:_["a"],VCol:C["a"],VDivider:x["a"],VIcon:P["a"],VImg:k["a"],VList:w["a"],VListItem:I["a"],VListItemTitle:S["c"],VMenu:N["a"],VProgressLinear:R["a"],VRow:A["a"],VSpacer:$["a"],VTextField:O["a"],VTooltip:V["a"]})},8190:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"mb-3",class:t.pinned?"elevation-5":"elevation-1"},[n("v-col",[n("v-col",[n("v-row",{attrs:{align:"center"}},[n("v-avatar",{attrs:{size:35}},[n("v-img",{attrs:{src:t.getProfilePicture}})],1),n("div",["Normal Post"!==t.post.category?n("div",{staticClass:"ml-3"},[t._v(" "+t._s(t.getPostedBy)+" ")]):n("a",{staticClass:"ml-3",on:{click:function(e){return t.viewProfileDetail(t.post.posted_by.id)}}},[t._v(" "+t._s(t.post.posted_by.full_name)+" ")]),n("div",{staticClass:"grey--text"},[n("span",{staticClass:"ml-3",domProps:{textContent:t._s(t.humanizeDate(t.post.scheduled_for?t.post.scheduled_for:t.post.created_at))}}),n("v-tooltip",{attrs:{disabled:"Normal Post"===t.post.category,right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return["Normal Post"!==t.post.category?n("span",t._g({domProps:{textContent:t._s(" - "+t.post.category)}},i)):t._e()]}}])},[n("span",{domProps:{textContent:t._s("Posted By "+t.post.posted_by.full_name)}})]),t.humanizedTime(t.post.created_at)!==t.humanizedTime(t.post.modified_at)?n("span",{domProps:{textContent:t._s(" - Edited")}}):t._e()],1)]),n("v-spacer"),t.pinned?n("v-icon",{attrs:{size:"15",color:"info"},domProps:{textContent:t._s("mdi-pin-outline")}}):t._e(),t.isHrAdmin||!t.isAuthorized&&!t.isAuthorizedToPinUnpin?t._e():n("v-menu",{attrs:{bottom:"",left:"",attach:"","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("v-btn",t._g({attrs:{small:"",icon:""}},i),[n("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-dots-vertical")}})],1)]}}],null,!1,1191064311)},[n("v-list",[t.post.pinned||t.creatorId!==t.getAuthStateUser.user.id?t._e():n("v-list-item",{on:{click:function(e){t.pinNotification.dialog=!0}}},[n("v-list-item-title",[n("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-pin-outline")}}),n("span",{domProps:{textContent:t._s("Pin Post")}})],1)],1),t.post.pinned&&t.creatorId===t.getAuthStateUser.user.id?n("v-list-item",{on:{click:function(e){t.unPinNotification.dialog=!0}}},[n("v-list-item-title",[n("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-pin-outline")}}),n("span",{domProps:{textContent:t._s("Unpin Post")}})],1)],1):t._e(),t.isAuthorized?n("v-list-item",{on:{click:function(e){t.noticeText=t.post.post_content,t.editNotice=!0}}},[n("v-list-item-title",[n("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-pencil")}}),n("span",{domProps:{textContent:t._s("Update Post")}})],1)],1):t._e(),t.isAuthorized||t.creatorId===t.getAuthStateUser.user.id?n("v-list-item",{on:{click:function(e){t.deleteNotification.dialog=!0}}},[n("v-list-item-title",[n("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-delete")}}),n("span",{domProps:{textContent:t._s("Delete Post")}})],1)],1):t._e()],1)],1)],1)],1),t.editNotice?n("v-col",[t.isScheduledPost?n("div",[n("v-row",["HR Notice"===t.post.category?n("v-col",{attrs:{md:"6"}},[n("vue-date-time-picker",{attrs:{label:"HR Notice Visible Until"},model:{value:t.post.visibility_until,callback:function(e){t.$set(t.post,"visibility_until",e)},expression:"post.visibility_until"}})],1):t._e()],1),"HR Admin"===t.getUserCategory?n("v-row",[n("v-col",{attrs:{md:"6"}},[n("v-switch",{attrs:{label:"Do you want to pin this post?"},model:{value:t.post.pinned,callback:function(e){t.$set(t.post,"pinned",e)},expression:"post.pinned"}})],1),n("v-col",{attrs:{md:"6"}},[n("vue-date-time-picker",t._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{label:"Scheduled For"},model:{value:t.post.scheduled_for,callback:function(e){t.$set(t.post,"scheduled_for",e)},expression:"post.scheduled_for"}},"vue-date-time-picker",t.veeValidate("scheduled_for","Scheduled For"),!1))],1)],1):t._e(),n("v-divider")],1):t._e(),n("v-textarea",{attrs:{rows:1},model:{value:t.noticeText,callback:function(e){t.noticeText=e},expression:"noticeText"}})],1):n("div",{domProps:{innerHTML:t._s(t.getClickableLink(t.post.post_content))}}),t.url?n("link-preview",{attrs:{url:t.url}}):t._e(),n("post-attachment",{attrs:{attachments:t.post.attachments,editable:t.editNotice},on:{add:function(e){t.updatePost.newImages.files.unshift(e.file),t.updatePost.newImages.names.unshift(e.name)},delete:function(e){return t.updatePost.deletedImages.push(e)},remove:function(e){t.updatePost.newImages.files.splice(e,1),t.updatePost.newImages.names.splice(e,1)}}}),t.editNotice?n("v-row",{attrs:{align:"center"}},[n("v-spacer"),n("v-btn",{attrs:{disabled:!t.isScheduledPost&&(t.noticeText===t.post.post_content&&!t.get(t.updatePost.newImages.files,"length")&&!t.get(t.updatePost.deletedImages,"length")||t.loading),small:"",depressed:"",color:"primary"},domProps:{textContent:t._s("Save")},on:{click:t.updateNotice}}),n("v-btn",{attrs:{outlined:"",small:""},domProps:{textContent:t._s("Cancel")},on:{click:function(e){t.editNotice=!1,t.updatePost.deletedImages=[],t.updatePost.newImages={names:[],files:[]}}}})],1):t._e()],1),t.editNotice||t.isScheduledPost?t._e():n("div",[n("v-divider"),n("post-actions",{attrs:{post:t.post,"is-hr-admin":t.isHrAdmin},on:{toggleComment:function(e){t.showComment=!t.showComment}}}),n("v-slide-y-transition",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showComment,expression:"showComment"}]},[t.post.comments.data.length?n("v-divider"):t._e(),t.creatorId?n("div",t._l(t.post.comments.data,(function(e,i){return n("event-comment-section",{key:e.id,attrs:{"post-id":t.post.id,"comment-instance":e,"is-hr-admin":t.isHrAdmin,"event-creator-id":t.creatorId},on:{delete:function(e){t.post.comments.data.splice(i,1),t.post.comments.count-=1}}})})),1):t._e(),t.post.comments.count>3&&t.post.comments.count>t.post.comments.data.length?n("div",[n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("a",t._g({domProps:{textContent:t._s("View "+t.formatCount(t.post.comments.count-t.post.comments.data.length)+" More Comments")},on:{click:t.getMoreComments}},i))]}}],null,!1,3344410363)},[n("span",[t._v(" "+t._s(t.post.comments.count-t.post.comments.data.length)+" ")])])],1):t._e(),n("v-divider"),n("v-col",[n("v-row",{attrs:{"no-gutters":"",align:"center"}},[n("v-col",{attrs:{md:"1"}},[n("v-avatar",{attrs:{size:"35"}},[n("v-img",{attrs:{src:t.getAuthStateUser.user.profile_picture}})],1)],1),n("v-col",{attrs:{md:"10"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.comment.text,expression:"comment.text"}],staticStyle:{width:"100%",outline:"none"},attrs:{disabled:t.isHrAdmin,placeholder:t.$t("commentPlaceholder"),type:"text"},domProps:{value:t.comment.text},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.postComment.apply(null,arguments))},input:function(e){e.target.composing||t.$set(t.comment,"text",e.target.value)}}})]),n("v-col",{attrs:{md:"1"}},[n("input",{ref:"image",staticClass:"d-none",attrs:{type:"file",accept:"image/*"},on:{change:t.onFilePicked}}),n("v-spacer"),n("v-btn",{attrs:{disabled:t.isHrAdmin,icon:""},on:{click:function(e){return t.$refs.image.click()}}},[n("v-icon",{domProps:{textContent:t._s("mdi-camera")}})],1)],1)],1)],1),t.comment.image.file?n("v-divider"):t._e(),t.comment.image.file?n("v-col",[n("v-row",[n("v-img",{attrs:{height:200,src:t.comment.image.url,contain:""}},[n("v-btn",{attrs:{icon:"",small:""},on:{click:function(e){t.comment.image.file=null}}},[n("v-icon",{attrs:{size:"20"},domProps:{textContent:t._s("mdi-close")}})],1)],1)],1)],1):t._e()],1)])],1),n("vue-dialog",{attrs:{notify:t.deleteNotification},on:{close:function(e){t.deleteNotification.dialog=!1},agree:t.deleteNotice},model:{value:t.deleteNotification.dialog,callback:function(e){t.$set(t.deleteNotification,"dialog",e)},expression:"deleteNotification.dialog"}}),n("vue-dialog",{attrs:{notify:t.unPinNotification},on:{close:function(e){t.unPinNotification.dialog=!1},agree:t.unPinNotice},model:{value:t.unPinNotification.dialog,callback:function(e){t.$set(t.unPinNotification,"dialog",e)},expression:"unPinNotification.dialog"}}),n("vue-dialog",{attrs:{notify:t.pinNotification},on:{close:function(e){t.pinNotification.dialog=!1},agree:t.pinNotice},model:{value:t.pinNotification.dialog,callback:function(e){t.$set(t.pinNotification,"dialog",e)},expression:"pinNotification.dialog"}})],1)},o=[],s=n("1da1"),a=n("5530"),r=(n("96cf"),n("a9e3"),n("ac1f"),n("466d"),n("159b"),n("b64b"),n("a15b"),n("d3b7"),n("498a"),n("99af"),n("9646")),c=n("c44a"),d=n("0346"),l=n("152f"),m=n("ea98"),u=n("6d1c"),p=n("cf45"),h=n("2f62"),f=n("7479"),v=n("0f05"),g={components:{PostActions:r["a"],EventCommentSection:f["default"],PostAttachment:d["a"],VueDialog:m["a"],LinkPreview:l["a"]},mixins:[c["a"]],props:{postInstance:{type:Object,required:!0},pinned:{type:Boolean,default:!1},isEventEnabled:{type:Boolean,default:!1},isHrAdmin:{type:Boolean,default:!1},eventCreatorId:{type:[Number,String],default:null}},data:function(){return{post:this.deepCopy(this.postInstance),like:!1,comment:{text:"",image:{url:null,file:null},offset:3},url:"",showComment:!0,deleteNotification:{dialog:!1,heading:"Confirm Delete",text:"Are you sure you want to delete this Post?"},unPinNotification:{dialog:!1,heading:"Confirm Unpin Post",subheading:"You are about to unpin this Post. Confirm your action.",text:"Are you sure you want to unpin this Post?"},pinNotification:{dialog:!1,heading:"Confirm Pin Post",subheading:"You are about to pin this Post. Confirm your action.",text:"Are you sure you want to pin this Post?"},editNotice:!1,noticeText:" ",updatePost:{text:"",newImages:{names:[],files:[]},deletedImages:[]},loading:!1,scheduledFor:this.deepCopy(this.postInstance.scheduled_for),eventId:this.$route.params.id,event:null,creatorId:this.deepCopy(this.eventCreatorId)}},computed:Object(a["a"])(Object(a["a"])({},Object(h["c"])({getAuthStateUser:"auth/getAuthStateUser",getUserCategory:"organization/getUserCategory",getOrganizationSlug:"organization/getOrganizationSlug"})),{},{getPostedBy:function(){return"Division Notice"===this.post.category?this.post.posted_by.division:"Organization Notice"===this.post.category?this.post.posted_by.organization:"HR Notice"===this.post.category?"HR Notice":""},getProfilePicture:function(){return this.post.posted_by.profile_picture},isAuthorized:function(){return this.post.posted_by.id===this.getAuthStateUser.user.id},isAuthorizedToPinUnpin:function(){return this.creatorId===this.getAuthStateUser.user.id},getScheduledPostParam:function(){if(this.scheduledFor){var t=this.$dayjs(this.scheduledFor),e=this.$dayjs;return e.diff(t)<0?"?scheduled=True":""}return""},isScheduledPost:function(){return""!==this.getScheduledPostParam}}),created:function(){this.url=this.post.post_content.match(/\bhttps?:\/\/\S+/gi),this.creatorId||this.getEvent()},methods:Object(a["a"])(Object(a["a"])({},Object(h["d"])({setSnackBar:"common/setSnackBar"})),{},{formatCount:p["c"],getClickableLink:p["e"],viewProfileDetail:function(t){this.$router.push({name:"user-employee-directory-id-profile-detail",params:{id:t}})},updateNotice:function(){var t=this;if(this.loading=!0,this.noticeText){var e=new FormData;if(e.append("post_content",this.noticeText),e.append("pinned",this.post.pinned),this.isScheduledPost&&(e.append("category",this.post.category),e.append("scheduled_for",this.post.scheduled_for),"Division Notice"===this.post.category&&this.$http.get("/users/"+"".concat(this.getAuthStateUser.user.id)+"/experience/current/").then((function(t){t.division&&e.append("divisions",t.division.slug)})),"Organization Notice"===this.post.category&&e.append("organizations",this.getOrganizationSlug)),this.updatePost.newImages.files.length){var n=this.updatePost.newImages.files.length;Object.keys(this.updatePost.newImages.files).forEach((function(i){e.append("attachment".concat(n-i-1),t.updatePost.newImages.files[n-i-1],t.updatePost.newImages.names[n-i-1])}))}this.updatePost.deletedImages.length&&e.append("deleted_attachments",this.updatePost.deletedImages.join(", ")),this.$http.put(u["a"].patchPost(this.post.id)+this.getScheduledPostParam,e).then((function(e){t.post=e,t.updatePost={text:"",newImages:{names:[],files:[]},deletedImages:[]},t.editNotice=!1,t.$emit("refresh"),t.setSnackBar({text:"Successfully updated post.",color:"green"})})).catch((function(e){t.notifyInvalidFormResponse(),t.pushErrors(e)})).finally((function(){t.loading=!1}))}else this.notifyUser("Please write something about this post","red")},humanizeDate:function(t){return this.$dayjs(t).fromNow()},deleteNotice:function(){var t=this;this.$http.delete(u["a"].deletePostById(this.post.id)+this.getScheduledPostParam).then((function(){t.$route.params.id&&t.$router.push({path:"/user/events/"+t.eventId+"/"}),t.$emit("delete",t.post.id),t.$emit("refresh"),t.setSnackBar({text:"Successfully deleted post",color:"green"})}))},unPinNotice:function(){var t=this,e=new FormData;e.append("pinned","false"),this.$http.patch(u["a"].patchPost(this.post.id)+this.getScheduledPostParam,e).then((function(){t.$emit("refresh"),t.setSnackBar({text:"Successfully Unpinned post",color:"green"})}))},pinNotice:function(){var t=this,e=new FormData;e.append("pinned","true"),this.$http.patch(u["a"].patchPost(this.post.id),e).then((function(){t.$emit("refresh"),t.setSnackBar({text:"Successfully pinned post",color:"green"})}))},getEvent:function(){var t=this,e={as:this.isHrAdmin?"hr":"",org_slug:this.getOrganizationSlug};this.$http.get(v["a"].getEventByEventId(this.eventId)+"".concat(this.convertToURLSearchParams(e))).then((function(e){t.creatorId=e.created_by.id}))},postComment:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=new FormData,!(t.comment.text.length>1e3)){e.next=4;break}return t.notifyUser("The Comment field may not be greater than 1000 characters.","red"),e.abrupt("return");case 4:if(n.append("content",t.comment.text),t.comment.image.file&&n.append("image",t.comment.image.file),!t.comment.text.trim()&&!t.comment.image.file){e.next=11;break}return e.next=9,t.$http.post(u["a"].commentPostById(t.post.id),n).then((function(e){t.resetComment(),t.post.comments.count+=1,t.comment.offset+=1,t.post.comments.data.unshift(e)})).catch((function(e){t.notifyInvalidFormResponse(e.response.data.non_field_errors[0]),t.pushErrors(e)}));case 9:e.next=12;break;case 11:t.notifyUser("Please add a comment","red");case 12:case"end":return e.stop()}}),e)})))()},getMoreComments:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={offset:t.comment.offset,limit:5,as:t.isHrAdmin?"hr":""},e.next=3,t.$http.get(u["a"].getCommentByPostId(t.post.id),{params:n}).then((function(e){t.post.comments.data=t.post.comments.data.concat(e.results),t.comment.offset+=5}));case 3:case"end":return e.stop()}}),e)})))()},resetComment:function(){this.comment.text="",this.comment.image={url:null,file:null}},humanizedTime:function(t){return this.$dayjs(t).format("YYYY-MM-DD hh:mm:ss")},onFilePicked:function(t){var e=this,n=t.target.files;if(n[0]){var i=new FileReader;i.readAsDataURL(n[0]),i.addEventListener("load",(function(){e.comment.image.url=i.result,e.comment.image.file=n[0]}))}else this.imageName="",this.imageFile=null,this.imageUrl=""}})},y=g,b=(n("0151"),n("2877")),_=n("6544"),C=n.n(_),x=n("8212"),P=n("8336"),k=n("b0af"),w=n("62ad"),I=n("ce7e"),S=n("132d"),N=n("adda"),R=n("8860"),A=n("da13"),$=n("5d23"),O=n("e449"),V=n("0fd9b"),z=n("0789"),j=n("2fa4"),E=n("b73d"),U=n("a844"),D=n("3a2f"),T=Object(b["a"])(y,i,o,!1,null,"f1e031d6",null);e["a"]=T.exports;C()(T,{VAvatar:x["a"],VBtn:P["a"],VCard:k["a"],VCol:w["a"],VDivider:I["a"],VIcon:S["a"],VImg:N["a"],VList:R["a"],VListItem:A["a"],VListItemTitle:$["c"],VMenu:O["a"],VRow:V["a"],VSlideYTransition:z["g"],VSpacer:j["a"],VSwitch:E["a"],VTextarea:U["a"],VTooltip:D["a"]})},a7ef:function(t,e,n){},abd3:function(t,e,n){},e455:function(t,e,n){}}]);