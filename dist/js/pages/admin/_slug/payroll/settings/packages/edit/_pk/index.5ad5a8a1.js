(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages/admin/_slug/payroll/settings/packages/edit/_pk/index","chunk-26c51c79","chunk-31f8a6e6","chunk-6441e173","chunk-2d2160c2","chunk-2d2160c2","chunk-da62e0c8","chunk-2d22d378","chunk-2d213000","chunk-2d2160c2","chunk-2d2160c2","chunk-2d2160c2"],{"0139":function(e,t,a){},"0360":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.basicView?e._e():a("v-row",[a("v-col",{attrs:{cols:"11"}},[a("div",{staticClass:"px-3 blue-grey--text text--darken-2 font-weight-bold"},[e._v(" "+e._s(e.item.heading_name)+" ")])]),a("v-col",{staticClass:"pl-3",attrs:{cols:"1"}},[a("v-icon",{attrs:{size:16},domProps:{textContent:e._s(e.showDetail?"mdi-chevron-up":"mdi-chevron-down")},on:{click:function(t){e.showDetail=!e.showDetail}}})],1),a("v-col",{staticClass:"pa-0 ma-0 pr-3",attrs:{cols:"12"}},[a("v-divider")],1)],1),a("v-card-text",{staticClass:"pa-0 ma-0",class:{"scrollbar-lg":!e.basicView}},[e.nonFieldErrors.length>0?a("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"12"}},[a("non-field-form-errors",{attrs:{"non-field-errors":e.nonFieldErrors}})],1):e._e(),e.showDetail&&!e.basicView?a("v-row",[a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Order")])]),a("div",[e._v(" "+e._s(e.item.order)+" ")])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Payroll Setting Type")])]),a("div",[e._v(" "+e._s(e.item.payroll_setting_type)+" ")])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Heading Type")])]),a("div",[e._v(" "+e._s(e.item.type)+" ")])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Duration Unit")])]),a("div",[e._v(" "+e._s(e.item.duration_unit||"N/A")+" ")])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Is Taxable")])]),a("div",[a("span",{domProps:{textContent:e._s(e.item.taxable?"Yes":"No")}})])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Absent Days Impact")])]),a("div",[a("span",{domProps:{textContent:e._s(e.item.absent_days_impact?"Yes":"No")}})])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Benefit Type")])]),a("div",[e._v(" "+e._s(e.item.benefit_type||"N/A")+" ")])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Year to Date")])]),a("div",[e._v(" "+e._s(e.item.year_to_date||"False")+" ")])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Remote Work Impact")])]),a("div",[a("span",{domProps:{textContent:e._s(e.item.deduct_amount_on_remote_work?"Yes":"No")}})])])],1):e._e(),e.showDetail&&!e.basicView?a("v-divider"):e._e(),a("heading-rule",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],attrs:{"conditional-variables":e.conditional_variables,"function-variables":e.function_variables,"rule-variables":e.rule_variables,"read-only":!1,error:e.isValidRule,"enable-tds":e.enable_tds,"show-title":!0,"is-package-heading-equation":!0,"is-editable":e.item.is_editable,"is-update-package":"","basic-view":e.basicView,"trigger-update":e.triggerUpdate,"applied-class":e.appliedClass},on:{"update:error":function(t){e.isValidRule=t},"update:triggerUpdate":function(t){e.triggerUpdate=t},"update:trigger-update":function(t){e.triggerUpdate=t}},model:{value:e.item.rules,callback:function(t){e.$set(e.item,"rules",t)},expression:"item.rules"}}),a("default-svg-loader",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],attrs:{message:"Updating package rule. Please wait...","div-class":"pa-2","img-class":"my-2",height:"10"}})],1),e.basicView?e._e():a("v-divider"),e.basicView?e._e():a("v-card-actions",[a("v-col",{staticClass:"text-right"},[a("v-btn",{attrs:{text:"",outlined:"",color:"primary"},on:{click:function(t){return e.$emit("close")}}},[e._v(" Cancel ")]),a("v-btn",{attrs:{color:"primary",disabled:e.errors.any()||!e.isValidRule},on:{click:e.updatePackageHeading}},[e._v(" Update ")])],1)],1)],1)},i=[],s=a("1da1"),r=(a("96cf"),a("a9e3"),a("f12b")),o=a("e860"),d=a("d772"),c=a("ab8a"),l=a("c197"),u={components:{DefaultSvgLoader:l["default"],HeadingRule:o["a"],NonFieldFormErrors:c["default"]},mixins:[r["a"]],provide:function(){return{$validator:this.$validator}},props:{packageId:{type:[String,Number],default:""},packageHeadingId:{type:[String,Number],default:""},packageDetail:{type:Object,default:null,required:!1},basicView:{type:Boolean,default:!1},appliedClass:{type:String,default:""}},data:function(){return{conditional_variables:[],function_variables:[],rule_variables:[],item:{},isValidRule:!0,enable_tds:!1,showDetail:!0,triggerUpdate:new Date}},watch:{triggerUpdate:function(e){e&&this.updatePackageHeading()}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.basicView){t.next=6;break}e.item=e.deepCopy(e.packageDetail),e.rule_variables=e.item.rule_variables,e.function_variables=e.item.functions,t.next=9;break;case 6:return t.next=8,e.getPayrollHeading();case 8:e.getAvailableVariables(e.item.order);case 9:case"end":return t.stop()}}),t)})))()},methods:{getAvailableVariables:function(){var e=this;if(parseInt(this.item.order)>=0){this.crud.message="";var t={order:this.item.order,package_id:this.packageId,current_heading_type:this.item.type,current_duration_unit:this.item.duration_unit};this.insertData(d["a"].getPackageVariables+"?as=hr&package__organization__slug=".concat(this.getOrganizationSlug),t).then((function(t){e.conditional_variables=t.conditional_variables,e.rule_variables=t.rule_variables,e.function_variables=t.functions}))}},updatePackageHeading:function(){var e=this;this.crud.message="Successfully Updated Package Headings.",this.putData(d["a"].updatePackageHeadingById(this.item.id)+"?as=hr&package__organization__slug=".concat(this.getOrganizationSlug),this.item).then((function(){e.$emit("close")})).catch((function(t){var a=e.get(t.response.data,"rules.errors"),n={response:{data:a}};e.pushIndexedErrors(n,"",!1,"")}))},getPayrollHeading:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getData(d["a"].getPackageHeadingById(e.packageHeadingId)+"?as=hr&package__organization__slug=".concat(e.getOrganizationSlug)).then((function(t){e.item=t,"Tax Deduction"===e.item.type&&"Salary TDS"===e.item.payroll_setting_type&&(e.enable_tds=!0)}));case 2:case"end":return t.stop()}}),t)})))()}}},g=u,p=a("2877"),h=a("6544"),f=a.n(h),v=a("8336"),m=a("99d9"),_=a("62ad"),y=a("ce7e"),b=a("132d"),k=a("0fd9b"),x=Object(p["a"])(g,n,i,!1,null,null,null);t["a"]=x.exports;f()(x,{VBtn:v["a"],VCardActions:m["a"],VCardText:m["c"],VCol:_["a"],VDivider:y["a"],VIcon:b["a"],VRow:k["a"]})},"0549":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-row",{staticClass:"mb-3",attrs:{"no-gutters":""}},[e.breadCrumbs?a("v-col",{attrs:{cols:"12"}},[a("v-card",{attrs:{flat:""}},[a("v-breadcrumbs",{staticClass:"text-body-1 pa-2",class:{"text-caption pa-1":e.$vuetify.breakpoint.xs},attrs:{items:e.breadCrumbs},scopedSlots:e._u([{key:"item",fn:function(t){return[a("span",{class:t.item.disabled?"grey--text":"baseColor--text text--accent-2 pointer",domProps:{textContent:e._s(t.item.text)},on:{click:function(a){return e.$router.push(t.item.to)}}})]}}],null,!1,1670153796)},[a("v-icon",{attrs:{slot:"divider"},slot:"divider"},[e._v("mdi-chevron-right")])],1)],1)],1):e._e()],1),a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"12"}},[e._t("default")],2)],1)],1)},i=[],s=a("5530"),r=(a("ac1f"),a("1276"),a("b0c0"),a("2f62")),o={props:{title:{type:String,required:!0},breadCrumbs:{type:Array,default:function(){return[]}}},computed:Object(s["a"])({},Object(r["c"])({getOrganizationName:"organization/getOrganizationName",getSupervisorSwitchedOrganization:"supervisor/getSwitchedOrganization"})),mounted:function(){document.title="".concat(this.title," | RealHRsoft");var e=this.$route.params.slug?"admin-slug-dashboard":"root",t=this.$route.name.split("-"),a=this.getOrganizationName;this.getSupervisorSwitchedOrganization&&"user"===t[0]&&"supervisor"===t[1]&&(a=this.getSupervisorSwitchedOrganization.name),this.breadCrumbs.unshift({text:a,disabled:!1,to:{name:e,params:{slug:this.$route.params.slug}}})}},d=o,c=a("2877"),l=a("6544"),u=a.n(l),g=a("2bc5"),p=a("b0af"),h=a("62ad"),f=a("132d"),v=a("0fd9b"),m=Object(c["a"])(d,n,i,!1,null,null,null);t["default"]=m.exports;u()(m,{VBreadcrumbs:g["a"],VCard:p["a"],VCol:h["a"],VIcon:f["a"],VRow:v["a"]})},"0798":function(e,t,a){"use strict";var n=a("5530"),i=a("ade3"),s=(a("caad"),a("0c18"),a("10d2")),r=a("afdd"),o=a("9d26"),d=a("f2e7"),c=a("7560"),l=a("f40d"),u=a("58df"),g=a("d9bd");t["a"]=Object(u["a"])(s["a"],d["a"],l["a"]).extend({name:"v-alert",props:{border:{type:String,validator:function(e){return["top","right","bottom","left"].includes(e)}},closeLabel:{type:String,default:"$vuetify.close"},coloredBorder:Boolean,dense:Boolean,dismissible:Boolean,closeIcon:{type:String,default:"$cancel"},icon:{default:"",type:[Boolean,String],validator:function(e){return"string"===typeof e||!1===e}},outlined:Boolean,prominent:Boolean,text:Boolean,type:{type:String,validator:function(e){return["info","error","success","warning"].includes(e)}},value:{type:Boolean,default:!0}},computed:{__cachedBorder:function(){if(!this.border)return null;var e={staticClass:"v-alert__border",class:Object(i["a"])({},"v-alert__border--".concat(this.border),!0)};return this.coloredBorder&&(e=this.setBackgroundColor(this.computedColor,e),e.class["v-alert__border--has-color"]=!0),this.$createElement("div",e)},__cachedDismissible:function(){var e=this;if(!this.dismissible)return null;var t=this.iconColor;return this.$createElement(r["a"],{staticClass:"v-alert__dismissible",props:{color:t,icon:!0,small:!0},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:function(){return e.isActive=!1}}},[this.$createElement(o["a"],{props:{color:t}},this.closeIcon)])},__cachedIcon:function(){return this.computedIcon?this.$createElement(o["a"],{staticClass:"v-alert__icon",props:{color:this.iconColor}},this.computedIcon):null},classes:function(){var e=Object(n["a"])(Object(n["a"])({},s["a"].options.computed.classes.call(this)),{},{"v-alert--border":Boolean(this.border),"v-alert--dense":this.dense,"v-alert--outlined":this.outlined,"v-alert--prominent":this.prominent,"v-alert--text":this.text});return this.border&&(e["v-alert--border-".concat(this.border)]=!0),e},computedColor:function(){return this.color||this.type},computedIcon:function(){return!1!==this.icon&&("string"===typeof this.icon&&this.icon?this.icon:!!["error","info","success","warning"].includes(this.type)&&"$".concat(this.type))},hasColoredIcon:function(){return this.hasText||Boolean(this.border)&&this.coloredBorder},hasText:function(){return this.text||this.outlined},iconColor:function(){return this.hasColoredIcon?this.computedColor:void 0},isDark:function(){return!(!this.type||this.coloredBorder||this.outlined)||c["a"].options.computed.isDark.call(this)}},created:function(){this.$attrs.hasOwnProperty("outline")&&Object(g["a"])("outline","outlined",this)},methods:{genWrapper:function(){var e=[this.$slots.prepend||this.__cachedIcon,this.genContent(),this.__cachedBorder,this.$slots.append,this.$scopedSlots.close?this.$scopedSlots.close({toggle:this.toggle}):this.__cachedDismissible],t={staticClass:"v-alert__wrapper"};return this.$createElement("div",t,e)},genContent:function(){return this.$createElement("div",{staticClass:"v-alert__content"},this.$slots.default)},genAlert:function(){var e={staticClass:"v-alert",attrs:{role:"alert"},on:this.listeners$,class:this.classes,style:this.styles,directives:[{name:"show",value:this.isActive}]};if(!this.coloredBorder){var t=this.hasText?this.setTextColor:this.setBackgroundColor;e=t(this.computedColor,e)}return this.$createElement("div",e,[this.genWrapper()])},toggle:function(){this.isActive=!this.isActive}},render:function(e){var t=this.genAlert();return this.transition?e("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[t]):t}})},"0c18":function(e,t,a){},1813:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vue-page-wrapper",{attrs:{title:e.htmlTitle,"bread-crumbs":e.breadCrumbItems}},[a("v-card",[e.editPackage?a("div",[a("v-col",{attrs:{md:"4"}},[a("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"max:150",expression:"'max:150'"}],attrs:{counter:"150","prepend-inner-icon":"mdi-calendar-check-outline"},model:{value:e.package_name,callback:function(t){e.package_name=t},expression:"package_name"}},"v-text-field",e.veeValidate("name","Package Name"),!1))],1),a("div",{staticClass:"ml-3 mb-3"},[a("v-btn",{attrs:{small:"",depressed:"",color:"primary"},on:{click:e.updatePackageName}},[a("v-icon",{attrs:{small:"",left:""},domProps:{textContent:e._s("mdi-content-save-outline")}}),e._v(" Save ")],1),a("v-btn",{attrs:{small:"",outlined:""},domProps:{textContent:e._s("Cancel")},on:{click:function(t){e.editPackage=!1,e.getPackageDetails()}}})],1)],1):a("v-card-title",{staticClass:"px-2 py-2"},[a("v-icon",{staticClass:"mr-1 blue-grey--text text--darken-1",attrs:{size:"35"},domProps:{textContent:e._s("mdi-cash")}}),a("div",[a("div",[a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("span",e._g({staticClass:"\n                  text-body-1\n                  font-weight-medium\n                  blue-grey--text\n                  text--darken-2\n                "},n),[e._v(" "+e._s(e._f("truncate")(e.package_name,100))+" ")])]}}],null,!1,282119881)},[a("span",[e._v(" "+e._s(e.package_name)+" ")])]),a("v-icon",{attrs:{size:"16"},domProps:{textContent:e._s("mdi-pencil")},on:{click:function(t){e.editPackage=!0}}})],1),a("div",{staticClass:"text-caption grey--text",domProps:{textContent:e._s("Package")}})])],1),a("v-divider"),a("div",{staticClass:"pa-1 very-light-blue"},[a("package-edit",{attrs:{"package-id":e.$route.params.pk}})],1)],1)],1)},i=[],s=a("1da1"),r=(a("96cf"),a("b0c0"),a("0549")),o=a("c44a"),d=a("d772"),c=a("ec3e"),l={components:{PackageEdit:c["a"],VuePageWrapper:r["default"]},mixins:[o["a"]],data:function(){return{htmlTitle:"Package Edit | Settings | Payroll | Admin",breadCrumbItems:[{text:"Payroll",disabled:!1,to:{name:"admin-slug-payroll-overview",params:{slug:this.$route.params.slug}}},{text:"Settings",disabled:!1,to:{name:"admin-slug-payroll-settings",params:{slug:this.$route.params.slug}}},{text:"Packages",to:{name:"admin-slug-payroll-settings-packages",params:{slug:this.$route.params.slug}},disabled:!1},{text:"Edit Package",disabled:!0}],editPackage:!1,package_name:""}},created:function(){this.getPackageDetails()},methods:{getPackageDetails:function(){var e=this;this.$http.get(d["a"].getPackageById(this.$route.params.pk)+"?organization__slug=".concat(this.getOrganizationSlug,"&as=hr")).then((function(t){e.package_name=t.name}))},updatePackageName:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.validateAllFields();case 2:if(!t.sent){t.next=4;break}e.$http.patch(d["a"].updatePackageById(e.$route.params.pk)+"?organization__slug=".concat(e.getOrganizationSlug,"&as=hr"),{name:e.package_name}).then((function(){e.editPackage=!1,e.notifyUser("Successfully Updated Package Name.","green")})).catch((function(t){t.response&&e.notifyInvalidFormResponse("This package is already used."),e.pushErrors(t)}));case 4:case"end":return t.stop()}}),t)})))()}}},u=l,g=(a("5a7c"),a("2877")),p=a("6544"),h=a.n(p),f=a("8336"),v=a("b0af"),m=a("99d9"),_=a("62ad"),y=a("ce7e"),b=a("132d"),k=a("8654"),x=a("3a2f"),w=Object(g["a"])(u,n,i,!1,null,null,null);t["default"]=w.exports;h()(w,{VBtn:f["a"],VCard:v["a"],VCardTitle:m["d"],VCol:_["a"],VDivider:y["a"],VIcon:b["a"],VTextField:k["a"],VTooltip:x["a"]})},"1f09":function(e,t,a){},"2bc5":function(e,t,a){"use strict";var n=a("5530"),i=(a("a15b"),a("abd3"),a("ade3")),s=a("1c87"),r=a("58df"),o=Object(r["a"])(s["a"]).extend({name:"v-breadcrumbs-item",props:{activeClass:{type:String,default:"v-breadcrumbs__item--disabled"},ripple:{type:[Boolean,Object],default:!1}},computed:{classes:function(){return Object(i["a"])({"v-breadcrumbs__item":!0},this.activeClass,this.disabled)}},render:function(e){var t=this.generateRouteLink(),a=t.tag,i=t.data;return e("li",[e(a,Object(n["a"])(Object(n["a"])({},i),{},{attrs:Object(n["a"])(Object(n["a"])({},i.attrs),{},{"aria-current":this.isActive&&this.isLink?"page":void 0})}),this.$slots.default)])}}),d=a("80d2"),c=Object(d["i"])("v-breadcrumbs__divider","li"),l=a("7560");t["a"]=Object(r["a"])(l["a"]).extend({name:"v-breadcrumbs",props:{divider:{type:String,default:"/"},items:{type:Array,default:function(){return[]}},large:Boolean},computed:{classes:function(){return Object(n["a"])({"v-breadcrumbs--large":this.large},this.themeClasses)}},methods:{genDivider:function(){return this.$createElement(c,this.$slots.divider?this.$slots.divider:this.divider)},genItems:function(){for(var e=[],t=!!this.$scopedSlots.item,a=[],n=0;n<this.items.length;n++){var i=this.items[n];a.push(i.text),t?e.push(this.$scopedSlots.item({item:i})):e.push(this.$createElement(o,{key:a.join("."),props:i},[i.text])),n<this.items.length-1&&e.push(this.genDivider())}return e}},render:function(e){var t=this.$slots.default||this.genItems();return e("ul",{staticClass:"v-breadcrumbs",class:this.classes},t)}})},3129:function(e,t,a){"use strict";var n=a("3835"),i=a("5530"),s=(a("ac1f"),a("1276"),a("d81d"),a("a630"),a("3ca3"),a("5319"),a("1f09"),a("c995")),r=a("24b2"),o=a("7560"),d=a("58df"),c=a("80d2");t["a"]=Object(d["a"])(s["a"],r["a"],o["a"]).extend({name:"VSkeletonLoader",props:{boilerplate:Boolean,loading:Boolean,tile:Boolean,transition:String,type:String,types:{type:Object,default:function(){return{}}}},computed:{attrs:function(){return this.isLoading?this.boilerplate?{}:Object(i["a"])({"aria-busy":!0,"aria-live":"polite",role:"alert"},this.$attrs):this.$attrs},classes:function(){return Object(i["a"])(Object(i["a"])({"v-skeleton-loader--boilerplate":this.boilerplate,"v-skeleton-loader--is-loading":this.isLoading,"v-skeleton-loader--tile":this.tile},this.themeClasses),this.elevationClasses)},isLoading:function(){return!("default"in this.$scopedSlots)||this.loading},rootTypes:function(){return Object(i["a"])({actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, card-heading","card-avatar":"image, list-item-avatar","card-heading":"heading",chip:"chip","date-picker":"list-item, card-heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",paragraph:"text@3",sentences:"text@2",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"heading, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"table-cell@6","table-cell":"text","table-tfoot":"text@2, avatar@2",text:"text"},this.types)}},methods:{genBone:function(e,t){return this.$createElement("div",{staticClass:"v-skeleton-loader__".concat(e," v-skeleton-loader__bone")},t)},genBones:function(e){var t=this,a=e.split("@"),i=Object(n["a"])(a,2),s=i[0],r=i[1],o=function(){return t.genStructure(s)};return Array.from({length:r}).map(o)},genStructure:function(e){var t=[];e=e||this.type||"";var a=this.rootTypes[e]||"";if(e===a);else{if(e.indexOf(",")>-1)return this.mapBones(e);if(e.indexOf("@")>-1)return this.genBones(e);a.indexOf(",")>-1?t=this.mapBones(a):a.indexOf("@")>-1?t=this.genBones(a):a&&t.push(this.genStructure(a))}return[this.genBone(e,t)]},genSkeleton:function(){var e=[];return this.isLoading?e.push(this.genStructure()):e.push(Object(c["s"])(this)),this.transition?this.$createElement("transition",{props:{name:this.transition},on:{afterEnter:this.resetStyles,beforeEnter:this.onBeforeEnter,beforeLeave:this.onBeforeLeave,leaveCancelled:this.resetStyles}},e):e},mapBones:function(e){return e.replace(/\s/g,"").split(",").map(this.genStructure)},onBeforeEnter:function(e){this.resetStyles(e),this.isLoading&&(e._initialStyle={display:e.style.display,transition:e.style.transition},e.style.setProperty("transition","none","important"))},onBeforeLeave:function(e){e.style.setProperty("display","none","important")},resetStyles:function(e){e._initialStyle&&(e.style.display=e._initialStyle.display||"",e.style.transition=e._initialStyle.transition,delete e._initialStyle)}},render:function(e){return e("div",{staticClass:"v-skeleton-loader",attrs:this.attrs,on:this.$listeners,class:this.classes,style:this.isLoading?this.measurableStyles:void 0},[this.genSkeleton()])}})},"5a7c":function(e,t,a){"use strict";a("fb9e")},"5bcd":function(e,t,a){"use strict";a("0139")},"66da":function(e,t,a){},"6c6f":function(e,t,a){"use strict";a("d3b7");t["a"]={data:function(){return{deleteNotification:{dialog:!1,heading:"Confirm Delete",text:"Are you sure you want to delete ?"}}},methods:{deleteData:function(e,t){var a=this;return new Promise((function(n,i){!a.loading&&e&&(a.loading=!0,a.$http.delete(e,t||{}).then((function(e){a.crud.message&&setTimeout((function(){a.notifyUser(a.crud.message)}),1e3),n(e),a.loading=!1})).catch((function(e){a.pushErrors(e),a.notifyInvalidFormResponse(),i(e),a.loading=!1})).finally((function(){a.deleteNotification.dialog=!1})))}))}}}},"983c":function(e,t,a){"use strict";a("d3b7");t["a"]={methods:{getData:function(e,t,a){var n=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Promise((function(s,r){!n.loading&&e&&(n.clearNonFieldErrors(),n.$validator.errors.clear(),n.loading=i,n.$http.get(e,a||{params:t||{}}).then((function(e){s(e),n.loading=!1})).catch((function(e){n.pushErrors(e),n.notifyInvalidFormResponse(),r(e),n.loading=!1})))}))},getBlockingData:function(e,t,a){var n=this;return new Promise((function(i,s){n.getData(e,t,a,!0).then((function(e){i(e)})).catch((function(e){s(e)}))}))}}}},a459:function(e,t,a){"use strict";a("66da")},a51f:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.search.length>0?a("span",[e._v(' Your search for "'+e._s(e.search)+'" found no results. ')]):e.loading?a("v-skeleton-loader",{attrs:{type:"table",height:e.skeletonLoaderHeight}}):a("no-data-found",{attrs:{text:e.text,height:e.height}},[e._t("default")],2)],1)},i=[],s=(a("a9e3"),a("e585")),r={components:{NoDataFound:s["default"]},props:{search:{type:String,default:""},loading:{type:Boolean,required:!0},text:{type:String,default:"No data available at the moment"},height:{type:[String,Number],default:200},skeletonLoaderHeight:{type:[String,Number],default:void 0}}},o=r,d=a("2877"),c=a("6544"),l=a.n(c),u=a("3129"),g=Object(d["a"])(o,n,i,!1,null,null,null);t["default"]=g.exports;l()(g,{VSkeletonLoader:u["a"]})},ab8a:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.changeType&&0!==e.nonFieldErrors.length?a("div",e._l(e.nonFieldErrors,(function(t,n){return a("v-col",{key:n},e._l(t,(function(t,n){return a("div",{key:n},[a("span",{domProps:{textContent:e._s(e.key)}}),a("span",{domProps:{textContent:e._s(t.toString())}})])})),0)})),1):e._e(),e.changeType||0===e.nonFieldErrors.length?e._e():a("v-alert",{staticClass:"ma-3",attrs:{outlined:"",dense:"",tile:"",dismissible:"",color:"danger"}},[a("span",{domProps:{textContent:e._s("There are some errors")}}),e._l(e.nonFieldErrors,(function(t,n){return a("div",{key:n},e._l(t,(function(t,n){return a("div",{key:n},[a("ul",[a("li",[a("span",{domProps:{textContent:e._s(e.key)}}),a("span",{domProps:{textContent:e._s(t.toString())}})])])])})),0)}))],2)],1)},i=[],s={props:{nonFieldErrors:{type:Array,required:!0},changeType:{type:Boolean,default:!1}},data:function(){return{key:""}}},r=s,o=a("2877"),d=a("6544"),c=a.n(d),l=a("0798"),u=a("62ad"),g=Object(o["a"])(r,n,i,!1,null,null,null);t["default"]=g.exports;c()(g,{VAlert:l["a"],VCol:u["a"]})},abd3:function(e,t,a){},c197:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.divClass},[a("v-img",{class:e.imgClass,attrs:{src:"/svg/three-dots.svg",height:e.height,contain:""}}),a("h3",{staticClass:"text-center grey--text",domProps:{textContent:e._s(e.message)}})],1)},i=[],s={props:{message:{type:String,default:"Please wait. Fetching data just for you ..."},divClass:{type:String,default:"pa-12"},imgClass:{type:String,default:"my-6"},height:{type:String,default:"20"}},data:function(){return{}}},r=s,o=a("2877"),d=a("6544"),c=a.n(d),l=a("adda"),u=Object(o["a"])(r,n,i,!1,null,null,null);t["default"]=u.exports;c()(u,{VImg:l["a"]})},d772:function(e,t,a){"use strict";t["a"]={getPackage:"/payroll/packages/",postPackage:function(){return"/payroll/packages/"},clonePackage:function(e){return"/payroll/".concat(e,"/packages/clone/")},getPackageVariables:"/payroll/package-headings/get_variables/",getPackageById:function(e){return"/payroll/packages/".concat(e,"/")},getBasicPackageById:function(e){return"/payroll/packages/".concat(e,"/basic-view/")},updatePackageById:function(e){return"/payroll/packages/".concat(e,"/")},createPackageHeadingById:"/payroll/package-headings/",getPackageHeadingById:function(e){return"/payroll/package-headings/".concat(e,"/")},updatePackageHeadingById:function(e){return"/payroll/package-headings/".concat(e,"/")}}},ec3e:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card-text",{staticClass:"ma-0 pa-0"},[a("v-row",{staticClass:"pa-0 ma-0"},[a("v-slide-x-transition",[a("v-col",{directives:[{name:"show",rawName:"v-show",value:!e.collapsed,expression:"!collapsed"}],staticClass:"very-light-blue py-0",attrs:{md:"3",cols:"12"}},[a("v-row",[a("v-col",{attrs:{cols:"10"}},[a("div",{staticClass:"px-3 blue-grey--text text--darken-2 font-weight-bold"},[e._v(" Overall Headings ")])]),a("v-col",{attrs:{cols:"2"}},[a("v-icon",{attrs:{size:16},domProps:{textContent:e._s(e.collapsed?"mdi-chevron-right":"mdi-chevron-left")},on:{click:function(t){e.collapsed=!e.collapsed}}})],1),a("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"12"}},[a("v-divider")],1),a("v-col",{staticClass:"pa-0 ma-0 scrollbar-lg",attrs:{cols:"12"}},[a("overall-headings",{key:e.uniqueRefreshKey,attrs:{"package-id":e.packageId},on:{addHeading:function(t){e.displayForm=!1,e.addHeading(t)},refresh:function(t){e.uniqueRefreshKey=Math.random()},editDependency:e.editDependency}})],1)],1)],1)],1),a("v-col",{staticClass:"very-light-blue py-0",attrs:{md:"3",cols:"12"}},[a("v-row",[e.collapsed?a("v-col",{attrs:{cols:"2"}},[a("v-icon",{attrs:{size:16},domProps:{textContent:e._s(e.collapsed?"mdi-chevron-right":"mdi-chevron-left")},on:{click:function(t){e.collapsed=!e.collapsed}}})],1):e._e(),a("v-col",{attrs:{cols:"10"}},[a("div",{staticClass:"px-3 blue-grey--text text--darken-2 font-weight-bold"},[e._v(" Headings In This Package ")])]),a("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"12"}},[a("v-divider")],1),a("v-col",{staticClass:"py-0 px-1 scrollbar-lg"},[a("add-headings",{key:e.uniqueRefreshKey,attrs:{"package-id":e.packageId},on:{refresh:function(t){e.uniqueRefreshKey=Math.random(),e.displayForm=!1},"open-form":function(t){return e.openForm(t)}}})],1)],1)],1),a("v-col",{staticClass:"very-light-blue py-0 pr-0",attrs:{md:e.collapsed?"9":"6",cols:"12"}},[e.displayForm?a("edit-package-headings",{attrs:{"package-id":e.packageId,"package-heading-id":e.headId},on:{close:function(t){e.displayForm=!1,e.uniqueRefreshKey=Math.random()}}}):e._e(),e.newHeadingAddition?a("add-new-heading",{attrs:{"next-order":e.order,"show-title":""},on:{close:function(t){e.newHeadingAddition=!1,e.uniqueRefreshKey=Math.random()}}}):e._e(),e.editDependencyData.display?a("add-package-heading",{attrs:{"heading-id":e.editDependencyData.headingId,"next-order":e.editDependencyData.order},on:{close:function(t){e.editDependencyData.display=!1,e.uniqueRefreshKey=Math.random()}}}):e._e()],1)],1)],1)},i=[],s=(a("a9e3"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-data-table",{ref:"sortableTable",attrs:{items:e.results,loading:e.loading,"disable-pagination":"",dense:"","hide-default-footer":"","hide-default-header":""},scopedSlots:e._u([{key:"item",fn:function(t){return[a("tr",{key:t.item.id,class:e.addedIds.includes(t.item.id)?"sortableRow "+t.item.style_class:"sortableRow "+t.item.style_class+" sortHandle pointer",attrs:{id:t.item.id},on:{click:function(a){return e.showDependency(t.index,t.item)},dblclick:function(a){return e.removeDependency(t.index,t.item)}}},[a("td",[a("v-icon",{attrs:{color:e.addedIds.includes(t.item.id)?"red":"green"}},[e._v("mdi-equal")])],1),a("td",[a("span",[e._v(" "+e._s(t.item.label)+" ")]),e.addedIds.includes(t.item.id)?a("span",[a("v-icon",{attrs:{color:"danger",size:"12"},domProps:{textContent:e._s("mdi-circle")}})],1):e._e()]),a("td",[a("v-menu",{attrs:{"offset-y":"",left:"",transition:"slide-y-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-btn",e._g({attrs:{small:"",text:"",icon:""}},n),[a("v-icon",{domProps:{textContent:e._s("mdi-dots-vertical")}})],1)]}}],null,!0)},[a("v-list",{attrs:{dense:""}},[a("v-list-item",{on:{click:function(a){return e.addHeadingAbove(t.item.order)}}},[a("v-icon",{attrs:{size:"18"},domProps:{textContent:e._s("mdi-arrow-up")}}),a("span",{staticClass:"mx-1"},[e._v("Add Heading Above")])],1),a("v-list-item",{on:{click:function(a){return e.orderSelectLastButtonClick(t.item.order)}}},[a("v-icon",{attrs:{size:"18"},domProps:{textContent:e._s("mdi-arrow-down")}}),a("span",{staticClass:"mx-1"},[e._v("Add Heading Below")])],1)],1)],1)],1)])]}}])},[a("template",{slot:"no-data"},[a("data-table-no-data",{attrs:{loading:e.loading}})],1)],2),a("v-dialog",{attrs:{persistent:"","max-width":"45%"},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.dependencyNotification.dialog=!1}},model:{value:e.dependencyNotification.dialog,callback:function(t){e.$set(e.dependencyNotification,"dialog",t)},expression:"dependencyNotification.dialog"}},[a("v-card",[a("vue-card-title",{attrs:{title:e.dependencyNotification.heading,subtitle:e.dependencyNotification.autoResolve?e.dependencyNotification.subheading:"Could not auto resolve dependencies. Please select edit action to resolve.",icon:"mdi-file-document-outline",dark:"",closable:""},on:{close:function(t){e.dependencyNotification.dialog=!1}}}),a("v-card-text",{staticClass:"pa-3"},[e.dependencyNotification.autoResolving?a("div",{staticClass:"text-subtitle-2 primary--text",domProps:{textContent:e._s("Resolving data please wait...")}}):a("div",{domProps:{textContent:e._s(e.dependencyNotification.text)}})]),a("v-divider"),e.dependencyNotification.autoResolving?e._e():a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:""},domProps:{textContent:e._s("Cancel")},on:{click:function(t){e.dependencyNotification.dialog=!1,e.$emit("refresh")}}}),a("v-btn",{attrs:{color:"primary"},domProps:{textContent:e._s("Update")},on:{click:e.editDependency}}),e.dependencyNotification.autoResolve?a("v-btn",{attrs:{color:"primary"},domProps:{textContent:e._s("Auto Resolve")},on:{click:e.resolveDependency}}):e._e()],1)],1)],1)],1)}),r=[],o=a("1da1"),d=a("d4ec"),c=(a("96cf"),a("d81d"),a("a630"),a("3ca3"),a("99af"),a("d3b7"),a("4de4"),a("159b"),a("caad"),a("2532"),a("aa47")),l=a("a51f"),u=a("c44a"),g=function e(t,a){var n=this;Object(d["a"])(this,e),this.id=t.id,this.original_order=this.order,this.order=t.order,this.label=t.label,this.type=t.type,this.payroll_setting_type=t.payroll_setting_type,this.dependencies=t.dependencies,this.makes_dependencies=t.makes_dependency,this.style_class=null,this.beforeItemClick=function(e){var t=e.currentTarget.parentElement.parentElement,i=n.getUpperAndLowerOrder(t);a.$emit("addHeading",{order:i})},this.getUpperAndLowerOrder=function(e){var t=Array.from(a.$refs.sortableTable.$el.getElementsByTagName("tbody")[0].childNodes).map((function(e){return e.id})),n=t.indexOf(e.id);return a.results[n].order}},p={components:{DataTableNoData:l["default"]},mixins:[u["a"]],props:{orderSelectMode:{type:Boolean,default:!0},packageId:{type:[String,Number],required:!0}},data:function(){return{srtjs:null,results:[],nextOrder:"",addedIds:[],dependencies:[],loading:!1,packageHeadings:[],lastIndex:0,lastDetails:null,makeDependencies:[],selectedHeadingId:"",dependencyNotification:{dialog:!1,heading:"Missing Dependency",subheading:"Missing dependency found for the dragged heading.",text:"Please select the action that you want to perform for Dependency.",autoResolve:!0,autoResolving:!1}}},mounted:function(){this.fetchData(),this.getPackageHeadings(),this.srtjs=c["a"].create(this.$refs.sortableTable.$el.getElementsByTagName("tbody")[0],{group:{name:"shared",pull:"clone",put:!1},multiDrag:!0,selectedClass:"sortableRow",draggable:".sortableRow",handle:".sortHandle",onEnd:this.onEnded,onMove:this.detectComponent,onStart:this.onStart,sort:!1})},methods:{orderSelectLastButtonClick:function(e){this.$emit("addHeading",{order:e+1})},addHeadingAbove:function(e){this.$emit("addHeading",{order:e})},getPackageHeadings:function(){var e=this;this.$http.get("/payroll/packages/".concat(this.packageId,"/?organization__slug=").concat(this.getOrganizationSlug,"&as=hr")).then((function(t){e.packageHeadings=t.package_headings,e.nextOrder=t.next_order,e.addedIds=t.package_headings.map((function(e){return e.heading}))}))},fetchData:function(){var e=this;this.loading||(this.loading=!0,this.$http.get("/payroll/headings/choices/?organization__slug=".concat(this.getOrganizationSlug,"&as=hr"),{params:{archived:!0}}).then((function(t){e.results=t.map((function(t){return new g(t,e)}))})).finally((function(){e.loading=!1})))},showDependency:function(e,t){var a=this;this.removeDependency(this.lastIndex,this.lastDetails),this.lastIndex=e,this.lastDetails=t,this.dependencies=this.results[e].dependencies||[],this.makeDependencies=this.results[e].makes_dependencies||[],this.results[this.results.indexOf(t)].style_class="selected";var n=this.results.filter((function(e){return-1!==a.dependencies.indexOf(e.id)})),i=this.results.filter((function(e){return-1!==a.makeDependencies.indexOf(e.id)}));n.forEach((function(e){a.results[a.results.indexOf(e)].style_class="dependent-heading"})),i.forEach((function(e){a.results[a.results.indexOf(e)].style_class="make-dependent-heading"}))},removeDependency:function(e,t){var a=this;this.dependencies=this.results[e].dependencies||[],this.makeDependencies=this.results[e].makes_dependencies||[];var n=this.results.filter((function(e){return-1!==a.dependencies.indexOf(e.id)}));t&&this.results[this.results.indexOf(t)]&&(this.results[this.results.indexOf(t)].style_class="");var i=this.results.filter((function(e){return-1!==a.makeDependencies.indexOf(e.id)}));n.forEach((function(e){a.results[a.results.indexOf(e)].style_class=""})),i.forEach((function(e){a.results[a.results.indexOf(e)].style_class=""}))},onEnded:function(e){if(e.to.rows.dropZone||0===this.packageHeadings.length){var t=0;e.newIndex&&this.packageHeadings.length>0&&(t=this.packageHeadings[e.newIndex]?this.packageHeadings[e.newIndex].order||1:this.nextOrder),this.nextOrder=t,this.selectedHeadingId=e.item.id,this.createPackageHeading(!1)}else this.notifyUser("Cannot drop heading in same table.","red")},createPackageHeading:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n={heading_id:t.selectedHeadingId,to_obj_order:t.nextOrder,package_id:t.packageId},a.next=3,t.$http.post("/payroll/package-headings/drag_heading/?as=hr&package__organization__slug=".concat(t.getOrganizationSlug,"&auto_resolve=").concat(e),n).then((function(e){!0===e.success&&(t.notifyUser("Successfully added package heading."),t.$emit("refresh"))})).catch((function(e){400===e.response.status&&e.response.data.success&&e.response.data.success.includes("False")&&e.response.data.auto_resolve&&e.response.data.auto_resolve.includes("True")?(t.get(e,"response.data.errors.non_field_errors")?t.notifyUser(t.get(e,"response.data.errors.non_field_errors"),"red"):t.get(e,"response.data.error_message")?t.notifyUser(t.get(e,"response.data.error_message"),"red"):t.notifyUser("Something went wrong.","red"),t.dependencyNotification.dialog=!0):(t.dependencyNotification.autoResolve=!1,t.get(e,"response.data.non_field_errors")?t.notifyUser(t.get(e,"response.data.non_field_errors")[0],"red"):t.get(e,"response.data.error_message")?t.notifyUser(t.get(e,"response.data.error_message"),"red"):t.notifyUser(t.get(e,"response.data.message"),"red"),t.$emit("refresh"))}));case 3:case"end":return a.stop()}}),a)})))()},editDependency:function(){var e={headingId:this.selectedHeadingId,order:this.nextOrder};this.$emit("editDependency",e),this.dependencyNotification.dialog=!1},resolveDependency:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dependencyNotification.autoResolving=!0,t.next=3,e.createPackageHeading(!0);case 3:e.dependencyNotification.dialog=!1,e.dependencyNotification.autoResolving=!1;case 5:case"end":return t.stop()}}),t)})))()}}},h=p,f=(a("a459"),a("2877")),v=a("6544"),m=a.n(v),_=a("8336"),y=a("b0af"),b=a("99d9"),k=a("8fea"),x=a("169a"),w=a("ce7e"),D=a("132d"),C=a("8860"),O=a("da13"),S=a("e449"),P=a("2fa4"),I=Object(f["a"])(h,s,r,!1,null,"90cb0f10",null),$=I.exports;m()(I,{VBtn:_["a"],VCard:y["a"],VCardActions:b["a"],VCardText:b["c"],VDataTable:k["a"],VDialog:x["a"],VDivider:w["a"],VIcon:D["a"],VList:C["a"],VListItem:O["a"],VMenu:S["a"],VSpacer:P["a"]});var V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.tempDisable?e._e():a("v-data-table",{ref:"sortableTable",attrs:{headers:e.package_headings_headers,items:e.package_headings,loading:e.loading,"disable-pagination":"",dense:"","hide-default-footer":"","hide-default-header":""},scopedSlots:e._u([{key:"item",fn:function(t){return[a("tr",{key:t.item.id,class:"sortableRow "+t.item.style_class,attrs:{id:t.item.id,name:"dropZone"},on:{click:function(a){return e.showDependency(t.index,t.item)},dblclick:function(a){return e.removeDependency(t.index,t.item)}}},[a("td",[a("v-icon",{staticClass:"sortHandle",staticStyle:{cursor:"move"},attrs:{icon:"",color:"green"},on:{mousedown:function(a){return e.showDependency(t.index,t.item)},dblclick:function(a){return e.removeDependency(t.index,t.item)}}},[e._v("mdi-equal")])],1),a("td",[e._v(" "+e._s(t.item.heading_name)+" ")]),a("td",[a("v-row",{staticClass:"my-1",attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"6"}},[a("v-icon",{attrs:{color:"blue",size:"14"},on:{click:function(a){return e.$emit("open-form",t.item.id)}}},[e._v("mdi-pencil")])],1),a("v-col",{attrs:{cols:"6"}},[a("v-icon",{staticClass:"pl-1",attrs:{color:"red",size:"14"},on:{click:function(a){e.deleteNotification.dialog=!0,e.deleteId=t.item.id}}},[e._v("mdi-trash-can-outline")])],1)],1)],1)])]}}],null,!1,1214333581)},[a("template",{slot:"no-data"},[a("data-table-no-data",{attrs:{loading:e.loading}})],1)],2),a("vue-dialog",{attrs:{notify:e.deleteNotification},on:{close:function(t){e.deleteNotification.dialog=!1},agree:e.deletePackageHeading}})],1)},E=[],B=a("2909"),N=(a("7db0"),a("d772")),H=function e(t,a){var n=this;Object(d["a"])(this,e),this.id=t.id,this.original_order=this.order,this.order=t.order,this.heading_name=t.heading_name,this.absent_days_impact=t.absent_days_impact,this.duration_unit=t.duration_unit,this.taxable=t.taxable,this.benefit_type=t.benefit_type,this.type=t.type,this.payroll_setting_type=t.payroll_setting_type,this.dependencies=t.dependencies,this.makes_dependencies=t.makes_dependency,this.style_class=null,this.beforeItemClick=function(e){var t=e.currentTarget.parentElement.parentElement,i=n.getUpperAndLowerOrder(t);a.$router.push({name:"admin-slug-payroll-settings-package-heading-create-packageId-nextOrder",params:{nextOrder:i,packageId:a.packageId,slug:a.getOrganizationSlug}})},this.getUpperAndLowerOrder=function(e){var t=Array.from(a.$refs.sortableTable.$el.getElementsByTagName("tbody")[0].childNodes).map((function(e){return e.id})),n=t.indexOf(e.id);return a.package_headings[n].order}},R={components:{DataTableNoData:l["default"]},mixins:[u["a"]],props:{packageId:{type:[String,Number],required:!0}},data:function(){return{package_headings_headers:[{text:"",value:"order"},{text:"Heading Name",value:"heading_name",align:"left",sortable:!1},{text:"Controls",value:"benefit_type",align:"right",sortable:!1}],deleteNotification:{dialog:!1,heading:"Confirm Delete",text:"Are you sure you want to delete this heading?"},srtjs:null,deleteId:"",loading:!1,formData:{},package_headings:[],dependencies:[],makeDependencies:[],beforeMoveKeyOrder:[],lastIndex:0,lastDetails:null,tempDisable:!1,validDrag:!0}},mounted:function(){this.loadPackageById(),this.srtjs=c["a"].create(this.$refs.sortableTable.$el.getElementsByTagName("tbody")[0],{group:{name:"shared"},draggable:".sortableRow",handle:".sortHandle",onEnd:this.dragReorder,onMove:this.onMove,onStart:this.onStart})},methods:{loadPackageById:function(){var e=this;this.loading=!0,this.formData={},this.package_headings=[],this.$http.get(N["a"].getPackageById(this.packageId)+"?as=hr&organization__slug=".concat(this.getOrganizationSlug)).then((function(t){e.formData=t,e.package_headings=t.package_headings.map((function(t){return new H(t,e)})),e.loading=!1}))},successCallback:function(){this.$router.push({name:"admin-slug-payroll-settings-packages",params:{slug:this.getOrganizationSlug}})},deletePackageHeading:function(){var e=this;this.$http.delete("/payroll/package-headings/".concat(this.deleteId,"/?as=hr&package__organization__slug=").concat(this.getOrganizationSlug)).then((function(){e.notifyUser("Successfully Deleted Package Headings"),e.loadPackageById(),e.deleteNotification.dialog=!1,e.lastIndex=0,e.lastDetails=null,e.$emit("refresh")})).catch((function(t){e.deleteNotification.dialog=!1;var a=t.response.data.error_message||t.response.data[0]||"Something went wrong.";e.notifyUser(a,"red")}))},showDependency:function(e,t){var a=this;this.removeDependency(this.lastIndex,this.lastDetails),this.lastIndex=e,this.lastDetails=t,this.dependencies=this.package_headings[e].dependencies||[],this.makeDependencies=this.package_headings[e].makes_dependencies||[],this.package_headings[this.package_headings.indexOf(t)].style_class="selected";var n=this.package_headings.filter((function(e){return-1!==a.dependencies.indexOf(e.id)})),i=this.package_headings.filter((function(e){return-1!==a.makeDependencies.indexOf(e.id)}));n.forEach((function(e){a.package_headings[a.package_headings.indexOf(e)].style_class="dependent-heading"})),i.forEach((function(e){a.package_headings[a.package_headings.indexOf(e)].style_class="make-dependent-heading"}))},removeDependency:function(e,t){var a=this;this.dependencies=this.package_headings[e].dependencies||[],this.makeDependencies=this.package_headings[e].makes_dependencies||[];var n=this.package_headings.filter((function(e){return-1!==a.dependencies.indexOf(e.id)}));t&&this.package_headings[this.package_headings.indexOf(t)]&&(this.package_headings[this.package_headings.indexOf(t)].style_class="");var i=this.package_headings.filter((function(e){return-1!==a.makeDependencies.indexOf(e.id)}));n.forEach((function(e){a.package_headings[a.package_headings.indexOf(e)].style_class=""})),i.forEach((function(e){a.package_headings[a.package_headings.indexOf(e)].style_class=""}))},onStart:function(){this.beforeMoveKeyOrder=Array.from(this.$refs.sortableTable.$el.getElementsByTagName("tbody")[0].childNodes).map((function(e){return e.id}))},onMove:function(e){var t=this,a=e.dragged,n=e.related,i=this.package_headings.filter((function(e){return"Tax Deduction"===e.type})).map((function(e){return t.beforeMoveKeyOrder.indexOf(String(e.id))})).map((function(e){return t.package_headings[e].order})),s=this.package_headings.filter((function(e){return-1!==["Addition","Deduction"].indexOf(e.type)})).map((function(e){return t.beforeMoveKeyOrder.indexOf(String(e.id))})).map((function(e){return t.package_headings[e].order})),r=i.length>0?Math.min.apply(Math,Object(B["a"])(i)):null,o=s.length>0?Math.max.apply(Math,Object(B["a"])(s)):null,d=this.package_headings.find((function(e){return String(e.id)===a.id})).type,c=this.package_headings.find((function(e){return String(e.id)===a.id})).dependencies.map((function(e){return t.beforeMoveKeyOrder.indexOf(String(e))})).map((function(e){return t.package_headings[e].order})),l=c.length>0?Math.max.apply(Math,Object(B["a"])(c)):null,u=this.package_headings.find((function(e){return String(e.id)===a.id})).makes_dependencies.map((function(e){return t.beforeMoveKeyOrder.indexOf(String(e))})).map((function(e){return t.package_headings[e].order})),g=u.length>0?Math.min.apply(Math,Object(B["a"])(u)):null,p=this.beforeMoveKeyOrder.indexOf(n.id),h=this.package_headings[p].order;return l&&h<=l?(this.dragDependencyError="Sort cannot be performed because its dependent heading order will be greater than current heading.",this.validDrag=!1,!1):g&&h>=g?(this.dragDependencyError="Sort cannot be performed because its heading order must not be greater than dependent heading.",this.validDrag=!1,!1):-1!==["Addition","Deduction"].indexOf(d)&&r&&h>=r?(this.dragDependencyError="Addition or Deduction heading cannot be after Tax Deduction heading.",this.validDrag=!1,!1):-1!==["Tax Deduction"].indexOf(d)&&o&&h<=o?(this.dragDependencyError="Tax Deduction cannot be before addition or deduction heading.",this.validDrag=!1,!1):void(this.validDrag=!0)},dragReorder:function(e){var t=this,a=e.oldIndex,n=e.newIndex;if(!1!==this.validDrag||a!==n){if(!1===this.validDrag&&a!==n)return this.loadPackageById(),void this.notifyUser(this.dragDependencyError,"red");var i=this.package_headings[a],s=this.package_headings[n],r=i.order,o=s.order;r!==o&&this.$http.post("/payroll/package-headings/switch_order/?as=hr&package__organization__slug=".concat(this.getOrganizationSlug),{from_obj_order:r,to_obj_order:o,package_id:this.packageId}).then((function(e){if(e.success){for(var a in t.package_headings)t.package_headings[a].order=e.new_orders[a];t.notifyUser("Successfully sorted heading","green")}})).catch((function(e){t.get(e,"response.data.error_message")?t.notifyUser(t.get(e,"response.data.error_message"),"red"):t.notifyUser("Something went wrong.","red")}))}else this.notifyUser(this.dragDependencyError,"red")}}},A=R,T=(a("5bcd"),a("62ad")),j=a("0fd9b"),z=Object(f["a"])(A,V,E,!1,null,"6cbe04aa",null),F=z.exports;m()(z,{VCol:T["a"],VDataTable:k["a"],VIcon:D["a"],VRow:j["a"]});var U=a("0360"),M=a("90c6"),L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-row",[a("v-col",{attrs:{cols:"11"}},[a("div",{staticClass:"px-3 blue-grey--text text--darken-2 font-weight-bold"},[e._v(" "+e._s(e.fields.name)+" ")])]),a("v-col",{staticClass:"pl-3",attrs:{cols:"1"}},[a("v-icon",{attrs:{size:16},domProps:{textContent:e._s(e.showDetail?"mdi-chevron-up":"mdi-chevron-down")},on:{click:function(t){e.showDetail=!e.showDetail}}})],1),a("v-col",{staticClass:"pa-0 ma-0 pr-3",attrs:{cols:"12"}},[a("v-divider")],1)],1),a("v-card-text",{staticClass:"scrollbar-lg"},[e.showDetail?a("v-row",[a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Order")])]),a("div",[e._v(" "+e._s(e.fields.order)+" ")])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Payroll Setting Type")])]),a("div",[e._v(" "+e._s(e.fields.payroll_setting_type)+" ")])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Heading Type")])]),a("div",[e._v(" "+e._s(e.fields.type)+" ")])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Duration Unit")])]),a("div",[e._v(" "+e._s(e.fields.duration_unit||"N/A")+" ")])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Is Taxable")])]),a("div",[a("span",{domProps:{textContent:e._s(e.fields.taxable?"Yes":"No")}})])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Absent Days Impact")])]),a("div",[a("span",{domProps:{textContent:e._s(e.fields.absent_days_impact?"Yes":"No")}})])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Benefit Type")])]),a("div",[e._v(" "+e._s(e.fields.benefit_type||"N/A")+" ")])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Year to Date")])]),a("div",[e._v(" "+e._s(e.fields.year_to_date||"False")+" ")])])],1):e._e(),e.showDetail?a("v-divider"):e._e(),a("heading-rule",{attrs:{"conditional-variables":e.conditional_variables,"function-variables":e.function_variables,"rule-variables":e.rule_variables,"read-only":!1,error:e.isValidRule,"show-title":!0,"is-editable":e.fields.is_editable,"is-package-heading-equation":!0},on:{"update:error":function(t){e.isValidRule=t}},model:{value:e.fields.rules,callback:function(t){e.$set(e.fields,"rules",t)},expression:"fields.rules"}})],1),a("v-card-actions",[a("v-col",{staticClass:"text-right"},[a("v-btn",{attrs:{text:""},on:{click:function(t){return e.$emit("close")}}},[e._v(" Cancel ")]),a("v-btn",{attrs:{disabled:e.errors.any()||!e.isValidRule},on:{click:e.createPayrollHeadings}},[e._v(" Save ")])],1)],1)],1)},q=[],K=a("e860"),Y=a("7f8f"),W={components:{HeadingRule:K["a"]},mixins:[u["a"]],props:{nextOrder:{type:[String,Number],required:!0},headingId:{type:[String],required:!0}},data:function(){return{fields:{},conditional_variables:[],function_variables:[],rule_variables:[],isValidRule:!0,showDetail:!0}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getPayrollHeading();case 2:e.getAvailableVariables();case 3:case"end":return t.stop()}}),t)})))()},methods:{getPayrollHeading:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get(Y["a"].getHeadingById(e.headingId)+"?as=hr&organization__slug=".concat(e.getOrganizationSlug)).then((function(t){e.fields=t,e.fields.order=e.nextOrder}));case 2:case"end":return t.stop()}}),t)})))()},getAvailableVariables:function(){var e=this;if(parseInt(this.fields.order)>=0){var t={order:this.fields.order,package_id:this.$route.params.pk,current_heading_type:this.fields.type,current_duration_unit:this.fields.duration_unit};this.$http.post(N["a"].getPackageVariables+"?as=hr&package__organization__slug=".concat(this.getOrganizationSlug),t).then((function(t){e.conditional_variables=t.conditional_variables,e.rule_variables=t.rule_variables,e.function_variables=t.functions}))}},createPayrollHeadings:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.validateAllFields();case 2:if(!t.sent){t.next=6;break}e.fields.heading=e.headingId,e.fields.package=e.$route.params.pk,e.$http.post(N["a"].createPackageHeadingById+"?as=hr&package__organization__slug=".concat(e.getOrganizationSlug),e.fields).then((function(){e.notifyUser("Successfully created payroll package heading."),e.$emit("close")})).catch((function(t){e.notifyInvalidFormResponse(t.response.data.rules.errors&&t.response.data.rules.errors[0].rule_equation_errors[0]),e.pushErrors(t)}));case 6:case"end":return t.stop()}}),t)})))()}}},J=W,Z=Object(f["a"])(J,L,q,!1,null,null,null),X=Z.exports;m()(Z,{VBtn:_["a"],VCardActions:b["a"],VCardText:b["c"],VCol:T["a"],VDivider:w["a"],VIcon:D["a"],VRow:j["a"]});var G={components:{AddPackageHeading:X,OverallHeadings:$,AddNewHeading:M["a"],AddHeadings:F,EditPackageHeadings:U["a"]},mixins:[u["a"]],props:{packageId:{type:[String,Number],required:!0}},data:function(){return{collapsed:!1,uniqueRefreshKey:0,headId:"",displayForm:!1,newHeadingAddition:!1,editDependencyData:{display:!1,headingId:"",order:""},order:""}},methods:{openForm:function(e){var t=this;this.displayForm=!1,this.$nextTick((function(){t.headId=e,t.newHeadingAddition=!1,t.editDependencyData.display=!1,t.displayForm=!0}))},addHeading:function(e){var t=this;this.newHeadingAddition=!1,this.$nextTick((function(){t.order=e.order,t.newHeadingAddition=!0,t.editDependencyData.display=!1}))},editDependency:function(e){this.uniqueRefreshKey=Math.random(),this.editDependencyData.display=!0,this.newHeadingAddition=!1,this.displayForm=!1,this.editDependencyData.headingId=e.headingId,this.editDependencyData.order=e.order}}},Q=G,ee=a("0789"),te=Object(f["a"])(Q,n,i,!1,null,null,null);t["a"]=te.exports;m()(te,{VCardText:b["c"],VCol:T["a"],VDivider:w["a"],VIcon:D["a"],VRow:j["a"],VSlideXTransition:ee["f"]})},f0d5:function(e,t,a){"use strict";a("d3b7"),a("3ca3"),a("ddb0");var n=a("c44a");t["a"]={components:{NonFieldFormErrors:function(){return a.e("chunk-6441e173").then(a.bind(null,"ab8a"))}},mixins:[n["a"]],data:function(){return{crud:{name:"record",message:"",addAnother:!1},formValues:{},loading:!1}}}},f12b:function(e,t,a){"use strict";var n=a("f0d5"),i=a("983c"),s=a("f70a"),r=a("6c6f");t["a"]={mixins:[n["a"],i["a"],s["a"],r["a"]]}},f70a:function(e,t,a){"use strict";a("d3b7"),a("caad");t["a"]={methods:{insertData:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.validate,s=void 0===i||i,r=n.clearForm,o=void 0===r||r,d=arguments.length>3?arguments[3]:void 0;return new Promise((function(n,i){!a.loading&&e&&(a.clearErrors(),a.$validator.validateAll().then((function(r){s||(r=!0),r&&(a.loading=!0,a.$http.post(e,t,d||{}).then((function(e){a.clearErrors(),o&&(a.formValues={}),a.crud.addAnother||a.$emit("create"),a.crud.message&&setTimeout((function(){a.notifyUser(a.crud.message)}),1e3),n(e),a.loading=!1})).catch((function(e){a.pushErrors(e),a.notifyInvalidFormResponse(),i(e),a.loading=!1})))})))}))},patchData:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.validate,s=void 0===i||i,r=n.clearForm,o=void 0===r||r,d=arguments.length>3?arguments[3]:void 0;return new Promise((function(n,i){a.updateData(e,t,{validate:s,clearForm:o},"patch",d).then((function(e){n(e)})).catch((function(e){i(e)}))}))},putData:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.validate,s=void 0===i||i,r=n.clearForm,o=void 0===r||r,d=arguments.length>3?arguments[3]:void 0;return new Promise((function(n,i){a.updateData(e,t,{validate:s,clearForm:o},"put",d).then((function(e){n(e)})).catch((function(e){i(e)}))}))},updateData:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.validate,s=void 0===i||i,r=n.clearForm,o=void 0===r||r,d=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0;return new Promise((function(n,i){!a.loading&&e&&["put","patch"].includes(d)&&(a.clearErrors(),a.$validator.validateAll().then((function(r){s||(r=!0),r&&(a.loading=!0,a.$http[d](e,t,c||{}).then((function(e){a.$emit("update"),a.clearErrors(),o&&(a.formValues={}),a.crud.message&&setTimeout((function(){a.notifyUser(a.crud.message)}),1e3),n(e),a.loading=!1})).catch((function(e){a.pushErrors(e),a.notifyInvalidFormResponse(),i(e),a.loading=!1})))})))}))},clearErrors:function(){this.clearNonFieldErrors(),this.$validator.errors.clear()}}}},fb9e:function(e,t,a){}}]);