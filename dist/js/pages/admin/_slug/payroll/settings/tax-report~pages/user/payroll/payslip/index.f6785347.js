(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages/admin/_slug/payroll/settings/tax-report~pages/user/payroll/payslip/index","chunk-63c80d7a"],{"1f04":function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return l}));var a=n("1da1");n("d3b7"),n("3ca3"),n("ddb0"),n("96cf");function r(t){return s.apply(this,arguments)}function s(){return s=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i(e);case 2:return n=t.sent,t.next=5,l([n]);case 5:return a=t.sent,t.abrupt("return",a[0]);case 7:case"end":return t.stop()}}),t)}))),s.apply(this,arguments)}function i(t){return o.apply(this,arguments)}function o(){return o=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return n=t.sent,t.next=5,n.blob();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)}))),o.apply(this,arguments)}function l(t){return c.apply(this,arguments)}function c(){return c=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(n=function(t){var e=new FileReader;return new Promise((function(n){e.readAsDataURL(t),e.onloadend=function(){n(e.result)}}))},a=[],r=0;r<e.length;r++)a.push(n(e[r]));return t.next=5,Promise.all(a);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)}))),c.apply(this,arguments)}},"2f1b":function(t,e,n){"use strict";n("41a5")},"36e4":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",[n("vue-card-title",{attrs:{title:"Payroll Tax Report "+(t.readOnly?"":"Settings"),subtitle:t.readOnly?"":"Here you can configure tax report settings.",icon:"mdi-sack-percent",dark:t.readOnly}},[n("template",{slot:"actions"},[t.readOnly&&!t.loading&&t.results.length>0?n("v-btn",{attrs:{small:"",depressed:"",color:"primary"},on:{click:function(e){return t.downloadExcelReport()}}},[t._v(" Download Excel ")]):t._e(),t.readOnly&&!t.loading&&t.results.length>0?n("v-btn",{attrs:{small:"",depressed:"",color:"primary"},on:{click:function(e){return t.downloadPdf(t.$refs.taxReport,"p","tax-report",125)}}},[t._v(" Download Pdf ")]):t._e(),t.readOnly?n("v-btn",{staticClass:"white--text",attrs:{icon:""},on:{click:function(e){return t.$emit("close")}}},[n("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-close")}})],1):t._e()],1)],2),n("v-divider"),t.nonFieldErrors.length>0&&t.results.length>0?n("v-row",[n("v-col",{attrs:{cols:"12"}},[t.nonFieldErrors?n("non-field-form-errors",{attrs:{"non-field-errors":t.nonFieldErrors}}):t._e()],1)],1):t._e(),!t.results.length>0?n("v-row",{staticClass:"\n      pa-5\n      red\n      lighten-5\n      no-gutters\n      text-subtitle-2\n      font-weight-regular\n      text-center\n    ",attrs:{justify:"center",align:"center"}},[n("div",["hr"===t.as?n("span",[t._v("Tax report settings not configured properly. Please configure tax report settings from "),n("a",{on:{click:t.pushToTaxReportSettings}},[t._v(" here")])]):n("span",[t._v(" Tax report settings not configured properly. Please contact your HR Administrator ")])])]):t._e(),t.results.length>0?n("v-row",{class:{"scrollbar-thin":t.readOnly},style:t.readOnly?"height: calc(100vh - 55px)":"",attrs:{justify:"center"}},[n("v-col",{attrs:{cols:t.readOnly?"8":"12"}},[n("div",{ref:"taxReport",staticClass:"pa-5"},[t.readOnly?n("v-row",{staticClass:"\n            blue\n            lighten-5\n            no-gutters\n            text-subtitle-2\n            font-weight-regular\n            pa-0\n          ",staticStyle:{"background-color":"#90caf9",margin:"4px 2px 12px 2px"},attrs:{"no-gutters":""}},[n("v-col",{staticClass:"text-center font-weight-medium"},[n("span",{staticClass:"blueGrey--text"},[t._v(" Tax calculation details from "),n("span",{staticClass:"blueGrey--text font-weight-bold"},[t._v(t._s(t.from_date))]),t._v(" to "),n("span",{staticClass:"blueGrey--text font-weight-bold"},[t._v(t._s(t.to_date))]),t._v(" for Fiscal Year "),n("span",{staticClass:"blueGrey--text font-weight-bold"},[t._v(t._s(t.fiscalYear))])])])],1):t._e(),t.readOnly?n("v-row",{staticClass:"\n            blue\n            lighten-5\n            no-gutters\n            text-subtitle-2\n            font-weight-regular\n            pa-2\n          ",staticStyle:{margin:"4px 2px 12px 2px"}},[n("v-col",{attrs:{md:"3",cols:"6"}},[n("div",[t._v("Name")])]),n("v-col",{staticClass:"blueGrey--text font-weight-medium",attrs:{md:"3",cols:"6"}},[n("div",[t._v(" : "),n("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.get(t.employeeDetail,"full_name")||"N/A"))])])]),n("v-col",{attrs:{md:"3",cols:"6"}},[n("div",[t._v("Job Title")])]),n("v-col",{staticClass:"blueGrey--text font-weight-medium",attrs:{md:"3",cols:"6"}},[n("div",[t._v(": "+t._s(t.get(t.employeeDetail,"job_title")||"N/A"))])]),n("v-col",{attrs:{md:"3",cols:"6"}},[n("div",[t._v("Branch")])]),n("v-col",{staticClass:"blueGrey--text font-weight-medium",attrs:{md:"3",cols:"6"}},[n("div",[t._v(": "+t._s(t.get(t.employeeDetail,"branch")||"N/A"))])]),n("v-col",{attrs:{md:"3",cols:"6"}},[n("div",[t._v("Username")])]),n("v-col",{staticClass:"blueGrey--text font-weight-medium",attrs:{md:"3",cols:"6"}},[n("div",[t._v(": "+t._s(t.get(t.employeeDetail,"username")||"N/A"))])]),n("v-col",{attrs:{md:"3",cols:"6"}},[n("div",[t._v("Division")])]),n("v-col",{staticClass:"blueGrey--text font-weight-medium",attrs:{md:"3",cols:"6"}},[n("div",[t._v(": "+t._s(t.get(t.employeeDetail,"division.name")||"N/A"))])]),n("v-col",{attrs:{md:"3",cols:"6"}},[n("div",[t._v("Employee Code")])]),n("v-col",{staticClass:"blueGrey--text font-weight-medium",attrs:{md:"3",cols:"6"}},[n("div",[t._v(": "+t._s(t.get(t.employeeDetail,"code")||"N/A"))])]),n("v-col",{attrs:{md:"3",cols:"6"}},[n("div",[t._v("Joined Date")])]),n("v-col",{staticClass:"blueGrey--text font-weight-medium",attrs:{md:"3",cols:"6"}},[n("div",[t._v(": "+t._s(t.get(t.employeeDetail,"joined_date")||"N/A"))])]),n("v-col",{attrs:{md:"3",cols:"6"}},[n("div",[t._v("Marital status")])]),n("v-col",{staticClass:"blueGrey--text font-weight-medium",attrs:{md:"3",cols:"6"}},[n("div",[t._v(": "+t._s(t.get(t.employeeDetail,"marital_status")||"N/A"))])])],1):t._e(),t.results.length>0?n("div",{staticClass:"horizontal-scrollbar",staticStyle:{display:"block","white-space":"nowrap"}},[n("table",{staticClass:"custom-yearly-layout pa-1",staticStyle:{width:"100%"}},[n("thead",{staticClass:"white--text text-subtitle-2"},[n("tr",[n("th",{staticStyle:{width:"80%"}},[t._v("Particulars")]),n("th",{staticStyle:{width:"10%"}},[t._v("Paid")]),n("th",{staticStyle:{width:"10%"}},[t._v("Projected")])])]),n("tbody",{staticClass:"grey--text text--darken-3"},[t._l(t.results,(function(e,a){return[e.category?n("tr",{key:"category-"+a,staticClass:"font-weight-bold"},[n("td",{staticClass:"blue lighten-5",attrs:{colspan:"3"}},[n("span",{staticClass:"pl-2"},[t._v(t._s(e.category))])])]):t._e(),e.headings?t._l(e.headings,(function(r,s){return n("tr",{key:"category-"+a+"-heading-"+s},[n("td",{staticClass:"px-3 very-light-blue",staticStyle:{width:"80%"}},[n("v-row",{attrs:{dense:"",align:"center"}},[r.is_nested?n("v-col",{staticClass:"pa-0",attrs:{cols:"1"}}):t._e(),n("v-col",{staticClass:"pa-0",attrs:{md:t.readOnly?r.is_nested?"11":"12":r.is_nested?"9":"10",cols:t.readOnly?r.is_nested?"10":"11":r.is_nested?"8":"9"}},[t.readOnly?n("span",{staticClass:"grey--text text--darken-2",class:r.is_highlighted?"font-weight-bold":""},[t._v(t._s(r.heading_name)+" ")]):n("v-select",t._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],staticClass:"py-0 my-0",attrs:{items:t.computedHeadingList(r.heading),"item-text":"label","item-value":"id","hide-details":"",dense:"",height:"25"},scopedSlots:t._u([{key:"selection",fn:function(e){return[n("span",{staticClass:"grey--text text--darken-2",class:r.is_highlighted?"font-weight-bold":""},[t._v(t._s(e.item.label)+" ")])]}},{key:"append",fn:function(){return[n("v-icon",{staticClass:"mt-1",attrs:{small:""}},[t._v("mdi-menu-down")])]},proxy:!0}],null,!0),model:{value:r.heading,callback:function(e){t.$set(r,"heading",e)},expression:"heading.heading"}},"v-select",t.veeValidate("category-"+a+"-heading-"+s,""),!1))],1),t.readOnly?t._e():n("v-col",{staticClass:"pa-0",attrs:{md:"2",cols:"3"}},[n("v-row",{attrs:{dense:"",align:"center"}},[n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[n("v-col",t._g({staticClass:"pa-0 pl-4",attrs:{cols:"3"}},a),[n("v-checkbox",{staticClass:"pa-0 ma-0",attrs:{dense:"","hide-details":""},model:{value:r.is_highlighted,callback:function(e){t.$set(r,"is_highlighted",e)},expression:"heading.is_highlighted"}})],1)]}}],null,!0)},[n("span",[t._v(" Bold heading ")])]),n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[n("v-col",t._g({staticClass:"pa-0 px-3",attrs:{cols:"3"}},a),[n("v-checkbox",{staticClass:"pa-0 ma-0",attrs:{dense:"","hide-details":""},model:{value:r.is_nested,callback:function(e){t.$set(r,"is_nested",e)},expression:"heading.is_nested"}})],1)]}}],null,!0)},[n("span",[t._v(" Nested heading ")])]),n("v-col",{staticClass:"pa-0 pl-3",attrs:{cols:"3"}},[e.headings.length>1?n("v-icon",{staticClass:"red--text",attrs:{size:"18"},on:{click:function(t){return e.headings.splice(s,1)}}},[t._v("mdi-trash-can-outline")]):t._e()],1),n("v-col",{staticClass:"pa-0 pl-1",attrs:{cols:"3"}},[s===e.headings.length-1?n("v-icon",{staticClass:"indigo--text",attrs:{size:"18"},on:{click:function(n){return t.addNewRow(a,s,e)}}},[t._v("mdi-plus-box-outline")]):t._e()],1)],1)],1)],1)],1),r.yearly_const||"Type2Cnst"===t.get(t.getHeadingInfo(r.heading),"type")?n("td",{staticClass:"text-right px-1 very-light-blue",staticStyle:{width:"20%"},attrs:{colspan:"2"}},[t.readOnly?n("span",[t._v(" "+t._s(t.formatCurrency(r.yearly_const)||"-")+" ")]):n("span",[t._v(" 0.00 ")])]):[n("td",{staticClass:"text-right px-1 very-light-blue",staticStyle:{width:"10%"}},[t.readOnly?n("span",[t._v(" "+t._s(t.formatCurrency(r.ytd_amount)||"-")+" ")]):n("span",[t._v(" 0.00 ")])]),n("td",{staticClass:"text-right px-1 very-light-blue",staticStyle:{width:"10%"}},[t.readOnly?n("span",[t._v(t._s(t.formatCurrency(r.remaining_after_ytd)||"-"))]):n("span",[t._v(" 0.00 ")])])]],2)})):t._e()]}))],2)])]):t._e()],1),t.loading&&t.results.length<1?n("default-svg-loader"):t._e()],1)],1):t._e(),t.readOnly?t._e():n("v-divider"),t.readOnly?t._e():n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{depressed:"",small:"",color:"primary"},on:{click:t.saveTaxReportSetting}},[t._v(" Save ")])],1)],1)},r=[],s=n("1da1"),i=(n("96cf"),n("a9e3"),n("7db0"),n("99af"),n("a434"),n("4de4"),n("d81d"),n("caad"),n("2532"),n("159b"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("c44a")),o=n("ab8a"),l=n("7f8f"),c={getTaxReportSettings:function(t){return"/payroll/".concat(t,"/tax-report-settings/")},postTaxReportSettings:function(t){return"/payroll/".concat(t,"/tax-report-settings/")},getEmployeeTaxReport:function(t,e){return"/payroll/employees/".concat(t,"/payslip/").concat(e,"/tax-report")}},d=n("d242"),u=n("f12b"),g=n("cf45"),p=n("c197"),h={components:{DefaultSvgLoader:p["default"],NonFieldFormErrors:o["default"]},mixins:[i["a"],d["a"],u["a"]],props:{readOnly:{type:Boolean,default:!1},userId:{type:Number,default:null},payrollId:{type:[String,Number],default:null},as:{type:String,default:""},organizationSlug:{type:String,default:""}},data:function(){return{results:[],headingList:[],employeeDetail:{},fiscalYear:"",from_date:"",to_date:""}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.fetchHeadings();case 2:t.readOnly?t.getBlockingData(c.getEmployeeTaxReport(t.userId,t.payrollId)+"?as=".concat(t.as,"&organization_slug=").concat(t.organizationSlug)).then((function(e){t.results=e.results,t.employeeDetail=e.employee,t.fiscalYear=e.fiscal_year_name,t.from_date=e.from_date,t.to_date=e.to_date})):t.getBlockingData(c.getTaxReportSettings(t.getOrganizationSlug)).then((function(e){t.results=e,t.results&&(void 0===t.results.find((function(t){return"Employment Income"===t.category}))&&t.results.push({category:"Employment Income",headings:[{}]}),void 0===t.results.find((function(t){return"Less: Allowable Deductions"===t.category}))&&t.results.push({category:"Less: Allowable Deductions",headings:[{}]}),void 0===t.results.find((function(t){return"Less: Allowable Reductions"===t.category}))&&t.results.push({category:"Less: Allowable Reductions",headings:[{}]}),void 0===t.results.find((function(t){return"Tax Calculation"===t.category}))&&t.results.push({category:"Tax Calculation",headings:[{}]}))}));case 3:case"end":return e.stop()}}),e)})))()},methods:{formatCurrency:g["d"],fetchHeadings:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getBlockingData(l["a"].getHeadingChoices+"?organization__slug=".concat(t.getOrganizationSlug,"&as=hr")).then((function(e){t.headingList=e}));case 2:case"end":return e.stop()}}),e)})))()},addNewRow:function(t,e){var n=this.results[t];n.headings&&n.headings.splice(e+1,0,{heading:"",is_highlighted:!1,is_nested:!1,ytd_amount:"0.00",remaining_after_ytd:"0.00",yearly_const:null})},computedHeadingList:function(t){var e=this;return this.headingList.filter((function(n){var a=[].concat.apply([],e.results.map((function(t){return t.headings}))).map((function(t){return t.heading}));return n.id===t||!a.includes(n.id)}))},saveTaxReportSetting:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$validator.validate();case 2:if(!e.sent){e.next=6;break}n=t.deepCopy(t.results),n.forEach((function(t){t.headings.forEach((function(e,n){"number"!==typeof e.heading&&t.headings.splice(n,1)}))})),t.insertData(c.postTaxReportSettings(t.getOrganizationSlug),{settings:n},!1).then((function(){t.crud.message="Successfully saved tax report settings."}));case 6:case"end":return e.stop()}}),e)})))()},getHeadingInfo:function(t){return this.headingList.filter((function(e){return e.id===t}))[0]},pushToTaxReportSettings:function(){this.$router.push({name:"admin-slug-payroll-settings-tax-report"})},downloadExcelReport:function(){var t="/payroll/employees/".concat(this.userId,"/payslip/").concat(this.payrollId,"/tax-report-excel/?organization_slug=").concat(this.organizationSlug,"&as=").concat(this.as);this.$http({url:t,method:"GET",responseType:"blob"}).then((function(t){var e=window.URL.createObjectURL(new Blob([t])),n=document.createElement("a");n.href=e,n.setAttribute("download","tax.xlsx"),document.body.appendChild(n),n.click()}))}}},f=h,v=(n("2f1b"),n("2877")),m=n("6544"),y=n.n(m),_=n("8336"),x=n("b0af"),b=n("99d9"),w=n("ac7c"),C=n("62ad"),k=n("ce7e"),O=n("132d"),S=n("0fd9b"),R=n("b974"),I=n("2fa4"),T=n("3a2f"),D=Object(v["a"])(f,a,r,!1,null,"621bcc32",null);e["a"]=D.exports;y()(D,{VBtn:_["a"],VCard:x["a"],VCardActions:b["a"],VCheckbox:w["a"],VCol:C["a"],VDivider:k["a"],VIcon:O["a"],VRow:S["a"],VSelect:R["a"],VSpacer:I["a"],VTooltip:T["a"]})},"41a5":function(t,e,n){},"7f8f":function(t,e,n){"use strict";e["a"]={postHeading:"/payroll/headings/",getHeadingById:function(t){return"/payroll/headings/".concat(t,"/")},updateHeadingById:function(t){return"/payroll/headings/".concat(t,"/")},deleteHeadingById:function(t){return"/payroll/headings/".concat(t,"/")},getVariables:"/payroll/headings/get_variables/",getHeadingChoices:"/payroll/headings/choices/",switchHeadingOrder:"/payroll/headings/switch_order/",updateUserPackageHeading:function(t){return"/payroll/headings/".concat(t,"/bulk-apply-to-users")},archiveUnArchivePayrollHeading:function(t){return"/payroll/headings/".concat(t,"/archive")}}},d242:function(t,e,n){"use strict";var a=n("1da1"),r=n("5530"),s=(n("96cf"),n("d3b7"),n("3ca3"),n("ddb0"),n("caad"),n("159b"),n("99af"),n("b0c0"),n("7db0"),n("fb6a"),n("2f62")),i=n("f1d0"),o=n("1f04"),l=n("cf45");e["a"]={data:function(){return{orgInfo:null,serverTime:null,downloading:!1}},methods:Object(r["a"])(Object(r["a"])({},Object(s["d"])({setSnackBar:"common/setSnackBar"})),{},{downloadPdf:function(t){var e=arguments,r=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){var i,c,d,u,g,p,h;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(i=e.length>1&&void 0!==e[1]?e[1]:"p",c=e.length>2?e[2]:void 0,d=e.length>3&&void 0!==e[3]?e[3]:35,u=e.length>4&&void 0!==e[4]?e[4]:1245,g=e.length>5&&void 0!==e[5]?e[5]:1475,t.$el&&(t=t.$el),!r.loading){s.next=8;break}return s.abrupt("return");case 8:return scroll(0,0),s.prev=9,r.loading=!0,r.downloading=!0,r.setSnackBar({text:"File Downloading. Please wait...",color:"info",persist:!0}),s.next=15,r.loadOrganizationInfo();case 15:p=0,h=0,"l"===i&&(p=805,h=86),setTimeout(Object(a["a"])(regeneratorRuntime.mark((function e(){var s,f,v,m,y,_;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.getBoundingClientRect().top,f=t.getBoundingClientRect().left,v=t.offsetHeight+parseInt(getComputedStyle(t).marginTop),m=[],y=document.getElementsByClassName("download-only"),_=document.getElementsByClassName("download-hidden"),e.next=8,n.e("chunk-2d216257").then(n.t.bind(null,"c0e9",7)).then(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(n){var r,i,o,l,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=n.default;case 1:if(!(v>=40)){e.next=8;break}for(i=0;i<y.length;i++)y[i].style.display="block";for(o=0;o<_.length;o++)_[o].style.display="none";return e.next=6,r(t,{x:f-d,y:s,width:u,height:g-p,type:"dataURL",scale:2,useCORS:!0,windowWidth:1300}).then(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:m.push(e.toDataURL("image/png")),v-=g-p,s+=g-p;case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 6:e.next=1;break;case 8:for(l=0;l<y.length;l++)y[l].style.display="none";for(c=0;c<_.length;c++)_[c].style.display="";case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:n.e("chunk-e0378ed4").then(n.bind(null,"8baf")).then(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n,a,s,d,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.default,a=new n(i,"mm"),!["manualtesting","development"].includes(Object(l["f"])("VUE_APP_ENV"))){t.next=8;break}return t.next=5,Object(o["b"])("https://i.imgur.com/fHyEMsl.jpg");case 5:s=t.sent,t.next=11;break;case 8:return t.next=10,Object(o["b"])(r.orgInfo.logo);case 10:s=t.sent;case 11:d=210+h,u=32,m.forEach((function(t,e){e>0&&a.addPage(),a.addImage(t,"PNG",0,u,d,0,void 0,"FAST"),r.setHeaderAndFooter(e,a,s,m.length,i)})),a.save(c||"file.pdf"),r.loading=!1,r.setSnackBar({text:"",color:"",display:!1,error:!1});case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 9:case"end":return e.stop()}}),e)}))),500),s.next=27;break;case 21:s.prev=21,s.t0=s["catch"](9),console.error("Error while downloading pdf",s.t0),r.setSnackBar({text:"Your request was not successful.",color:"red"}),r.loading=!1,r.downloading=!1;case 27:case"end":return s.stop()}}),s,null,[[9,21]])})))()},setHeaderAndFooter:function(t,e,n,a,r){var s=0,i=0;"l"===r&&(s=2.5,i=84);var o=t+1,l=e.internal.pageSize.getWidth(),c=e.internal.pageSize.getHeight(),d=this.serverTime,u="Page ".concat(o," of ").concat(a);e.setPage(o),e.setFont("Helvetica","normal"),e.setLineWidth(.2),e.setDrawColor(150),e.line(7.5+s,27,203+i,27),e.line(7.5+s,c-12,203+i,c-12),e.setTextColor(150),e.setFontSize(8),e.text(u,7.5+s,c-7),e.text(d,l-8-s,c-7,{align:"right"});var g=this.orgInfo.address?this.orgInfo.address+",":"",p=this.orgInfo.phone_no?"Tel: ".concat(this.orgInfo.phone_no):"";e.text("".concat(g," ").concat(p),l-8-s,17,{align:"right"});var h=this.orgInfo.email?this.orgInfo.email+",":"",f=this.orgInfo.website||"";e.text("".concat(h," ").concat(f),l-8-s,21,{align:"right"}),e.setTextColor(100),e.setFontSize(14),e.setFont("Helvetica","bold"),e.text("".concat(this.orgInfo.name),l-8-s,13,{align:"right"}),e.addImage(n,"JPEG",7.5+s,7,18,18,void 0,"FAST")},loadOrganizationInfo:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.getOrganizationSlug,a=JSON.parse(localStorage.getItem("org-info"))||[],!(a.length>0&&a.some((function(t){return t.slug===n})))){e.next=6;break}t.orgInfo=a.find((function(t){return t.slug===n})),e.next=8;break;case 6:return e.next=8,t.$http.get(i["a"].getOrganization(n)).then((function(e){var n=e.name,r=e.slug,s=e.appearance.logo,i=e.address?e.address.address:"",o=e.email,l=e.contacts.Phone,c=e.website,d={name:n,slug:r,logo:s,address:i,email:o,phone_no:l,website:c};a.push(d),localStorage.setItem("org-info",JSON.stringify(a)),t.orgInfo=d}));case 8:return e.next=10,t.$http.get("server-info/?fields=server_time").then((function(e){var n=e.server_time;n=n.slice(0,-6),t.serverTime=t.$dayjs(n).format("YYYY-MM-DD HH:mm:ss A")}));case 10:case"end":return e.stop()}}),e)})))()}})}},f1d0:function(t,e,n){"use strict";e["a"]={getOrganizationList:"/org/",getOrganization:function(t){return"/org/".concat(t,"/")},updateOrganization:function(t){return"/org/".concat(t,"/")},getOrgEmployeeData:function(t){return"/org/".concat(t,"/employee-data/")}}}}]);