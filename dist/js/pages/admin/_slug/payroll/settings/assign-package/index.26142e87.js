(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages/admin/_slug/payroll/settings/assign-package/index","chunk-26c51c79","chunk-31f8a6e6","chunk-2d0c8a11","chunk-2d2259e9","chunk-6441e173","chunk-2d2160c2","chunk-2d2160c2","chunk-1ad3548a","chunk-da62e0c8","chunk-2d22d378","chunk-2d213000","chunk-2d0d6ae8","chunk-2d2160c2","chunk-2d2160c2","chunk-2d2160c2"],{"0139":function(e,t,a){},"0360":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.basicView?e._e():a("v-row",[a("v-col",{attrs:{cols:"11"}},[a("div",{staticClass:"px-3 blue-grey--text text--darken-2 font-weight-bold"},[e._v(" "+e._s(e.item.heading_name)+" ")])]),a("v-col",{staticClass:"pl-3",attrs:{cols:"1"}},[a("v-icon",{attrs:{size:16},domProps:{textContent:e._s(e.showDetail?"mdi-chevron-up":"mdi-chevron-down")},on:{click:function(t){e.showDetail=!e.showDetail}}})],1),a("v-col",{staticClass:"pa-0 ma-0 pr-3",attrs:{cols:"12"}},[a("v-divider")],1)],1),a("v-card-text",{staticClass:"pa-0 ma-0",class:{"scrollbar-lg":!e.basicView}},[e.nonFieldErrors.length>0?a("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"12"}},[a("non-field-form-errors",{attrs:{"non-field-errors":e.nonFieldErrors}})],1):e._e(),e.showDetail&&!e.basicView?a("v-row",[a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Order")])]),a("div",[e._v(" "+e._s(e.item.order)+" ")])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Payroll Setting Type")])]),a("div",[e._v(" "+e._s(e.item.payroll_setting_type)+" ")])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Heading Type")])]),a("div",[e._v(" "+e._s(e.item.type)+" ")])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Duration Unit")])]),a("div",[e._v(" "+e._s(e.item.duration_unit||"N/A")+" ")])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Is Taxable")])]),a("div",[a("span",{domProps:{textContent:e._s(e.item.taxable?"Yes":"No")}})])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Absent Days Impact")])]),a("div",[a("span",{domProps:{textContent:e._s(e.item.absent_days_impact?"Yes":"No")}})])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Benefit Type")])]),a("div",[e._v(" "+e._s(e.item.benefit_type||"N/A")+" ")])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Year to Date")])]),a("div",[e._v(" "+e._s(e.item.year_to_date||"False")+" ")])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Remote Work Impact")])]),a("div",[a("span",{domProps:{textContent:e._s(e.item.deduct_amount_on_remote_work?"Yes":"No")}})])])],1):e._e(),e.showDetail&&!e.basicView?a("v-divider"):e._e(),a("heading-rule",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],attrs:{"conditional-variables":e.conditional_variables,"function-variables":e.function_variables,"rule-variables":e.rule_variables,"read-only":!1,error:e.isValidRule,"enable-tds":e.enable_tds,"show-title":!0,"is-package-heading-equation":!0,"is-editable":e.item.is_editable,"is-update-package":"","basic-view":e.basicView,"trigger-update":e.triggerUpdate,"applied-class":e.appliedClass},on:{"update:error":function(t){e.isValidRule=t},"update:triggerUpdate":function(t){e.triggerUpdate=t},"update:trigger-update":function(t){e.triggerUpdate=t}},model:{value:e.item.rules,callback:function(t){e.$set(e.item,"rules",t)},expression:"item.rules"}}),a("default-svg-loader",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],attrs:{message:"Updating package rule. Please wait...","div-class":"pa-2","img-class":"my-2",height:"10"}})],1),e.basicView?e._e():a("v-divider"),e.basicView?e._e():a("v-card-actions",[a("v-col",{staticClass:"text-right"},[a("v-btn",{attrs:{text:"",outlined:"",color:"primary"},on:{click:function(t){return e.$emit("close")}}},[e._v(" Cancel ")]),a("v-btn",{attrs:{color:"primary",disabled:e.errors.any()||!e.isValidRule},on:{click:e.updatePackageHeading}},[e._v(" Update ")])],1)],1)],1)},i=[],r=a("1da1"),s=(a("96cf"),a("a9e3"),a("f12b")),o=a("e860"),c=a("d772"),l=a("ab8a"),d=a("c197"),u={components:{DefaultSvgLoader:d["default"],HeadingRule:o["a"],NonFieldFormErrors:l["default"]},mixins:[s["a"]],provide:function(){return{$validator:this.$validator}},props:{packageId:{type:[String,Number],default:""},packageHeadingId:{type:[String,Number],default:""},packageDetail:{type:Object,default:null,required:!1},basicView:{type:Boolean,default:!1},appliedClass:{type:String,default:""}},data:function(){return{conditional_variables:[],function_variables:[],rule_variables:[],item:{},isValidRule:!0,enable_tds:!1,showDetail:!0,triggerUpdate:new Date}},watch:{triggerUpdate:function(e){e&&this.updatePackageHeading()}},created:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.basicView){t.next=6;break}e.item=e.deepCopy(e.packageDetail),e.rule_variables=e.item.rule_variables,e.function_variables=e.item.functions,t.next=9;break;case 6:return t.next=8,e.getPayrollHeading();case 8:e.getAvailableVariables(e.item.order);case 9:case"end":return t.stop()}}),t)})))()},methods:{getAvailableVariables:function(){var e=this;if(parseInt(this.item.order)>=0){this.crud.message="";var t={order:this.item.order,package_id:this.packageId,current_heading_type:this.item.type,current_duration_unit:this.item.duration_unit};this.insertData(c["a"].getPackageVariables+"?as=hr&package__organization__slug=".concat(this.getOrganizationSlug),t).then((function(t){e.conditional_variables=t.conditional_variables,e.rule_variables=t.rule_variables,e.function_variables=t.functions}))}},updatePackageHeading:function(){var e=this;this.crud.message="Successfully Updated Package Headings.",this.putData(c["a"].updatePackageHeadingById(this.item.id)+"?as=hr&package__organization__slug=".concat(this.getOrganizationSlug),this.item).then((function(){e.$emit("close")})).catch((function(t){var a=e.get(t.response.data,"rules.errors"),n={response:{data:a}};e.pushIndexedErrors(n,"",!1,"")}))},getPayrollHeading:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getData(c["a"].getPackageHeadingById(e.packageHeadingId)+"?as=hr&package__organization__slug=".concat(e.getOrganizationSlug)).then((function(t){e.item=t,"Tax Deduction"===e.item.type&&"Salary TDS"===e.item.payroll_setting_type&&(e.enable_tds=!0)}));case 2:case"end":return t.stop()}}),t)})))()}}},p=u,g=a("2877"),h=a("6544"),f=a.n(h),m=a("8336"),v=a("99d9"),_=a("62ad"),y=a("ce7e"),b=a("132d"),k=a("0fd9b"),x=Object(g["a"])(p,n,i,!1,null,null,null);t["a"]=x.exports;f()(x,{VBtn:m["a"],VCardActions:v["a"],VCardText:v["c"],VCol:_["a"],VDivider:y["a"],VIcon:b["a"],VRow:k["a"]})},"03df":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card-title",{staticClass:"pa-0"},[e.exportGeneration.created_on?e.exportGeneration.url?a("span",[a("div",{staticClass:"grey--text text-caption",domProps:{textContent:e._s("Last Report was generated on")}}),a("div",{staticClass:"text-caption"},[e._v(" "+e._s(e.getGeneratedDate(e.exportGeneration.created_on))+" ")])]):e._e():a("span",{staticClass:"grey--text text-caption mr-2",domProps:{textContent:e._s("Report has not been generated yet")}}),a("v-btn",{staticClass:"mx-1",attrs:{small:"",depressed:"",color:"primary"},domProps:{textContent:e._s(e.exportGeneration.created_on?"Generate Again":e.buttonText)},on:{click:e.exportTasks}}),e.exportGeneration.url?a("v-btn",{attrs:{small:"",depressed:"",color:"primary"},domProps:{textContent:e._s("Download")},on:{click:e.downloadTask}}):e._e(),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-btn",e._g({attrs:{icon:""},on:{click:e.verifyExportGeneration}},n),[a("v-icon",{attrs:{color:"primary"},domProps:{textContent:e._s("mdi-cloud-sync")}})],1)]}}])},[a("span",[e._v("Refresh to see if report is generated.")])])],1)},i=[],r=a("5530"),s=(a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("a9e3"),a("fb6a"),a("63ea")),o=a.n(s),c=a("2f62"),l={props:{exportUrl:{type:String,required:!0},filters:{type:[Object,URLSearchParams],required:!0},triggerChange:{type:Object,required:!1,default:function(){return{}}},buttonText:{type:String,default:"Generate Now"}},data:function(){return{exportGeneration:{url:null,created_on:""},exportGenerated:!1,useNepaliDate:localStorage.useNepaliDate}},watch:{triggerChange:{handler:function(e,t){o()(e,t)||this.verifyExportGeneration()},deep:!0},"$route.query.export":{handler:function(e){e&&this.verifyExportGeneration()},immediate:!0}},created:function(){this.verifyExportGeneration()},methods:Object(r["a"])(Object(r["a"])({},Object(c["d"])({setSnackBar:"common/setSnackBar"})),{},{verifyExportGeneration:function(){var e=this,t={};if(this.filters instanceof URLSearchParams){var a=this.filters;a.delete("offset"),a.delete("limit"),t="?"+a}else t=this.convertToURLSearchParams(this.filters);this.$http.get(this.exportUrl+t).then((function(t){e.exportGeneration=t}))},exportTasks:function(){var e=this,t={};if(this.filters instanceof URLSearchParams){var a=this.filters;a.delete("offset"),a.delete("limit"),t="?"+a}else t=this.convertToURLSearchParams(this.filters);var n=this.exportUrl+t;this.$http.post(n).then(this.setSnackBar({text:"A new export will be generated soon",color:"green"})).catch((function(t){e.setSnackBar({text:t.response.data[0],color:"danger"})}))},downloadTask:function(){window.open(this.exportGeneration.url)},getGeneratedDate:function(e){var t=this.$dayjs(e).calendar(),a=Number(t.slice(0,2));return"true"===this.useNepaliDate&&a?this.$dayjs(this.ad2bs(t)).format("DD/MM/YYYY"):t}})},d=l,u=a("2877"),p=a("6544"),g=a.n(p),h=a("8336"),f=a("99d9"),m=a("132d"),v=a("3a2f"),_=Object(u["a"])(d,n,i,!1,null,null,null);t["a"]=_.exports;g()(_,{VBtn:h["a"],VCardTitle:f["d"],VIcon:m["a"],VTooltip:v["a"]})},"0549":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-row",{staticClass:"mb-3",attrs:{"no-gutters":""}},[e.breadCrumbs?a("v-col",{attrs:{cols:"12"}},[a("v-card",{attrs:{flat:""}},[a("v-breadcrumbs",{staticClass:"text-body-1 pa-2",class:{"text-caption pa-1":e.$vuetify.breakpoint.xs},attrs:{items:e.breadCrumbs},scopedSlots:e._u([{key:"item",fn:function(t){return[a("span",{class:t.item.disabled?"grey--text":"baseColor--text text--accent-2 pointer",domProps:{textContent:e._s(t.item.text)},on:{click:function(a){return e.$router.push(t.item.to)}}})]}}],null,!1,1670153796)},[a("v-icon",{attrs:{slot:"divider"},slot:"divider"},[e._v("mdi-chevron-right")])],1)],1)],1):e._e()],1),a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"12"}},[e._t("default")],2)],1)],1)},i=[],r=a("5530"),s=(a("ac1f"),a("1276"),a("b0c0"),a("2f62")),o={props:{title:{type:String,required:!0},breadCrumbs:{type:Array,default:function(){return[]}}},computed:Object(r["a"])({},Object(s["c"])({getOrganizationName:"organization/getOrganizationName",getSupervisorSwitchedOrganization:"supervisor/getSwitchedOrganization"})),mounted:function(){document.title="".concat(this.title," | RealHRsoft");var e=this.$route.params.slug?"admin-slug-dashboard":"root",t=this.$route.name.split("-"),a=this.getOrganizationName;this.getSupervisorSwitchedOrganization&&"user"===t[0]&&"supervisor"===t[1]&&(a=this.getSupervisorSwitchedOrganization.name),this.breadCrumbs.unshift({text:a,disabled:!1,to:{name:e,params:{slug:this.$route.params.slug}}})}},c=o,l=a("2877"),d=a("6544"),u=a.n(d),p=a("2bc5"),g=a("b0af"),h=a("62ad"),f=a("132d"),m=a("0fd9b"),v=Object(l["a"])(c,n,i,!1,null,null,null);t["default"]=v.exports;u()(v,{VBreadcrumbs:p["a"],VCard:g["a"],VCol:h["a"],VIcon:f["a"],VRow:m["a"]})},"0798":function(e,t,a){"use strict";var n=a("5530"),i=a("ade3"),r=(a("caad"),a("0c18"),a("10d2")),s=a("afdd"),o=a("9d26"),c=a("f2e7"),l=a("7560"),d=a("f40d"),u=a("58df"),p=a("d9bd");t["a"]=Object(u["a"])(r["a"],c["a"],d["a"]).extend({name:"v-alert",props:{border:{type:String,validator:function(e){return["top","right","bottom","left"].includes(e)}},closeLabel:{type:String,default:"$vuetify.close"},coloredBorder:Boolean,dense:Boolean,dismissible:Boolean,closeIcon:{type:String,default:"$cancel"},icon:{default:"",type:[Boolean,String],validator:function(e){return"string"===typeof e||!1===e}},outlined:Boolean,prominent:Boolean,text:Boolean,type:{type:String,validator:function(e){return["info","error","success","warning"].includes(e)}},value:{type:Boolean,default:!0}},computed:{__cachedBorder:function(){if(!this.border)return null;var e={staticClass:"v-alert__border",class:Object(i["a"])({},"v-alert__border--".concat(this.border),!0)};return this.coloredBorder&&(e=this.setBackgroundColor(this.computedColor,e),e.class["v-alert__border--has-color"]=!0),this.$createElement("div",e)},__cachedDismissible:function(){var e=this;if(!this.dismissible)return null;var t=this.iconColor;return this.$createElement(s["a"],{staticClass:"v-alert__dismissible",props:{color:t,icon:!0,small:!0},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:function(){return e.isActive=!1}}},[this.$createElement(o["a"],{props:{color:t}},this.closeIcon)])},__cachedIcon:function(){return this.computedIcon?this.$createElement(o["a"],{staticClass:"v-alert__icon",props:{color:this.iconColor}},this.computedIcon):null},classes:function(){var e=Object(n["a"])(Object(n["a"])({},r["a"].options.computed.classes.call(this)),{},{"v-alert--border":Boolean(this.border),"v-alert--dense":this.dense,"v-alert--outlined":this.outlined,"v-alert--prominent":this.prominent,"v-alert--text":this.text});return this.border&&(e["v-alert--border-".concat(this.border)]=!0),e},computedColor:function(){return this.color||this.type},computedIcon:function(){return!1!==this.icon&&("string"===typeof this.icon&&this.icon?this.icon:!!["error","info","success","warning"].includes(this.type)&&"$".concat(this.type))},hasColoredIcon:function(){return this.hasText||Boolean(this.border)&&this.coloredBorder},hasText:function(){return this.text||this.outlined},iconColor:function(){return this.hasColoredIcon?this.computedColor:void 0},isDark:function(){return!(!this.type||this.coloredBorder||this.outlined)||l["a"].options.computed.isDark.call(this)}},created:function(){this.$attrs.hasOwnProperty("outline")&&Object(p["a"])("outline","outlined",this)},methods:{genWrapper:function(){var e=[this.$slots.prepend||this.__cachedIcon,this.genContent(),this.__cachedBorder,this.$slots.append,this.$scopedSlots.close?this.$scopedSlots.close({toggle:this.toggle}):this.__cachedDismissible],t={staticClass:"v-alert__wrapper"};return this.$createElement("div",t,e)},genContent:function(){return this.$createElement("div",{staticClass:"v-alert__content"},this.$slots.default)},genAlert:function(){var e={staticClass:"v-alert",attrs:{role:"alert"},on:this.listeners$,class:this.classes,style:this.styles,directives:[{name:"show",value:this.isActive}]};if(!this.coloredBorder){var t=this.hasText?this.setTextColor:this.setBackgroundColor;e=t(this.computedColor,e)}return this.$createElement("div",e,[this.genWrapper()])},toggle:function(){this.isActive=!this.isActive}},render:function(e){var t=this.genAlert();return this.transition?e("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[t]):t}})},"0c18":function(e,t,a){},"17cc":function(e,t,a){"use strict";var n=a("b85c"),i=a("1da1"),r=a("5530");a("96cf"),a("ac1f"),a("841c"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("b64b");t["a"]={data:function(){return{fetchedResults:[],response:{},extra_data:"",appliedFilters:{},footerProps:{itemsPerPageOptions:[10,20,30,40,50,100]},pagination:{sortBy:["modified_at"],descending:!1,totalItems:0,page:1,rowsPerPage:10,pageCount:0},triggerDataTable:!0,fullParams:""}},created:function(){this.getParams(this.DataTableFilter)},methods:{getParams:function(e){var t=Object(r["a"])(Object(r["a"])({},e),{},{offset:(this.pagination.page-1)*this.pagination.rowsPerPage,limit:this.pagination.rowsPerPage,ordering:this.pagination.descending?this.pagination.sortBy:"-"+this.pagination.sortBy});this.fullParams=this.convertToURLSearchParams(t)},loadDataTable:function(e){this.response=e,this.fetchedResults=e.results,this.pagination.totalItems=e.count,this.extra_data=e.extra_data,this.triggerDataTable=!0},fetchData:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.warn("DatatableMixin: fetchData has been deprecated. Please use the function in page itself."),n=Object(r["a"])(Object(r["a"])(Object(r["a"])({},e),t.appliedFilters),{},{search:t.search,offset:(t.pagination.page-1)*t.pagination.rowsPerPage,limit:t.pagination.rowsPerPage,ordering:t.pagination.descending?t.pagination.sortBy:"-"+t.pagination.sortBy}),i=t.convertToURLSearchParams(n),t.loading=!0,a.next=6,t.$http.get(t.endpoint,{params:i}).then((function(e){t.response=e,t.fetchedResults=e.results,t.pagination.totalItems=e.count})).finally((function(){t.loading=!1}));case 6:case"end":return a.stop()}}),a)})))()},applyFilters:function(e){this.appliedFilters=e,this.fetchData(e)},convertToURLSearchParams:function(e){for(var t=new URLSearchParams,a=0,i=Object.keys(e);a<i.length;a++){var r=i[a],s=e[r];if(void 0===s&&(s=""),Array.isArray(s)){var o,c=Object(n["a"])(s);try{for(c.s();!(o=c.n()).done;){var l=o.value;t.append(r,l)}}catch(d){c.e(d)}finally{c.f()}}else t.append(r,s)}return t},loadDataTableChange:function(){var e=this;this.triggerDataTable&&(this.getParams(this.DataTableFilter),this.$nextTick((function(){e.fetchDataTable()})))}},watch:{DataTableFilter:function(e){this.fetchedResults=[],this.getParams(e),this.fetchDataTable(),this.pagination.page=1},"pagination.sortBy":function(){this.fetchedResults=[],this.loadDataTableChange()},"pagination.descending":function(){this.fetchedResults=[],this.loadDataTableChange()},"pagination.page":function(){this.fetchedResults=[],this.loadDataTableChange()},"pagination.rowsPerPage":function(){this.fetchedResults=[],this.loadDataTableChange()}}}},"1f09":function(e,t,a){},"2bc5":function(e,t,a){"use strict";var n=a("5530"),i=(a("a15b"),a("abd3"),a("ade3")),r=a("1c87"),s=a("58df"),o=Object(s["a"])(r["a"]).extend({name:"v-breadcrumbs-item",props:{activeClass:{type:String,default:"v-breadcrumbs__item--disabled"},ripple:{type:[Boolean,Object],default:!1}},computed:{classes:function(){return Object(i["a"])({"v-breadcrumbs__item":!0},this.activeClass,this.disabled)}},render:function(e){var t=this.generateRouteLink(),a=t.tag,i=t.data;return e("li",[e(a,Object(n["a"])(Object(n["a"])({},i),{},{attrs:Object(n["a"])(Object(n["a"])({},i.attrs),{},{"aria-current":this.isActive&&this.isLink?"page":void 0})}),this.$slots.default)])}}),c=a("80d2"),l=Object(c["i"])("v-breadcrumbs__divider","li"),d=a("7560");t["a"]=Object(s["a"])(d["a"]).extend({name:"v-breadcrumbs",props:{divider:{type:String,default:"/"},items:{type:Array,default:function(){return[]}},large:Boolean},computed:{classes:function(){return Object(n["a"])({"v-breadcrumbs--large":this.large},this.themeClasses)}},methods:{genDivider:function(){return this.$createElement(l,this.$slots.divider?this.$slots.divider:this.divider)},genItems:function(){for(var e=[],t=!!this.$scopedSlots.item,a=[],n=0;n<this.items.length;n++){var i=this.items[n];a.push(i.text),t?e.push(this.$scopedSlots.item({item:i})):e.push(this.$createElement(o,{key:a.join("."),props:i},[i.text])),n<this.items.length-1&&e.push(this.genDivider())}return e}},render:function(e){var t=this.$slots.default||this.genItems();return e("ul",{staticClass:"v-breadcrumbs",class:this.classes},t)}})},3129:function(e,t,a){"use strict";var n=a("3835"),i=a("5530"),r=(a("ac1f"),a("1276"),a("d81d"),a("a630"),a("3ca3"),a("5319"),a("1f09"),a("c995")),s=a("24b2"),o=a("7560"),c=a("58df"),l=a("80d2");t["a"]=Object(c["a"])(r["a"],s["a"],o["a"]).extend({name:"VSkeletonLoader",props:{boilerplate:Boolean,loading:Boolean,tile:Boolean,transition:String,type:String,types:{type:Object,default:function(){return{}}}},computed:{attrs:function(){return this.isLoading?this.boilerplate?{}:Object(i["a"])({"aria-busy":!0,"aria-live":"polite",role:"alert"},this.$attrs):this.$attrs},classes:function(){return Object(i["a"])(Object(i["a"])({"v-skeleton-loader--boilerplate":this.boilerplate,"v-skeleton-loader--is-loading":this.isLoading,"v-skeleton-loader--tile":this.tile},this.themeClasses),this.elevationClasses)},isLoading:function(){return!("default"in this.$scopedSlots)||this.loading},rootTypes:function(){return Object(i["a"])({actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, card-heading","card-avatar":"image, list-item-avatar","card-heading":"heading",chip:"chip","date-picker":"list-item, card-heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",paragraph:"text@3",sentences:"text@2",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"heading, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"table-cell@6","table-cell":"text","table-tfoot":"text@2, avatar@2",text:"text"},this.types)}},methods:{genBone:function(e,t){return this.$createElement("div",{staticClass:"v-skeleton-loader__".concat(e," v-skeleton-loader__bone")},t)},genBones:function(e){var t=this,a=e.split("@"),i=Object(n["a"])(a,2),r=i[0],s=i[1],o=function(){return t.genStructure(r)};return Array.from({length:s}).map(o)},genStructure:function(e){var t=[];e=e||this.type||"";var a=this.rootTypes[e]||"";if(e===a);else{if(e.indexOf(",")>-1)return this.mapBones(e);if(e.indexOf("@")>-1)return this.genBones(e);a.indexOf(",")>-1?t=this.mapBones(a):a.indexOf("@")>-1?t=this.genBones(a):a&&t.push(this.genStructure(a))}return[this.genBone(e,t)]},genSkeleton:function(){var e=[];return this.isLoading?e.push(this.genStructure()):e.push(Object(l["s"])(this)),this.transition?this.$createElement("transition",{props:{name:this.transition},on:{afterEnter:this.resetStyles,beforeEnter:this.onBeforeEnter,beforeLeave:this.onBeforeLeave,leaveCancelled:this.resetStyles}},e):e},mapBones:function(e){return e.replace(/\s/g,"").split(",").map(this.genStructure)},onBeforeEnter:function(e){this.resetStyles(e),this.isLoading&&(e._initialStyle={display:e.style.display,transition:e.style.transition},e.style.setProperty("transition","none","important"))},onBeforeLeave:function(e){e.style.setProperty("display","none","important")},resetStyles:function(e){e._initialStyle&&(e.style.display=e._initialStyle.display||"",e.style.transition=e._initialStyle.transition,delete e._initialStyle)}},render:function(e){return e("div",{staticClass:"v-skeleton-loader",attrs:this.attrs,on:this.$listeners,class:this.classes,style:this.isLoading?this.measurableStyles:void 0},[this.genSkeleton()])}})},"348c":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("vue-card-title",{attrs:{title:e.cloneId?"Clone the existing payroll package.":"Create new payroll package",subtitle:"",icon:"mdi-file-document-outline",closable:""},on:{close:function(t){return e.close()}}}),e.nonFieldErrors?a("non-field-form-errors",{attrs:{"non-field-errors":e.nonFieldErrors}}):e._e(),a("v-divider"),a("v-card-text",[a("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required|max:150",expression:"'required|max:150'"}],attrs:{counter:"150"},model:{value:e.packageName,callback:function(t){e.packageName=t},expression:"packageName"}},"v-text-field",e.veeValidate("name","Name *"),!1))],1),a("v-divider"),a("v-card-actions",[a("v-col",{staticClass:"text-right"},[a("v-btn",{attrs:{disabled:e.errors.any(),color:"primary"},on:{click:function(t){return e.savePackage()}}},[e._v(" "+e._s(e.cloneId?"Clone":"Create")+" ")])],1)],1)],1)},i=[],r=(a("a9e3"),a("b0c0"),a("f0d5")),s=a("f70a"),o=a("d772"),c={mixins:[r["a"],s["a"]],props:{cloneId:{type:[String,Number],default:""},fromProfileSummary:{type:Boolean,default:!1}},data:function(){return{packageName:""}},methods:{savePackage:function(){this.cloneId?this.clonePackage():this.createNewPackage()},createNewPackage:function(){var e=this;this.insertData(o["a"].postPackage()+"?organization__slug=".concat(this.getOrganizationSlug,"&as=hr"),{name:this.packageName,organization:this.getOrganizationSlug}).then((function(t){e.$route.params.pk||e.$router.push({name:"admin-slug-payroll-settings-packages-edit-pk",params:{pk:t.id,slug:e.getOrganizationSlug}})}))},clonePackage:function(){var e=this,t={old_package:this.cloneId,new_package_name:this.packageName};this.insertData(o["a"].clonePackage(this.getOrganizationSlug)+"?as=hr",t).then((function(t){e.fromProfileSummary?(e.packageName="",e.$emit("cloned-package-id",{id:t.new_package.id,name:t.new_package.name})):e.$route.params.pk||e.$router.push({name:"admin-slug-payroll-settings-packages-edit-pk",params:{pk:t.new_package.id,slug:e.getOrganizationSlug}})}))},close:function(){this.packageName="",this.clearNonFieldErrors(),this.$emit("close")}}},l=c,d=a("2877"),u=a("6544"),p=a.n(u),g=a("8336"),h=a("b0af"),f=a("99d9"),m=a("62ad"),v=a("ce7e"),_=a("8654"),y=Object(d["a"])(l,n,i,!1,null,null,null);t["a"]=y.exports;p()(y,{VBtn:g["a"],VCard:h["a"],VCardActions:f["a"],VCardText:f["c"],VCol:m["a"],VDivider:v["a"],VTextField:_["a"]})},"466a":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vue-page-wrapper",{attrs:{title:e.htmlTitle,"bread-crumbs":e.breadCrumbItems}},[a("v-card",[a("vue-card-title",{attrs:{title:"Assign Package",subtitle:"Refer the following information for assigning payroll packages to employee.",icon:"mdi-file-document-outline"}},[a("template",{slot:"actions"},[a("export-report",{attrs:{filters:e.DataTableFilter,"export-url":e.getExportUrl}}),a("v-btn",{attrs:{"data-cy":"btn-filter",icon:""},on:{click:function(t){e.showFilters=!e.showFilters}}},[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-filter-variant")}})],1)],1)],2),a("v-divider"),a("v-slide-y-transition",[e.showFilters?a("div",{staticClass:"mx-5"},[a("v-row",[a("v-col",{attrs:{md:"3",cols:"12"}},[a("vue-search",{attrs:{search:e.search,label:"Search By Name or Username",disabled:Boolean(e.username),readonly:Boolean(e.username)},on:{"update:search":function(t){e.search=t}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-col",{attrs:{md:"3",cols:"12"}},[a("v-switch",{attrs:{label:"Past Employee"},model:{value:e.isPastEmployee,callback:function(t){e.isPastEmployee=t},expression:"isPastEmployee"}})],1)],1),a("v-divider")],1):e._e()]),a("v-data-table",{attrs:{headers:e.headers,items:e.fetchedResults,"sort-desc":e.pagination.descending,"sort-by":e.pagination.sortBy,page:e.pagination.page,"items-per-page":e.pagination.rowsPerPage,"footer-props":e.footerProps,"server-items-length":e.pagination.totalItems,"must-sort":"","mobile-breakpoint":0,"show-select":""},on:{"update:sortDesc":function(t){return e.$set(e.pagination,"descending",t)},"update:sort-desc":function(t){return e.$set(e.pagination,"descending",t)},"update:sortBy":function(t){return e.$set(e.pagination,"sortBy",t)},"update:sort-by":function(t){return e.$set(e.pagination,"sortBy",t)},"update:page":function(t){return e.$set(e.pagination,"page",t)},"update:itemsPerPage":function(t){return e.$set(e.pagination,"rowsPerPage",t)},"update:items-per-page":function(t){return e.$set(e.pagination,"rowsPerPage",t)}},scopedSlots:e._u([{key:"item",fn:function(t){return[a("tr",[a("td",[a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(n){var i=n.on;return a("v-checkbox",e._g({attrs:{value:t.isSelected,disabled:"Not Associated"===e.getCurrentWorkingExperience(t.item.experiences),primary:"","hide-details":""},on:{change:function(e){return t.select(!t.isSelected)}}},i))}}],null,!0)},["Not Associated"===e.getCurrentWorkingExperience(t.item.experiences)?a("span",[e._v(" Cannot Assign ")]):a("span",[e._v("Select")])])],1),a("td",[a("vue-user",{attrs:{user:t.item}})],1),a("td",[e._v(e._s(t.item.username))]),a("td",[a("div",{domProps:{textContent:e._s(e.getCurrentWorkingExperience(t.item.experiences))}})]),a("td",{staticClass:"text-center"},[a("v-chip",{attrs:{color:"primary","text-color":"white"}},[e._v(" "+e._s(t.item.experiences.length)+" ")])],1),a("td",{staticClass:"text-center"},[a("span",[e._v(" "+e._s(e.isPastEmployee?e.getPastPackages(t.item.experiences):e.getCurrentPackages(t.item.experiences))+" ")])]),a("td",[a("vue-context-menu",{attrs:{"context-list":[{name:"Assign",icon:"mdi-pencil-outline",color:"blue"}]},on:{click0:function(a){e.assignForm=!0,e.selectedUserData=t.item}}})],1)])]}}]),model:{value:e.selectedUsers,callback:function(t){e.selectedUsers=t},expression:"selectedUsers"}},[a("template",{slot:"no-data"},[a("data-table-no-data",{attrs:{loading:e.loading}})],1),a("template",{slot:"footer"},[a("v-divider"),a("v-row",{staticClass:"ma-3",attrs:{align:"center"}},[a("span",{domProps:{textContent:e._s("Selected Employees :")}}),a("strong",{domProps:{textContent:e._s(e.selectedUsers.length)}}),a("v-spacer"),a("v-btn",{attrs:{disabled:e.selectedUsers.length<1,small:"",color:"primary"},domProps:{textContent:e._s("Assign Package")},on:{click:e.displayAssignPackage}})],1)],1)],2)],1),a("v-bottom-sheet",{attrs:{persistent:"",scrollable:""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.resetForm.apply(null,arguments)}},model:{value:e.assignPackageSheet,callback:function(t){e.assignPackageSheet=t},expression:"assignPackageSheet"}},[a("v-card",[a("v-toolbar",{attrs:{color:"baseColor",dark:""}},[a("div",[e._v("Select Package To Assign")]),a("v-spacer"),a("v-btn",{attrs:{small:"",icon:""},on:{click:e.resetForm}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-divider"),a("v-card-text",[a("v-row",[e.nonFieldErrors?a("non-field-form-errors",{attrs:{"non-field-errors":e.nonFieldErrors}}):e._e()],1),a("v-row",[a("v-col",{attrs:{cols:"4"}},[a("vue-auto-complete",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{params:{organization__slug:e.getOrganizationSlug,as:"hr"},endpoint:e.packageEndpoint,"item-text":"name","item-value":"id"},model:{value:e.packageId,callback:function(t){e.packageId=t},expression:"packageId"}},"vue-auto-complete",e.veeValidate("package","Package *"),!1))],1),a("v-col",{attrs:{cols:"4"}},[a("vue-date-picker",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],model:{value:e.userDefinedFromDate,callback:function(t){e.userDefinedFromDate=t},expression:"userDefinedFromDate"}},"vue-date-picker",e.veeValidate("active_from_date","User Defined Start Date *"),!1))],1),a("v-col",{attrs:{cols:"12"}},e._l(e.selectedUsers,(function(t,n){return a("v-row",{key:n},[t.successfullyAssigned?e._e():[a("v-col",{attrs:{cols:"2"}},[a("vue-user",{attrs:{user:t}})],1),a("v-col",{attrs:{cols:"3"}},[a("div",[a("span",[e._v(e._s(t.currentPackageName))])])]),a("v-col",{attrs:{cols:"3"}},[a("vue-date-picker",e._b({attrs:{value:t.defaultPackageApplicableDate||t.userDefinedApplicableDate,disabled:""}},"vue-date-picker",e.veeValidate("",t.packageDescription?t.packageDescription:""),!1))],1),a("v-col",{staticClass:"danger--text",attrs:{cols:"4"}},[e._v(" "+e._s(t.assignedError?t.assignedError[0]:"")+" ")])]],2)})),1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-col",{staticClass:"text-right py-0"},[a("v-btn",{attrs:{color:"primary"},on:{click:e.assignPackageInBulk}},[e._v(" Confirm ")])],1)],1)],1)],1),a("v-col",{attrs:{md:"12"}},[a("v-dialog",{attrs:{transition:"dialog-bottom-transition",fullscreen:"",persistent:""},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.assignForm=!1}},model:{value:e.assignForm,callback:function(t){e.assignForm=t},expression:"assignForm"}},[a("v-card",[a("vue-card-title",{attrs:{title:"Assign Packages",subtitle:"Select Package to assign.",icon:"mdi-file-document-outline",dark:"",closable:""},on:{close:function(t){e.assignForm=!1,e.fetchDataTable()}}}),a("v-divider"),a("v-card-text",{staticClass:"scrollbar-thin",staticStyle:{height:"calc(100vh - 55px)"}},[e.selectedUserData&&e.assignForm?a("assign-package-form",{attrs:{"selected-user-data":e.selectedUserData,"is-past-employee":e.isPastEmployee},on:{"form-response":e.resetForm}}):e._e()],1)],1)],1)],1)],1)},i=[],r=a("b85c"),s=a("1da1"),o=(a("96cf"),a("ac1f"),a("841c"),a("d3b7"),a("7db0"),a("99af"),a("b0c0"),a("3ca3"),a("ddb0"),a("d81d"),a("ab8a")),c=a("0549"),l=a("c44a"),d=a("17cc"),u=a("a51f"),p=a("02cb"),g=a("99ff"),h=a("5660"),f=a("741f"),m=a("b471"),v=a("8da0"),_=a("d772"),y=a("e4bf"),b=a("03df"),k={components:{ExportReport:b["a"],VueDatePicker:f["default"],AssignPackageForm:g["default"],DataTableNoData:u["default"],NonFieldFormErrors:o["default"],VueUser:p["default"],VueAutoComplete:h["default"],VuePageWrapper:c["default"],VueContextMenu:y["default"]},mixins:[d["a"],l["a"]],data:function(){return{htmlTitle:"Assign Packages | Settings | Payroll | Admin",breadCrumbItems:[{text:"Payroll",disabled:!1,to:{name:"admin-slug-payroll-overview",params:{slug:this.$route.params.slug}}},{text:"Settings",disabled:!1,to:{name:"admin-slug-payroll-settings",params:{slug:this.$route.params.slug}}},{text:"Assign",disabled:!0}],headers:[{text:"Name",align:"left",sortable:!1,value:"full_name",width:""},{text:"Username",align:"left",sortable:!1,value:"username",width:""},{text:"Current Working Experience",align:"left",sortable:!1,value:"name",width:""},{text:"Total Experiences",align:"left",sortable:!1,value:"name",width:""},{text:"Associate Package",align:"left",sortable:!1,value:"name",width:""},{text:"Action",align:"center",sortable:!1,width:""}],showFilters:!1,loading:!1,selectedUsers:[],userDefinedFromDate:"",isPastEmployee:!1,search:"",username:"",assignForm:!1,packageId:null,selectedUserData:{},assignPackageSheet:!1,packageEndpoint:_["a"].getPackage,payrollFiscalStartDate:""}},computed:{DataTableFilter:function(){return{search:this.search,username:this.username,user_status:this.isPastEmployee?"past":"",as:"hr"}},getExportUrl:function(){return v["a"].exportAssignPackage(this.getOrganizationSlug)}},watch:{userDefinedFromDate:function(e){this.setFromDateInSelectedUser(e)}},created:function(){this.loadDataTableChange()},methods:{fetchDataTable:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loading=!0,e.$http.get(v["a"].getUserPackageDetails(e.getOrganizationSlug),{params:e.fullParams}).then((function(t){e.loadDataTable(t)})).finally((function(){e.loading=!1}));case 2:case"end":return t.stop()}}),t)})))()},getCurrentWorkingExperience:function(e){if(e.length>0){var t=e.find((function(e){return e.is_current}))||[];return t&&t.organization?"".concat(this.get(t,"job_title.title")," of organization: ").concat(t.organization.name):"Not Associated"}},getPackages:function(e,t){if(e.length>0){var a=e.find((function(e){return e.is_current==t}))||[],n=a.user_experience_packages||[];return n.length>0&&n[n.length-1].package?n[n.length-1].package.name:"N/A"}return"N/A"},getCurrentPackages:function(e){return this.getPackages(e,!0)},getPastPackages:function(e){var t=e.find((function(e){return e.is_current}));return t?this.getCurrentPackages(e):this.getPackages(e,!1)},resetForm:function(){this.clearNonFieldErrors(),this.$validator.errors.clear(),this.assignPackageSheet=!1,this.assignForm=!1,this.packageId=null,this.selectedUsers=[],this.selectedUserData={},this.userDefinedFromDate="",this.fetchDataTable()},displayAssignPackage:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getPayrollStartFiscalYearDate();case 2:a=Object(r["a"])(e.selectedUsers);try{for(a.s();!(n=a.n()).done;)i=n.value,s=e.getPackageRelatedData(i),i.userExperienceID=s.userExperienceID,i.defaultPackageApplicableDate=s.packageApplicableDate,i.packageDescription=s.packageDescription,i.currentPackageName=s.currentPackageName}catch(o){a.e(o)}finally{a.f()}e.assignPackageSheet=!0;case 5:case"end":return t.stop()}}),t)})))()},getPackageRelatedData:function(e){var t,a={};e.experiences.find((function(e){return e.is_current}))?(a.userExperienceID=e.experiences.find((function(e){return e.is_current})).id,t=e.experiences.find((function(e){return e.is_current})).start_date):e.experiences.length&&(a.userExperienceID=e.experiences[0].id,t=e.experiences[0].start_date);var n=this.getCurrentPackages(e.experiences);return a.currentPackageName=n,"N/A"===n?this.payrollFiscalStartDate>t?(a.packageApplicableDate=this.payrollFiscalStartDate,a.packageDescription="Fiscal Year Start Date"):(a.packageApplicableDate=t,a.packageDescription="User Experience Start Date"):(a.packageApplicableDate="",a.packageDescription="User Defined Start Date"),a},getPayrollStartFiscalYearDate:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/payroll/organization-payroll-configs/".concat(e.getOrganizationSlug,"/?as=hr")).then((function(e){a=e.start_fiscal_year.id})).catch((function(t){e.notifyInvalidFormResponse(),e.pushErrors(t)}));case 2:if(!a){t.next=5;break}return t.next=5,e.$http.get("/org/".concat(e.getOrganizationSlug,"/fiscal-year/").concat(a,"/")).then((function(t){e.payrollFiscalStartDate=t.applicable_from})).catch((function(t){e.notifyInvalidFormResponse(),e.pushErrors(t)}));case 5:return t.abrupt("return",e.payrollFiscalStartDate||null);case 6:case"end":return t.stop()}}),t)})))()},setFromDateInSelectedUser:function(e){var t,a=Object(r["a"])(this.selectedUsers);try{for(a.s();!(t=a.n()).done;){var n=t.value;""===n.defaultPackageApplicableDate&&(n.userDefinedApplicableDate=e)}}catch(i){a.e(i)}finally{a.f()}},assignPackageInBulk:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.validateAllFields();case 2:if(!t.sent){t.next=25;break}e.clearNonFieldErrors(),a=Object(r["a"])(e.selectedUsers),t.prev=5,i=regeneratorRuntime.mark((function t(){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=n.value,!0!==a.successfullyAssigned){t.next=3;break}return t.abrupt("return","continue");case 3:return i={user_experience:a.userExperienceID,package:e.packageId,active_from_date:a.defaultPackageApplicableDate||a.userDefinedApplicableDate},t.next=6,e.$http.post(m["a"].linkPackage+"?user_experience__user__detail__organization__slug=".concat(e.getOrganizationSlug,"&as=hr"),i).then((function(){a.successfullyAssigned=!0})).catch((function(t){a.successfullyAssigned=!1,e.notifyInvalidFormResponse(),e.pushErrors(t),a.assignedError=e.errors.items.map((function(e){if("active_from_date"===e.field)return e.msg}))}));case 6:case"end":return t.stop()}}),t)})),a.s();case 8:if((n=a.n()).done){t.next=15;break}return t.delegateYield(i(),"t0",10);case 10:if(s=t.t0,"continue"!==s){t.next=13;break}return t.abrupt("continue",13);case 13:t.next=8;break;case 15:t.next=20;break;case 17:t.prev=17,t.t1=t["catch"](5),a.e(t.t1);case 20:return t.prev=20,a.f(),t.finish(20);case 23:e.selectedUsers.find((function(e){return!1===e.successfullyAssigned}))?e.selectedUsers.find((function(e){return!0===e.successfullyAssigned}))?e.addNonFieldValidation("","Only some user have been assigned package. Please review."):e.addNonFieldValidation("","No users have been assigned package"):(e.notifyUser("Successfully Assigned Package to all selected users."),e.resetForm()),e.$validator.errors.remove("active_from_date");case 25:case"end":return t.stop()}}),t,null,[[5,17,20,23]])})))()}}},x=k,D=a("2877"),P=a("6544"),w=a.n(P),C=a("288c"),S=a("8336"),O=a("b0af"),I=a("99d9"),E=a("ac7c"),V=a("cc20"),T=a("62ad"),$=a("8fea"),R=a("169a"),F=a("ce7e"),A=a("132d"),B=a("0fd9b"),N=a("0789"),j=a("2fa4"),U=a("b73d"),L=a("71d9"),z=a("3a2f"),H=Object(D["a"])(x,n,i,!1,null,null,null);t["default"]=H.exports;w()(H,{VBottomSheet:C["a"],VBtn:S["a"],VCard:O["a"],VCardActions:I["a"],VCardText:I["c"],VCheckbox:E["a"],VChip:V["a"],VCol:T["a"],VDataTable:$["a"],VDialog:R["a"],VDivider:F["a"],VIcon:A["a"],VRow:B["a"],VSlideYTransition:N["g"],VSpacer:j["a"],VSwitch:U["a"],VToolbar:L["a"],VTooltip:z["a"]})},"51d8":function(e,t,a){"use strict";a("99af");t["a"]={getFiscalYear:function(e){return"/org/".concat(e,"/fiscal-year/")},postFiscalYear:function(e){return"/org/".concat(e,"/fiscal-year/")},getFiscalYearDetails:function(e,t){return"/org/".concat(e,"/fiscal-year/").concat(t,"/")},updateFiscalYear:function(e,t){return"/org/".concat(e,"/fiscal-year/").concat(t,"/")},deleteFiscalYear:function(e,t){return"/org/".concat(e,"/fiscal-year/").concat(t,"/")},exportRebate:function(e){return"/payroll/".concat(e,"/user-voluntary-rebates/export/")}}},5660:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-flex space-between"},[a("v-autocomplete",{key:e.componentKey,ref:"autoComplete",class:e.appliedClass,attrs:{id:e.id,items:e.itemsSorted,"search-input":e.search,loading:e.isLoading,multiple:e.multiple,label:e.label,error:e.errorMessages.length>0,"error-messages":e.errorMessages,disabled:e.disabled,readonly:e.readonly,"data-cy":"autocomplete-"+e.dataCyVariable,"prepend-inner-icon":e.prependInnerIcon,clearable:e.clearable&&!e.readonly,"hide-details":e.hideDetails,"item-text":e.itemText,"item-value":e.itemValue,"small-chips":e.multiple||e.chips,"deletable-chips":e.multiple,hint:e.hint,"persistent-hint":e.persistentHint,chips:e.chips,solo:e.solo,flat:e.flat,"cache-items":e.cacheItems,placeholder:e.placeholder,dense:e.dense,"hide-selected":"","hide-no-data":""},on:{"update:searchInput":function(t){e.search=t},"update:search-input":function(t){e.search=t},focus:e.populateOnFocus,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.searchText())},change:e.updateState,blur:function(t){return e.$emit("blur")}},scopedSlots:e._u([{key:"selection",fn:function(t){return[e._t("selection",(function(){return[e.itemText&&t.item?a("div",[e.multiple||e.chips?a("v-chip",{attrs:{close:(e.clearable||!e.clearable&&!e.multiple)&&!e.readonly,small:""},on:{"click:close":function(a){return e.remove(t.item)}}},[t.item[e.itemText]?a("div",[t.item[e.itemText].length>40?a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(n){var i=n.on;return[a("span",e._g({},i),[e._v(" "+e._s(e._f("truncate")(t.item[e.itemText],40)))])]}}],null,!0)},[a("span",[e._v(e._s(t.item[e.itemText]))])]):a("span",[e._v(e._s(t.item[e.itemText]))])],1):a("div",[a("span",[e._v(e._s(t.item))])])]):a("div",[t.item[e.itemText]?a("div",[t.item[e.itemText].length>40?a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(n){var i=n.on;return[a("span",e._g({},i),[e._v(" "+e._s(e._f("truncate")(t.item[e.itemText],40)))])]}}],null,!0)},[a("span",[e._v(e._s(t.item[e.itemText]))])]):a("span",[e._v(e._s(t.item[e.itemText]))])],1):a("div",[a("span",[e._v(e._s(t.item))])])])],1):e._e()]}),{props:t})]}},{key:"item",fn:function(t){return[a("v-list-item-content",[a("v-list-item-title",[e._t("item",(function(){return[e.itemText&&t.item?a("div",[t.item[e.itemText]?a("div",[t.item[e.itemText].length>40?a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(n){var i=n.on;return[a("span",e._g({},i),[e._v(" "+e._s(e._f("truncate")(t.item[e.itemText],40)))])]}}],null,!0)},[a("span",[e._v(e._s(t.item[e.itemText]))])]):a("span",[e._v(e._s(t.item[e.itemText]))])],1):a("div",[a("span",[e._v(e._s(t.item))])])]):e._e()]}),{props:t})],2)],1)]}},{key:"append-item",fn:function(){return[!e.fullyLoaded&&e.showMoreIcon?a("div",[a("v-list-item-content",{staticClass:"px-4 pointer primary--text font-weight-bold"},[a("v-list-item-title",{on:{click:function(t){return e.fetchData()}}},[e._v(" Load More Items ... ")])],1)],1):e._e()]},proxy:!0}],null,!0),model:{value:e.selectedData,callback:function(t){e.selectedData=t},expression:"selectedData"}}),e._t("default")],2)},i=[],r=a("2909"),s=a("5530"),o=a("53ca"),c=a("1da1"),l=(a("96cf"),a("a9e3"),a("ac1f"),a("841c"),a("7db0"),a("d81d"),a("159b"),a("4de4"),a("4e827"),a("2ca0"),a("d3b7"),a("c740"),a("a434"),a("3ca3"),a("ddb0"),a("2b3d"),a("caad"),a("2532"),a("63ea")),d=a.n(l),u={props:{value:{type:[Number,String,Array,Object],default:void 0},id:{type:String,default:""},dataCyVariable:{type:String,default:""},endpoint:{type:String,default:""},itemText:{type:String,required:!0},itemValue:{type:String,required:!0},params:{type:Object,required:!1,default:function(){return{}}},itemsToExclude:{type:[Array,Number],default:null},forceFetch:{type:Boolean,default:!1},staticItems:{type:Array,default:function(){return[]}},errorMessages:{type:[String,Array],default:function(){return[]}},label:{type:String,default:""},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},hint:{type:String,default:void 0},persistentHint:{type:Boolean,required:!1,default:!1},multiple:{type:Boolean,required:!1,default:!1},clearable:{type:Boolean,default:!0},hideDetails:{type:Boolean,default:!1},solo:{type:Boolean,default:!1},flat:{type:Boolean,default:!1},chips:{type:Boolean,default:!1},prependInnerIcon:{type:String,default:void 0},cacheItems:{type:Boolean,default:!1},appliedClass:{type:String,default:""},placeholder:{type:String,default:""},dense:{type:Boolean,default:!1}},data:function(){return{componentKey:0,items:[],selectedData:null,search:null,initialFetchStarted:!1,nextLimit:null,nextOffset:null,showMoreIcon:!1,fullyLoaded:!1,isLoading:!1}},computed:{itemsSorted:function(){return this.sortBySearch(this.items,this.search?this.search.toLowerCase():"")}},watch:{value:{handler:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var a,n,i,r,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=10;break}if(!this.forceFetch||this.initialFetchStarted){e.next=6;break}return this.initialFetchStarted=!0,e.next=5,this.fetchData();case 5:this.removeDuplicateItem();case 6:Array.isArray(t)?(i=[],"object"===Object(o["a"])(t[0])?(this.selectedData=t.map((function(e){return e[s.itemValue]})),t.forEach((function(e){var t=s.items.find((function(t){return t===e}));t||i.push(e)}))):(t.forEach((function(e){var t=s.items.find((function(t){return t[s.itemValue]===e}));t||i.push(e)})),this.selectedData=t),i.length>0&&(r=this.items).push.apply(r,i)):"object"===Object(o["a"])(t)?(this.selectedData=t[this.itemValue],a=this.items.find((function(e){return e[s.itemValue]===t})),a||this.items.push(t)):(this.selectedData=t,n=this.items.find((function(e){return e===t})),n||this.items.push(t)),this.updateData(this.selectedData),e.next=11;break;case 10:t||(this.selectedData=null);case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),immediate:!0},selectedData:function(e){this.updateData(e)},params:{handler:function(e,t){d()(e,t)||(this.fullyLoaded=!1,this.initialFetchStarted=!1,this.items=[],this.componentKey+=1)},deep:!0}},methods:{sortBySearch:function(e,t){var a=this.itemText,n=e.filter((function(e){return"object"===Object(o["a"])(e)}));return n.sort((function(e,n){return e[a].toLowerCase().startsWith(t)&&n[a].toLowerCase().startsWith(t)?e[a].toLowerCase().localeCompare(n[a].toLowerCase()):e[a].toLowerCase().startsWith(t)?-1:n[a].toLowerCase().startsWith(t)?1:e[a].toLowerCase().localeCompare(n[a].toLowerCase())}))},populateOnFocus:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.initialFetchStarted){t.next=2;break}return t.abrupt("return");case 2:return e.initialFetchStarted=!0,t.next=5,e.fetchData();case 5:e.removeDuplicateItem();case 6:case"end":return t.stop()}}),t)})))()},fetchData:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.staticItems.length>0)){t.next=3;break}return e.items=e.staticItems,t.abrupt("return");case 3:return a=e.nextLimit,n=e.nextOffset,e.search&&(a=null,n=null),e.isLoading=!0,t.next=9,e.$http.get(e.endpoint,{params:Object(s["a"])(Object(s["a"])({},e.params),{},{search:e.search,limit:a,offset:n})}).then((function(t){var a;t.results||(t.results=t),t.next?(e.showMoreIcon=!0,e.extractLimitOffset(t.next)):(e.showMoreIcon=!1,e.search||(e.fullyLoaded=!0)),e.itemsToExclude&&(t.results=e.excludeRecord(t.results)),(a=e.items).push.apply(a,Object(r["a"])(t.results))})).finally((function(){e.isLoading=!1}));case 9:case"end":return t.stop()}}),t)})))()},removeDuplicateItem:function(){var e=this,t=this.items.indexOf(this.selectedData);if(t>=0){var a=this.items.findIndex((function(t){return t[e.itemValue]===e.selectedData}));a>=0&&(this.items.splice(t,1),this.componentKey+=1)}},updateData:function(e){var t=this,a=[];e instanceof Array?e.forEach((function(e){a.unshift(t.items.find((function(a){return a[t.itemValue]===e})))})):a=this.items.find((function(a){return a[t.itemValue]===e})),this.$emit("input",e),this.$emit("update:selectedFullData",a)},searchText:function(){0!==this.$refs.autoComplete.filteredItems.length||this.fullyLoaded||this.fetchData()},extractLimitOffset:function(e){var t=new URL(e);this.nextLimit=t.searchParams.get("limit"),this.nextOffset=t.searchParams.get("offset")},excludeRecord:function(e){var t=this,a=[];return"number"===typeof this.itemsToExclude?a.push(this.itemsToExclude):a=this.itemsToExclude,e.filter((function(e){if(e[t.itemValue])return!a.includes(e[t.itemValue])}))},remove:function(e){if(this.selectedData instanceof Object){var t=this.selectedData.indexOf(e[this.itemValue]);t>=0&&this.selectedData.splice(t,1)}else this.selectedData=null},updateState:function(){this.search="",this.nextLimit&&(this.showMoreIcon=!0)}}},p=u,g=a("2877"),h=a("6544"),f=a.n(h),m=a("c6a6"),v=a("cc20"),_=a("5d23"),y=a("3a2f"),b=Object(g["a"])(p,n,i,!1,null,null,null);t["default"]=b.exports;f()(b,{VAutocomplete:m["a"],VChip:v["a"],VListItemContent:_["a"],VListItemTitle:_["c"],VTooltip:y["a"]})},"5bcd":function(e,t,a){"use strict";a("0139")},"66da":function(e,t,a){},"6b20":function(e,t,a){"use strict";t["a"]={getEmployeePayroll:"/payroll/employee-payroll/",patchApprovePayroll:function(e){return"/payroll/employee-payroll/".concat(e,"/")},getPayrollConfig:function(e){return"/payroll/organization-payroll-configs/".concat(e,"/")}}},"6c6f":function(e,t,a){"use strict";a("d3b7");t["a"]={data:function(){return{deleteNotification:{dialog:!1,heading:"Confirm Delete",text:"Are you sure you want to delete ?"}}},methods:{deleteData:function(e,t){var a=this;return new Promise((function(n,i){!a.loading&&e&&(a.loading=!0,a.$http.delete(e,t||{}).then((function(e){a.crud.message&&setTimeout((function(){a.notifyUser(a.crud.message)}),1e3),n(e),a.loading=!1})).catch((function(e){a.pushErrors(e),a.notifyInvalidFormResponse(),i(e),a.loading=!1})).finally((function(){a.deleteNotification.dialog=!1})))}))}}}},"741f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return["true"!==e.useNepaliDate?a("v-text-field",e._g({class:e.appliedClass,attrs:{id:e.id,clearable:!e.readOnly,"data-cy":"date-picker-"+e.dataCyVariable,disabled:e.disabled,error:e.errorMessages.length>0,"error-messages":e.errorMessages,"hide-details":e.hideDetails,hint:e.hint,label:e.label,"prepend-inner-icon":e.prependInnerIcon,"single-line":e.singleLine,value:e.value,readonly:""},on:{paste:function(e){e.preventDefault()},"click:clear":function(t){return e.$emit("close")}},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}},n)):a("v-text-field",e._g({class:e.appliedClass,attrs:{id:e.id,label:e.label,value:e.value,"data-cy":"date-picker-"+e.dataCyVariable,error:e.errorMessages.length>0,"error-messages":e.errorMessages,disabled:e.disabled,clearable:!e.readOnly,hint:e.hint,"hide-details":e.hideDetails,"single-line":e.singleLine,"prepend-inner-icon":e.prependInnerIcon,readonly:""},on:{paste:function(e){e.preventDefault()},"click:clear":function(t){return e.$emit("close")}},model:{value:e.nepaliDate,callback:function(t){e.nepaliDate=t},expression:"nepaliDate"}},n))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},["true"===e.showCalendarChoice?a("v-btn",{attrs:{block:"",depressed:"",tile:"",color:"shade primary--text font-weight-bold"},on:{click:function(t){e.international=!e.international}}},[e._v(" "+e._s(e.international?"NE":"EN")+" ")]):e._e(),e.readOnly||e.international?e._e():a("localized-calendar",{ref:"datePicker",attrs:{"fiscal-year":[],"localized-date":e.localizedDate},on:{"update:localizedDate":function(t){e.localizedDate=t},"update:localized-date":function(t){e.localizedDate=t},"limit-mapping":function(t){e.limitMapping=t}},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),!e.readOnly&&e.international?a("v-date-picker",{attrs:{type:e.type,"allowed-dates":e.allowedDates,"no-title":""},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}):e._e()],1)],1)},i=[],r=a("1da1"),s=(a("b64b"),a("99af"),a("96cf"),a("3bce")),o=a("338b"),c=a("cf45"),l={components:{LocalizedCalendar:s["a"]},mixins:[o["a"]],props:{value:{type:String,default:""},id:{type:String,default:""},type:{type:String,default:"date"},label:{type:String,default:""},disabled:{type:Boolean,default:!1},errorMessages:{type:[String,Array],default:function(){return[]}},dataCyVariable:{type:String,default:""},readOnly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},hint:{type:String,default:""},hideDetails:{type:Boolean,default:!1},singleLine:{type:Boolean,default:!1},appliedClass:{type:String,default:""},prependInnerIcon:{type:String,default:"mdi-calendar-month-outline"}},data:function(){return{menu:!1,date:this.value,nepaliDate:this.value,localizedDate:"",international:"English"===Object(c["f"])("VUE_APP_SET_DEFAULT_CALENDAR_TO"),showCalendarChoice:Object(c["f"])("VUE_APP_SHOW_CALENDAR_CHOICE"),useNepaliDate:localStorage.useNepaliDate,hasConverted:!1}},watch:{value:function(e){this.date=e},date:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e&&"true"===t.useNepaliDate&&t.hasConverted?t.nepaliDate=t.ad2bs(e):t.nepaliDate=e,a.next=3,t.$emit("input",e);case 3:return a.next=5,t.$emit("update:localizedDate",t.localizedDate);case 5:if(!e){a.next=8;break}return a.next=8,t.$emit("blur");case 8:case"end":return a.stop()}}),a)})))()},international:function(e){this.$emit("update:international",e)}},created:function(){this.date&&"true"===this.useNepaliDate&&!this.hasConverted?(this.hasConverted=!0,this.date=this.bs2ad(this.date)):this.date||"true"!==this.useNepaliDate||(this.hasConverted=!0)},methods:{allowedDates:function(e){if("false"===this.showCalendarChoice&&"English"===Object(c["f"])("VUE_APP_SET_DEFAULT_CALENDAR_TO"))return!0;var t=[],a="",n="";t=Object.keys(this.bs),a=t[0],n=t[t.length-1];var i={max:this.bs2ad("".concat(n,"-12-").concat(this.bs[n][11])),min:this.bs2ad("".concat(a,"-01-01"))};return e<=i.max&&e>=i.min}}},d=l,u=a("2877"),p=a("6544"),g=a.n(p),h=a("8336"),f=a("2e4b"),m=a("e449"),v=a("8654"),_=Object(u["a"])(d,n,i,!1,null,null,null);t["default"]=_.exports;g()(_,{VBtn:h["a"],VDatePicker:f["a"],VMenu:m["a"],VTextField:v["a"]})},"8da0":function(e,t,a){"use strict";a("99af");t["a"]={getGeneratedPayroll:"/payroll/payrolls/",getUserPackageDetails:function(e){return"/payroll/".concat(e,"/user-experience-package-list/")},getIndividualUserPackageDetails:function(e,t){return"/payroll/".concat(e,"/user-experience-package-list/").concat(t,"/")},getUserPayrollHistory:function(e){return"/payroll/employee-payroll/".concat(e,"/edits/")},getDisbursementReport:function(e,t){return"/payroll/".concat(e,"/payrolls/").concat(t,"/reports/disbursement/")},getPayrollTaxReport:function(e,t){return"/payroll/".concat(e,"/payrolls/").concat(t,"/reports/tax/")},exportPayrollTaxReport:function(e,t){return"/payroll/".concat(e,"/payrolls/").concat(t,"/reports/tax/export/")},getPayrollProvidentFundReport:function(e,t){return"/payroll/".concat(e,"/payrolls/").concat(t,"/reports/pf/")},getPayrollSSFReport:function(e,t){return"/payroll/".concat(e,"/payrolls/").concat(t,"/reports/ssf/")},exportPayrollProvidentFundReport:function(e,t){return"/payroll/".concat(e,"/payrolls/").concat(t,"/reports/pf/export/")},getGeneralInfoReport:function(e){return"/payroll/".concat(e,"/reports/general-info/")},getPackageWiseSalaryReport:function(e){return"/payroll/".concat(e,"/reports/package-info/")},exportPackageWiseSalaryReport:function(e){return"/payroll/".concat(e,"/reports/package-info/export/")},exportGeneralInfoReport:function(e){return"/payroll/".concat(e,"/reports/general-info/export/")},approvePayroll:function(e){return"/payroll/".concat(e,"/settings/payroll-approval/")},setPayrollPersonalHeadingReportSetting:function(e){return"payroll/".concat(e,"/payroll-extra-heading-setting/")},setPayrollDetailReportSetting:function(e){return"payroll/".concat(e,"/payroll-collection-report-setting/")},setSSFReportSetting:function(e){return"payroll/".concat(e,"/ssf-report-setting/")},setPayrollDifferenceSetting:function(e){return"payroll/".concat(e,"/payroll-difference-heading-setting/")},disbursementReportSetting:function(e){return"/payroll/".concat(e,"/disbursement-report-setting/")},setTaxReportSetting:function(e){return"payroll/".concat(e,"/tax-report-setting/")},monthlyInsightTable:function(e){return"payroll/".concat(e,"/employee-metrics-report/")},exportMonthlyInsightTable:function(e){return"payroll/".concat(e,"/employee-metrics-report/export/")},exportAssignPackage:function(e){return"payroll/".concat(e,"/user-experience-package-list/export/")},setInsightHeadingSetting:function(e){return"payroll/".concat(e,"/employee-metrics-report-setting/")},getPayrollActivity:function(e){return"payroll/".concat(e,"/payroll-package-activity/")}}},"983c":function(e,t,a){"use strict";a("d3b7");t["a"]={methods:{getData:function(e,t,a){var n=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Promise((function(r,s){!n.loading&&e&&(n.clearNonFieldErrors(),n.$validator.errors.clear(),n.loading=i,n.$http.get(e,a||{params:t||{}}).then((function(e){r(e),n.loading=!1})).catch((function(e){n.pushErrors(e),n.notifyInvalidFormResponse(),s(e),n.loading=!1})))}))},getBlockingData:function(e,t,a){var n=this;return new Promise((function(i,r){n.getData(e,t,a,!0).then((function(e){i(e)})).catch((function(e){r(e)}))}))}}}},"99ff":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-card",[a("v-card-text",[a("div",{staticClass:"pb-4 pt-1"},[a("v-row",{staticClass:"mx-1",attrs:{align:"center"}},[a("v-col",{staticClass:"my-0 py-0",attrs:{cols:"12",md:"6"}},[a("h5",[e._v("Assign For")]),a("vue-user",{attrs:{user:e.currentUserData}})],1),a("v-col",{staticClass:"my-0 py-0",attrs:{cols:"12",md:"3"}},[a("h5",[e._v("Fiscal Year Start Date")]),e._v(" "+e._s(e.payrollFiscalStartDate||"N/A")+" ")]),e.clonePage?a("v-col",{staticClass:"text-right",attrs:{cols:"12",md:"3"}},[a("v-btn",{attrs:{small:"",color:"primary",depressed:""},on:{click:function(t){e.mainPage=!0,e.clonePage=!1,e.advanceView=!1}}},[e._v(" Go Back ")]),a("v-btn",{attrs:{small:"",color:"primary",depressed:""},on:{click:function(t){e.advanceView=!e.advanceView}}},[e._v(" "+e._s(e.advanceView?"Basic View":"Advance View")+" ")])],1):e._e()],1)],1),e.nonFieldErrors?a("non-field-form-errors",{attrs:{"non-field-errors":e.nonFieldErrors}}):e._e(),e.loading?a("v-progress-linear",{attrs:{indeterminate:e.loading,color:"primary"}}):e._e(),[e.mainPage?a("div",e._l(e.currentUserData.experiences,(function(t,n){return a("div",{key:n,staticClass:"primaryLight"},[a("v-divider"),a("v-row",{staticClass:"very-light-blue mx-1",attrs:{align:"center"}},[a("v-col",{attrs:{cols:"12",md:"6"}},[a("div",{staticClass:"blueGrey--text font-weight-bold"},[a("span",[e._v(e._s(e.get(t,"job_title.title")+" "))]),t.is_current?a("span",[e._v("("+e._s(t.start_date)+" - Till Now)")]):a("span",[e._v(" ("+e._s(t.start_date)+" - "+e._s(t.end_date)+") ")])])]),a("v-col",{staticClass:"text-right",attrs:{cols:"12",md:"6"}},[a("v-btn",{attrs:{small:"",color:"primary",depressed:"",disabled:!!t.user_experience_packages.find((function(e){return"undefined"===typeof e.id}))},on:{click:function(t){return e.addNewPackage(n)}}},[e._v(" + Add New Package ")])],1)],1),a("v-divider"),t.user_experience_packages.length>0?e._l(t.user_experience_packages,(function(i,r){return a("v-row",{key:"package-"+r,staticClass:"mx-1",attrs:{align:"center"}},[a("v-col",{attrs:{cols:"12",md:"4"}},[a("package-auto-complete",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{endpoint:e.packageEndpoint,"selected-full-data":i.package_detail,disabled:i.is_used_package,"force-fetch":"","hide-details":"","item-text":"name","item-value":"id"},on:{"update:selectedFullData":function(t){return e.$set(i,"package_detail",t)},"update:selected-full-data":function(t){return e.$set(i,"package_detail",t)}},model:{value:i.package,callback:function(t){e.$set(i,"package",t)},expression:"user_package.package"}},"package-auto-complete",e.veeValidate(n+"-package-"+(r+1),"Package *"),!1)),i.is_used_package?e._e():a("span",{staticClass:"danger--text text-caption"},[e._v(" "+e._s(e.errors.first(n+"-package-"+(r+1)))+" ")])],1),a("v-col",{attrs:{cols:"12",md:"2"}},[a("vue-date-picker",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"read-only":i.is_used_package||(r>0||1===t.user_experience_packages.length)&&!!i.active_from_date,disabled:i.is_used_package||(r>0||1===t.user_experience_packages.length)&&!!i.active_from_date||e.loading,"hide-details":""},model:{value:i.active_from_date,callback:function(t){e.$set(i,"active_from_date",t)},expression:"user_package.active_from_date"}},"vue-date-picker",e.veeValidate(n+"-active_from_date-"+(r+1),"Active From Date *"),!1)),i.is_used_package||(r>0||1===t.user_experience_packages.length)&&i.active_from_date?e._e():a("span",{staticClass:"danger--text text-caption"},[e._v(" "+e._s(e.errors.first(n+"-active_from_date-"+(r+1)))+" ")])],1),a("v-col",{attrs:{cols:"12",md:"2"}},[r>0?a("vue-date-picker",e._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],attrs:{value:e.getEndDate(t.user_experience_packages[r-1].active_from_date),disabled:"","read-only":"","hide-details":""}},"vue-date-picker",e.veeValidate(n+"-to_date-"+(r+1),"To Date"),!1)):e._e()],1),a("v-col",{attrs:{cols:"12",md:"2"}},[0===r&&0===n||i.backdated_calculation_from?a("vue-date-picker",e._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],attrs:{"read-only":i.is_used_package||r>0,disabled:i.is_used_package||r>0,"hide-details":""},model:{value:i.backdated_calculation_from,callback:function(t){e.$set(i,"backdated_calculation_from",t)},expression:"user_package.backdated_calculation_from"}},"vue-date-picker",e.veeValidate(n+"-backdated_calculation_from-"+(r+1),"Backdated Calculation From *"),!1)):e._e(),i.is_used_package||r>0?e._e():a("span",{staticClass:"danger--text text-caption"},[e._v(" "+e._s(e.errors.first(n+"-backdated_calculation_from-"+(r+1)))+" ")])],1),a("v-col",{staticClass:"text-right",attrs:{cols:"12",md:"2"}},[a("vue-context-menu",{attrs:{"context-list":[{name:"Delete",hide:i.is_used_package||!i.id,icon:"mdi-trash-can-outline",color:"red",text_color:"red--text",disabled:e.loading},{name:"Remove",hide:i.id,icon:"mdi-close",color:"red",text_color:"red--text",disabled:e.loading},{name:i.id?"Update":"Save",hide:i.is_used_package,icon:i.id?"mdi-pencil-outline":"mdi-content-save-outline",color:"primary",text_color:"primary--text",disabled:e.loading},{name:"Edit",hide:i.is_used_package||!i.package,icon:"mdi-pencil-box-multiple-outline",color:"primary",text_color:"primary--text",disabled:e.loading},{name:"Clone",hide:!i.is_used_package,icon:"mdi-content-duplicate",color:"primary",text_color:"primary--text",disabled:e.loading},{name:"Backdated Report",hide:!i.backdated_calculation_generated,icon:"mdi-calculator-variant",color:"green",text_color:"green--text",disabled:e.loading},{name:"Refresh Report",hide:!(i.id&&!i.backdated_calculation_generated&&0===r&&!0===e.backdatedReportExist[n]),icon:"mdi-cloud-sync",color:"primary",text_color:"primary--text",disabled:e.loading}],"show-icons":""},on:{click0:function(t){e.deleteId=i.id,e.deleteNotification.dialog=!0},click1:function(e){return t.user_experience_packages.splice(r,1)},click2:function(t){return e.assignPackageFromMainPage(n,r)},click3:function(t){return e.editPackage(n,r)},click4:function(t){return e.clonePackage(n,r)},click5:function(t){e.showBackDatedCalculation=!0,e.selectedPackage=e.currentUserData.experiences[n].user_experience_packages[r]},click6:e.refreshData}})],1)],1)})):e._e()],2)})),0):e._e(),e.clonePage?a("div",[e.selectedPackageDetail?a("v-row",{staticClass:"mx-1 px-4 very-light-blue mb-2",attrs:{align:"center"}},[a("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"8"}},[a("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"max:150",expression:"'max:150'"}],attrs:{counter:"150"},model:{value:e.selectedPackageDetail.name,callback:function(t){e.$set(e.selectedPackageDetail,"name",t)},expression:"selectedPackageDetail.name"}},"v-text-field",e.veeValidate("name","Package Name"),!1))],1),a("v-col",{staticClass:"text-right pa-0 ma-0"},[a("v-icon",{attrs:{color:"primary",size:"18"},on:{click:e.updatePackageName}},[e._v(" mdi-content-save-outline ")])],1)],1):e._e(),a("v-row",{staticClass:"mx-1 px-4 very-light-blue mb-2",attrs:{align:"center"}},[a("v-col",{staticClass:"pa-0 ma-0 px-2",attrs:{cols:"12",md:"4"}},[a("vue-date-picker",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{disabled:e.selectedPackage.active_from_disable},model:{value:e.selectedPackage.active_from_date,callback:function(t){e.$set(e.selectedPackage,"active_from_date",t)},expression:"selectedPackage.active_from_date"}},"vue-date-picker",e.veeValidate("active_from_date","Active From Date *"),!1))],1),a("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"12",md:"4"}},[a("vue-date-picker",e._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],model:{value:e.selectedPackage.backdated_calculation_from,callback:function(t){e.$set(e.selectedPackage,"backdated_calculation_from",t)},expression:"selectedPackage.backdated_calculation_from"}},"vue-date-picker",e.veeValidate("backdated_calculation_from","Backdated Calculation From"),!1))],1),a("v-col",{staticClass:"text-right pa-0 ma-0",attrs:{cols:"12",md:"4"}},[a("v-icon",{attrs:{color:"primary",size:"18"},on:{click:e.assignPackage}},[e._v(" mdi-content-save-outline ")])],1)],1)],1):e._e(),e.clonePage&&!e.advanceView?a("div",e._l(e.packageHeadings,(function(t,n){return a("v-row",{key:n,staticClass:"mx-1 px-4",class:n%2?"very-light-blue":"primaryLight",attrs:{align:"center"}},[a("v-col",{staticClass:"pa-0 ma-0 blueGrey--text font-weight-medium",attrs:{cols:"12",md:"3"}},[e._v(e._s(t.heading_name))]),a("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"12",md:"9"}},[a("edit-package-headings",{attrs:{"package-detail":t,"basic-view":"","applied-class":n%2?"very-light-blue":"primaryLight"},on:{close:function(t){e.uniqueRefreshKey=Math.random()}}})],1)],1)})),1):e._e(),e.clonePage&&e.advanceView?a("div",{staticClass:"mx-1 pa-1 very-light-blue"},[a("package-edit",{attrs:{"package-id":e.selectedPackage.package}})],1):e._e()],a("vue-dialog",{attrs:{notify:e.deleteNotification},on:{close:function(t){e.deleteNotification.dialog=!1},agree:function(t){return e.deletePayroll()}}}),e.showBackDatedCalculation?a("v-dialog",{attrs:{width:"700",persistent:"",scrollable:""},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.showBackDatedCalculation=!1}},model:{value:e.showBackDatedCalculation,callback:function(t){e.showBackDatedCalculation=t},expression:"showBackDatedCalculation"}},[a("v-card",[a("vue-card-title",{attrs:{title:"Backdated Calculation Report",subtitle:"",icon:"mdi-file-document-outline",dark:"",closable:""},on:{close:function(t){e.showBackDatedCalculation=!1}}}),a("back-dated-calculation",{attrs:{"selected-package-id":e.selectedPackage.id}})],1)],1):e._e(),a("v-dialog",{attrs:{persistent:"",width:"500"},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.createPackage=!1,e.cloneId=""}},model:{value:e.createPackage,callback:function(t){e.createPackage=t},expression:"createPackage"}},[a("create-package",{attrs:{"clone-id":e.cloneId,"from-profile-summary":""},on:{"cloned-package-id":function(t){return e.showClonePage(t)},close:function(t){e.createPackage=!1,e.cloneId=""}}})],1)],2)],1)],1)},i=[],r=a("1da1"),s=(a("96cf"),a("7db0"),a("159b"),a("a434"),a("b0c0"),a("02cb")),o=a("741f"),c=a("c05d"),l=a("f12b"),d=a("b471"),u=a("8da0"),p=a("6b20"),g=a("51d8"),h=a("e4bf"),f=a("d772"),m=a("0360"),v=a("ec3e"),_=a("348c"),y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-flex space-between"},[a("v-autocomplete",{key:e.componentKey,ref:"autoComplete",attrs:{items:e.items,"search-input":e.search,loading:e.isLoading,label:e.label,error:e.errorMessages.length>0,"error-messages":e.errorMessages,disabled:e.disabled,"hide-details":e.hideDetails,"item-text":e.itemText,"item-value":e.itemValue,hint:e.hint,"hide-selected":"","hide-no-data":""},on:{"update:searchInput":function(t){e.search=t},"update:search-input":function(t){e.search=t},focus:e.populateOnFocus,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.searchText())},change:e.updateState,blur:function(t){return e.$emit("blur")}},scopedSlots:e._u([{key:"selection",fn:function(t){return[e._t("selection",(function(){return[e.itemText&&t.item?a("div",[t.item[e.itemText]?a("div",[t.item[e.itemText].length>40?a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(n){var i=n.on;return[a("span",e._g({},i),[e._v(" "+e._s(e._f("truncate")(t.item[e.itemText],40)))])]}}],null,!0)},[a("span",[e._v(e._s(t.item[e.itemText]))])]):a("span",[e._v(e._s(t.item[e.itemText]))])],1):a("div",[a("span",[e._v(e._s(t.item))])])]):e._e()]}),{props:t})]}},{key:"item",fn:function(t){return[a("v-list-item-content",[a("v-list-item-title",[e._t("item",(function(){return[e.itemText&&t.item?a("div",[t.item[e.itemText]?a("div",[t.item[e.itemText].length>40?a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(n){var i=n.on;return[a("span",e._g({},i),[e._v(" "+e._s(e._f("truncate")(t.item[e.itemText],40)))])]}}],null,!0)},[a("span",[e._v(e._s(t.item[e.itemText]))])]):a("span",[e._v(e._s(t.item[e.itemText]))])],1):a("div",[a("span",[e._v(e._s(t.item))])])]):e._e()]}),{props:t})],2)],1)]}},{key:"append-item",fn:function(){return[!e.fullyLoaded&&e.showMoreIcon?a("div",[a("v-list-item-content",{staticClass:"px-4 pointer primary--text font-weight-bold"},[a("v-list-item-title",{on:{click:function(t){return e.fetchData()}}},[e._v(" Load More Items ... ")])],1)],1):e._e()]},proxy:!0}],null,!0),model:{value:e.selectedData,callback:function(t){e.selectedData=t},expression:"selectedData"}}),e._t("default")],2)},b=[],k=a("2909"),x=a("5530"),D=a("53ca"),P=(a("a9e3"),a("d81d"),a("ac1f"),a("841c"),a("d3b7"),a("99af"),a("c740"),a("3ca3"),a("ddb0"),a("2b3d"),a("4de4"),a("caad"),a("2532"),a("63ea")),w=a.n(P),C={props:{value:{type:[Number,String,Array,Object],default:void 0},endpoint:{type:String,default:""},itemText:{type:String,required:!0},itemValue:{type:String,required:!0},forceFetch:{type:Boolean,default:!1},staticItems:{type:Array,default:function(){return[]}},errorMessages:{type:[String,Array],default:function(){return[]}},label:{type:String,default:""},disabled:{type:Boolean,default:!1},hint:{type:String,default:void 0},hideDetails:{type:Boolean,default:!1}},data:function(){return{componentKey:0,items:[],selectedData:null,search:null,initialFetchStarted:!1,nextLimit:null,nextOffset:null,showMoreIcon:!1,fullyLoaded:!1,isLoading:!1}},watch:{value:{handler:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a,n,i,r,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}if(!this.forceFetch||this.initialFetchStarted){e.next=6;break}return this.initialFetchStarted=!0,e.next=5,this.fetchData();case 5:this.removeDuplicateItem();case 6:Array.isArray(t)?(i=[],"object"===Object(D["a"])(t[0])?(this.selectedData=t.map((function(e){return e[s.itemValue]})),t.forEach((function(e){var t=s.items.find((function(t){return t===e}));t||i.push(e)}))):(t.forEach((function(e){var t=s.items.find((function(t){return t[s.itemValue]===e}));t||i.push(e)})),this.selectedData=t),i.length>0&&(r=this.items).push.apply(r,i)):"object"===Object(D["a"])(t)?(this.selectedData=t[this.itemValue],a=this.items.find((function(e){return e[s.itemValue]===t})),a||this.items.push(t)):(n=this.items.find((function(e){return e===t})),n||this.searchData(t),this.selectedData=t),this.updateData(this.selectedData);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),immediate:!0},selectedData:function(e){this.updateData(e)},params:{handler:function(e,t){w()(e,t)||(this.fullyLoaded=!1,this.initialFetchStarted=!1,this.items=[],this.componentKey+=1)},deep:!0}},methods:{populateOnFocus:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.initialFetchStarted){t.next=2;break}return t.abrupt("return");case 2:return e.initialFetchStarted=!0,t.next=5,e.fetchData();case 5:e.removeDuplicateItem();case 6:case"end":return t.stop()}}),t)})))()},fetchData:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.staticItems.length>0)){t.next=3;break}return e.items=e.staticItems,t.abrupt("return");case 3:return a=e.nextLimit,n=e.nextOffset,e.search&&(a=null,n=null),e.isLoading=!0,t.next=9,e.$http.get(e.endpoint,{params:Object(x["a"])(Object(x["a"])({},e.params),{},{search:e.search,limit:a,offset:n})}).then((function(t){var a;t.results||(t.results=t),t.next?(e.showMoreIcon=!0,e.extractLimitOffset(t.next)):(e.showMoreIcon=!1,e.search||(e.fullyLoaded=!0)),e.itemsToExclude&&(t.results=e.excludeRecord(t.results)),(a=e.items).push.apply(a,Object(k["a"])(t.results))})).finally((function(){e.isLoading=!1}));case 9:case"end":return t.stop()}}),t)})))()},searchData:function(e){var t=this;this.$http.get(f["a"].getPackage+"?search=".concat(e,"&organization__slug=").concat(this.getOrganizationSlug,"&as=hr")).then((function(e){var a;(a=t.items).push.apply(a,Object(k["a"])(e.results))}))},removeDuplicateItem:function(){var e=this,t=this.items.indexOf(this.selectedData);if(t>=0){var a=this.items.findIndex((function(t){return t[e.itemValue]===e.selectedData}));a>=0&&(this.items.splice(t,1),this.componentKey+=1)}},updateData:function(e){var t=this,a=[];e instanceof Array?e.forEach((function(e){a.unshift(t.items.find((function(a){return a[t.itemValue]===e})))})):a=this.items.find((function(a){return a[t.itemValue]===e})),this.$emit("input",e),this.$emit("update:selectedFullData",a)},searchText:function(){0!==this.$refs.autoComplete.filteredItems.length||this.fullyLoaded||this.fetchData()},extractLimitOffset:function(e){var t=new URL(e);this.nextLimit=t.searchParams.get("limit"),this.nextOffset=t.searchParams.get("offset")},excludeRecord:function(e){var t=this,a=[];return"number"===typeof this.itemsToExclude?a.push(this.itemsToExclude):a=this.itemsToExclude,e.filter((function(e){if(e[t.itemValue])return!a.includes(e[t.itemValue])}))},remove:function(e){if(this.selectedData instanceof Object){var t=this.selectedData.indexOf(e[this.itemValue]);t>=0&&this.selectedData.splice(t,1)}else this.selectedData=null},updateState:function(){this.search="",this.nextLimit&&(this.showMoreIcon=!0)}}},S=C,O=a("2877"),I=a("6544"),E=a.n(I),V=a("c6a6"),T=a("5d23"),$=a("3a2f"),R=Object(O["a"])(S,y,b,!1,null,null,null),F=R.exports;E()(R,{VAutocomplete:V["a"],VListItemContent:T["a"],VListItemTitle:T["c"],VTooltip:$["a"]});var A={components:{PackageAutoComplete:F,CreatePackage:_["a"],PackageEdit:v["a"],VueContextMenu:h["default"],VueUser:s["default"],VueDatePicker:o["default"],BackDatedCalculation:c["a"],EditPackageHeadings:m["a"]},mixins:[l["a"]],props:{selectedUserData:{type:Object,required:!0},isPastEmployee:{type:Boolean,default:!0}},data:function(){return{packageEndpoint:"",currentUserData:this.deepCopy(this.selectedUserData),deleteId:"",deleteNotification:{dialog:!1,heading:"Confirm Delete",text:"Are you sure you want to delete this assigned package?\n                 This is one time option and cannot be reverted once deleted."},packageApplicableDate:"",payrollFiscalStartDate:"",showBackDatedCalculation:!1,selectedPackage:{},selectedExperience:"",mainPage:!1,clonePage:!1,advanceView:!1,packageHeadings:[],selectedPackageDetail:null,createPackage:!1,cloneId:"",backdatedReportExist:[]}},created:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.packageEndpoint=f["a"].getPackage+"?as=hr&organization__slug=".concat(e.getOrganizationSlug),t.next=3,e.getPayrollStartFiscalYearDate();case 3:n=t.sent,e.currentUserData.experiences.find((function(e){return e.is_current}))?a=e.currentUserData.experiences.find((function(e){return e.is_current})).start_date:e.currentUserData.experiences.length&&(a=e.currentUserData.experiences[0].start_date),e.packageApplicableDate=n>a?n:a,e.makeReverse(),e.mainPage=!0;case 8:case"end":return t.stop()}}),t)})))()},methods:{makeReverse:function(){var e=this;this.currentUserData.experiences.forEach((function(t){var a=t.user_experience_packages.reverse();delete t.user_experience_packages,e.$set(t,"user_experience_packages",a),e.backdatedReportExist=[],t.user_experience_packages.length>0&&t.user_experience_packages[0].backdated_calculation_from?e.backdatedReportExist.push(!0):e.backdatedReportExist.push(!1)}))},getPayrollStartFiscalYearDate:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getData(p["a"].getPayrollConfig(e.getOrganizationSlug)+"?as=hr").then((function(e){a=e.start_fiscal_year.id}));case 2:if(!a){t.next=5;break}return t.next=5,e.getData(g["a"].getFiscalYearDetails(e.getOrganizationSlug,a)).then((function(t){e.payrollFiscalStartDate=t.applicable_from}));case 5:return t.abrupt("return",e.payrollFiscalStartDate||null);case 6:case"end":return t.stop()}}),t)})))()},addNewPackage:function(e){var t=this.currentUserData.experiences[e];t.user_experience_packages.splice(0,0,{active_from_date:0===t.user_experience_packages.length?this.packageApplicableDate:null,user_experience:null,package:null})},assignPackageFromMainPage:function(e,t){this.selectedExperience=this.currentUserData.experiences[e],this.selectedPackage=this.currentUserData.experiences[e].user_experience_packages[t],this.assignPackage(e+"-")},assignPackage:function(){var e=arguments,t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:"",a.next=3,t.validateAllFields();case 3:if(!a.sent){a.next=6;break}i={user_experience:t.selectedExperience.id,package:t.selectedPackage.package,active_from_date:t.selectedPackage.active_from_date,deleted_at:t.selectedPackage.deleted_at,backdated_calculation_from:t.selectedPackage.backdated_calculation_from||null},t.selectedPackage.id?(t.crud.message="Successfully Updated Package",t.putData(d["a"].updatePackage(t.selectedPackage.id)+"?user_experience__user__detail__organization__slug=".concat(t.getOrganizationSlug,"&as=hr"),i).then((function(e){t.selectedPackage.active_from_date=e.active_from_date,t.selectedPackage.backdated_calculation_from=e.backdated_calculation_from,t.selectedPackage.backdated_calculation_generated=e.backdated_calculation_generated,t.selectedPackage.backdated_calculation_from&&t.notifyUser("Successfully Updated Package. Backdated report will be generated soon.")})).catch((function(e){t.mainPage&&(t.pushIndexedErrors(e,"backdated_calculation_from",!1,n),t.pushIndexedErrors(e,"active_from_date",!1,n))}))):(t.crud.message="Successfully Created Package.",t.insertData(d["a"].linkPackage+"?user_experience__user__detail__organization__slug=".concat(t.getOrganizationSlug,"&as=hr"),i).then((function(){t.selectedPackage.backdated_calculation_from&&t.notifyUser("Successfully Created Package. Backdated report will be generated soon."),t.refreshData()})).catch((function(e){t.mainPage&&(t.pushIndexedErrors(e,"backdated_calculation_from",!1,n),t.pushIndexedErrors(e,"active_from_date",!1,n))})));case 6:case"end":return a.stop()}}),a)})))()},deletePayroll:function(){var e=this;this.crud.message="Successfully Deleted Assigned Payroll.",this.deleteData(d["a"].deletePackage(this.deleteId)+"?user_experience__user__detail__organization__slug=".concat(this.getOrganizationSlug,"&as=hr")).then((function(){e.$emit("form-response")}))},getEndDate:function(e){return e?this.$dayjs(e).subtract(1,"days").format("YYYY-MM-DD"):null},refreshData:function(){var e=this,t=u["a"].getIndividualUserPackageDetails(this.getOrganizationSlug,this.currentUserData.id),a={as:"hr",user_status:this.isPastEmployee?"past":""};this.getData(t,a).then((function(t){e.currentUserData=t,e.makeReverse()}))},setSelectedPackage:function(e,t){return this.currentUserData.experiences[e].user_experience_packages[t]},editPackage:function(e,t){this.selectedExperience=this.currentUserData.experiences[e],this.selectedPackage=this.selectedExperience.user_experience_packages[t],1===this.selectedExperience.user_experience_packages.length&&this.selectedPackage.active_from_date&&(this.selectedPackage.active_from_disable=!0),this.selectedPackageDetail=this.selectedPackage.package_detail,this.showClonePage()},clonePackage:function(e,t){this.selectedExperience=this.currentUserData.experiences[e],this.cloneId=this.selectedExperience.user_experience_packages[t].package,this.createPackage=!0},showClonePage:function(e){var t=this;e&&(this.selectedPackageDetail=e,this.selectedPackage["package"]=e.id),this.createPackage=!1,this.mainPage=!1,this.clonePage=!0,this.getData(f["a"].getBasicPackageById(this.selectedPackage.package)+"?organization__slug=".concat(this.getOrganizationSlug,"&as=hr")).then((function(e){t.packageHeadings=e}))},updatePackageName:function(){this.crud.message="Successfully Updated Package Name.",this.patchData(f["a"].updatePackageById(this.selectedPackage.package)+"?organization__slug=".concat(this.getOrganizationSlug,"&as=hr"),{name:this.selectedPackageDetail.name},{validate:!1})}}},B=A,N=a("8336"),j=a("b0af"),U=a("99d9"),L=a("62ad"),z=a("a523"),H=a("169a"),M=a("ce7e"),q=a("132d"),Y=a("8e36"),K=a("0fd9b"),G=a("8654"),W=Object(O["a"])(B,n,i,!1,null,null,null);t["default"]=W.exports;E()(W,{VBtn:N["a"],VCard:j["a"],VCardText:U["c"],VCol:L["a"],VContainer:z["a"],VDialog:H["a"],VDivider:M["a"],VIcon:q["a"],VProgressLinear:Y["a"],VRow:K["a"],VTextField:G["a"]})},a459:function(e,t,a){"use strict";a("66da")},a51f:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.search.length>0?a("span",[e._v(' Your search for "'+e._s(e.search)+'" found no results. ')]):e.loading?a("v-skeleton-loader",{attrs:{type:"table",height:e.skeletonLoaderHeight}}):a("no-data-found",{attrs:{text:e.text,height:e.height}},[e._t("default")],2)],1)},i=[],r=(a("a9e3"),a("e585")),s={components:{NoDataFound:r["default"]},props:{search:{type:String,default:""},loading:{type:Boolean,required:!0},text:{type:String,default:"No data available at the moment"},height:{type:[String,Number],default:200},skeletonLoaderHeight:{type:[String,Number],default:void 0}}},o=s,c=a("2877"),l=a("6544"),d=a.n(l),u=a("3129"),p=Object(c["a"])(o,n,i,!1,null,null,null);t["default"]=p.exports;d()(p,{VSkeletonLoader:u["a"]})},ab8a:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.changeType&&0!==e.nonFieldErrors.length?a("div",e._l(e.nonFieldErrors,(function(t,n){return a("v-col",{key:n},e._l(t,(function(t,n){return a("div",{key:n},[a("span",{domProps:{textContent:e._s(e.key)}}),a("span",{domProps:{textContent:e._s(t.toString())}})])})),0)})),1):e._e(),e.changeType||0===e.nonFieldErrors.length?e._e():a("v-alert",{staticClass:"ma-3",attrs:{outlined:"",dense:"",tile:"",dismissible:"",color:"danger"}},[a("span",{domProps:{textContent:e._s("There are some errors")}}),e._l(e.nonFieldErrors,(function(t,n){return a("div",{key:n},e._l(t,(function(t,n){return a("div",{key:n},[a("ul",[a("li",[a("span",{domProps:{textContent:e._s(e.key)}}),a("span",{domProps:{textContent:e._s(t.toString())}})])])])})),0)}))],2)],1)},i=[],r={props:{nonFieldErrors:{type:Array,required:!0},changeType:{type:Boolean,default:!1}},data:function(){return{key:""}}},s=r,o=a("2877"),c=a("6544"),l=a.n(c),d=a("0798"),u=a("62ad"),p=Object(o["a"])(s,n,i,!1,null,null,null);t["default"]=p.exports;l()(p,{VAlert:d["a"],VCol:u["a"]})},abd3:function(e,t,a){},b471:function(e,t,a){"use strict";a("99af");t["a"]={linkPackage:"/payroll/user-experience-package/",updatePackage:function(e){return"/payroll/user-experience-package/".concat(e,"/")},deletePackage:function(e){return"/payroll/user-experience-package/".concat(e,"/")},bulkAssign:"/payroll/user-experience-package/create_in_bulk/",getBackdatedCalculationReport:function(e,t){return"/payroll/".concat(e,"/reports/backdated-calculations/").concat(t)}}},c05d:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"scrollbar-md"},[0!==e.backdatedData.length?a("v-data-table",{attrs:{headers:e.headers,items:e.backdatedData,"mobile-breakpoint":0,"items-per-page":e.backdatedData.length,"must-sort":"","hide-default-footer":""},scopedSlots:e._u([{key:"item",fn:function(t){return[a("tr",[a("td",[e._v(" "+e._s(t.item.heading)+" ")]),a("td",[e._v(" "+e._s(e.formatCurrency(t.item.previous_amount)||"-")+" ")]),a("td",[e._v(" "+e._s(e.formatCurrency(t.item.current_amount)||"-")+" ")]),a("td",[e._v(" "+e._s(e.formatCurrency(t.item.current_amount-t.item.previous_amount)||"-")+" ")])])]}}],null,!1,2019143977)},[a("template",{slot:"no-data"},[a("data-table-no-data",{attrs:{loading:e.loading}})],1)],2):a("v-data-table",{attrs:{headers:e.headers,items:e.fetchedResults,"sort-desc":e.pagination.descending,"sort-by":e.pagination.sortBy,page:e.pagination.page,"items-per-page":e.pagination.rowsPerPage,"footer-props":e.footerProps,"server-items-length":e.pagination.totalItems,"mobile-breakpoint":0,"must-sort":""},on:{"update:sortDesc":function(t){return e.$set(e.pagination,"descending",t)},"update:sort-desc":function(t){return e.$set(e.pagination,"descending",t)},"update:sortBy":function(t){return e.$set(e.pagination,"sortBy",t)},"update:sort-by":function(t){return e.$set(e.pagination,"sortBy",t)},"update:page":function(t){return e.$set(e.pagination,"page",t)},"update:itemsPerPage":function(t){return e.$set(e.pagination,"rowsPerPage",t)},"update:items-per-page":function(t){return e.$set(e.pagination,"rowsPerPage",t)}},scopedSlots:e._u([{key:"item",fn:function(t){return[a("tr",[a("td",[e._v(" "+e._s(t.item.heading)+" ")]),a("td",[e._v(" "+e._s(e.formatCurrency(t.item.previous_amount)||"-")+" ")]),a("td",[e._v(" "+e._s(e.formatCurrency(t.item.current_amount)||"-")+" ")]),a("td",[e._v(" "+e._s(e.formatCurrency(t.item.current_amount-t.item.previous_amount)||"-")+" ")])])]}}])},[a("template",{slot:"no-data"},[a("data-table-no-data",{attrs:{loading:e.loading}})],1)],2)],1)},i=[],r=a("1da1"),s=(a("96cf"),a("a9e3"),a("d3b7"),a("17cc")),o=a("a51f"),c=a("b471"),l=a("cf45"),d={components:{DataTableNoData:o["default"]},mixins:[s["a"]],props:{selectedPackageId:{type:[String,Number],default:null},backdatedData:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,headers:[{text:"Heading Name",value:"heading",align:"left",sortable:!1},{text:"Backdated value per heading",value:"previous_amount",align:"left",sortable:!1},{text:"Current value per heading",value:"current_amount",align:"left",sortable:!1},{text:"Total Increment",value:"total",align:"left",sortable:!1}]}},created:function(){0===this.backdatedData.length&&this.loadDataTableChange()},methods:{formatCurrency:l["d"],fetchDataTable:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loading=!0,e.$http.get(c["a"].getBackdatedCalculationReport(e.getOrganizationSlug,e.selectedPackageId),{params:e.fullParams}).then((function(t){e.loadDataTable(t)})).finally((function(){e.loading=!1}));case 2:case"end":return t.stop()}}),t)})))()}}},u=d,p=a("2877"),g=a("6544"),h=a.n(g),f=a("8fea"),m=Object(p["a"])(u,n,i,!1,null,null,null);t["a"]=m.exports;h()(m,{VDataTable:f["a"]})},c197:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.divClass},[a("v-img",{class:e.imgClass,attrs:{src:"/svg/three-dots.svg",height:e.height,contain:""}}),a("h3",{staticClass:"text-center grey--text",domProps:{textContent:e._s(e.message)}})],1)},i=[],r={props:{message:{type:String,default:"Please wait. Fetching data just for you ..."},divClass:{type:String,default:"pa-12"},imgClass:{type:String,default:"my-6"},height:{type:String,default:"20"}},data:function(){return{}}},s=r,o=a("2877"),c=a("6544"),l=a.n(c),d=a("adda"),u=Object(o["a"])(s,n,i,!1,null,null,null);t["default"]=u.exports;l()(u,{VImg:d["a"]})},d772:function(e,t,a){"use strict";t["a"]={getPackage:"/payroll/packages/",postPackage:function(){return"/payroll/packages/"},clonePackage:function(e){return"/payroll/".concat(e,"/packages/clone/")},getPackageVariables:"/payroll/package-headings/get_variables/",getPackageById:function(e){return"/payroll/packages/".concat(e,"/")},getBasicPackageById:function(e){return"/payroll/packages/".concat(e,"/basic-view/")},updatePackageById:function(e){return"/payroll/packages/".concat(e,"/")},createPackageHeadingById:"/payroll/package-headings/",getPackageHeadingById:function(e){return"/payroll/package-headings/".concat(e,"/")},updatePackageHeadingById:function(e){return"/payroll/package-headings/".concat(e,"/")}}},e4bf:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.contextList.filter((function(e){return!e.hide})).length<3&&!e.hideIcons||e.showIcons?a("div",e._l(e.contextList,(function(t,n){return a("span",{key:n},[t.hide?e._e():a("v-tooltip",{attrs:{disabled:e.$vuetify.breakpoint.xs,top:""},scopedSlots:e._u([{key:"activator",fn:function(i){var r=i.on;return[a("v-btn",e._g({staticClass:"mx-0",attrs:{text:"",width:e.small?"18":"22",depressed:"",icon:""}},r),[a("v-icon",{attrs:{disabled:t.disabled,color:t.color,"data-cy":e.dataCyVariable+"btn-dropdown-menu-item-"+(n+1),dark:!t.disabled,small:e.small,size:"20",dense:""},domProps:{textContent:e._s(t.icon)},on:{click:function(t){return e.$emit("click"+n)}}})],1)]}}],null,!0)},[a("span",{domProps:{textContent:e._s(t.disabled&&t.disable_message||t.name)}})])],1)})),0):a("v-menu",{attrs:{"offset-y":"",left:"",transition:"slide-y-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-btn",e._g({attrs:{small:"",text:"",icon:""}},n),[a("v-icon",{attrs:{"data-cy":"btn-dropdown-menu"},domProps:{textContent:e._s("mdi-dots-vertical")}})],1)]}}])},e._l(e.contextList,(function(t,n){return a("v-list",{key:n,staticClass:"pa-0",attrs:{dense:""}},[t.hide?e._e():a("div",[t.disabled?a("v-list-item",{attrs:{"data-cy":"btn-dropdown-menu-item"}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(n){var i=n.on;return[a("v-list-item-title",e._g({},i),[a("v-icon",{attrs:{disabled:"",small:"",color:t.color},domProps:{textContent:e._s(t.icon)}}),a("span",{staticClass:"ml-1 grey--text",domProps:{textContent:e._s(t.name)}})],1)]}}],null,!0)},[a("span",{domProps:{textContent:e._s(t.disabled&&t.disable_message||t.name)}})])],1):a("v-list-item",{attrs:{"data-cy":"btn-dropdown-menu-item"},on:{click:function(t){return e.$emit("click"+n)}}},[a("v-list-item-title",[a("v-icon",{attrs:{color:t.color,small:"",dense:""},domProps:{textContent:e._s(t.icon)}}),a("span",{staticClass:"ml-1",class:t.text_color,domProps:{textContent:e._s(t.name)}})],1)],1)],1)])})),1)],1)},i=[],r={name:"VueContextMenu",props:{contextList:{type:Array,default:function(){return[]}},dataCyVariable:{type:String,default:""},showIcons:{type:Boolean,default:!1},hideIcons:{type:Boolean,default:!1},small:{type:Boolean,default:!1}}},s=r,o=a("2877"),c=a("6544"),l=a.n(c),d=a("8336"),u=a("132d"),p=a("8860"),g=a("da13"),h=a("5d23"),f=a("e449"),m=a("3a2f"),v=Object(o["a"])(s,n,i,!1,null,"71ee785c",null);t["default"]=v.exports;l()(v,{VBtn:d["a"],VIcon:u["a"],VList:p["a"],VListItem:g["a"],VListItemTitle:h["c"],VMenu:f["a"],VTooltip:m["a"]})},ec3e:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card-text",{staticClass:"ma-0 pa-0"},[a("v-row",{staticClass:"pa-0 ma-0"},[a("v-slide-x-transition",[a("v-col",{directives:[{name:"show",rawName:"v-show",value:!e.collapsed,expression:"!collapsed"}],staticClass:"very-light-blue py-0",attrs:{md:"3",cols:"12"}},[a("v-row",[a("v-col",{attrs:{cols:"10"}},[a("div",{staticClass:"px-3 blue-grey--text text--darken-2 font-weight-bold"},[e._v(" Overall Headings ")])]),a("v-col",{attrs:{cols:"2"}},[a("v-icon",{attrs:{size:16},domProps:{textContent:e._s(e.collapsed?"mdi-chevron-right":"mdi-chevron-left")},on:{click:function(t){e.collapsed=!e.collapsed}}})],1),a("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"12"}},[a("v-divider")],1),a("v-col",{staticClass:"pa-0 ma-0 scrollbar-lg",attrs:{cols:"12"}},[a("overall-headings",{key:e.uniqueRefreshKey,attrs:{"package-id":e.packageId},on:{addHeading:function(t){e.displayForm=!1,e.addHeading(t)},refresh:function(t){e.uniqueRefreshKey=Math.random()},editDependency:e.editDependency}})],1)],1)],1)],1),a("v-col",{staticClass:"very-light-blue py-0",attrs:{md:"3",cols:"12"}},[a("v-row",[e.collapsed?a("v-col",{attrs:{cols:"2"}},[a("v-icon",{attrs:{size:16},domProps:{textContent:e._s(e.collapsed?"mdi-chevron-right":"mdi-chevron-left")},on:{click:function(t){e.collapsed=!e.collapsed}}})],1):e._e(),a("v-col",{attrs:{cols:"10"}},[a("div",{staticClass:"px-3 blue-grey--text text--darken-2 font-weight-bold"},[e._v(" Headings In This Package ")])]),a("v-col",{staticClass:"pa-0 ma-0",attrs:{cols:"12"}},[a("v-divider")],1),a("v-col",{staticClass:"py-0 px-1 scrollbar-lg"},[a("add-headings",{key:e.uniqueRefreshKey,attrs:{"package-id":e.packageId},on:{refresh:function(t){e.uniqueRefreshKey=Math.random(),e.displayForm=!1},"open-form":function(t){return e.openForm(t)}}})],1)],1)],1),a("v-col",{staticClass:"very-light-blue py-0 pr-0",attrs:{md:e.collapsed?"9":"6",cols:"12"}},[e.displayForm?a("edit-package-headings",{attrs:{"package-id":e.packageId,"package-heading-id":e.headId},on:{close:function(t){e.displayForm=!1,e.uniqueRefreshKey=Math.random()}}}):e._e(),e.newHeadingAddition?a("add-new-heading",{attrs:{"next-order":e.order,"show-title":""},on:{close:function(t){e.newHeadingAddition=!1,e.uniqueRefreshKey=Math.random()}}}):e._e(),e.editDependencyData.display?a("add-package-heading",{attrs:{"heading-id":e.editDependencyData.headingId,"next-order":e.editDependencyData.order},on:{close:function(t){e.editDependencyData.display=!1,e.uniqueRefreshKey=Math.random()}}}):e._e()],1)],1)],1)},i=[],r=(a("a9e3"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-data-table",{ref:"sortableTable",attrs:{items:e.results,loading:e.loading,"disable-pagination":"",dense:"","hide-default-footer":"","hide-default-header":""},scopedSlots:e._u([{key:"item",fn:function(t){return[a("tr",{key:t.item.id,class:e.addedIds.includes(t.item.id)?"sortableRow "+t.item.style_class:"sortableRow "+t.item.style_class+" sortHandle pointer",attrs:{id:t.item.id},on:{click:function(a){return e.showDependency(t.index,t.item)},dblclick:function(a){return e.removeDependency(t.index,t.item)}}},[a("td",[a("v-icon",{attrs:{color:e.addedIds.includes(t.item.id)?"red":"green"}},[e._v("mdi-equal")])],1),a("td",[a("span",[e._v(" "+e._s(t.item.label)+" ")]),e.addedIds.includes(t.item.id)?a("span",[a("v-icon",{attrs:{color:"danger",size:"12"},domProps:{textContent:e._s("mdi-circle")}})],1):e._e()]),a("td",[a("v-menu",{attrs:{"offset-y":"",left:"",transition:"slide-y-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-btn",e._g({attrs:{small:"",text:"",icon:""}},n),[a("v-icon",{domProps:{textContent:e._s("mdi-dots-vertical")}})],1)]}}],null,!0)},[a("v-list",{attrs:{dense:""}},[a("v-list-item",{on:{click:function(a){return e.addHeadingAbove(t.item.order)}}},[a("v-icon",{attrs:{size:"18"},domProps:{textContent:e._s("mdi-arrow-up")}}),a("span",{staticClass:"mx-1"},[e._v("Add Heading Above")])],1),a("v-list-item",{on:{click:function(a){return e.orderSelectLastButtonClick(t.item.order)}}},[a("v-icon",{attrs:{size:"18"},domProps:{textContent:e._s("mdi-arrow-down")}}),a("span",{staticClass:"mx-1"},[e._v("Add Heading Below")])],1)],1)],1)],1)])]}}])},[a("template",{slot:"no-data"},[a("data-table-no-data",{attrs:{loading:e.loading}})],1)],2),a("v-dialog",{attrs:{persistent:"","max-width":"45%"},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.dependencyNotification.dialog=!1}},model:{value:e.dependencyNotification.dialog,callback:function(t){e.$set(e.dependencyNotification,"dialog",t)},expression:"dependencyNotification.dialog"}},[a("v-card",[a("vue-card-title",{attrs:{title:e.dependencyNotification.heading,subtitle:e.dependencyNotification.autoResolve?e.dependencyNotification.subheading:"Could not auto resolve dependencies. Please select edit action to resolve.",icon:"mdi-file-document-outline",dark:"",closable:""},on:{close:function(t){e.dependencyNotification.dialog=!1}}}),a("v-card-text",{staticClass:"pa-3"},[e.dependencyNotification.autoResolving?a("div",{staticClass:"text-subtitle-2 primary--text",domProps:{textContent:e._s("Resolving data please wait...")}}):a("div",{domProps:{textContent:e._s(e.dependencyNotification.text)}})]),a("v-divider"),e.dependencyNotification.autoResolving?e._e():a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:""},domProps:{textContent:e._s("Cancel")},on:{click:function(t){e.dependencyNotification.dialog=!1,e.$emit("refresh")}}}),a("v-btn",{attrs:{color:"primary"},domProps:{textContent:e._s("Update")},on:{click:e.editDependency}}),e.dependencyNotification.autoResolve?a("v-btn",{attrs:{color:"primary"},domProps:{textContent:e._s("Auto Resolve")},on:{click:e.resolveDependency}}):e._e()],1)],1)],1)],1)}),s=[],o=a("1da1"),c=a("d4ec"),l=(a("96cf"),a("d81d"),a("a630"),a("3ca3"),a("99af"),a("d3b7"),a("4de4"),a("159b"),a("caad"),a("2532"),a("aa47")),d=a("a51f"),u=a("c44a"),p=function e(t,a){var n=this;Object(c["a"])(this,e),this.id=t.id,this.original_order=this.order,this.order=t.order,this.label=t.label,this.type=t.type,this.payroll_setting_type=t.payroll_setting_type,this.dependencies=t.dependencies,this.makes_dependencies=t.makes_dependency,this.style_class=null,this.beforeItemClick=function(e){var t=e.currentTarget.parentElement.parentElement,i=n.getUpperAndLowerOrder(t);a.$emit("addHeading",{order:i})},this.getUpperAndLowerOrder=function(e){var t=Array.from(a.$refs.sortableTable.$el.getElementsByTagName("tbody")[0].childNodes).map((function(e){return e.id})),n=t.indexOf(e.id);return a.results[n].order}},g={components:{DataTableNoData:d["default"]},mixins:[u["a"]],props:{orderSelectMode:{type:Boolean,default:!0},packageId:{type:[String,Number],required:!0}},data:function(){return{srtjs:null,results:[],nextOrder:"",addedIds:[],dependencies:[],loading:!1,packageHeadings:[],lastIndex:0,lastDetails:null,makeDependencies:[],selectedHeadingId:"",dependencyNotification:{dialog:!1,heading:"Missing Dependency",subheading:"Missing dependency found for the dragged heading.",text:"Please select the action that you want to perform for Dependency.",autoResolve:!0,autoResolving:!1}}},mounted:function(){this.fetchData(),this.getPackageHeadings(),this.srtjs=l["a"].create(this.$refs.sortableTable.$el.getElementsByTagName("tbody")[0],{group:{name:"shared",pull:"clone",put:!1},multiDrag:!0,selectedClass:"sortableRow",draggable:".sortableRow",handle:".sortHandle",onEnd:this.onEnded,onMove:this.detectComponent,onStart:this.onStart,sort:!1})},methods:{orderSelectLastButtonClick:function(e){this.$emit("addHeading",{order:e+1})},addHeadingAbove:function(e){this.$emit("addHeading",{order:e})},getPackageHeadings:function(){var e=this;this.$http.get("/payroll/packages/".concat(this.packageId,"/?organization__slug=").concat(this.getOrganizationSlug,"&as=hr")).then((function(t){e.packageHeadings=t.package_headings,e.nextOrder=t.next_order,e.addedIds=t.package_headings.map((function(e){return e.heading}))}))},fetchData:function(){var e=this;this.loading||(this.loading=!0,this.$http.get("/payroll/headings/choices/?organization__slug=".concat(this.getOrganizationSlug,"&as=hr"),{params:{archived:!0}}).then((function(t){e.results=t.map((function(t){return new p(t,e)}))})).finally((function(){e.loading=!1})))},showDependency:function(e,t){var a=this;this.removeDependency(this.lastIndex,this.lastDetails),this.lastIndex=e,this.lastDetails=t,this.dependencies=this.results[e].dependencies||[],this.makeDependencies=this.results[e].makes_dependencies||[],this.results[this.results.indexOf(t)].style_class="selected";var n=this.results.filter((function(e){return-1!==a.dependencies.indexOf(e.id)})),i=this.results.filter((function(e){return-1!==a.makeDependencies.indexOf(e.id)}));n.forEach((function(e){a.results[a.results.indexOf(e)].style_class="dependent-heading"})),i.forEach((function(e){a.results[a.results.indexOf(e)].style_class="make-dependent-heading"}))},removeDependency:function(e,t){var a=this;this.dependencies=this.results[e].dependencies||[],this.makeDependencies=this.results[e].makes_dependencies||[];var n=this.results.filter((function(e){return-1!==a.dependencies.indexOf(e.id)}));t&&this.results[this.results.indexOf(t)]&&(this.results[this.results.indexOf(t)].style_class="");var i=this.results.filter((function(e){return-1!==a.makeDependencies.indexOf(e.id)}));n.forEach((function(e){a.results[a.results.indexOf(e)].style_class=""})),i.forEach((function(e){a.results[a.results.indexOf(e)].style_class=""}))},onEnded:function(e){if(e.to.rows.dropZone||0===this.packageHeadings.length){var t=0;e.newIndex&&this.packageHeadings.length>0&&(t=this.packageHeadings[e.newIndex]?this.packageHeadings[e.newIndex].order||1:this.nextOrder),this.nextOrder=t,this.selectedHeadingId=e.item.id,this.createPackageHeading(!1)}else this.notifyUser("Cannot drop heading in same table.","red")},createPackageHeading:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n={heading_id:t.selectedHeadingId,to_obj_order:t.nextOrder,package_id:t.packageId},a.next=3,t.$http.post("/payroll/package-headings/drag_heading/?as=hr&package__organization__slug=".concat(t.getOrganizationSlug,"&auto_resolve=").concat(e),n).then((function(e){!0===e.success&&(t.notifyUser("Successfully added package heading."),t.$emit("refresh"))})).catch((function(e){400===e.response.status&&e.response.data.success&&e.response.data.success.includes("False")&&e.response.data.auto_resolve&&e.response.data.auto_resolve.includes("True")?(t.get(e,"response.data.errors.non_field_errors")?t.notifyUser(t.get(e,"response.data.errors.non_field_errors"),"red"):t.get(e,"response.data.error_message")?t.notifyUser(t.get(e,"response.data.error_message"),"red"):t.notifyUser("Something went wrong.","red"),t.dependencyNotification.dialog=!0):(t.dependencyNotification.autoResolve=!1,t.get(e,"response.data.non_field_errors")?t.notifyUser(t.get(e,"response.data.non_field_errors")[0],"red"):t.get(e,"response.data.error_message")?t.notifyUser(t.get(e,"response.data.error_message"),"red"):t.notifyUser(t.get(e,"response.data.message"),"red"),t.$emit("refresh"))}));case 3:case"end":return a.stop()}}),a)})))()},editDependency:function(){var e={headingId:this.selectedHeadingId,order:this.nextOrder};this.$emit("editDependency",e),this.dependencyNotification.dialog=!1},resolveDependency:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dependencyNotification.autoResolving=!0,t.next=3,e.createPackageHeading(!0);case 3:e.dependencyNotification.dialog=!1,e.dependencyNotification.autoResolving=!1;case 5:case"end":return t.stop()}}),t)})))()}}},h=g,f=(a("a459"),a("2877")),m=a("6544"),v=a.n(m),_=a("8336"),y=a("b0af"),b=a("99d9"),k=a("8fea"),x=a("169a"),D=a("ce7e"),P=a("132d"),w=a("8860"),C=a("da13"),S=a("e449"),O=a("2fa4"),I=Object(f["a"])(h,r,s,!1,null,"90cb0f10",null),E=I.exports;v()(I,{VBtn:_["a"],VCard:y["a"],VCardActions:b["a"],VCardText:b["c"],VDataTable:k["a"],VDialog:x["a"],VDivider:D["a"],VIcon:P["a"],VList:w["a"],VListItem:C["a"],VMenu:S["a"],VSpacer:O["a"]});var V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.tempDisable?e._e():a("v-data-table",{ref:"sortableTable",attrs:{headers:e.package_headings_headers,items:e.package_headings,loading:e.loading,"disable-pagination":"",dense:"","hide-default-footer":"","hide-default-header":""},scopedSlots:e._u([{key:"item",fn:function(t){return[a("tr",{key:t.item.id,class:"sortableRow "+t.item.style_class,attrs:{id:t.item.id,name:"dropZone"},on:{click:function(a){return e.showDependency(t.index,t.item)},dblclick:function(a){return e.removeDependency(t.index,t.item)}}},[a("td",[a("v-icon",{staticClass:"sortHandle",staticStyle:{cursor:"move"},attrs:{icon:"",color:"green"},on:{mousedown:function(a){return e.showDependency(t.index,t.item)},dblclick:function(a){return e.removeDependency(t.index,t.item)}}},[e._v("mdi-equal")])],1),a("td",[e._v(" "+e._s(t.item.heading_name)+" ")]),a("td",[a("v-row",{staticClass:"my-1",attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"6"}},[a("v-icon",{attrs:{color:"blue",size:"14"},on:{click:function(a){return e.$emit("open-form",t.item.id)}}},[e._v("mdi-pencil")])],1),a("v-col",{attrs:{cols:"6"}},[a("v-icon",{staticClass:"pl-1",attrs:{color:"red",size:"14"},on:{click:function(a){e.deleteNotification.dialog=!0,e.deleteId=t.item.id}}},[e._v("mdi-trash-can-outline")])],1)],1)],1)])]}}],null,!1,1214333581)},[a("template",{slot:"no-data"},[a("data-table-no-data",{attrs:{loading:e.loading}})],1)],2),a("vue-dialog",{attrs:{notify:e.deleteNotification},on:{close:function(t){e.deleteNotification.dialog=!1},agree:e.deletePackageHeading}})],1)},T=[],$=a("2909"),R=(a("7db0"),a("d772")),F=function e(t,a){var n=this;Object(c["a"])(this,e),this.id=t.id,this.original_order=this.order,this.order=t.order,this.heading_name=t.heading_name,this.absent_days_impact=t.absent_days_impact,this.duration_unit=t.duration_unit,this.taxable=t.taxable,this.benefit_type=t.benefit_type,this.type=t.type,this.payroll_setting_type=t.payroll_setting_type,this.dependencies=t.dependencies,this.makes_dependencies=t.makes_dependency,this.style_class=null,this.beforeItemClick=function(e){var t=e.currentTarget.parentElement.parentElement,i=n.getUpperAndLowerOrder(t);a.$router.push({name:"admin-slug-payroll-settings-package-heading-create-packageId-nextOrder",params:{nextOrder:i,packageId:a.packageId,slug:a.getOrganizationSlug}})},this.getUpperAndLowerOrder=function(e){var t=Array.from(a.$refs.sortableTable.$el.getElementsByTagName("tbody")[0].childNodes).map((function(e){return e.id})),n=t.indexOf(e.id);return a.package_headings[n].order}},A={components:{DataTableNoData:d["default"]},mixins:[u["a"]],props:{packageId:{type:[String,Number],required:!0}},data:function(){return{package_headings_headers:[{text:"",value:"order"},{text:"Heading Name",value:"heading_name",align:"left",sortable:!1},{text:"Controls",value:"benefit_type",align:"right",sortable:!1}],deleteNotification:{dialog:!1,heading:"Confirm Delete",text:"Are you sure you want to delete this heading?"},srtjs:null,deleteId:"",loading:!1,formData:{},package_headings:[],dependencies:[],makeDependencies:[],beforeMoveKeyOrder:[],lastIndex:0,lastDetails:null,tempDisable:!1,validDrag:!0}},mounted:function(){this.loadPackageById(),this.srtjs=l["a"].create(this.$refs.sortableTable.$el.getElementsByTagName("tbody")[0],{group:{name:"shared"},draggable:".sortableRow",handle:".sortHandle",onEnd:this.dragReorder,onMove:this.onMove,onStart:this.onStart})},methods:{loadPackageById:function(){var e=this;this.loading=!0,this.formData={},this.package_headings=[],this.$http.get(R["a"].getPackageById(this.packageId)+"?as=hr&organization__slug=".concat(this.getOrganizationSlug)).then((function(t){e.formData=t,e.package_headings=t.package_headings.map((function(t){return new F(t,e)})),e.loading=!1}))},successCallback:function(){this.$router.push({name:"admin-slug-payroll-settings-packages",params:{slug:this.getOrganizationSlug}})},deletePackageHeading:function(){var e=this;this.$http.delete("/payroll/package-headings/".concat(this.deleteId,"/?as=hr&package__organization__slug=").concat(this.getOrganizationSlug)).then((function(){e.notifyUser("Successfully Deleted Package Headings"),e.loadPackageById(),e.deleteNotification.dialog=!1,e.lastIndex=0,e.lastDetails=null,e.$emit("refresh")})).catch((function(t){e.deleteNotification.dialog=!1;var a=t.response.data.error_message||t.response.data[0]||"Something went wrong.";e.notifyUser(a,"red")}))},showDependency:function(e,t){var a=this;this.removeDependency(this.lastIndex,this.lastDetails),this.lastIndex=e,this.lastDetails=t,this.dependencies=this.package_headings[e].dependencies||[],this.makeDependencies=this.package_headings[e].makes_dependencies||[],this.package_headings[this.package_headings.indexOf(t)].style_class="selected";var n=this.package_headings.filter((function(e){return-1!==a.dependencies.indexOf(e.id)})),i=this.package_headings.filter((function(e){return-1!==a.makeDependencies.indexOf(e.id)}));n.forEach((function(e){a.package_headings[a.package_headings.indexOf(e)].style_class="dependent-heading"})),i.forEach((function(e){a.package_headings[a.package_headings.indexOf(e)].style_class="make-dependent-heading"}))},removeDependency:function(e,t){var a=this;this.dependencies=this.package_headings[e].dependencies||[],this.makeDependencies=this.package_headings[e].makes_dependencies||[];var n=this.package_headings.filter((function(e){return-1!==a.dependencies.indexOf(e.id)}));t&&this.package_headings[this.package_headings.indexOf(t)]&&(this.package_headings[this.package_headings.indexOf(t)].style_class="");var i=this.package_headings.filter((function(e){return-1!==a.makeDependencies.indexOf(e.id)}));n.forEach((function(e){a.package_headings[a.package_headings.indexOf(e)].style_class=""})),i.forEach((function(e){a.package_headings[a.package_headings.indexOf(e)].style_class=""}))},onStart:function(){this.beforeMoveKeyOrder=Array.from(this.$refs.sortableTable.$el.getElementsByTagName("tbody")[0].childNodes).map((function(e){return e.id}))},onMove:function(e){var t=this,a=e.dragged,n=e.related,i=this.package_headings.filter((function(e){return"Tax Deduction"===e.type})).map((function(e){return t.beforeMoveKeyOrder.indexOf(String(e.id))})).map((function(e){return t.package_headings[e].order})),r=this.package_headings.filter((function(e){return-1!==["Addition","Deduction"].indexOf(e.type)})).map((function(e){return t.beforeMoveKeyOrder.indexOf(String(e.id))})).map((function(e){return t.package_headings[e].order})),s=i.length>0?Math.min.apply(Math,Object($["a"])(i)):null,o=r.length>0?Math.max.apply(Math,Object($["a"])(r)):null,c=this.package_headings.find((function(e){return String(e.id)===a.id})).type,l=this.package_headings.find((function(e){return String(e.id)===a.id})).dependencies.map((function(e){return t.beforeMoveKeyOrder.indexOf(String(e))})).map((function(e){return t.package_headings[e].order})),d=l.length>0?Math.max.apply(Math,Object($["a"])(l)):null,u=this.package_headings.find((function(e){return String(e.id)===a.id})).makes_dependencies.map((function(e){return t.beforeMoveKeyOrder.indexOf(String(e))})).map((function(e){return t.package_headings[e].order})),p=u.length>0?Math.min.apply(Math,Object($["a"])(u)):null,g=this.beforeMoveKeyOrder.indexOf(n.id),h=this.package_headings[g].order;return d&&h<=d?(this.dragDependencyError="Sort cannot be performed because its dependent heading order will be greater than current heading.",this.validDrag=!1,!1):p&&h>=p?(this.dragDependencyError="Sort cannot be performed because its heading order must not be greater than dependent heading.",this.validDrag=!1,!1):-1!==["Addition","Deduction"].indexOf(c)&&s&&h>=s?(this.dragDependencyError="Addition or Deduction heading cannot be after Tax Deduction heading.",this.validDrag=!1,!1):-1!==["Tax Deduction"].indexOf(c)&&o&&h<=o?(this.dragDependencyError="Tax Deduction cannot be before addition or deduction heading.",this.validDrag=!1,!1):void(this.validDrag=!0)},dragReorder:function(e){var t=this,a=e.oldIndex,n=e.newIndex;if(!1!==this.validDrag||a!==n){if(!1===this.validDrag&&a!==n)return this.loadPackageById(),void this.notifyUser(this.dragDependencyError,"red");var i=this.package_headings[a],r=this.package_headings[n],s=i.order,o=r.order;s!==o&&this.$http.post("/payroll/package-headings/switch_order/?as=hr&package__organization__slug=".concat(this.getOrganizationSlug),{from_obj_order:s,to_obj_order:o,package_id:this.packageId}).then((function(e){if(e.success){for(var a in t.package_headings)t.package_headings[a].order=e.new_orders[a];t.notifyUser("Successfully sorted heading","green")}})).catch((function(e){t.get(e,"response.data.error_message")?t.notifyUser(t.get(e,"response.data.error_message"),"red"):t.notifyUser("Something went wrong.","red")}))}else this.notifyUser(this.dragDependencyError,"red")}}},B=A,N=(a("5bcd"),a("62ad")),j=a("0fd9b"),U=Object(f["a"])(B,V,T,!1,null,"6cbe04aa",null),L=U.exports;v()(U,{VCol:N["a"],VDataTable:k["a"],VIcon:P["a"],VRow:j["a"]});var z=a("0360"),H=a("90c6"),M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-row",[a("v-col",{attrs:{cols:"11"}},[a("div",{staticClass:"px-3 blue-grey--text text--darken-2 font-weight-bold"},[e._v(" "+e._s(e.fields.name)+" ")])]),a("v-col",{staticClass:"pl-3",attrs:{cols:"1"}},[a("v-icon",{attrs:{size:16},domProps:{textContent:e._s(e.showDetail?"mdi-chevron-up":"mdi-chevron-down")},on:{click:function(t){e.showDetail=!e.showDetail}}})],1),a("v-col",{staticClass:"pa-0 ma-0 pr-3",attrs:{cols:"12"}},[a("v-divider")],1)],1),a("v-card-text",{staticClass:"scrollbar-lg"},[e.showDetail?a("v-row",[a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Order")])]),a("div",[e._v(" "+e._s(e.fields.order)+" ")])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Payroll Setting Type")])]),a("div",[e._v(" "+e._s(e.fields.payroll_setting_type)+" ")])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Heading Type")])]),a("div",[e._v(" "+e._s(e.fields.type)+" ")])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Duration Unit")])]),a("div",[e._v(" "+e._s(e.fields.duration_unit||"N/A")+" ")])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Is Taxable")])]),a("div",[a("span",{domProps:{textContent:e._s(e.fields.taxable?"Yes":"No")}})])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Absent Days Impact")])]),a("div",[a("span",{domProps:{textContent:e._s(e.fields.absent_days_impact?"Yes":"No")}})])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Benefit Type")])]),a("div",[e._v(" "+e._s(e.fields.benefit_type||"N/A")+" ")])]),a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",[e._v("Year to Date")])]),a("div",[e._v(" "+e._s(e.fields.year_to_date||"False")+" ")])])],1):e._e(),e.showDetail?a("v-divider"):e._e(),a("heading-rule",{attrs:{"conditional-variables":e.conditional_variables,"function-variables":e.function_variables,"rule-variables":e.rule_variables,"read-only":!1,error:e.isValidRule,"show-title":!0,"is-editable":e.fields.is_editable,"is-package-heading-equation":!0},on:{"update:error":function(t){e.isValidRule=t}},model:{value:e.fields.rules,callback:function(t){e.$set(e.fields,"rules",t)},expression:"fields.rules"}})],1),a("v-card-actions",[a("v-col",{staticClass:"text-right"},[a("v-btn",{attrs:{text:""},on:{click:function(t){return e.$emit("close")}}},[e._v(" Cancel ")]),a("v-btn",{attrs:{disabled:e.errors.any()||!e.isValidRule},on:{click:e.createPayrollHeadings}},[e._v(" Save ")])],1)],1)],1)},q=[],Y=a("e860"),K=a("7f8f"),G={components:{HeadingRule:Y["a"]},mixins:[u["a"]],props:{nextOrder:{type:[String,Number],required:!0},headingId:{type:[String],required:!0}},data:function(){return{fields:{},conditional_variables:[],function_variables:[],rule_variables:[],isValidRule:!0,showDetail:!0}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getPayrollHeading();case 2:e.getAvailableVariables();case 3:case"end":return t.stop()}}),t)})))()},methods:{getPayrollHeading:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get(K["a"].getHeadingById(e.headingId)+"?as=hr&organization__slug=".concat(e.getOrganizationSlug)).then((function(t){e.fields=t,e.fields.order=e.nextOrder}));case 2:case"end":return t.stop()}}),t)})))()},getAvailableVariables:function(){var e=this;if(parseInt(this.fields.order)>=0){var t={order:this.fields.order,package_id:this.$route.params.pk,current_heading_type:this.fields.type,current_duration_unit:this.fields.duration_unit};this.$http.post(R["a"].getPackageVariables+"?as=hr&package__organization__slug=".concat(this.getOrganizationSlug),t).then((function(t){e.conditional_variables=t.conditional_variables,e.rule_variables=t.rule_variables,e.function_variables=t.functions}))}},createPayrollHeadings:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.validateAllFields();case 2:if(!t.sent){t.next=6;break}e.fields.heading=e.headingId,e.fields.package=e.$route.params.pk,e.$http.post(R["a"].createPackageHeadingById+"?as=hr&package__organization__slug=".concat(e.getOrganizationSlug),e.fields).then((function(){e.notifyUser("Successfully created payroll package heading."),e.$emit("close")})).catch((function(t){e.notifyInvalidFormResponse(t.response.data.rules.errors&&t.response.data.rules.errors[0].rule_equation_errors[0]),e.pushErrors(t)}));case 6:case"end":return t.stop()}}),t)})))()}}},W=G,J=Object(f["a"])(W,M,q,!1,null,null,null),Z=J.exports;v()(J,{VBtn:_["a"],VCardActions:b["a"],VCardText:b["c"],VCol:N["a"],VDivider:D["a"],VIcon:P["a"],VRow:j["a"]});var X={components:{AddPackageHeading:Z,OverallHeadings:E,AddNewHeading:H["a"],AddHeadings:L,EditPackageHeadings:z["a"]},mixins:[u["a"]],props:{packageId:{type:[String,Number],required:!0}},data:function(){return{collapsed:!1,uniqueRefreshKey:0,headId:"",displayForm:!1,newHeadingAddition:!1,editDependencyData:{display:!1,headingId:"",order:""},order:""}},methods:{openForm:function(e){var t=this;this.displayForm=!1,this.$nextTick((function(){t.headId=e,t.newHeadingAddition=!1,t.editDependencyData.display=!1,t.displayForm=!0}))},addHeading:function(e){var t=this;this.newHeadingAddition=!1,this.$nextTick((function(){t.order=e.order,t.newHeadingAddition=!0,t.editDependencyData.display=!1}))},editDependency:function(e){this.uniqueRefreshKey=Math.random(),this.editDependencyData.display=!0,this.newHeadingAddition=!1,this.displayForm=!1,this.editDependencyData.headingId=e.headingId,this.editDependencyData.order=e.order}}},Q=X,ee=a("0789"),te=Object(f["a"])(Q,n,i,!1,null,null,null);t["a"]=te.exports;v()(te,{VCardText:b["c"],VCol:N["a"],VDivider:D["a"],VIcon:P["a"],VRow:j["a"],VSlideXTransition:ee["f"]})},f0d5:function(e,t,a){"use strict";a("d3b7"),a("3ca3"),a("ddb0");var n=a("c44a");t["a"]={components:{NonFieldFormErrors:function(){return a.e("chunk-6441e173").then(a.bind(null,"ab8a"))}},mixins:[n["a"]],data:function(){return{crud:{name:"record",message:"",addAnother:!1},formValues:{},loading:!1}}}},f12b:function(e,t,a){"use strict";var n=a("f0d5"),i=a("983c"),r=a("f70a"),s=a("6c6f");t["a"]={mixins:[n["a"],i["a"],r["a"],s["a"]]}},f70a:function(e,t,a){"use strict";a("d3b7"),a("caad");t["a"]={methods:{insertData:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.validate,r=void 0===i||i,s=n.clearForm,o=void 0===s||s,c=arguments.length>3?arguments[3]:void 0;return new Promise((function(n,i){!a.loading&&e&&(a.clearErrors(),a.$validator.validateAll().then((function(s){r||(s=!0),s&&(a.loading=!0,a.$http.post(e,t,c||{}).then((function(e){a.clearErrors(),o&&(a.formValues={}),a.crud.addAnother||a.$emit("create"),a.crud.message&&setTimeout((function(){a.notifyUser(a.crud.message)}),1e3),n(e),a.loading=!1})).catch((function(e){a.pushErrors(e),a.notifyInvalidFormResponse(),i(e),a.loading=!1})))})))}))},patchData:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.validate,r=void 0===i||i,s=n.clearForm,o=void 0===s||s,c=arguments.length>3?arguments[3]:void 0;return new Promise((function(n,i){a.updateData(e,t,{validate:r,clearForm:o},"patch",c).then((function(e){n(e)})).catch((function(e){i(e)}))}))},putData:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.validate,r=void 0===i||i,s=n.clearForm,o=void 0===s||s,c=arguments.length>3?arguments[3]:void 0;return new Promise((function(n,i){a.updateData(e,t,{validate:r,clearForm:o},"put",c).then((function(e){n(e)})).catch((function(e){i(e)}))}))},updateData:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.validate,r=void 0===i||i,s=n.clearForm,o=void 0===s||s,c=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0;return new Promise((function(n,i){!a.loading&&e&&["put","patch"].includes(c)&&(a.clearErrors(),a.$validator.validateAll().then((function(s){r||(s=!0),s&&(a.loading=!0,a.$http[c](e,t,l||{}).then((function(e){a.$emit("update"),a.clearErrors(),o&&(a.formValues={}),a.crud.message&&setTimeout((function(){a.notifyUser(a.crud.message)}),1e3),n(e),a.loading=!1})).catch((function(e){a.pushErrors(e),a.notifyInvalidFormResponse(),i(e),a.loading=!1})))})))}))},clearErrors:function(){this.clearNonFieldErrors(),this.$validator.errors.clear()}}}}}]);