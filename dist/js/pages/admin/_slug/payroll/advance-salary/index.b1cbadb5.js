(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages/admin/_slug/payroll/advance-salary/index"],{"9f1a":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vue-page-wrapper",{attrs:{title:e.htmlTitle,"bread-crumbs":e.breadCrumbItems}},[a("v-tabs",{attrs:{"slider-color":"blue"},model:{value:e.activeTabs,callback:function(t){e.activeTabs=t},expression:"activeTabs"}},[e._l(e.tabs,(function(t){return a("v-tab",{key:t.value,attrs:{ripple:""}},[a("span",{staticClass:"pr-2 text-capitalize"},[e._v(" "+e._s(t.tabName)+" ")])])})),a("v-tab-item",[a("advance-salary-request",{key:e.activeTabs,attrs:{admin:"hr",heading:e.heading}})],1),1===e.activeTabs?a("v-tab-item",[a("surplus-request",{attrs:{heading:e.surplusHeading,as:"hr"}})],1):e._e()],2)],1)},i=[],r=a("a61a"),n=a("0549"),l=a("96d7"),o={components:{AdvanceSalaryRequest:r["a"],SurplusRequest:l["a"],VuePageWrapper:n["default"]},data:function(){return{htmlTitle:"Advance Salary | Payroll | Admin",breadCrumbItems:[{text:"Payroll",disabled:!1,to:{name:"admin-slug-payroll-overview",params:{slug:this.$route.params.slug}}},{text:"Advance Salary",disabled:!0}],activeTabs:0,tabs:[{tabName:"Advance Salary",value:"advance"},{tabName:"Surplus Request",value:"surplus"}],heading:{title:"Advance Salary Request",subheading:"The list below contains the information of advance salary request."},surplusHeading:{title:"Surplus Request Details",subheading:"The list below contains the information of surplus request."}}},created:function(){this.$route.query.tab&&(this.activeTabs=1)}},u=o,c=a("2877"),d=a("6544"),p=a.n(d),v=a("71a3"),m=a("c671"),h=a("fe57"),b=Object(c["a"])(u,s,i,!1,null,null,null);t["default"]=b.exports;p()(b,{VTab:v["a"],VTabItem:m["a"],VTabs:h["a"]})},a61a:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card",[a("vue-card-title",{attrs:{title:e.heading.title,subtitle:e.heading.subheading,icon:"mdi-account-multiple-check-outline"}},[a("template",{slot:"actions"},[a("v-btn",{attrs:{icon:""},on:{click:function(t){e.showFilters=!e.showFilters}}},[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-filter-variant")}})],1)],1)],2),a("v-divider"),a("v-slide-y-transition",[a("v-row",{directives:[{name:"show",rawName:"v-show",value:e.showFilters,expression:"showFilters"}],staticClass:"px-1",attrs:{align:"center"}},[a("v-col",{attrs:{cols:"12"}},[e.showFilters?a("div",{staticClass:"mx-5"},[a("vue-search",{attrs:{search:e.search},on:{"update:search":function(t){e.search=t}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1):e._e()])],1)],1),e.showFilters?a("v-divider"):e._e(),a("v-tabs",{attrs:{"show-arrows":"","slider-color":"blue"},model:{value:e.searchFilters.activeStatus,callback:function(t){e.$set(e.searchFilters,"activeStatus",t)},expression:"searchFilters.activeStatus"}},e._l(e.tabs,(function(t){return a("v-tab",{key:t.tabName,attrs:{ripple:"",disabled:e.loading}},[a("span",{staticClass:"pr-2 text-capitalize"},[e._v(" "+e._s(t.tabName)+" ")]),a("v-chip",{staticClass:"white--text",attrs:{color:t.color,small:""}},[e._v(" "+e._s(t.count)+" ")])],1)})),1),a("v-divider"),a("v-data-table",{attrs:{headers:e.headers,items:e.fetchedResults,"sort-desc":e.pagination.descending,"sort-by":e.pagination.sortBy,page:e.pagination.page,"items-per-page":e.pagination.rowsPerPage,"footer-props":e.footerProps,"server-items-length":e.pagination.totalItems,"must-sort":"","mobile-breakpoint":0},on:{"update:sortDesc":function(t){return e.$set(e.pagination,"descending",t)},"update:sort-desc":function(t){return e.$set(e.pagination,"descending",t)},"update:sortBy":function(t){return e.$set(e.pagination,"sortBy",t)},"update:sort-by":function(t){return e.$set(e.pagination,"sortBy",t)},"update:page":function(t){return e.$set(e.pagination,"page",t)},"update:itemsPerPage":function(t){return e.$set(e.pagination,"rowsPerPage",t)},"update:items-per-page":function(t){return e.$set(e.pagination,"rowsPerPage",t)}},scopedSlots:e._u([{key:"item",fn:function(t){return[a("tr",[a("td",{staticStyle:{width:"15%"}},[a("vue-user",{attrs:{user:t.item.employee}})],1),a("td",{staticClass:"text-right",staticStyle:{width:"14%"}},[a("div",{domProps:{textContent:e._s(t.item.amount.toLocaleString())}})]),a("td",{staticStyle:{width:"10%"},domProps:{textContent:e._s(e.humanizeDate(t.item.requested_for))}}),a("td",{staticStyle:{width:"8%"},domProps:{textContent:e._s(t.item.request_type||"N/A")}}),a("td",{staticClass:"text-right",domProps:{textContent:e._s(t.item.amount_paid?t.item.amount_paid.toLocaleString():"N/A")}}),a("td",{staticClass:"text-right",staticStyle:{width:"12%"},domProps:{textContent:e._s(t.item.amount_to_be_paid?t.item.amount_to_be_paid.toLocaleString():"N/A")}}),a("td",{staticClass:"text-center"},["Requested"===t.item.status?a("div",[a("approval-chip",{attrs:{"user-detail":t.item.recipient,status:t.item.status}})],1):a("div",[a("v-chip",{attrs:{color:e.statusColor[t.item.status],small:"",outlined:""},domProps:{textContent:e._s(t.item.status)}})],1)]),a("td",{staticClass:"text-center"},[a("vue-context-menu",{attrs:{"context-list":"Repayment"===t.item.status&&"hr"===e.admin?[{name:"View  Request",icon:"mdi-eye-outline",color:"blue"},{name:"View Payslip",icon:"mdi-sack-percent",color:"blue"}]:[{name:"View  Request",icon:"mdi-eye-outline",color:"blue"}]},on:{click0:function(a){e.selectedRequest=t.item,e.showRequestDetails=!0},click1:function(a){return e.generateAdvanceSalary(t.item.id)}}})],1)])]}}])},[a("template",{slot:"no-data"},[a("data-table-no-data",{attrs:{loading:e.loading}})],1)],2),e.showRequestDetails?a("v-bottom-sheet",{attrs:{persistent:"",scrollable:""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.refreshData.apply(null,arguments)}},model:{value:e.showRequestDetails,callback:function(t){e.showRequestDetails=t},expression:"showRequestDetails"}},[e.selectedRequest?a("v-card",[a("vue-card-title",{attrs:{title:"View Request Status",subtitle:"Here you can view details of advance salary request",icon:"mdi-eye-outline",closable:"",dark:""},on:{close:e.refreshData}}),a("v-divider"),a("v-card-text",[a("advance-salary-request-status",{attrs:{"item-request":e.selectedRequest,supervisor:e.supervisor?e.supervisor:"",employee:e.employee?e.employee:"",admin:e.admin?"hr":""},on:{closeForm:e.refreshData}})],1)],1):e._e()],1):e._e(),a("v-dialog",{attrs:{scrollable:"",persistents:"",width:"920px"},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.viewAdvanceSalaryPayslip=!1}},model:{value:e.viewAdvanceSalaryPayslip,callback:function(t){e.viewAdvanceSalaryPayslip=t},expression:"viewAdvanceSalaryPayslip"}},[a("v-card",[a("vue-card-title",{attrs:{title:"View Advance Salary payslip",subtitle:"Here you can view advance salary payslip",icon:"mdi-eye-outline",closable:"",dark:""},on:{close:function(t){e.viewAdvanceSalaryPayslip=!1}}}),a("v-divider"),e.viewAdvanceSalaryPayslip?a("advance-salary-generate",{attrs:{"item-request":e.payslipDetails},on:{closeForm:function(t){e.viewAdvanceSalaryPayslip=!1}}}):e._e()],1)],1)],1)],1)},i=[],r=a("5530"),n=(a("a9e3"),a("ac1f"),a("841c"),a("d3b7"),a("17cc")),l=a("02cb"),o=a("a51f"),u=a("e4bf"),c=a("2f62"),d=a("258f"),p=a("6a8c"),v=a("c44a"),m=a("b389"),h=a("e88d"),b={components:{ApprovalChip:h["a"],VueContextMenu:u["default"],DataTableNoData:o["default"],VueUser:l["default"],AdvanceSalaryRequestStatus:p["a"],AdvanceSalaryGenerate:m["a"]},mixins:[n["a"],v["a"]],props:{heading:{type:Object,default:function(){return{}}},supervisor:{type:[Number,String],default:""},employee:{type:[Number,String],default:""},admin:{type:[Number,String],default:""},endpoint:{type:String,default:null}},data:function(){return{htmlTitle:"Advance Salary | Payroll | Admin",breadCrumbItems:[{text:"Payroll",disabled:!1,to:{name:"admin-slug-payroll-overview",params:{slug:this.$route.params.slug}}},{text:"Advance Salary",disabled:!0}],hover:!0,loading:!1,headers:[{text:"Employee Name",value:"full_name",align:"left",sortable:!0},{text:"Requested Amount",value:"amount",align:"right",sortable:!0},{text:"Requested For",value:"requested_for",align:"",sortable:!0},{text:"Requested Type",value:"request_type",align:"",sortable:!1},{text:"Amount Paid",value:"amount_paid",align:"right",sortable:!1},{text:"Amount To Be Paid",value:"amount_to_be_paid",align:"",sortable:!1},{text:"Status",align:"center",value:"status",sortable:!1},{text:"Action",align:"center",sortable:!1}],tabs:[{tabName:"Requested",value:"Requested",count:"0",color:"orange"},{tabName:"Approved",value:"Approved",count:"0",color:"teal"},{tabName:"Repayment",value:"Repayment",count:"0",color:"cyan"},{tabName:"Completed",value:"Completed",count:"0",color:"success"},{tabName:"Canceled",value:"Canceled",count:"0",color:"danger"},{tabName:"Denied",value:"Denied",count:"0",color:"indigo"},{tabName:"All",value:"",count:"0",color:"blue"}],search:"",statusColor:{Requested:"orange",Repayment:"cyan",Approved:"green",Denied:"indigo",Completed:"success",Canceled:"danger"},showRequestDetails:!1,selectedRequest:{},searchFilters:{activeStatus:0},showFilters:!1,payslipDetails:{},viewAdvanceSalaryPayslip:!1}},computed:Object(r["a"])(Object(r["a"])({},Object(c["c"])({getSupervisorOrgSlug:"supervisor/getOrganizationSlug"})),{},{DataTableFilter:function(){return{search:this.search,status:this.tabs[this.searchFilters.activeStatus].value}}}),created:function(){this.fetchDataTable()},methods:{fetchDataTable:function(){var e=this;this.loading=!0;var t=this.supervisor?"?as=supervisor":this.employee?"?as=approver":"?as=hr";this.$http.get(this.endpoint||d["a"].getAdvanceSalaryRequest(this.supervisor?this.getSupervisorOrgSlug:this.getOrganizationSlug)+t,{params:this.fullParams}).then((function(t){e.loadDataTable(t),e.updateCounts(t.counts||t.stats)})).finally((function(){e.loading=!1}))},humanizeDate:function(e){return this.$dayjs(e).format("YYYY-MM-DD")},updateCounts:function(e){this.tabs[0].count=e["Requested"],this.tabs[1].count=e["Approved"],this.tabs[2].count=e["Repayment"],this.tabs[3].count=e["Completed"],this.tabs[4].count=e["Canceled"],this.tabs[5].count=e["Denied"],this.tabs[6].count=e["All"]},refreshData:function(){this.fetchDataTable(),this.showRequestDetails=!1},generateAdvanceSalary:function(e){var t=this;this.$http.get(d["a"].generatePaySlip(this.getOrganizationSlug,e)+"?as=hr").then((function(e){t.payslipDetails=e,t.viewAdvanceSalaryPayslip=!0})).finally((function(){t.loading=!1}))}}},g=b,y=a("2877"),f=a("6544"),w=a.n(f),S=a("288c"),_=a("8336"),x=a("b0af"),q=a("99d9"),C=a("cc20"),A=a("62ad"),D=a("8fea"),R=a("169a"),P=a("ce7e"),k=a("132d"),V=a("0fd9b"),T=a("0789"),N=a("71a3"),$=a("fe57"),F=Object(y["a"])(g,s,i,!1,null,null,null);t["a"]=F.exports;w()(F,{VBottomSheet:S["a"],VBtn:_["a"],VCard:x["a"],VCardText:q["c"],VChip:C["a"],VCol:A["a"],VDataTable:D["a"],VDialog:R["a"],VDivider:P["a"],VIcon:k["a"],VRow:V["a"],VSlideYTransition:T["g"],VTab:N["a"],VTabs:$["a"]})},e88d:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-menu",{attrs:{"nudge-width":10,"open-on-hover":!0,bottom:"",right:"",transition:"scale-transition",origin:"top left"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-chip",{staticClass:"white--text",attrs:{small:"",outlined:"",color:"orange"}},[a("v-avatar",{staticStyle:{"margin-left":"-12px"},attrs:{left:""}},[a("v-img",e._g({attrs:{src:e.userDetail.profile_picture_thumb||e.userDetail.profile_picture}},s))],1),e._v(" "+e._s(e.status)+" ")],1)]}}])},[a("vue-hover-card",{attrs:{user:e.userDetail}})],1)],1)},i=[],r=a("49bb"),n={components:{VueHoverCard:r["a"]},props:{userDetail:{type:Object,required:!0},status:{type:String,required:!0}}},l=n,o=a("2877"),u=a("6544"),c=a.n(u),d=a("8212"),p=a("cc20"),v=a("adda"),m=a("e449"),h=Object(o["a"])(l,s,i,!1,null,"5cafa090",null);t["a"]=h.exports;c()(h,{VAvatar:d["a"],VChip:p["a"],VImg:v["a"],VMenu:m["a"]})}}]);