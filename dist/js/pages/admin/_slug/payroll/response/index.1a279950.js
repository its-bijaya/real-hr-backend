(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages/admin/_slug/payroll/response/index"],{ab26:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vue-page-wrapper",{attrs:{title:e.htmlTitle,"bread-crumbs":e.breadCrumbItems}},[a("v-card",[a("vue-card-title",{attrs:{title:"Payslip Response",subtitle:"Payslip response from employees",icon:"mdi-file-document-outline"}},[a("template",{slot:"actions"},[a("v-btn",{attrs:{icon:""},on:{click:function(t){e.filter.show=!e.filter.show}}},[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-filter-variant")}})],1)],1)],2),a("v-divider"),a("v-slide-y-transition",[a("v-row",{directives:[{name:"show",rawName:"v-show",value:e.filter.show,expression:"filter.show"}],staticClass:"mx-3"},[a("v-col",{attrs:{md:"4",cols:"12"}},[a("vue-users-auto-complete",{attrs:{params:{organization:e.getOrganizationSlug,is_active:"all",is_blocked:"all"},"hide-details":""},model:{value:e.filter.employee,callback:function(t){e.$set(e.filter,"employee",t)},expression:"filter.employee"}})],1),a("v-col",{attrs:{md:"4",cols:"12"}},[a("date-filter-menu",{attrs:{default:"This Year","hide-details":""},model:{value:e.filter.dateFilter,callback:function(t){e.$set(e.filter,"dateFilter",t)},expression:"filter.dateFilter"}})],1)],1)],1),e.filter.show?a("v-divider"):e._e(),a("v-tabs",{key:e.tabComponentKey,attrs:{value:e.activeStatus,"slider-color":"blue","show-arrows":"",expand:""}},e._l(e.statusTabs,(function(t,s){return a("v-tab",{key:t.text,attrs:{disabled:e.loading,ripple:""},on:{click:function(t){e.activeStatus=s}}},[a("span",{staticClass:"mr-2 text-capitalize"},[e._v(" "+e._s(t.text)+" ")]),a("v-chip",{attrs:{color:t.color,"text-color":"white",small:""}},[e._v(" "+e._s(e.statusCounts[t.text])+" ")])],1)})),1),a("v-divider"),a("v-card-text",{staticClass:"ma-0 pa-0"},[a("v-data-table",{attrs:{headers:e.headers,items:e.fetchedResults,"sort-desc":e.pagination.descending,"sort-by":e.pagination.sortBy,page:e.pagination.page,"items-per-page":e.pagination.rowsPerPage,"footer-props":e.footerProps,"server-items-length":e.pagination.totalItems,"mobile-breakpoint":0,"must-sort":""},on:{"update:sortDesc":function(t){return e.$set(e.pagination,"descending",t)},"update:sort-desc":function(t){return e.$set(e.pagination,"descending",t)},"update:sortBy":function(t){return e.$set(e.pagination,"sortBy",t)},"update:sort-by":function(t){return e.$set(e.pagination,"sortBy",t)},"update:page":function(t){return e.$set(e.pagination,"page",t)},"update:itemsPerPage":function(t){return e.$set(e.pagination,"rowsPerPage",t)},"update:items-per-page":function(t){return e.$set(e.pagination,"rowsPerPage",t)}},scopedSlots:e._u([{key:"item",fn:function(t){return[a("tr",[a("td",[a("vue-user",{attrs:{size:30,user:t.item.employee}})],1),a("td",[a("span",[e._v(" "+e._s(e._f("dayjs")(t.item.from_date,"YYYY-MM-DD"))+" ")])]),a("td",[a("span",[e._v(" "+e._s(e._f("dayjs")(t.item.to_date,"YYYY-MM-DD"))+" ")])]),a("td",[t.item.approved_date?a("div",[a("div",{staticClass:"text-subtitle-2"},[e._v(" "+e._s(e._f("dayjs")(t.item.approved_date,"YYYY-MM-DD"))+" ")]),a("div",{staticClass:"text-caption"},[e._v(" "+e._s(e._f("dayjs")(t.item.approved_date,"hh:mm:ss A"))+" ")])]):a("div",{domProps:{textContent:e._s("N/A")}})]),a("td",{staticClass:"text-center"},[a("span",[a("v-chip",{staticClass:"white--text",attrs:{color:e.statusMap[t.item.acknowledgement_status].color,small:""},on:{click:function(a){t.item.total_comment>0&&(e.displayCommentDialog=!0,e.payrollId=t.item.id)}}},[e._v(" "+e._s(t.item.total_comment||0)+" ")])],1)]),a("td",[a("v-chip",{attrs:{color:e.statusMap[t.item.acknowledgement_status].color,small:"",outlined:""},domProps:{textContent:e._s(t.item.acknowledgement_status)}})],1),a("td",[a("vue-context-menu",{attrs:{"context-list":[{name:"View Details",icon:"mdi-eye-outline",color:"blue",disabled:e.loading,disable_message:"Not Allowed"},{name:"View Comments",icon:"mdi-comment-text-outline",color:"blue",disabled:e.loading,disable_message:"Not Allowed"}]},on:{click0:function(a){e.responseDetails.display=!0,e.responseDetails.actionData=t.item},click1:function(a){e.displayCommentDialog=!0,e.payrollId=t.item.id}}})],1)])]}}])},[a("template",{slot:"no-data"},[a("data-table-no-data",{attrs:{loading:e.loading}})],1)],2)],1)],1),e.responseDetails.display?a("v-bottom-sheet",{attrs:{persistent:"",fullscreen:""},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.responseDetails.display=!1}},model:{value:e.responseDetails.display,callback:function(t){e.$set(e.responseDetails,"display",t)},expression:"responseDetails.display"}},[a("payslip-base",{attrs:{"payroll-id":e.responseDetails.actionData.payroll_id,"user-id":e.responseDetails.actionData.employee.id,"selected-template":e.selectedTemplate,as:"hr"},on:{close:function(t){e.responseDetails.display=!1}}})],1):e._e(),a("v-dialog",{attrs:{persistent:"",scrollable:"",width:"920"},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.displayCommentDialog=!1}},model:{value:e.displayCommentDialog,callback:function(t){e.displayCommentDialog=t},expression:"displayCommentDialog"}},[e.displayCommentDialog?a("comment-dialog",{attrs:{"payroll-id":e.payrollId},on:{close:function(t){e.displayCommentDialog=!1},create:function(t){e.displayCommentDialog=!1,e.fetchDataTable()}}}):e._e()],1)],1)},o=[],n=a("1da1"),l=a("5530"),i=(a("96cf"),a("d3b7"),a("3ca3"),a("ddb0"),a("4de4"),a("0549")),r=a("8cd3"),d=a("a51f"),c=a("ef8c"),p=a("02cb"),u=a("ac94"),m=(a("99af"),{getResponses:function(e){return"/payroll/".concat(e,"/payslip/response/")},postResponse:function(e){return"/payroll/".concat(e,"/payslip/response/")},putResponse:function(e,t){return"/payroll/".concat(e,"/payslip/response/").concat(t,"/")},deleteResponse:function(e,t){return"/payroll/".concat(e,"/payslip/response/").concat(t,"/")}}),g=a("3da5"),f=a("2f62"),y=a("e4bf"),v=a("cd2d"),b={components:{VuePageWrapper:i["default"],VueUser:p["default"],DataTableNoData:d["default"],VueUsersAutoComplete:c["default"],DateFilterMenu:u["a"],CommentDialog:v["a"],PayslipBase:function(){return Promise.all([a.e("chunk-f3b87ecc"),a.e("chunk-63c80d7a")]).then(a.bind(null,"a1b4"))},VueContextMenu:y["default"]},mixins:[r["a"]],data:function(){return{htmlTitle:"Payslip Response | Payroll | Admin",breadCrumbItems:[{text:"Payroll",disabled:!1,to:{name:"admin-slug-payroll-overview",params:{slug:this.$route.params.slug}}},{text:"Payslip Response",disabled:!0}],rowsPerPageItems:[10,20,30,40,50],displayCommentDialog:!1,payrollId:"",headers:[{text:"Name",value:"employee"},{text:"From Date",value:"from_date"},{text:"To Date",value:"to_date"},{text:"Responded Date",value:"approved_date"},{text:"No. of Comments",value:"total_comment"},{text:"Status",value:"acknowledgement_status",sortable:!1},{text:"Action",sortable:!1}],filter:{show:!1,employee:"",dateFilter:{}},responseDetails:{display:!1,actionData:{}},statusTabs:[{text:"Pending",color:"orange",value:"Pending"},{text:"Acknowledged",color:"green",value:"Acknowledged"},{text:"All",color:"blue",value:""}],statusMap:{Generated:{color:"purple",icon:"mdi-check-circle"},Pending:{color:"orange",icon:"mdi-check-circle"},Acknowledged:{color:"green",icon:"mdi-check-circle"}},statusCounts:{All:0,Pending:0,Acknowledged:0},activeStatus:0,loading:!1,selectedTemplate:"",tabComponentKey:0,showGenerated:!1}},computed:{dataTableFilter:function(){return Object(l["a"])({employee:this.filter.employee||"",as:"hr",acknowledgement_status:this.statusTabs[this.activeStatus].value},this.filter.dateFilter)}},created:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.getOrganizationSlug,t.next=3,e.$http.get(g["a"].showGeneratedPayslip(a));case 3:s=t.sent,e.showGenerated=s.show_generated_payslip,e.dataTableEndpoint=m.getResponses(e.getOrganizationSlug),e.loadTableOnInit=!1,e.showGenerated&&(e.statusTabs.unshift({text:"Generated",color:"purple",value:"Generated"}),e.tabComponentKey+=1);case 8:case"end":return t.stop()}}),t)})))()},methods:Object(l["a"])(Object(l["a"])({},Object(f["d"])({setSnackBar:"common/setSnackBar"})),{},{processAfterTableLoad:function(e){this.statusCounts={Generated:e.counts.generated,Pending:e.counts.pending,Acknowledged:e.counts.acknowledged,All:e.counts.total},this.selectedTemplate=this.response.payslip_template||"Template 1"}})},h=b,_=a("2877"),w=a("6544"),k=a.n(w),x=a("288c"),D=a("8336"),C=a("b0af"),P=a("99d9"),T=a("cc20"),V=a("62ad"),A=a("8fea"),Y=a("169a"),R=a("ce7e"),S=a("132d"),$=a("0fd9b"),O=a("0789"),M=a("71a3"),j=a("fe57"),I=Object(_["a"])(h,s,o,!1,null,null,null);t["default"]=I.exports;k()(I,{VBottomSheet:x["a"],VBtn:D["a"],VCard:C["a"],VCardText:P["c"],VChip:T["a"],VCol:V["a"],VDataTable:A["a"],VDialog:Y["a"],VDivider:R["a"],VIcon:S["a"],VRow:$["a"],VSlideYTransition:O["g"],VTab:M["a"],VTabs:j["a"]})}}]);