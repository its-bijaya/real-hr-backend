(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages/admin/_slug/organization/settings/ethics","chunk-26c51c79","chunk-2d2259e9","chunk-2d22d378"],{"096a":function(t,e,a){"use strict";e["a"]={data:function(){return{settingsName:"",deleteItem:!1,tabs:[],actionData:null,showFilters:!1,displayForm:!1,activeTab:0,search:"",displayDetail:{display:!1,data:{}},deleteNotification:{dialog:!1,heading:"Confirm Delete",text:"Are you sure you want to delete this ".concat(this.settingsName,"?")}}},watch:{response:function(t){this.tabs.length&&(this.tabs[0].count=t.count)}},created:function(){this.cardText="List of ".concat(this.settingsName),this.deleteNotification.text="Are you sure you want to delete this ".concat(this.settingsName,"?")},methods:{triggerForm:function(t,e){var a={create:"Create ".concat(this.settingsName),update:"Update ".concat(this.settingsName),view:"View ".concat(this.settingsName)};this.cardText=a[t],this.displayForm=!0,this.showFilters=!1,this.actionData=e||void 0,this.deleteItem="delete"===t},triggerDelete:function(t){this.deleteNotification.dialog=!0,this.actionData=t},deleteData:function(){this.displayForm=!0,this.deleteItem=!0},openOrganizationSettings:function(){this.$router.push({name:"switch-organization",query:{isCommon:!0}})},dismissForm:function(){this.displayForm=!1,this.deleteItem=!1,this.deleteNotification.dialog=!1,this.displayDetail={display:!1,data:{}},this.actionData=null,this.viewSettingDetail=!1,this.cardText="List of  ".concat(this.settingsName),this.fetchDataTable()}}}},"1f09":function(t,e,a){},"2c58":function(t,e,a){"use strict";a("a9e3");e["a"]={props:{as:{type:[String,Number],default:""}},computed:{getViewParam:function(){return""===this.as?"hr":this.as}}}},3129:function(t,e,a){"use strict";var n=a("3835"),i=a("5530"),o=(a("ac1f"),a("1276"),a("d81d"),a("a630"),a("3ca3"),a("5319"),a("1f09"),a("c995")),s=a("24b2"),r=a("7560"),l=a("58df"),c=a("80d2");e["a"]=Object(l["a"])(o["a"],s["a"],r["a"]).extend({name:"VSkeletonLoader",props:{boilerplate:Boolean,loading:Boolean,tile:Boolean,transition:String,type:String,types:{type:Object,default:function(){return{}}}},computed:{attrs:function(){return this.isLoading?this.boilerplate?{}:Object(i["a"])({"aria-busy":!0,"aria-live":"polite",role:"alert"},this.$attrs):this.$attrs},classes:function(){return Object(i["a"])(Object(i["a"])({"v-skeleton-loader--boilerplate":this.boilerplate,"v-skeleton-loader--is-loading":this.isLoading,"v-skeleton-loader--tile":this.tile},this.themeClasses),this.elevationClasses)},isLoading:function(){return!("default"in this.$scopedSlots)||this.loading},rootTypes:function(){return Object(i["a"])({actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, card-heading","card-avatar":"image, list-item-avatar","card-heading":"heading",chip:"chip","date-picker":"list-item, card-heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",paragraph:"text@3",sentences:"text@2",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"heading, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"table-cell@6","table-cell":"text","table-tfoot":"text@2, avatar@2",text:"text"},this.types)}},methods:{genBone:function(t,e){return this.$createElement("div",{staticClass:"v-skeleton-loader__".concat(t," v-skeleton-loader__bone")},e)},genBones:function(t){var e=this,a=t.split("@"),i=Object(n["a"])(a,2),o=i[0],s=i[1],r=function(){return e.genStructure(o)};return Array.from({length:s}).map(r)},genStructure:function(t){var e=[];t=t||this.type||"";var a=this.rootTypes[t]||"";if(t===a);else{if(t.indexOf(",")>-1)return this.mapBones(t);if(t.indexOf("@")>-1)return this.genBones(t);a.indexOf(",")>-1?e=this.mapBones(a):a.indexOf("@")>-1?e=this.genBones(a):a&&e.push(this.genStructure(a))}return[this.genBone(t,e)]},genSkeleton:function(){var t=[];return this.isLoading?t.push(this.genStructure()):t.push(Object(c["s"])(this)),this.transition?this.$createElement("transition",{props:{name:this.transition},on:{afterEnter:this.resetStyles,beforeEnter:this.onBeforeEnter,beforeLeave:this.onBeforeLeave,leaveCancelled:this.resetStyles}},t):t},mapBones:function(t){return t.replace(/\s/g,"").split(",").map(this.genStructure)},onBeforeEnter:function(t){this.resetStyles(t),this.isLoading&&(t._initialStyle={display:t.style.display,transition:t.style.transition},t.style.setProperty("transition","none","important"))},onBeforeLeave:function(t){t.style.setProperty("display","none","important")},resetStyles:function(t){t._initialStyle&&(t.style.display=t._initialStyle.display||"",t.style.transition=t._initialStyle.transition,delete t._initialStyle)}},render:function(t){return t("div",{staticClass:"v-skeleton-loader",attrs:this.attrs,on:this.$listeners,class:this.classes,style:this.isLoading?this.measurableStyles:void 0},[this.genSkeleton()])}})},3753:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vue-page-wrapper",{attrs:{"bread-crumbs":t.breadCrumbItems,title:t.htmlTitle}},[a("ethics")],1)},i=[],o=a("0549"),s=a("d5b0"),r={components:{Ethics:s["a"],VuePageWrapper:o["default"]},data:function(){return{htmlTitle:"Ethics | Settings | Organization | Admin",breadCrumbItems:[{text:"Organization",disabled:!1,to:{name:"admin-slug-organization-overview",params:{slug:this.$route.params.slug}}},{text:"Settings",disabled:!1,to:{name:"admin-slug-organization-settings",params:{slug:this.$route.params.slug}}},{text:"Ethics",disabled:!0}]}}},l=r,c=a("2877"),d=Object(c["a"])(l,n,i,!1,null,null,null);e["default"]=d.exports},"878b":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card-actions",[a("v-spacer"),t.hideClear?t._e():a("v-btn",{attrs:{text:"",small:""},domProps:{textContent:t._s("Clear")},on:{click:function(e){return t.$emit("clearForm")}}}),a("v-btn",{attrs:{disabled:t.formErrors||t.disabled,color:t.deleteInstance?"red":"primary",depressed:"",small:"",loading:t.loading,type:"submit"}},[a("v-icon",{staticClass:"mr-1",attrs:{size:"14"}},[t._v(" mdi-content-save-outline ")]),t._v(" "+t._s(t.deleteInstance?"Delete":"Save")+" ")],1)],1)],1)},i=[],o={props:{hideClear:{type:Boolean,default:!1},formErrors:{type:Boolean,required:!0},disabled:{type:Boolean,default:!1},deleteInstance:{type:Boolean,required:!1,default:!1},loading:{type:Boolean,default:!1}}},s=o,r=a("2877"),l=a("6544"),c=a.n(l),d=a("8336"),u=a("99d9"),m=a("132d"),p=a("2fa4"),h=Object(r["a"])(s,n,i,!1,null,null,null);e["a"]=h.exports;c()(h,{VBtn:d["a"],VCardActions:u["a"],VIcon:m["a"],VSpacer:p["a"]})},"8cd3":function(t,e,a){"use strict";var n=a("5530"),i=(a("d3b7"),a("f0d5"));e["a"]={mixins:[i["a"]],data:function(){return{dataTableEndpoint:"",fetchedResults:[],response:null,footerProps:{itemsPerPageOptions:[10,20,30,40,50,100]},pagination:{sortBy:["modified_at"],descending:!1,totalItems:0,page:1,rowsPerPage:10,pageCount:0},loadTableOnInit:!0}},computed:{filterParams:function(){var t=Object(n["a"])(Object(n["a"])({},this.dataTableFilter),{},{offset:(this.pagination.page-1)*this.pagination.rowsPerPage,limit:this.pagination.rowsPerPage,ordering:this.pagination.descending?this.pagination.sortBy:"-"+this.pagination.sortBy});return this.convertToURLSearchParams(t,!1)}},watch:{filterParams:function(){var t=this;this.$nextTick((function(){t.fetchDataTable()}))},dataTableFilter:function(){this.pagination.page=1}},created:function(){var t=this;setTimeout((function(){t.loadTableOnInit&&t.fetchDataTable()}),0)},methods:{fetchDataTable:function(t,e){var a=this;return new Promise((function(n,i){!t&&!a.dataTableEndpoint||a.loading||(a.loadTableOnInit=!1,a.loading=!0,a.fetchedResults=[],a.$http.get(t||a.dataTableEndpoint,e||{params:a.filterParams}).then((function(t){a.response=t,a.fetchedResults=t.results,a.pagination.totalItems=t.count,a.processAfterTableLoad(t),n(t),a.loading=!1})).catch((function(t){a.pushErrors(t),a.notifyInvalidFormResponse(),i(t),a.loading=!1})))}))},processAfterTableLoad:function(){}}}},a173:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-row",{attrs:{dense:"",align:"start"}},[a("v-col",{staticClass:"pr-2",attrs:{md:t.showCaption?"6":"8",cols:"12"}},[a("div",[a("v-text-field",{attrs:{id:t.id,label:t.label,"data-cy":"input-file-upload",error:t.errorMessages.length>0,"error-messages":t.errorMessages,"hide-details":t.hideDetails,hint:t.hint,"persistent-hint":!!t.hint,disabled:t.disabled,readonly:"","prepend-inner-icon":"mdi-attachment","append-icon":t.fileName?"mdi-close":""},on:{"click:prepend":t.pickFile,"click:append":function(e){return t.clear()},click:t.pickFile,blur:function(e){return t.$emit("blur")}},model:{value:t.fileName,callback:function(e){t.fileName=e},expression:"fileName"}}),a("input",{ref:"upload",staticClass:"d-none",attrs:{id:"fileUpload",type:"file",multiple:"multiple"},on:{change:t.upload}})],1)]),t.showCaption?a("v-col",{attrs:{md:"5",cols:"8"}},[a("v-text-field",{staticClass:"pl-2",attrs:{disabled:!t.attachment,label:"Caption"},model:{value:t.caption,callback:function(e){t.caption=e},expression:"caption"}})],1):t._e(),t.multiple?a("v-col",{attrs:{md:t.showCaption?"1":"4",cols:t.showCaption?"4":"6"}},[a("v-icon",{staticClass:"mt-5",attrs:{color:"primary"},on:{click:t.appendFile}},[t._v(" mdi-plus-box-outline ")])],1):t._e()],1)],1)},i=[],o=a("1da1"),s=a("5530"),r=(a("96cf"),a("ac1f"),a("1276"),a("b0c0"),a("2f62")),l={props:{default:{type:[String,File],default:void 0},text:{type:String,default:void 0},id:{type:String,default:""},label:{type:String,default:"Attachment"},hint:{type:String,default:"Files with jpg, png, odt extensions are not available for preview."},errorMessages:{type:[String,Array],default:function(){return[]}},hideDetails:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},value:{type:[File,Array],default:function(){return[]}},showCaption:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1}},data:function(){return{fileName:"",attachment:null,caption:"",attachments:[]}},watch:{default:{handler:function(t){!t||t instanceof File||(this.attachment=t)},immediate:!0},value:{handler:function(t){this.attachments=t,t||(this.fileName="")},immediate:!0},attachment:function(t){this.multiple||this.$emit("input",t)},attachments:function(t){this.$emit("input",t)}},methods:Object(s["a"])(Object(s["a"])({},Object(r["d"])({setSnackBar:"common/setSnackBar"})),{},{pickFile:function(){this.$refs.upload.click()},upload:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=new FileReader,n.readAsDataURL(t.target.files[0]),i="",1===t.target.files[0].name.split(".").length?i="Please upload known file type.":t.target.files[0].size>5242880?i="File size cannot be greater than 5MB.":"svg"===t.target.files[0].name.split(".").pop()&&(i="SVG image not allowed here."),i?e.setSnackBar({text:i,color:"red"}):n.onload=function(){e.$emit("input",t.target.files[0]),e.$emit("blur"),e.$emit("update",n.result),e.attachment=t.target.files[0],e.fileName=t.target.files[0].name};case 5:case"end":return a.stop()}}),a)})))()},clear:function(){this.attachment=null,this.fileName="",this.$emit("input",this.attachment)},appendFile:function(){if(!this.attachment||this.showCaption&&!this.caption){var t=this.attachment?"Please add both attachment and caption":"Please add attachment";this.setSnackBar({text:t,color:"red"})}else{this.setSnackBar({display:!1});var e={};e=this.showCaption?{file:this.attachment,caption:this.caption}:{file:this.attachment},this.multiple||(this.attachments=[]),this.attachments.unshift(e),this.attachment=null,this.caption=""}}})},c=l,d=a("2877"),u=a("6544"),m=a.n(u),p=a("62ad"),h=a("132d"),f=a("0fd9b"),v=a("8654"),g=Object(d["a"])(c,n,i,!1,null,null,null);e["a"]=g.exports;m()(g,{VCol:p["a"],VIcon:h["a"],VRow:f["a"],VTextField:v["a"]})},a51f:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.search.length>0?a("span",[t._v(' Your search for "'+t._s(t.search)+'" found no results. ')]):t.loading?a("v-skeleton-loader",{attrs:{type:"table",height:t.skeletonLoaderHeight}}):a("no-data-found",{attrs:{text:t.text,height:t.height}},[t._t("default")],2)],1)},i=[],o=(a("a9e3"),a("e585")),s={components:{NoDataFound:o["default"]},props:{search:{type:String,default:""},loading:{type:Boolean,required:!0},text:{type:String,default:"No data available at the moment"},height:{type:[String,Number],default:200},skeletonLoaderHeight:{type:[String,Number],default:void 0}}},r=s,l=a("2877"),c=a("6544"),d=a.n(c),u=a("3129"),m=Object(l["a"])(r,n,i,!1,null,null,null);e["default"]=m.exports;d()(m,{VSkeletonLoader:u["a"]})},a79c:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"a",(function(){return o}));var n=a("53ca");a("b0c0");function i(t,e,a){var s,r,l=e||new FormData;for(var c in t)if(Object.prototype.hasOwnProperty.call(t,c))if(s=a?a+"."+c:c,r=t[c],"boolean"===typeof r||"number"===typeof r)l.append(s,r);else if(Array.isArray(r))for(var d=0;d<r.length;d++)l.append(s,r[d]);else"object"!==Object(n["a"])(r)||o(r)?o(r)?l.append(s,r,r.name):r?l.append(s,r):r||"undefined"!==typeof r&&l.append(s,""):i(r,l,c);return l}function o(t){return t instanceof File||t instanceof Blob}},a883:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("vue-card-title",{attrs:{title:"View Attachment",subtitle:"Here you can view the attachment",icon:"mdi-file-document-outline",closable:""},on:{close:function(e){return t.$emit("dismiss")}}}),a("v-divider"),t.nonFieldErrors?a("non-field-form-errors",{attrs:{"non-field-errors":t.nonFieldErrors}}):t._e(),a("v-card-text",{staticClass:"scrollbar-md py-5 px-10"},[a("v-row",[a("v-col",[a("div",{domProps:{innerHTML:t._s(t.$sanitize(t.selectedFile.document_text))}})])],1)],1),t.requireAcknowledge&&!t.selectedFile.has_acknowledged?a("v-divider"):t._e(),t.requireAcknowledge?a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{small:"",text:""},on:{click:function(e){return t.$emit("dismiss")}}},[t._v("Close")]),a("v-btn",{attrs:{color:"primary",small:""},on:{click:t.acknowledgeDocument}},[t._v(" I Acknowledge ")])],1):t._e()],1)},i=[],o=a("f0d5"),s=a("f70a"),r=a("ab8a"),l=a("8bf6"),c={components:{NonFieldFormErrors:r["default"]},mixins:[o["a"],s["a"]],props:{selectedFile:{type:Object,required:!0},requireAcknowledge:{type:Boolean,required:!1}},methods:{acknowledgeDocument:function(){var t=this;this.crud.message="Successfully acknowledged document.",this.insertData(l["a"].acknowledgeDocument(this.getOrganizationSlug,this.selectedFile.slug)).then((function(){t.$emit("dismiss")}))}}},d=c,u=a("2877"),m=a("6544"),p=a.n(m),h=a("8336"),f=a("b0af"),v=a("99d9"),g=a("62ad"),b=a("ce7e"),y=a("0fd9b"),x=a("2fa4"),w=Object(u["a"])(d,n,i,!1,null,null,null);e["a"]=w.exports;p()(w,{VBtn:h["a"],VCard:f["a"],VCardActions:v["a"],VCardText:v["c"],VCol:g["a"],VDivider:b["a"],VRow:y["a"],VSpacer:x["a"]})},d5b0:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",[a("vue-card-title",{attrs:{title:"Organization Ethics",subtitle:t.cardText,icon:"mdi-gavel"}},[a("template",{slot:"actions"},[t.normalUser?t._e():a("div",[t.verifyPermission(t.allPermissions.ORGANIZATION_ETHICS_PERMISSION)?a("v-btn",{attrs:{small:"",color:"primary",depressed:""},on:{click:function(e){return t.triggerForm("create")}}},[t._v(" "+t._s(t.$t("createNew"))+" ")]):t._e(),a("v-dialog",{attrs:{persistent:"",scrollable:"",width:"920"},on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.displayForm=!1}},model:{value:t.displayForm,callback:function(e){t.displayForm=e},expression:"displayForm"}},[t.displayForm?a("ethics-form",{attrs:{"org-slug":t.getOrganizationSlug,"action-data":t.actionData,"delete-ethic":t.deleteItem},on:{dismissForm:t.dismissForm,refresh:t.fetchDataTable}}):t._e()],1)],1),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.showFilters=!t.showFilters}}},[a("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-filter-variant")}})],1)],1)],2),a("v-divider"),a("v-slide-y-transition",[t.showFilters?a("div",[a("vue-search",{staticClass:"py-3 mx-3",attrs:{search:t.search},on:{"update:search":function(e){t.search=e}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1):t._e()]),t.showFilters?a("v-divider"):t._e(),a("v-data-table",{attrs:{headers:t.headers,items:t.fetchedResults,"sort-desc":t.pagination.descending,"sort-by":t.pagination.sortBy,page:t.pagination.page,"items-per-page":t.pagination.rowsPerPage,"footer-props":t.footerProps,"server-items-length":t.pagination.totalItems,"must-sort":"","single-expand":"","mobile-breakpoint":0,"item-key":"title"},on:{"update:sortDesc":function(e){return t.$set(t.pagination,"descending",e)},"update:sort-desc":function(e){return t.$set(t.pagination,"descending",e)},"update:sortBy":function(e){return t.$set(t.pagination,"sortBy",e)},"update:sort-by":function(e){return t.$set(t.pagination,"sortBy",e)},"update:page":function(e){return t.$set(t.pagination,"page",e)},"update:itemsPerPage":function(e){return t.$set(t.pagination,"rowsPerPage",e)},"update:items-per-page":function(e){return t.$set(t.pagination,"rowsPerPage",e)}},scopedSlots:t._u([{key:"item",fn:function(e){return[a("tr",[a("td",{on:{click:function(t){return e.expand(!e.isExpanded)}}},[a("a",{domProps:{textContent:t._s(e.item.title)}})]),a("td",[t._v(" "+t._s(e.item.parent?e.item.parent.title:"N/A")+" ")]),a("td",[t._v(" "+t._s(e.item.moral)+" ")]),e.item.is_downloadable&&e.item.attachment?a("td",{staticClass:"pointer",on:{click:function(a){return t.downloadFile(e.item.attachment)}}},[a("a",{domProps:{textContent:t._s("Download")}}),a("v-icon",{attrs:{color:"primary"}},[t._v("mdi-download-outline")])],1):!e.item.is_downloadable&&e.item.document_text?a("td",{staticClass:"pointer",on:{click:function(a){return t.viewFile(e.item)}}},[a("a",{domProps:{textContent:t._s("View Only")}}),a("v-icon",{staticClass:"pl-1",attrs:{color:"primary"}},[t._v("mdi-eye-outline")])],1):a("td",[t._v("N/A")]),t.normalUser?t._e():[a("td",[a("v-icon",{attrs:{color:e.item.published?"success":"danger"},domProps:{textContent:t._s(e.item.published?"mdi-check":"mdi-window-close")}})],1),a("td",[a("v-icon",{attrs:{color:e.item.is_archived?"success":"danger"},domProps:{textContent:t._s(e.item.is_archived?"mdi-check":"mdi-window-close")}})],1),a("td",[a("div",[a("span",{domProps:{textContent:t._s("Created:")}}),a("span",{domProps:{textContent:t._s(t.humanizeDate(e.item.created_at))}})]),a("div",[a("span",{domProps:{textContent:t._s("Modified:")}}),a("span",{domProps:{textContent:t._s(t.humanizeDate(e.item.modified_at))}})])]),a("td",[a("vue-context-menu",{attrs:{"context-list":[{name:"Update Details",icon:"mdi-pencil-outline",color:"blue",disabled:!t.verifyPermission(t.allPermissions.ORGANIZATION_ETHICS_PERMISSION),disable_message:"Not Allowed"},{name:"Delete Details",icon:"mdi-delete-outline",color:"danger",disabled:!t.verifyPermission(t.allPermissions.ORGANIZATION_ETHICS_PERMISSION),disable_message:"Not Allowed"},{name:"View Details",icon:"mdi-eye-outline",color:"grey darken-2",disabled:!t.verifyPermission(t.allPermissions.ORGANIZATION_ETHICS_PERMISSION),disable_message:"Not Allowed"}]},on:{click0:function(a){return t.triggerForm("update",e.item)},click1:function(a){return t.triggerDelete(e.item)},click2:function(t){return e.expand(!e.isExpanded)}}})],1)],t.normalUser?[a("td",[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on;return[a("v-icon",t._g({staticClass:"pointer",attrs:{color:"primary"},domProps:{textContent:t._s(e.isExpanded?"mdi-chevron-up":"mdi-chevron-down")},on:{click:function(t){return e.expand(!e.isExpanded)}}},i))]}}],null,!0)},[a("span",[t._v("See more")])])],1)]:t._e()],2)]}},{key:"expanded-item",fn:function(e){var n=e.item,i=e.headers;return[a("td",{attrs:{colspan:i.length}},[a("v-card",{attrs:{flat:""}},[a("v-card-text",{domProps:{textContent:t._s(n.description)}})],1)],1)]}}])},[a("template",{slot:"no-data"},[a("data-table-no-data",{attrs:{loading:t.loading}})],1)],2)],1),a("v-dialog",{attrs:{persistent:"",scrollable:"",width:"920"},on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.displayFile=!1}},model:{value:t.displayFile,callback:function(e){t.displayFile=e},expression:"displayFile"}},[a("view-attachment-file",{attrs:{"selected-file":t.selectedDocument},on:{dismiss:function(e){t.displayFile=!1}}})],1),a("vue-dialog",{attrs:{notify:t.deleteNotification},on:{close:function(e){t.deleteNotification.dialog=!1},agree:t.deleteData}})],1)},i=[],o=(a("ac1f"),a("841c"),a("8cd3")),s=a("2c58"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.deleteEthic?t._e():a("v-form",{ref:"ethicsForm",on:{submit:function(e){return e.preventDefault(),t.getFormAction.apply(null,arguments)}}},[a("v-card",[a("vue-card-title",{attrs:{title:t.actionData.title.length>0?"Update Details":"Create New",subtitle:t.actionData.title.length>0?"Here you can update organization ethics":"Here you can create organization ethics",icon:t.actionData.title.length>0?"mdi-pencil-outline":"mdi-gavel",closable:""},on:{close:function(e){return t.close()}}}),a("v-divider"),a("v-card-text",{staticClass:"scrollbar-md"},[a("v-container",[a("v-row",[t.nonFieldErrors.length>0?a("v-col",{attrs:{cols:"12"}},[a("non-field-form-errors",{attrs:{"non-field-errors":t.nonFieldErrors}})],1):t._e(),a("v-col",{attrs:{md:"6",cols:"12"}},[a("v-text-field",t._b({directives:[{name:"validate",rawName:"v-validate",value:"required|max:255",expression:"'required|max:255'"}],attrs:{counter:255,"prepend-inner-icon":"mdi-file-document-outline"},model:{value:t.formValues.title,callback:function(e){t.$set(t.formValues,"title",e)},expression:"formValues.title"}},"v-text-field",t.veeValidate("title","Title *"),!1))],1),a("v-col",{attrs:{md:"6",cols:"12"}},[a("vue-auto-complete",t._b({attrs:{endpoint:t.parentEndPoint,default:t.actionData.parent,"item-text":"title","item-value":"slug","prepend-inner-icon":"mdi-quadcopter"},model:{value:t.formValues.parent,callback:function(e){t.$set(t.formValues,"parent",e)},expression:"formValues.parent"}},"vue-auto-complete",t.veeValidate("parent","Parent"),!1))],1),a("v-col",{attrs:{md:"6",cols:"12"}},[a("v-textarea",t._b({directives:[{name:"validate",rawName:"v-validate",value:"max:600",expression:"'max:600'"}],attrs:{counter:600,rows:"3","prepend-inner-icon":"mdi-information-outline"},model:{value:t.formValues.description,callback:function(e){t.$set(t.formValues,"description",e)},expression:"formValues.description"}},"v-textarea",t.veeValidate("description","Description"),!1))],1),a("v-col",{attrs:{md:"6",cols:"12"}},[a("v-select",t._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:t.moralItems,"prepend-inner-icon":"mdi-emoticon-neutral-outline"},model:{value:t.formValues.moral,callback:function(e){t.$set(t.formValues,"moral",e)},expression:"formValues.moral"}},"v-select",t.veeValidate("moral","Moral *"),!1))],1),a("v-col",{attrs:{md:"2",cols:"12"}},[a("v-checkbox",{attrs:{label:"Is Published"},model:{value:t.formValues.published,callback:function(e){t.$set(t.formValues,"published",e)},expression:"formValues.published"}})],1),a("v-col",{staticClass:"pl-0",attrs:{md:"2",cols:"12"}},[a("v-checkbox",{attrs:{label:"Is Archived"},model:{value:t.formValues.is_archived,callback:function(e){t.$set(t.formValues,"is_archived",e)},expression:"formValues.is_archived"}})],1),a("v-col",{staticClass:"pl-0",attrs:{md:"2",cols:"12"}},[a("v-checkbox",{attrs:{label:"Is Downloadable"},model:{value:t.formValues.is_downloadable,callback:function(e){t.$set(t.formValues,"is_downloadable",e)},expression:"formValues.is_downloadable"}})],1),t.formValues.is_downloadable?a("v-col",{attrs:{md:"12",cols:"12"}},[a("attachments",{attrs:{"show-caption":!1,disabled:!!t.previousAttachment},on:{input:function(e){t.removeAttachment=!1}},model:{value:t.attachment,callback:function(e){t.attachment=e},expression:"attachment"}}),a("v-row",{attrs:{"no-gutters":""}},[t.previousAttachment?a("div",{staticClass:"mt-2"},[t._v(" Attachment : "),a("span",{staticClass:"pointer primary--text",on:{click:function(e){return t.viewAttachment(t.previousAttachment)}}},[t._v(" "+t._s(t.previousAttachment))]),a("div",{staticClass:"mt-2"},[a("v-btn",{attrs:{small:"",color:"primary"},domProps:{textContent:t._s("Download")},on:{click:function(e){return t.downloadAttachment(t.previousAttachment)}}}),a("v-btn",{attrs:{small:"",color:"danger white--text"},domProps:{textContent:t._s("RemoveAttachment")},on:{click:function(e){t.removeAttachment=!0,t.previousAttachment=""}}})],1)]):t._e()])],1):a("v-col",{attrs:{md:"12",cols:"12"}},[a("div",{staticClass:"mt-2"},[a("v-icon",{attrs:{size:"18"},domProps:{textContent:t._s("mdi-clipboard-text-outline")}}),t._v(" Document: ")],1),a("vue-trumbowyg",t._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],attrs:{id:"trumbowyg",placeholder:"Write content here.."},model:{value:t.formValues.document_text,callback:function(e){t.$set(t.formValues,"document_text",e)},expression:"formValues.document_text"}},"vue-trumbowyg",t.veeValidate("document_text","Document"),!1))],1)],1)],1)],1),a("v-divider"),a("form-submit",{attrs:{"form-errors":t.errors.any(),"delete-instance":t.deleteEthic},on:{clearForm:t.clearForm}})],1)],1)},l=[],c=a("1da1"),d=a("5530"),u=(a("96cf"),a("c44a")),m=a("ab8a"),p=a("5660"),h=a("878b"),f=(a("99af"),{getEthics:function(t){return"/org/".concat(t,"/ethics/")},postEthics:function(t){return"/org/".concat(t,"/ethics/")},getEthicsDetails:function(t,e){return"/org/".concat(t,"/ethics/").concat(e,"/")},updateEthics:function(t,e){return"/org/".concat(t,"/ethics/").concat(e,"/")},deleteEthics:function(t,e){return"/org/".concat(t,"/ethics/").concat(e,"/")}}),v=a("a173"),g=a("a79c"),b=a("1467"),y={components:{NonFieldFormErrors:m["default"],VueAutoComplete:p["default"],FormSubmit:h["a"],Attachments:v["a"],VueTrumbowyg:b["default"]},mixins:[u["a"]],props:{actionData:{type:Object,required:!1,default:function(){return{title:"",description:"",parent:{},moral:"",published:!1,is_downloadable:!0,is_archived:!1,attachment:null,document_text:""}}},orgSlug:{type:String,required:!0},deleteEthic:{type:Boolean,default:!1}},data:function(){return{parentEndPoint:f.getEthics(this.orgSlug),previousAttachment:"",attachment:null,removeAttachment:!1,formValues:Object(d["a"])({is_downloadable:!0},this.deepCopy(this.actionData)),moralItems:["Do","Dont","Rules","Regulation"]}},created:function(){this.deleteEthic&&this.getFormAction(),this.formValues.attachment&&(this.previousAttachment=this.actionData.attachment)},methods:{getFormAction:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.validateAllFields();case 2:if(!e.sent){e.next=6;break}if(!t.deleteEthic){e.next=5;break}return e.abrupt("return",t.deleteEthicsItem());case 5:return e.abrupt("return",t.formValues.slug?t.updateEthics():t.createEthics());case 6:case"end":return e.stop()}}),e)})))()},createEthics:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.validateAllFields(),t.$http.post(f.postEthics(t.orgSlug),t.getFormValues()).then((function(){t.notifyUser("Successfully created Ethics.","green"),t.$emit("dismissForm")})).catch((function(e){t.notifyInvalidFormResponse(),t.pushErrors(e)}));case 2:case"end":return e.stop()}}),e)})))()},updateEthics:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.validateAllFields(),t.$http.patch(f.updateEthics(t.orgSlug,t.actionData.slug),t.getFormValues()).then((function(){t.notifyUser("Successfully updated Ethics.","green"),t.$emit("dismissForm")})).catch((function(e){t.notifyInvalidFormResponse(),t.pushErrors(e)}));case 2:case"end":return e.stop()}}),e)})))()},deleteEthicsItem:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$http.delete(f.deleteEthics(t.orgSlug,t.actionData.slug)).then((function(){t.notifyUser("Successfully deleted Ethics.","green"),t.$emit("dismissForm"),t.$emit("refresh")})).catch((function(e){t.notifyInvalidFormResponse(),t.pushErrors(e)}));case 1:case"end":return e.stop()}}),e)})))()},viewAttachment:function(t){var e="https://docs.google.com/viewerng/viewer?url=".concat(t);window.open(e,"_blank")},downloadAttachment:function(t){window.open(t)},getFormValues:function(){if(this.removeAttachment)return this.formValues.attachment=null,this.formValues;this.formValues.is_downloadable?this.formValues.document_text="":(this.attachment=null,this.formValues.attachment=null);var t=this.deepCopy(this.formValues);return delete t.attachment,this.attachment&&(t.attachment=this.attachment),Object(g["b"])(t)},clearForm:function(){this.errors.clear(),this.$refs.ethicsForm.reset(),this.clearNonFieldErrors()},close:function(){this.$emit("dismissForm")}}},x=y,w=a("2877"),_=a("6544"),k=a.n(_),V=a("8336"),F=a("b0af"),C=a("99d9"),E=a("ac7c"),S=a("62ad"),P=a("a523"),D=a("ce7e"),A=a("4bd4"),$=a("132d"),O=a("0fd9b"),I=a("b974"),N=a("8654"),T=a("a844"),B=Object(w["a"])(x,r,l,!1,null,null,null),R=B.exports;k()(B,{VBtn:V["a"],VCard:F["a"],VCardText:C["c"],VCheckbox:E["a"],VCol:S["a"],VContainer:P["a"],VDivider:D["a"],VForm:A["a"],VIcon:$["a"],VRow:O["a"],VSelect:I["a"],VTextField:N["a"],VTextarea:T["a"]});var j=a("a883"),L=a("096a"),z=a("a51f"),U=a("e4bf"),q={components:{VueContextMenu:U["default"],EthicsForm:R,DataTableNoData:z["default"],ViewAttachmentFile:j["a"]},mixins:[o["a"],L["a"],s["a"]],props:{normalUser:{type:Boolean,default:!1}},data:function(){return{settingsName:"Ethics",loading:!1,displayFile:!1,headers:[{text:"Ethics Title",value:"title",width:"20%"},{text:"Parent",value:"parent__title",width:"10%"},{text:"Moral",value:"moral",width:"10%"},{text:"Attachment",value:"attachment",width:"15%"}],search:"",selectedDocument:null}},computed:{dataTableFilter:function(){return{search:this.search,published:this.normalUser?"true":"",archived:this.normalUser?"false":""}}},created:function(){if(!this.normalUser){var t,e=[{text:"Published",value:"published",width:"15%"},{text:"Archived",value:"is_archived",width:"10%"},{text:"Timestamp",sortable:!1,value:"modified_at",width:"15%"},{text:"Action",sortable:!1,width:"5%"}];(t=this.headers).push.apply(t,e)}if(this.normalUser){var a,n=[{text:"Action",sortable:!1,width:"5%"}];(a=this.headers).push.apply(a,n)}this.dataTableEndpoint=f.getEthics(this.getOrganizationSlug),this.fullParams},methods:{downloadFile:function(t){window.open(t,"_blank")},viewFile:function(t){this.displayFile=!0,this.selectedDocument=t}}},M=q,H=a("8fea"),G=a("169a"),Z=a("0789"),J=a("3a2f"),W=Object(w["a"])(M,n,i,!1,null,null,null);e["a"]=W.exports;k()(W,{VBtn:V["a"],VCard:F["a"],VCardText:C["c"],VDataTable:H["a"],VDialog:G["a"],VDivider:D["a"],VIcon:$["a"],VSlideYTransition:Z["g"],VTooltip:J["a"]})},e4bf:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.contextList.filter((function(t){return!t.hide})).length<3&&!t.hideIcons||t.showIcons?a("div",t._l(t.contextList,(function(e,n){return a("span",{key:n},[e.hide?t._e():a("v-tooltip",{attrs:{disabled:t.$vuetify.breakpoint.xs,top:""},scopedSlots:t._u([{key:"activator",fn:function(i){var o=i.on;return[a("v-btn",t._g({staticClass:"mx-0",attrs:{text:"",width:t.small?"18":"22",depressed:"",icon:""}},o),[a("v-icon",{attrs:{disabled:e.disabled,color:e.color,"data-cy":t.dataCyVariable+"btn-dropdown-menu-item-"+(n+1),dark:!e.disabled,small:t.small,size:"20",dense:""},domProps:{textContent:t._s(e.icon)},on:{click:function(e){return t.$emit("click"+n)}}})],1)]}}],null,!0)},[a("span",{domProps:{textContent:t._s(e.disabled&&e.disable_message||e.name)}})])],1)})),0):a("v-menu",{attrs:{"offset-y":"",left:"",transition:"slide-y-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({attrs:{small:"",text:"",icon:""}},n),[a("v-icon",{attrs:{"data-cy":"btn-dropdown-menu"},domProps:{textContent:t._s("mdi-dots-vertical")}})],1)]}}])},t._l(t.contextList,(function(e,n){return a("v-list",{key:n,staticClass:"pa-0",attrs:{dense:""}},[e.hide?t._e():a("div",[e.disabled?a("v-list-item",{attrs:{"data-cy":"btn-dropdown-menu-item"}},[a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on;return[a("v-list-item-title",t._g({},i),[a("v-icon",{attrs:{disabled:"",small:"",color:e.color},domProps:{textContent:t._s(e.icon)}}),a("span",{staticClass:"ml-1 grey--text",domProps:{textContent:t._s(e.name)}})],1)]}}],null,!0)},[a("span",{domProps:{textContent:t._s(e.disabled&&e.disable_message||e.name)}})])],1):a("v-list-item",{attrs:{"data-cy":"btn-dropdown-menu-item"},on:{click:function(e){return t.$emit("click"+n)}}},[a("v-list-item-title",[a("v-icon",{attrs:{color:e.color,small:"",dense:""},domProps:{textContent:t._s(e.icon)}}),a("span",{staticClass:"ml-1",class:e.text_color,domProps:{textContent:t._s(e.name)}})],1)],1)],1)])})),1)],1)},i=[],o={name:"VueContextMenu",props:{contextList:{type:Array,default:function(){return[]}},dataCyVariable:{type:String,default:""},showIcons:{type:Boolean,default:!1},hideIcons:{type:Boolean,default:!1},small:{type:Boolean,default:!1}}},s=o,r=a("2877"),l=a("6544"),c=a.n(l),d=a("8336"),u=a("132d"),m=a("8860"),p=a("da13"),h=a("5d23"),f=a("e449"),v=a("3a2f"),g=Object(r["a"])(s,n,i,!1,null,"71ee785c",null);e["default"]=g.exports;c()(g,{VBtn:d["a"],VIcon:u["a"],VList:m["a"],VListItem:p["a"],VListItemTitle:h["c"],VMenu:f["a"],VTooltip:v["a"]})},f0d5:function(t,e,a){"use strict";a("d3b7"),a("3ca3"),a("ddb0");var n=a("c44a");e["a"]={components:{NonFieldFormErrors:function(){return a.e("chunk-6441e173").then(a.bind(null,"ab8a"))}},mixins:[n["a"]],data:function(){return{crud:{name:"record",message:"",addAnother:!1},formValues:{},loading:!1}}}},f70a:function(t,e,a){"use strict";a("d3b7"),a("caad");e["a"]={methods:{insertData:function(t,e){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.validate,o=void 0===i||i,s=n.clearForm,r=void 0===s||s,l=arguments.length>3?arguments[3]:void 0;return new Promise((function(n,i){!a.loading&&t&&(a.clearErrors(),a.$validator.validateAll().then((function(s){o||(s=!0),s&&(a.loading=!0,a.$http.post(t,e,l||{}).then((function(t){a.clearErrors(),r&&(a.formValues={}),a.crud.addAnother||a.$emit("create"),a.crud.message&&setTimeout((function(){a.notifyUser(a.crud.message)}),1e3),n(t),a.loading=!1})).catch((function(t){a.pushErrors(t),a.notifyInvalidFormResponse(),i(t),a.loading=!1})))})))}))},patchData:function(t,e){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.validate,o=void 0===i||i,s=n.clearForm,r=void 0===s||s,l=arguments.length>3?arguments[3]:void 0;return new Promise((function(n,i){a.updateData(t,e,{validate:o,clearForm:r},"patch",l).then((function(t){n(t)})).catch((function(t){i(t)}))}))},putData:function(t,e){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.validate,o=void 0===i||i,s=n.clearForm,r=void 0===s||s,l=arguments.length>3?arguments[3]:void 0;return new Promise((function(n,i){a.updateData(t,e,{validate:o,clearForm:r},"put",l).then((function(t){n(t)})).catch((function(t){i(t)}))}))},updateData:function(t,e){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.validate,o=void 0===i||i,s=n.clearForm,r=void 0===s||s,l=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0;return new Promise((function(n,i){!a.loading&&t&&["put","patch"].includes(l)&&(a.clearErrors(),a.$validator.validateAll().then((function(s){o||(s=!0),s&&(a.loading=!0,a.$http[l](t,e,c||{}).then((function(t){a.$emit("update"),a.clearErrors(),r&&(a.formValues={}),a.crud.message&&setTimeout((function(){a.notifyUser(a.crud.message)}),1e3),n(t),a.loading=!1})).catch((function(t){a.pushErrors(t),a.notifyInvalidFormResponse(),i(t),a.loading=!1})))})))}))},clearErrors:function(){this.clearNonFieldErrors(),this.$validator.errors.clear()}}}}}]);