(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages/admin/_slug/pa/settings/kpi-collections","chunk-2d22d378"],{1229:function(t,e,i){"use strict";i("99af");e["a"]={getDivision:function(t){return"/org/".concat(t,"/division/")},postDivision:function(t){return"/org/".concat(t,"/division/")},getDivisionDetails:function(t,e){return"/org/".concat(t,"/division/").concat(e,"/")},putDivision:function(t,e){return"/org/".concat(t,"/division/").concat(e,"/")},deleteDivision:function(t,e){return"/org/".concat(t,"/division/").concat(e,"/")},importDivision:function(t){return"/org/".concat(t,"/division/import/")},downloadSampleDivision:function(t){return"/org/".concat(t,"/division/import/sample")}}},"2c2a":function(t,e,i){"use strict";i("99af");e["a"]={getEmploymentLevel:function(t){return"/org/".concat(t,"/employment/level/")},postEmploymentLevel:function(t){return"/org/".concat(t,"/employment/level/")},getEmploymentLevelDetail:function(t,e){return"/org/".concat(t,"/employment/level/").concat(e,"/")},updateEmploymentLevel:function(t,e){return"/org/".concat(t,"/employment/level/").concat(e,"/")},deleteEmploymentLevel:function(t,e){return"/org/".concat(t,"/employment/level/").concat(e,"/")},importEmploymentLevel:function(t){return"/org/".concat(t,"/employment/level/import/")},downloadSampleEmploymentLevel:function(t){return"/org/".concat(t,"/employment/level/import/sample")}}},"68c3":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",[i("vue-card-title",{attrs:{title:t.title,subtitle:t.subtitle,icon:"mdi-account-group-outline",dark:"",closable:""},on:{close:function(e){return t.$emit("close",!1)},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.$emit("close",!1)}}}),i("v-divider"),i("v-card-text",[t.items.length?t._e():i("div",[i("vue-no-data")],1),i("v-list",t._l(t.items,(function(e,a){return i("v-list-item-content",{key:a},[t._v(" "+t._s(e)+" ")])})),1)],1)],1)},o=[],s=i("e585"),n={components:{VueNoData:s["default"]},name:"ShowListDialog",props:{items:{type:Array},title:{type:String,required:!0},subtitle:{type:String,required:!0},headerName:{type:String,required:!0}}},l=n,r=i("2877"),c=i("6544"),d=i.n(c),u=i("b0af"),m=i("99d9"),v=i("ce7e"),p=i("8860"),f=i("5d23"),h=Object(r["a"])(l,a,o,!1,null,"97a50782",null);e["a"]=h.exports;d()(h,{VCard:u["a"],VCardText:m["c"],VDivider:v["a"],VList:p["a"],VListItemContent:f["a"]})},a00a:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("vue-page-wrapper",{attrs:{"bread-crumbs":t.breadCrumbItems,title:t.htmlTitle}},[i("v-card",[i("vue-card-title",{attrs:{title:"KPI Collections",subtitle:"This page contains KPI Collections.",icon:"mdi-file-document-outline"}},[i("template",{slot:"actions"},[i("v-btn",{attrs:{small:"",color:"primary",depressed:""},on:{click:function(e){return t.$router.push({name:"admin-slug-pa-settings-assign-kpi",params:{assignKpi:!0,slug:t.getOrganizationSlug}})}}},[t._v(" Assign KPI ")]),i("v-btn",{attrs:{small:"",color:"primary",depressed:""},on:{click:function(e){t.showDialog=!0,t.addKpiDialog=!0}}},[t._v(" Add KPI ")]),i("v-btn",{attrs:{"data-cy":"btn-filter",icon:""},on:{click:function(e){t.showFilters=!t.showFilters}}},[i("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-filter-variant")}})],1)],1)],2),i("v-divider"),i("v-slide-y-transition",[i("v-row",{directives:[{name:"show",rawName:"v-show",value:t.showFilters,expression:"showFilters"}],staticClass:"px-3"},[i("v-col",{attrs:{md:"3",cols:"12"}},[i("vue-search",{attrs:{search:t.search},on:{"update:search":function(e){t.search=e}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),i("v-col",{attrs:{md:"3",cols:"12"}},[i("vue-auto-complete",{attrs:{endpoint:t.jobTitleEndpoint,label:"Filter by Job Title","item-text":"title","item-value":"slug"},model:{value:t.filter.job_title,callback:function(e){t.$set(t.filter,"job_title",e)},expression:"filter.job_title"}})],1),i("v-col",{attrs:{md:"3",cols:"12"}},[i("vue-auto-complete",{attrs:{endpoint:t.divisionEndpoint,label:"Filter by Division","item-text":"name","item-value":"slug"},model:{value:t.filter.division,callback:function(e){t.$set(t.filter,"division",e)},expression:"filter.division"}})],1),i("v-col",{attrs:{md:"3",cols:"12"}},[i("vue-auto-complete",{attrs:{endpoint:t.employmentLevelEndpoint,label:"Filter by Employment Level","item-text":"title","item-value":"slug"},model:{value:t.filter.employment_level,callback:function(e){t.$set(t.filter,"employment_level",e)},expression:"filter.employment_level"}})],1)],1)],1),i("v-divider"),i("v-data-table",{attrs:{headers:t.headers,items:t.fetchedResults,"sort-desc":t.pagination.descending,"sort-by":t.pagination.sortBy,page:t.pagination.page,"items-per-page":t.pagination.rowsPerPage,"footer-props":t.footerProps,"server-items-length":t.pagination.totalItems,"mobile-breakpoint":0,"must-sort":""},on:{"update:sortDesc":function(e){return t.$set(t.pagination,"descending",e)},"update:sort-desc":function(e){return t.$set(t.pagination,"descending",e)},"update:sortBy":function(e){return t.$set(t.pagination,"sortBy",e)},"update:sort-by":function(e){return t.$set(t.pagination,"sortBy",e)},"update:page":function(e){return t.$set(t.pagination,"page",e)},"update:itemsPerPage":function(e){return t.$set(t.pagination,"rowsPerPage",e)},"update:items-per-page":function(e){return t.$set(t.pagination,"rowsPerPage",e)}},scopedSlots:t._u([{key:"item",fn:function(e){return[i("tr",[i("td",[t._v(" "+t._s(e.item.title)+" ")]),i("td",[t._v(" "+t._s(t._f("truncate")(e.item.success_criteria,40))+" ")]),i("td",[i("v-chip",{staticClass:"pointer",on:{click:function(i){return t.openListDialog(e.item.job_title,"job title","List of Job Title")}}},[t._v(" "+t._s(e.item.job_title.length)+" ")])],1),i("td",[i("v-chip",{staticClass:"pointer",on:{click:function(i){return t.openListDialog(e.item.division,"Division","List of Division")}}},[t._v(" "+t._s(e.item.division.length)+" ")])],1),i("td",[i("v-chip",{staticClass:"pointer",on:{click:function(i){return t.openListDialog(e.item.employment_level,"Employment Level","List of Employment Level")}}},[t._v(" "+t._s(e.item.employment_level.length)+" ")])],1),i("td",{staticClass:"text-capitalize"},[t._v(" "+t._s(e.item.is_archived)+" ")]),i("td",[i("vue-context-menu",{attrs:{"context-list":[{name:"Edit Settings",icon:"mdi-pencil-outline",color:"info"},{name:"View Settings",icon:"mdi-eye",color:"info"}]},on:{click0:function(i){return t.editKpi(e.item)},click1:function(i){return t.viewKpi(e.item)}}})],1)])]}}])}),i("v-dialog",{key:t.showDialog,attrs:{"max-width":"800",persistent:""},on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.showDialog=!1}},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[i("kpi-collections-dialog",{attrs:{"add-kpi-dialog":t.addKpiDialog,item:t.selectedKpi},on:{close:function(e){t.showDialog=!1},refreshKpi:function(e){return t.fetchDataTable()}}})],1),i("v-dialog",{attrs:{width:"500",scrollable:"",persistent:""},model:{value:t.showList,callback:function(e){t.showList=e},expression:"showList"}},[i("show-list-dialog",{attrs:{title:t.titleList,subtitle:t.subTitle,items:t.listItem,"header-name":t.headerName},on:{close:function(e){t.showList=e}}})],1),i("v-dialog",{attrs:{"max-width":"800","max-height":"500",persistent:""},model:{value:t.showDetails,callback:function(e){t.showDetails=e},expression:"showDetails"}},[i("show-detail-dialog",{attrs:{"kpi-detail":t.details},on:{close:function(e){t.showDetails=!1}}})],1)],1)],1)},o=[],s=i("5530"),n=(i("ac1f"),i("841c"),i("4de4"),i("d81d"),i("b0c0"),i("0549")),l=i("8cd3"),r=i("5660"),c=i("86eb"),d=i("2c2a"),u=i("1229"),m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",[i("vue-card-title",{attrs:{title:"Add Key Performance Indicator",subtitle:"Here you can add Key Performance Indicator",icon:"mdi-file-document-outline",closable:""},on:{close:function(e){return t.$emit("close")}}}),i("v-divider"),i("v-row",{staticClass:"mx-6 my-0"},[t.nonFieldErrors.length>0?i("v-col",{attrs:{cols:"12"}},[i("non-field-form-errors",{attrs:{"non-field-errors":t.nonFieldErrors}})],1):t._e(),i("v-col",{staticClass:"py-0",attrs:{md:"6",cols:"12"}},[i("v-text-field",t._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],model:{value:t.formValues.title,callback:function(e){t.$set(t.formValues,"title",e)},expression:"formValues.title"}},"v-text-field",t.veeValidate("title","KPI Title*"),!1))],1),i("v-col",{staticClass:"py-2 px-12",attrs:{md:"6",cols:"12"}},[t.addKpiDialog?t._e():i("v-checkbox",{attrs:{label:"Archive"},model:{value:t.formValues.is_archived,callback:function(e){t.$set(t.formValues,"is_archived",e)},expression:"formValues.is_archived"}})],1),i("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[i("v-card-text",{staticClass:"text-sm px-0"},[t._v("Success Criteria*")]),i("v-textarea",t._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{outlined:""},model:{value:t.formValues.success_criteria,callback:function(e){t.$set(t.formValues,"success_criteria",e)},expression:"formValues.success_criteria"}},"v-textarea",t.veeValidate("success_criteria","Success Criteria"),!1))],1),i("v-col",{attrs:{md:"4",cols:"12"}},[i("vue-auto-complete",t._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{endpoint:t.jobTitleEndpoint,label:"Associate Job Title*","item-text":"title","item-value":"id",multiple:""},model:{value:t.formValues.job_title,callback:function(e){t.$set(t.formValues,"job_title",e)},expression:"formValues.job_title"}},"vue-auto-complete",t.veeValidate("job_title","Associate Job Title"),!1))],1),i("v-col",{attrs:{md:"4",cols:"12"}},[i("vue-auto-complete",t._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{endpoint:t.divisionEndpoint,label:"Associate Division","item-text":"name","item-value":"id",multiple:""},model:{value:t.formValues.division,callback:function(e){t.$set(t.formValues,"division",e)},expression:"formValues.division"}},"vue-auto-complete",t.veeValidate("division","Associate Division"),!1))],1),i("v-col",{attrs:{md:"4",cols:"12"}},[i("vue-auto-complete",t._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{endpoint:t.employmentLevelEndpoint,label:"Associate Employment Level","item-text":"title","item-value":"id",multiple:""},model:{value:t.formValues.employment_level,callback:function(e){t.$set(t.formValues,"employment_level",e)},expression:"formValues.employment_level"}},"vue-auto-complete",t.veeValidate("employment_level","Associate Employment Level"),!1))],1)],1),i("v-card-actions",[i("v-row",{attrs:{"no-gutters":""}},[i("v-col",{staticClass:"text-right"},[i("v-btn",{staticClass:"black--text",attrs:{text:""},on:{click:function(e){return t.$emit("close")}}},[t._v("Cancel")]),t.addKpiDialog?i("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.addKpi()}}},[t._v("Save ")]):i("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.updateKpi()}}},[t._v("Update")])],1)],1)],1)],1)},v=[],p=i("f0d5"),f=i("be30"),h=i("f70a"),g=i("ab8a"),b={components:{VueAutoComplete:r["default"],NonFieldFormErrors:g["default"]},name:"KpiCollectionsDialog",mixins:[h["a"],p["a"]],props:{item:{type:Object},addKpiDialog:{type:Boolean}},data:function(){return{formValues:{title:"",job_title:"",division:"",employment_level:"",success_criteria:"",is_archived:""},jobTitleEndpoint:"",divisionEndpoint:"",employmentLevelEndpoint:""}},created:function(){this.jobTitleEndpoint=c["a"].getJobTitle(this.getOrganizationSlug),this.divisionEndpoint=u["a"].getDivision(this.getOrganizationSlug),this.employmentLevelEndpoint=d["a"].getEmploymentLevel(this.getOrganizationSlug),this.addKpiDialog?this.formValues={}:this.formValues=this.deepCopy(this.item)},methods:{clearForm:function(){this.formValues={title:"",job_title:[],division:[],employment_level:[],success_criteria:"",is_archived:""}},addKpi:function(){var t=this;this.validateAllFields()&&this.$http.post(f["a"].postKpiCollection(this.getOrganizationSlug),this.formValues).then((function(){t.notifyUser("Successfully added KPI.","green"),t.$emit("refreshKpi"),t.$emit("close")})).catch((function(e){t.pushErrors(e)}))},updateKpi:function(){var t=this;this.$http.put(f["a"].updateKpiCollection(this.getOrganizationSlug,this.item.id),this.formValues).then((function(){t.notifyUser("Successfully updated KPI","green"),t.$emit("refreshKpi"),t.$emit("close")})).catch((function(e){t.pushErrors(e)}))}}},y=b,_=i("2877"),x=i("6544"),w=i.n(x),D=i("8336"),V=i("b0af"),C=i("99d9"),E=i("ac7c"),k=i("62ad"),K=i("ce7e"),L=i("0fd9b"),$=i("8654"),T=i("a844"),P=Object(_["a"])(y,m,v,!1,null,"6fc01318",null),S=P.exports;w()(P,{VBtn:D["a"],VCard:V["a"],VCardActions:C["a"],VCardText:C["c"],VCheckbox:E["a"],VCol:k["a"],VDivider:K["a"],VRow:L["a"],VTextField:$["a"],VTextarea:T["a"]});var A=i("e4bf"),j=i("68c3"),I=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",[i("vue-card-title",{attrs:{title:"View Key Performance Indicator",subtitle:"Here you can view Key Performance Indicator",icon:"mdi-eye-outline",dark:"",closable:""},on:{close:function(e){return t.$emit("close")}}}),i("v-divider"),i("v-row",{staticClass:"px-3",attrs:{"no-gutters":""}},[i("v-col",{attrs:{cols:"12"}},[i("v-card-text",[i("b",[t._v("KPI Title:")]),t._v(" "+t._s(t.KpiDetail.title||"N/A")+" ")])],1),i("v-col",{staticClass:"pb-0",attrs:{cols:"12"}},[i("v-card-text",{staticClass:"font-weight-bold py-0"},[t._v(" Success Criteria: ")])],1),i("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[i("v-card-text",{staticClass:"py-0"},[t._v(" "+t._s(t.KpiDetail.success_criteria||"N/A")+" ")])],1),i("v-col",{attrs:{cols:"12"}},[i("v-card-text",{staticClass:"text-capitalize"},[i("b",[t._v("Archive:")]),t._v(" "+t._s(t.KpiDetail.is_archived)+" ")])],1),i("v-col",{staticClass:"py-0",attrs:{md:"4",cols:"12"}},[i("v-card-text",{staticClass:"font-weight-bold py-0"},[t._v("Job Title")]),i("v-list",t._l(t.KpiDetail.job_title,(function(e,a){return i("v-list-item-content",{key:a,staticClass:"py-0"},[i("v-card-text",{staticClass:"py-0"},[t._v(" "+t._s(e.title||"N/A")+" ")])],1)})),1)],1),i("v-col",{staticClass:"py-0",attrs:{md:"4",cols:"12"}},[i("v-card-text",{staticClass:"font-weight-bold py-0"},[t._v("Division")]),i("v-list",t._l(t.KpiDetail.division,(function(e,a){return i("v-list-item-content",{key:a,staticClass:"py-0"},[i("v-card-text",{staticClass:"py-0"},[t._v(" "+t._s(e.name||"N/A"))])],1)})),1)],1),i("v-col",{staticClass:"py-0",attrs:{md:"4",cols:"12 "}},[i("v-card-text",{staticClass:"font-weight-bold py-0"},[t._v(" Employment Level ")]),i("v-list",t._l(t.KpiDetail.employment_level,(function(e,a){return i("v-list-item-content",{key:a,staticClass:"py-0"},[i("v-card-text",{staticClass:"py-0"},[t._v(t._s(e.title||"N/A"))])],1)})),1)],1)],1)],1)},F=[],O={name:"ShowDetailDialog",props:{KpiDetail:{type:Object}}},N=O,z=i("8860"),J=i("5d23"),q=Object(_["a"])(N,I,F,!1,null,"515907fe",null),B=q.exports;w()(q,{VCard:V["a"],VCardText:C["c"],VCol:k["a"],VDivider:K["a"],VList:z["a"],VListItemContent:J["a"],VRow:L["a"]});var U={components:{ShowDetailDialog:B,ShowListDialog:j["a"],KpiCollectionsDialog:S,VuePageWrapper:n["default"],VueAutoComplete:r["default"],VueContextMenu:A["default"]},mixins:[l["a"]],data:function(){return{htmlTitle:"KPI Collections | Settings | Performance Appraisal | Admin",breadCrumbItems:[{text:"Performance Appraisal",disabled:!1,to:{name:"admin-slug-pa-overview",params:{slug:this.$route.params.slug}}},{text:"Settings",disabled:!1,to:{name:"admin-slug-pa-settings",params:{slug:this.$route.params.slug}}},{text:"KPI Collections",disabled:!0}],formValues:{title:"",job_title:"",division:"",employment_level:"",success_criteria:"",is_archived:""},headerName:"",titleList:"",subTitle:"",listItem:[],showList:!1,showDetails:!1,addKpiDialog:!1,details:[],selectedKpi:{},endpoint:"",showFilters:!1,showDialog:!1,search:"",filter:{},jobTitleEndpoint:"",divisionEndpoint:"",employmentLevelEndpoint:"",headers:[{text:"KPI Title",value:"title"},{text:"Success Criteria",value:"criteria",sortable:!1},{text:"Job Title",value:"job_title",sortable:!1},{text:"Division",value:"division",sortable:!1},{text:"Employment Level",value:"employment_level",sortable:!1},{text:"Archive",value:"is_archived",sortable:!1},{text:"Action",value:"action",sortable:!1}]}},computed:{dataTableFilter:function(){return Object(s["a"])({search:this.search},this.filter)}},created:function(){this.initializeUrls()},methods:{initializeUrls:function(){this.jobTitleEndpoint=c["a"].getJobTitle(this.getOrganizationSlug),this.divisionEndpoint=u["a"].getDivision(this.getOrganizationSlug),this.employmentLevelEndpoint=d["a"].getEmploymentLevel(this.getOrganizationSlug),this.dataTableEndpoint=f["a"].postKpiCollection(this.getOrganizationSlug)},openListDialog:function(t,e,i){this.listItem=t.map((function(t){return t.title||t.name})),this.titleList=e,this.subTitle=i,this.headerName="Title",this.showList=!0},editKpi:function(t){this.addKpiDialog=!1,this.showDialog=!0,this.selectedKpi=t},viewKpi:function(t){this.details=t,this.showDetails=!0}}},R=U,H=i("cc20"),M=i("8fea"),W=i("169a"),Y=i("132d"),G=i("0789"),Q=Object(_["a"])(R,a,o,!1,null,null,null);e["default"]=Q.exports;w()(Q,{VBtn:D["a"],VCard:V["a"],VChip:H["a"],VCol:k["a"],VDataTable:M["a"],VDialog:W["a"],VDivider:K["a"],VIcon:Y["a"],VRow:L["a"],VSlideYTransition:G["g"]})},f70a:function(t,e,i){"use strict";i("d3b7"),i("caad");e["a"]={methods:{insertData:function(t,e){var i=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a.validate,s=void 0===o||o,n=a.clearForm,l=void 0===n||n,r=arguments.length>3?arguments[3]:void 0;return new Promise((function(a,o){!i.loading&&t&&(i.clearErrors(),i.$validator.validateAll().then((function(n){s||(n=!0),n&&(i.loading=!0,i.$http.post(t,e,r||{}).then((function(t){i.clearErrors(),l&&(i.formValues={}),i.crud.addAnother||i.$emit("create"),i.crud.message&&setTimeout((function(){i.notifyUser(i.crud.message)}),1e3),a(t),i.loading=!1})).catch((function(t){i.pushErrors(t),i.notifyInvalidFormResponse(),o(t),i.loading=!1})))})))}))},patchData:function(t,e){var i=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a.validate,s=void 0===o||o,n=a.clearForm,l=void 0===n||n,r=arguments.length>3?arguments[3]:void 0;return new Promise((function(a,o){i.updateData(t,e,{validate:s,clearForm:l},"patch",r).then((function(t){a(t)})).catch((function(t){o(t)}))}))},putData:function(t,e){var i=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a.validate,s=void 0===o||o,n=a.clearForm,l=void 0===n||n,r=arguments.length>3?arguments[3]:void 0;return new Promise((function(a,o){i.updateData(t,e,{validate:s,clearForm:l},"put",r).then((function(t){a(t)})).catch((function(t){o(t)}))}))},updateData:function(t,e){var i=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a.validate,s=void 0===o||o,n=a.clearForm,l=void 0===n||n,r=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0;return new Promise((function(a,o){!i.loading&&t&&["put","patch"].includes(r)&&(i.clearErrors(),i.$validator.validateAll().then((function(n){s||(n=!0),n&&(i.loading=!0,i.$http[r](t,e,c||{}).then((function(t){i.$emit("update"),i.clearErrors(),l&&(i.formValues={}),i.crud.message&&setTimeout((function(){i.notifyUser(i.crud.message)}),1e3),a(t),i.loading=!1})).catch((function(t){i.pushErrors(t),i.notifyInvalidFormResponse(),o(t),i.loading=!1})))})))}))},clearErrors:function(){this.clearNonFieldErrors(),this.$validator.errors.clear()}}}}}]);