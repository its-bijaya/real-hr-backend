(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages/admin/_slug/leave/leave-balance","chunk-2d0c8a11","chunk-2d0d6ae8"],{1229:function(e,t,a){"use strict";a("99af");t["a"]={getDivision:function(e){return"/org/".concat(e,"/division/")},postDivision:function(e){return"/org/".concat(e,"/division/")},getDivisionDetails:function(e,t){return"/org/".concat(e,"/division/").concat(t,"/")},putDivision:function(e,t){return"/org/".concat(e,"/division/").concat(t,"/")},deleteDivision:function(e,t){return"/org/".concat(e,"/division/").concat(t,"/")},importDivision:function(e){return"/org/".concat(e,"/division/import/")},downloadSampleDivision:function(e){return"/org/".concat(e,"/division/import/sample")}}},5660:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-flex space-between"},[a("v-autocomplete",{key:e.componentKey,ref:"autoComplete",class:e.appliedClass,attrs:{id:e.id,items:e.itemsSorted,"search-input":e.search,loading:e.isLoading,multiple:e.multiple,label:e.label,error:e.errorMessages.length>0,"error-messages":e.errorMessages,disabled:e.disabled,readonly:e.readonly,"data-cy":"autocomplete-"+e.dataCyVariable,"prepend-inner-icon":e.prependInnerIcon,clearable:e.clearable&&!e.readonly,"hide-details":e.hideDetails,"item-text":e.itemText,"item-value":e.itemValue,"small-chips":e.multiple||e.chips,"deletable-chips":e.multiple,hint:e.hint,"persistent-hint":e.persistentHint,chips:e.chips,solo:e.solo,flat:e.flat,"cache-items":e.cacheItems,placeholder:e.placeholder,dense:e.dense,"hide-selected":"","hide-no-data":""},on:{"update:searchInput":function(t){e.search=t},"update:search-input":function(t){e.search=t},focus:e.populateOnFocus,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.searchText())},change:e.updateState,blur:function(t){return e.$emit("blur")}},scopedSlots:e._u([{key:"selection",fn:function(t){return[e._t("selection",(function(){return[e.itemText&&t.item?a("div",[e.multiple||e.chips?a("v-chip",{attrs:{close:(e.clearable||!e.clearable&&!e.multiple)&&!e.readonly,small:""},on:{"click:close":function(a){return e.remove(t.item)}}},[t.item[e.itemText]?a("div",[t.item[e.itemText].length>40?a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(n){var i=n.on;return[a("span",e._g({},i),[e._v(" "+e._s(e._f("truncate")(t.item[e.itemText],40)))])]}}],null,!0)},[a("span",[e._v(e._s(t.item[e.itemText]))])]):a("span",[e._v(e._s(t.item[e.itemText]))])],1):a("div",[a("span",[e._v(e._s(t.item))])])]):a("div",[t.item[e.itemText]?a("div",[t.item[e.itemText].length>40?a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(n){var i=n.on;return[a("span",e._g({},i),[e._v(" "+e._s(e._f("truncate")(t.item[e.itemText],40)))])]}}],null,!0)},[a("span",[e._v(e._s(t.item[e.itemText]))])]):a("span",[e._v(e._s(t.item[e.itemText]))])],1):a("div",[a("span",[e._v(e._s(t.item))])])])],1):e._e()]}),{props:t})]}},{key:"item",fn:function(t){return[a("v-list-item-content",[a("v-list-item-title",[e._t("item",(function(){return[e.itemText&&t.item?a("div",[t.item[e.itemText]?a("div",[t.item[e.itemText].length>40?a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(n){var i=n.on;return[a("span",e._g({},i),[e._v(" "+e._s(e._f("truncate")(t.item[e.itemText],40)))])]}}],null,!0)},[a("span",[e._v(e._s(t.item[e.itemText]))])]):a("span",[e._v(e._s(t.item[e.itemText]))])],1):a("div",[a("span",[e._v(e._s(t.item))])])]):e._e()]}),{props:t})],2)],1)]}},{key:"append-item",fn:function(){return[!e.fullyLoaded&&e.showMoreIcon?a("div",[a("v-list-item-content",{staticClass:"px-4 pointer primary--text font-weight-bold"},[a("v-list-item-title",{on:{click:function(t){return e.fetchData()}}},[e._v(" Load More Items ... ")])],1)],1):e._e()]},proxy:!0}],null,!0),model:{value:e.selectedData,callback:function(t){e.selectedData=t},expression:"selectedData"}}),e._t("default")],2)},i=[],r=a("2909"),s=a("5530"),l=a("53ca"),o=a("1da1"),c=(a("96cf"),a("a9e3"),a("ac1f"),a("841c"),a("7db0"),a("d81d"),a("159b"),a("4de4"),a("4e827"),a("2ca0"),a("d3b7"),a("c740"),a("a434"),a("3ca3"),a("ddb0"),a("2b3d"),a("caad"),a("2532"),a("63ea")),u=a.n(c),d={props:{value:{type:[Number,String,Array,Object],default:void 0},id:{type:String,default:""},dataCyVariable:{type:String,default:""},endpoint:{type:String,default:""},itemText:{type:String,required:!0},itemValue:{type:String,required:!0},params:{type:Object,required:!1,default:function(){return{}}},itemsToExclude:{type:[Array,Number],default:null},forceFetch:{type:Boolean,default:!1},staticItems:{type:Array,default:function(){return[]}},errorMessages:{type:[String,Array],default:function(){return[]}},label:{type:String,default:""},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},hint:{type:String,default:void 0},persistentHint:{type:Boolean,required:!1,default:!1},multiple:{type:Boolean,required:!1,default:!1},clearable:{type:Boolean,default:!0},hideDetails:{type:Boolean,default:!1},solo:{type:Boolean,default:!1},flat:{type:Boolean,default:!1},chips:{type:Boolean,default:!1},prependInnerIcon:{type:String,default:void 0},cacheItems:{type:Boolean,default:!1},appliedClass:{type:String,default:""},placeholder:{type:String,default:""},dense:{type:Boolean,default:!1}},data:function(){return{componentKey:0,items:[],selectedData:null,search:null,initialFetchStarted:!1,nextLimit:null,nextOffset:null,showMoreIcon:!1,fullyLoaded:!1,isLoading:!1}},computed:{itemsSorted:function(){return this.sortBySearch(this.items,this.search?this.search.toLowerCase():"")}},watch:{value:{handler:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a,n,i,r,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=10;break}if(!this.forceFetch||this.initialFetchStarted){e.next=6;break}return this.initialFetchStarted=!0,e.next=5,this.fetchData();case 5:this.removeDuplicateItem();case 6:Array.isArray(t)?(i=[],"object"===Object(l["a"])(t[0])?(this.selectedData=t.map((function(e){return e[s.itemValue]})),t.forEach((function(e){var t=s.items.find((function(t){return t===e}));t||i.push(e)}))):(t.forEach((function(e){var t=s.items.find((function(t){return t[s.itemValue]===e}));t||i.push(e)})),this.selectedData=t),i.length>0&&(r=this.items).push.apply(r,i)):"object"===Object(l["a"])(t)?(this.selectedData=t[this.itemValue],a=this.items.find((function(e){return e[s.itemValue]===t})),a||this.items.push(t)):(this.selectedData=t,n=this.items.find((function(e){return e===t})),n||this.items.push(t)),this.updateData(this.selectedData),e.next=11;break;case 10:t||(this.selectedData=null);case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),immediate:!0},selectedData:function(e){this.updateData(e)},params:{handler:function(e,t){u()(e,t)||(this.fullyLoaded=!1,this.initialFetchStarted=!1,this.items=[],this.componentKey+=1)},deep:!0}},methods:{sortBySearch:function(e,t){var a=this.itemText,n=e.filter((function(e){return"object"===Object(l["a"])(e)}));return n.sort((function(e,n){return e[a].toLowerCase().startsWith(t)&&n[a].toLowerCase().startsWith(t)?e[a].toLowerCase().localeCompare(n[a].toLowerCase()):e[a].toLowerCase().startsWith(t)?-1:n[a].toLowerCase().startsWith(t)?1:e[a].toLowerCase().localeCompare(n[a].toLowerCase())}))},populateOnFocus:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.initialFetchStarted){t.next=2;break}return t.abrupt("return");case 2:return e.initialFetchStarted=!0,t.next=5,e.fetchData();case 5:e.removeDuplicateItem();case 6:case"end":return t.stop()}}),t)})))()},fetchData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.staticItems.length>0)){t.next=3;break}return e.items=e.staticItems,t.abrupt("return");case 3:return a=e.nextLimit,n=e.nextOffset,e.search&&(a=null,n=null),e.isLoading=!0,t.next=9,e.$http.get(e.endpoint,{params:Object(s["a"])(Object(s["a"])({},e.params),{},{search:e.search,limit:a,offset:n})}).then((function(t){var a;t.results||(t.results=t),t.next?(e.showMoreIcon=!0,e.extractLimitOffset(t.next)):(e.showMoreIcon=!1,e.search||(e.fullyLoaded=!0)),e.itemsToExclude&&(t.results=e.excludeRecord(t.results)),(a=e.items).push.apply(a,Object(r["a"])(t.results))})).finally((function(){e.isLoading=!1}));case 9:case"end":return t.stop()}}),t)})))()},removeDuplicateItem:function(){var e=this,t=this.items.indexOf(this.selectedData);if(t>=0){var a=this.items.findIndex((function(t){return t[e.itemValue]===e.selectedData}));a>=0&&(this.items.splice(t,1),this.componentKey+=1)}},updateData:function(e){var t=this,a=[];e instanceof Array?e.forEach((function(e){a.unshift(t.items.find((function(a){return a[t.itemValue]===e})))})):a=this.items.find((function(a){return a[t.itemValue]===e})),this.$emit("input",e),this.$emit("update:selectedFullData",a)},searchText:function(){0!==this.$refs.autoComplete.filteredItems.length||this.fullyLoaded||this.fetchData()},extractLimitOffset:function(e){var t=new URL(e);this.nextLimit=t.searchParams.get("limit"),this.nextOffset=t.searchParams.get("offset")},excludeRecord:function(e){var t=this,a=[];return"number"===typeof this.itemsToExclude?a.push(this.itemsToExclude):a=this.itemsToExclude,e.filter((function(e){if(e[t.itemValue])return!a.includes(e[t.itemValue])}))},remove:function(e){if(this.selectedData instanceof Object){var t=this.selectedData.indexOf(e[this.itemValue]);t>=0&&this.selectedData.splice(t,1)}else this.selectedData=null},updateState:function(){this.search="",this.nextLimit&&(this.showMoreIcon=!0)}}},p=d,m=a("2877"),h=a("6544"),f=a.n(h),v=a("c6a6"),b=a("cc20"),g=a("5d23"),y=a("3a2f"),x=Object(m["a"])(p,n,i,!1,null,null,null);t["default"]=x.exports;f()(x,{VAutocomplete:v["a"],VChip:b["a"],VListItemContent:g["a"],VListItemTitle:g["c"],VTooltip:y["a"]})},"741f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return["true"!==e.useNepaliDate?a("v-text-field",e._g({class:e.appliedClass,attrs:{id:e.id,clearable:!e.readOnly,"data-cy":"date-picker-"+e.dataCyVariable,disabled:e.disabled,error:e.errorMessages.length>0,"error-messages":e.errorMessages,"hide-details":e.hideDetails,hint:e.hint,label:e.label,"prepend-inner-icon":e.prependInnerIcon,"single-line":e.singleLine,value:e.value,readonly:""},on:{paste:function(e){e.preventDefault()},"click:clear":function(t){return e.$emit("close")}},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}},n)):a("v-text-field",e._g({class:e.appliedClass,attrs:{id:e.id,label:e.label,value:e.value,"data-cy":"date-picker-"+e.dataCyVariable,error:e.errorMessages.length>0,"error-messages":e.errorMessages,disabled:e.disabled,clearable:!e.readOnly,hint:e.hint,"hide-details":e.hideDetails,"single-line":e.singleLine,"prepend-inner-icon":e.prependInnerIcon,readonly:""},on:{paste:function(e){e.preventDefault()},"click:clear":function(t){return e.$emit("close")}},model:{value:e.nepaliDate,callback:function(t){e.nepaliDate=t},expression:"nepaliDate"}},n))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},["true"===e.showCalendarChoice?a("v-btn",{attrs:{block:"",depressed:"",tile:"",color:"shade primary--text font-weight-bold"},on:{click:function(t){e.international=!e.international}}},[e._v(" "+e._s(e.international?"NE":"EN")+" ")]):e._e(),e.readOnly||e.international?e._e():a("localized-calendar",{ref:"datePicker",attrs:{"fiscal-year":[],"localized-date":e.localizedDate},on:{"update:localizedDate":function(t){e.localizedDate=t},"update:localized-date":function(t){e.localizedDate=t},"limit-mapping":function(t){e.limitMapping=t}},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),!e.readOnly&&e.international?a("v-date-picker",{attrs:{type:e.type,"allowed-dates":e.allowedDates,"no-title":""},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}):e._e()],1)],1)},i=[],r=a("1da1"),s=(a("b64b"),a("99af"),a("96cf"),a("3bce")),l=a("338b"),o=a("cf45"),c={components:{LocalizedCalendar:s["a"]},mixins:[l["a"]],props:{value:{type:String,default:""},id:{type:String,default:""},type:{type:String,default:"date"},label:{type:String,default:""},disabled:{type:Boolean,default:!1},errorMessages:{type:[String,Array],default:function(){return[]}},dataCyVariable:{type:String,default:""},readOnly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},hint:{type:String,default:""},hideDetails:{type:Boolean,default:!1},singleLine:{type:Boolean,default:!1},appliedClass:{type:String,default:""},prependInnerIcon:{type:String,default:"mdi-calendar-month-outline"}},data:function(){return{menu:!1,date:this.value,nepaliDate:this.value,localizedDate:"",international:"English"===Object(o["f"])("VUE_APP_SET_DEFAULT_CALENDAR_TO"),showCalendarChoice:Object(o["f"])("VUE_APP_SHOW_CALENDAR_CHOICE"),useNepaliDate:localStorage.useNepaliDate,hasConverted:!1}},watch:{value:function(e){this.date=e},date:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e&&"true"===t.useNepaliDate&&t.hasConverted?t.nepaliDate=t.ad2bs(e):t.nepaliDate=e,a.next=3,t.$emit("input",e);case 3:return a.next=5,t.$emit("update:localizedDate",t.localizedDate);case 5:if(!e){a.next=8;break}return a.next=8,t.$emit("blur");case 8:case"end":return a.stop()}}),a)})))()},international:function(e){this.$emit("update:international",e)}},created:function(){this.date&&"true"===this.useNepaliDate&&!this.hasConverted?(this.hasConverted=!0,this.date=this.bs2ad(this.date)):this.date||"true"!==this.useNepaliDate||(this.hasConverted=!0)},methods:{allowedDates:function(e){if("false"===this.showCalendarChoice&&"English"===Object(o["f"])("VUE_APP_SET_DEFAULT_CALENDAR_TO"))return!0;var t=[],a="",n="";t=Object.keys(this.bs),a=t[0],n=t[t.length-1];var i={max:this.bs2ad("".concat(n,"-12-").concat(this.bs[n][11])),min:this.bs2ad("".concat(a,"-01-01"))};return e<=i.max&&e>=i.min}}},u=c,d=a("2877"),p=a("6544"),m=a.n(p),h=a("8336"),f=a("2e4b"),v=a("e449"),b=a("8654"),g=Object(d["a"])(u,n,i,!1,null,null,null);t["default"]=g.exports;m()(g,{VBtn:h["a"],VDatePicker:f["a"],VMenu:v["a"],VTextField:b["a"]})},7962:function(e,t,a){"use strict";a("919b")},"919b":function(e,t,a){},"9d01":function(e,t,a){},b73d:function(e,t,a){"use strict";var n=a("5530"),i=(a("0481"),a("ec29"),a("9d01"),a("fe09")),r=a("c37a"),s=a("c3f0"),l=a("0789"),o=a("490a"),c=a("80d2");t["a"]=i["a"].extend({name:"v-switch",directives:{Touch:s["a"]},props:{inset:Boolean,loading:{type:[Boolean,String],default:!1},flat:{type:Boolean,default:!1}},computed:{classes:function(){return Object(n["a"])(Object(n["a"])({},r["a"].options.computed.classes.call(this)),{},{"v-input--selection-controls v-input--switch":!0,"v-input--switch--flat":this.flat,"v-input--switch--inset":this.inset})},attrs:function(){return{"aria-checked":String(this.isActive),"aria-disabled":String(this.isDisabled),role:"switch"}},validationState:function(){return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0},switchData:function(){return this.setTextColor(this.loading?void 0:this.validationState,{class:this.themeClasses})}},methods:{genDefaultSlot:function(){return[this.genSwitch(),this.genLabel()]},genSwitch:function(){return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",Object(n["a"])(Object(n["a"])({},this.attrs),this.attrs$)),this.genRipple(this.setTextColor(this.validationState,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",Object(n["a"])({staticClass:"v-input--switch__track"},this.switchData)),this.$createElement("div",Object(n["a"])({staticClass:"v-input--switch__thumb"},this.switchData),[this.genProgress()])])},genProgress:function(){return this.$createElement(l["c"],{},[!1===this.loading?null:this.$slots.progress||this.$createElement(o["a"],{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft:function(){this.isActive&&this.onChange()},onSwipeRight:function(){this.isActive||this.onChange()},onKeydown:function(e){(e.keyCode===c["y"].left&&this.isActive||e.keyCode===c["y"].right&&!this.isActive)&&this.onChange()}}})},dffb:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vue-page-wrapper",{attrs:{title:e.htmlTitle,"bread-crumbs":e.breadCrumbItems}},[a("v-card",[a("vue-card-title",{attrs:{title:"Balance | Leave",subtitle:"The list below contain leave balance history of employee.",icon:"mdi-file-document-outline"}},[a("template",{slot:"actions"},[a("v-btn",{attrs:{icon:""},on:{click:function(t){e.showFilters=!e.showFilters}}},[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-filter-variant")}})],1)],1)],2),a("v-divider"),a("v-slide-y-transition",[e.showFilters?a("v-row",{staticClass:"mx-2"},[a("v-col",{attrs:{md:"3",cols:"3"}},[a("vue-search",{attrs:{search:e.search,label:"Search By Name or Username"},on:{"update:search":function(t){e.search=t}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-col",{attrs:{md:"3",cols:"3"}},[a("vue-auto-complete",{attrs:{endpoint:e.divisionEndpoint,params:{is_archived:"false"},label:"Filter by Division","item-text":"name","item-value":"slug"},model:{value:e.currentDivision,callback:function(t){e.currentDivision=t},expression:"currentDivision"}})],1),a("v-col",{attrs:{md:"3",cols:"3"}},[a("vue-auto-complete",{attrs:{endpoint:e.branchEndpoint,params:{is_archived:"false"},label:"Filter by Branch","item-text":"name","item-value":"slug"},model:{value:e.currentBranch,callback:function(t){e.currentBranch=t},expression:"currentBranch"}})],1),a("v-col",{staticClass:"pb-0",attrs:{md:"2"}},[a("v-switch",{attrs:{label:"Past Employee"},model:{value:e.isPastEmployee,callback:function(t){e.isPastEmployee=t},expression:"isPastEmployee"}})],1)],1):e._e()],1),a("v-data-table",{attrs:{id:"dt-user-list",headers:e.headers,items:e.fetchedResults,"sort-desc":e.pagination.descending,"sort-by":e.pagination.sortBy,page:e.pagination.page,"items-per-page":e.pagination.rowsPerPage,"footer-props":e.footerProps,"server-items-length":e.pagination.totalItems,"mobile-breakpoint":0,"must-sort":""},on:{"update:sortDesc":function(t){return e.$set(e.pagination,"descending",t)},"update:sort-desc":function(t){return e.$set(e.pagination,"descending",t)},"update:sortBy":function(t){return e.$set(e.pagination,"sortBy",t)},"update:sort-by":function(t){return e.$set(e.pagination,"sortBy",t)},"update:page":function(t){return e.$set(e.pagination,"page",t)},"update:itemsPerPage":function(t){return e.$set(e.pagination,"rowsPerPage",t)},"update:items-per-page":function(t){return e.$set(e.pagination,"rowsPerPage",t)}},scopedSlots:e._u([{key:"item",fn:function(t){return[a("tr",[a("td",[a("vue-user",{attrs:{user:t.item}})],1),a("td",[e._v(e._s(t.item.username))]),a("td",[t.item.division?a("div",[e._v(" "+e._s(t.item.division.name||"N/A")+" ")]):e._e(),a("div",[e._v(" "+e._s(t.item.employee_level||"N/A")+" ")]),a("div",[e._v(" "+e._s(t.item.employment_status||"N/A")+" ")])]),a("td",[a("vue-user",{attrs:{user:t.item.supervisor}})],1),a("td",{staticClass:"text-center"},[a("vue-context-menu",{attrs:{"context-list":[{name:"Manage",icon:"mdi-eye-outline",color:"blue",disabled:!1,disable_message:"Not Allowed"}]},on:{click0:function(a){return e.openDetails(t.item.id)}}})],1)])]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[a("template",{slot:"no-data"},[a("data-table-no-data",{attrs:{loading:e.loading}})],1)],2),a("v-bottom-sheet",{attrs:{persistent:""},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.sheet=!1}},model:{value:e.sheet,callback:function(t){e.sheet=t},expression:"sheet"}},[a("v-card",[a("vue-card-title",{attrs:{title:"Manage Leave Balance",subtitle:"-",icon:"mdi-file-document-outline",dark:"",closable:""},on:{close:function(t){e.sheet=!1}}}),a("v-divider"),a("v-data-table",{attrs:{id:"dt-leave-balance",headers:e.balanceHeaders,items:e.balanceDetails,"footer-props":{itemsPerPageOptions:[10,20,30,40,50]},height:300,"fixed-header":"","mobile-breakpoint":0,dense:"","single-expand":""},scopedSlots:e._u([{key:"item",fn:function(t){return[a("tr",[a("td",[t.item.leave_type?a("span",{staticClass:"primary--text pointer",on:{click:function(a){e.openHistory(t.item.id),e.leaveType=t.item.leave_type.name}}},[e._v(e._s(t.item.leave_type.name))]):e._e()]),a("td",[a("div",[["Time Off","Credit Hour"].includes(t.item.leave_type.category)?a("div",[e._v(" "+e._s(parseInt(t.item.balance/60)+":"+parseInt(t.item.balance%60))+" Hours ")]):a("div",[e._v(e._s(t.item.balance)+" Days")])])]),a("td",[["Time Off","Credit Hour"].includes(t.item.leave_type.category)?a("div",[e._v(" "+e._s(parseInt(t.item.usable_balance/60)+":"+parseInt(t.item.usable_balance%60))+" Hours ")]):a("div",[e._v(e._s(t.item.usable_balance)+" Days")])]),a("td",{staticClass:"text-center"},[a("v-icon",{attrs:{color:t.item.visible?"green":"red"},domProps:{textContent:e._s(t.item.visible?"mdi-check":"mdi-close")}})],1),a("td",{staticClass:"text-center"},[a("v-icon",{attrs:{disabled:e.isPastEmployee},on:{click:function(a){return e.expandRow(t)}}},[e._v(" mdi-pencil ")])],1)])]}},{key:"expanded-item",fn:function(t){var n=t.item,i=t.headers;return[a("td",{attrs:{colspan:i.length}},["Compensatory"!==n.leave_type.category?a("v-row",{staticClass:"pl-4",attrs:{align:"center"}},[a("v-col",{attrs:{md:"4"}},[a("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"data-cy":"input-balance",hint:["Time Off","Credit Hour"].includes(n.leave_type.category)?"In Minutes":"In Days",type:"number","persistent-hint":""},model:{value:n.balance,callback:function(t){e.$set(n,"balance",t)},expression:"item.balance"}},"v-text-field",e.veeValidate("balance","Leave Balance"),!1))],1),a("v-col",{attrs:{md:"4"}},[a("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"data-cy":"input-remarks"},model:{value:e.remarks,callback:function(t){e.remarks=t},expression:"remarks"}},"v-text-field",e.veeValidate("remark","Remark *"),!1))],1),a("v-col",[a("v-btn",{attrs:{disabled:""===e.remarks,"data-cy":"btn-save",small:"",depressed:"",color:"primary"},on:{click:function(t){return e.manageBalance(n.id,n.balance)}}},[e._v(" Save ")]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-icon",e._g({attrs:{"data-cy":"menu-advance-option"},on:{click:function(t){e.advanceOption=!e.advanceOption}}},n),[e._v(" mdi-dots-vertical ")])]}}],null,!0)},[a("span",[e._v("View Advance Options")])])],1)],1):a("compensatory-leave-balance",{attrs:{"user-id":e.userId,"user-leave-id":n.id},on:{dismissForm:function(t){e.props.expanded=!1,e.openDetails(e.userId)}}}),e.advanceOption?a("v-row",{staticClass:"pl-4"},[a("v-col",{attrs:{md:"4"}},[a("vue-date-time-picker",e._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],model:{value:e.next_renew,callback:function(t){e.next_renew=t},expression:"next_renew"}},"vue-date-time-picker",e.veeValidate("next_renew","Next Renew "),!1))],1),a("v-col",{attrs:{md:"4"}},[a("vue-date-time-picker",e._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],model:{value:e.next_accrue,callback:function(t){e.next_accrue=t},expression:"next_accrue"}},"vue-date-time-picker",e.veeValidate("next_accrue","Next Accrue"),!1))],1)],1):e._e()],1)]}}])},[a("template",{slot:"no-data"},[a("data-table-no-data",{attrs:{loading:e.loading}})],1)],2)],1)],1),a("v-bottom-sheet",{attrs:{persistent:""},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.history=!1}},model:{value:e.history,callback:function(t){e.history=t},expression:"history"}},[e.history?a("balance-history",{attrs:{"user-id":e.userId,slug:e.orgSlug,"leave-type-id":e.leaveTypeId,name:e.leaveType},on:{close:function(t){e.history=!1,e.sheet=!0}}}):e._e()],1)],1)],1)},i=[],r=a("1da1"),s=(a("96cf"),a("ac1f"),a("841c"),a("d3b7"),a("99af"),a("0549")),l=a("5660"),o=a("02cb"),c=a("17cc"),u=a("1229"),d=a("e59e"),p=a("c121"),m=a("c44a"),h=a("78a2"),f=a("d567"),v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{staticClass:"pl-4",attrs:{align:"center"}},[a("v-col",[a("vue-date-picker",e._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],on:{input:e.getLeaveBalance},model:{value:e.formValues.leave_for,callback:function(t){e.$set(e.formValues,"leave_for",t)},expression:"formValues.leave_for"}},"vue-date-picker",e.veeValidate("leave_for","Leave Balance For"),!1))],1),a("v-col",[a("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{disabled:!e.balanceFetched,type:"number"},model:{value:e.formValues.balance_granted,callback:function(t){e.$set(e.formValues,"balance_granted",t)},expression:"formValues.balance_granted"}},"v-text-field",e.veeValidate("balance_granted","Balance Granted"),!1))],1),a("v-col",[a("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{disabled:!e.balanceFetched,type:"number"},model:{value:e.formValues.balance_consumed,callback:function(t){e.$set(e.formValues,"balance_consumed",t)},expression:"formValues.balance_consumed"}},"v-text-field",e.veeValidate("balance_consumed","Balance Consumed"),!1))],1),a("v-col",[a("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{disabled:!e.balanceFetched},model:{value:e.formValues.remarks,callback:function(t){e.$set(e.formValues,"remarks",t)},expression:"formValues.remarks"}},"v-text-field",e.veeValidate("remarks","Remarks "),!1))],1),a("v-col",[a("v-btn",{attrs:{disabled:!e.balanceFetched,small:"",depressed:"",color:"primary"},domProps:{textContent:e._s("Save")},on:{click:e.getFormAction}})],1)],1)},b=[],g=(a("a9e3"),a("741f")),y={components:{VueDatePicker:g["default"]},mixins:[m["a"]],props:{userId:{type:[Number,String],required:!0},userLeaveId:{type:[Number,String],required:!0}},data:function(){return{orgSlug:this.$route.params.slug,balanceFetched:!1,formValues:{balance_granted:"",balance_consumed:"",leave_for:"",remarks:""}}},computed:{},created:function(){},methods:{getLeaveBalance:function(e){var t=this;if(this.balanceFetched=!1,this.formValues.balance_granted="",e){var a="/leave/".concat(this.orgSlug,"/user-balance/").concat(this.userId,"/").concat(this.userLeaveId,"/manage/");this.$http.get(a,{params:{leave_for:e}}).then((function(e){t.balanceFetched=!0,e.count&&(t.formValues=e.results[0])}))}},getFormAction:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.validateAllFields();case 2:if(!t.sent){t.next=4;break}e.formValues.id?e.updateBalance():e.createBalance();case 4:case"end":return t.stop()}}),t)})))()},updateBalance:function(){var e=this,t="/leave/".concat(this.orgSlug,"/user-balance/").concat(this.userId,"/").concat(this.userLeaveId,"/manage/").concat(this.formValues.id,"/");this.$http.put(t,this.formValues).then((function(){e.notifyUser("Successfully updated leave balance"),e.$emit("dismissForm")})).catch((function(t){e.pushErrors(t)}))},createBalance:function(){var e=this,t="/leave/".concat(this.orgSlug,"/user-balance/").concat(this.userId,"/").concat(this.userLeaveId,"/manage/");this.$http.post(t,this.formValues).then((function(){e.notifyUser("Successfully created leave balance"),e.$emit("dismissForm")})).catch((function(t){e.pushErrors(t)}))}}},x=y,_=a("2877"),w=a("6544"),k=a.n(w),D=a("8336"),C=a("62ad"),S=a("0fd9b"),V=a("8654"),B=Object(_["a"])(x,v,b,!1,null,null,null),T=B.exports;k()(B,{VBtn:D["a"],VCol:C["a"],VRow:S["a"],VTextField:V["a"]});var O=a("a51f"),L=a("e4bf"),I={components:{DataTableNoData:O["default"],VuePageWrapper:s["default"],VueDateTimePicker:f["a"],BalanceHistory:h["a"],VueAutoComplete:l["default"],VueUser:o["default"],CompensatoryLeaveBalance:T,VueContextMenu:L["default"]},mixins:[c["a"],m["a"]],data:function(){return{htmlTitle:"Leave Balance | Leave | Admin",breadCrumbItems:[{text:"Leave",disabled:!1,to:{name:"admin-slug-leave-overview",params:{slug:this.$route.params.slug}}},{text:"Balance",disabled:!0}],orgSlug:this.$route.params.slug,search:"",username:"",balance:"",remarks:"",active:"",userid:"",advanceOption:"",dateFilter:{},selected:[],history:!1,showFilters:!1,loading:!1,userId:"",sheet:!1,counts:{casual:null,sick:null,compensatory:null},headers:[{text:"Name",align:"left",value:"full_name",class:"grey lighten-4"},{text:"Username",align:"left",value:"username",class:"grey lighten-4"},{text:"Department | Level | Type",value:"employeeLevel",class:"grey lighten-4",sortable:!1,align:"left"},{text:"Supervisor",class:"grey lighten-4",value:"requestedDate",sortable:!1,align:"left"},{text:"Action",class:"grey lighten-4",value:"status",sortable:!1,align:"center"}],balanceHeaders:[{text:"Leave Type",value:"employeeLevel",class:"grey lighten-4",sortable:!1},{text:"Leave Balance",class:"grey lighten-4",value:"requestedDate",sortable:!1},{text:"Usable Balance",class:"grey lighten-4",value:"status",sortable:!1},{text:"Visible By Default",class:"grey lighten-4",value:"status",sortable:!1,align:"center"},{text:"Action",class:"grey lighten-4",value:"status",sortable:!1,align:"center"}],rowsPerPageItems:[10,20,30,40,50],currentDivision:"",currentBranch:"",currentItem:null,balanceDetails:"",next_accrue:null,next_renew:null,leaveType:"",balanceHistory:[],leaveTypeId:null,rowCollapseProps:"",isPastEmployee:!1}},computed:{DataTableFilter:function(){var e={search:this.search,username:this.username,division:this.currentDivision,branch:this.currentBranch};return this.isPastEmployee?e.past=!0:delete e.past,e}},created:function(){this.initializeDynamicUrls(),this.loadDataTableChange()},methods:{fetchDataTable:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.loading){t.next=2;break}return t.abrupt("return");case 2:e.loading=!0,e.$http.get(p["a"].getUserLeaveBalance(e.orgSlug)+"?as=hr",{params:e.fullParams}).then((function(t){e.loadDataTable(t)})).finally((function(){e.loading=!1}));case 4:case"end":return t.stop()}}),t)})))()},initializeDynamicUrls:function(){this.divisionEndpoint=u["a"].getDivision(this.orgSlug),this.branchEndpoint=d["a"].getBranch(this.orgSlug)},openDetails:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.$http.get(p["a"].getUserLeaveBalanceDetails(t.orgSlug,e)+"?as=hr".concat(t.isPastEmployee?"&past=true":"")).then((function(a){t.sheet=!0,t.userId=e,t.balanceDetails=a.results}));case 1:case"end":return a.stop()}}),a)})))()},openHistory:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.$http.get(p["a"].getUserLeaveBalanceHistory(t.orgSlug,t.userId,e)+"?as=hr").then((function(a){t.balanceHistory=a.results,t.leaveTypeId=e,t.sheet=!1,t.history=!0}));case 1:case"end":return a.stop()}}),a)})))()},submitRequest:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=t,t.$http.patch(p["a"].postUserLeaveBalance(t.orgSlug,e),{balance:t.balanceDetails.balance,remark:"Balance Added"}).then((function(){t.fetchDataTable(),n.notifyUser("Successfully  Managed Balance Details","green"),n.sheet=!1})).catch((function(e){n.notifyInvalidFormResponse(),n.pushErrors(e)}));case 2:case"end":return a.stop()}}),a)})))()},manageBalance:function(e,t){var a=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i={leave_accounts:[{leave_account:e,remark:a.remarks,balance:t,next_renew:a.next_renew||null,next_accrue:a.next_renew||null}]},n.next=3,a.validateAllFields();case 3:if(!n.sent){n.next=5;break}a.$http.post("/leave/".concat(a.orgSlug,"/user-balance/").concat(e,"/edit/"),i).then((function(){a.fetchDataTable(),a.notifyUser("Successfully Managed Balance"),a.remarks="",a.next_accrue="",a.next_renew="",a.advanceOption=!1,a.rowCollapseProps.expand(!1)})).catch((function(e){a.notifyInvalidFormResponse(),a.pushErrors(e)}));case 5:case"end":return n.stop()}}),n)})))()},expandRow:function(e){e.expand(!e.isExpanded),this.rowCollapseProps=e}}},E=I,$=(a("7962"),a("288c")),P=a("b0af"),F=a("8fea"),A=a("ce7e"),R=a("132d"),j=a("0789"),N=a("b73d"),M=a("3a2f"),q=Object(_["a"])(E,n,i,!1,null,null,null);t["default"]=q.exports;k()(q,{VBottomSheet:$["a"],VBtn:D["a"],VCard:P["a"],VCol:C["a"],VDataTable:F["a"],VDivider:A["a"],VIcon:R["a"],VRow:S["a"],VSlideYTransition:j["g"],VSwitch:N["a"],VTextField:V["a"],VTooltip:M["a"]})},e59e:function(e,t,a){"use strict";a("99af");t["a"]={getBranch:function(e){return"/org/".concat(e,"/branch/")},postBranch:function(e){return"/org/".concat(e,"/branch/")},getBranchDetail:function(e,t){return"/org/".concat(e,"/branch/").concat(t,"/")},updateBranch:function(e,t){return"/org/".concat(e,"/branch/").concat(t,"/")},deleteBranch:function(e,t){return"/org/".concat(e,"/branch/").concat(t,"/")},importBranch:function(e){return"/org/".concat(e,"/branch/import/")},downloadSampleBranch:function(e){return"/org/".concat(e,"/branch/import/sample")},exportBranch:function(e){return"/org/".concat(e,"/branch/export")},branchType:function(e){return"/org/".concat(e,"/branch-type")},branchTypeDetail:function(e,t){return"org/".concat(e,"/branch-type/").concat(t)}}}}]);