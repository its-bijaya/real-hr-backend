(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages/admin/_slug/leave/settings/clone-settings~pages/admin/_slug/leave/settings/leave-list","chunk-da62e0c8","chunk-2d22d378"],{"159a":function(e,a,t){var l=t("32b3"),r=t("e2e4"),i=t("c098"),s=t("1a8c"),o=t("f4d6");function n(e,a,t,n){if(!s(e))return e;a=r(a,e);var u=-1,c=a.length,d=c-1,_=e;while(null!=_&&++u<c){var m=o(a[u]),p=t;if("__proto__"===m||"constructor"===m||"prototype"===m)return e;if(u!=d){var v=_[m];p=n?n(v,m,_):void 0,void 0===p&&(p=s(v)?v:i(a[u+1])?[]:{})}l(_,m,p),_=_[m]}return e}e.exports=n},"1bac":function(e,a,t){var l=t("7d1f"),r=t("a029"),i=t("9934");function s(e){return l(e,i,r)}e.exports=s},"270a":function(e,a,t){"use strict";t("3e25")},"2dcb":function(e,a,t){var l=t("91e9"),r=l(Object.getPrototypeOf,Object);e.exports=r},"32b3":function(e,a,t){var l=t("872a"),r=t("9638"),i=Object.prototype,s=i.hasOwnProperty;function o(e,a,t){var i=e[a];s.call(e,a)&&r(i,t)&&(void 0!==t||a in e)||l(e,a,t)}e.exports=o},"3e25":function(e,a,t){},"41c3":function(e,a,t){var l=t("1a8c"),r=t("eac5"),i=t("ec8c"),s=Object.prototype,o=s.hasOwnProperty;function n(e){if(!l(e))return i(e);var a=r(e),t=[];for(var s in e)("constructor"!=s||!a&&o.call(e,s))&&t.push(s);return t}e.exports=n},"44ac":function(e,a,t){"use strict";t("99af");a["a"]={getTemplate:function(e){return"/org/".concat(e,"/templates/")},postTemplate:function(e){return"/org/".concat(e,"/templates/")},getTemplateDetails:function(e,a){return"/org/".concat(e,"/templates/").concat(a,"/")},putTemplate:function(e,a){return"/org/".concat(e,"/templates/").concat(a,"/")},deleteTemplate:function(e,a){return"/org/".concat(e,"/templates/").concat(a,"/")}}},"553a":function(e,a,t){"use strict";var l=t("5530"),r=(t("a9e3"),t("c7cd"),t("b5b6"),t("8dd9")),i=t("3a66"),s=t("d10f"),o=t("58df"),n=t("80d2");a["a"]=Object(o["a"])(r["a"],Object(i["a"])("footer",["height","inset"]),s["a"]).extend({name:"v-footer",props:{height:{default:"auto",type:[Number,String]},inset:Boolean,padless:Boolean,tag:{type:String,default:"footer"}},computed:{applicationProperty:function(){return this.inset?"insetFooter":"footer"},classes:function(){return Object(l["a"])(Object(l["a"])({},r["a"].options.computed.classes.call(this)),{},{"v-footer--absolute":this.absolute,"v-footer--fixed":!this.absolute&&(this.app||this.fixed),"v-footer--padless":this.padless,"v-footer--inset":this.inset})},computedBottom:function(){if(this.isPositioned)return this.app?this.$vuetify.application.bottom:0},computedLeft:function(){if(this.isPositioned)return this.app&&this.inset?this.$vuetify.application.left:0},computedRight:function(){if(this.isPositioned)return this.app&&this.inset?this.$vuetify.application.right:0},isPositioned:function(){return Boolean(this.absolute||this.fixed||this.app)},styles:function(){var e=parseInt(this.height);return Object(l["a"])(Object(l["a"])({},r["a"].options.computed.styles.call(this)),{},{height:isNaN(e)?e:Object(n["g"])(e),left:Object(n["g"])(this.computedLeft),right:Object(n["g"])(this.computedRight),bottom:Object(n["g"])(this.computedBottom)})}},methods:{updateApplication:function(){var e=parseInt(this.height);return isNaN(e)?this.$el?this.$el.clientHeight:0:e}},render:function(e){var a=this.setBackgroundColor(this.color,{staticClass:"v-footer",class:this.classes,style:this.styles});return e(this.tag,a,this.$slots.default)}})},"6c6f":function(e,a,t){"use strict";t("d3b7");a["a"]={data:function(){return{deleteNotification:{dialog:!1,heading:"Confirm Delete",text:"Are you sure you want to delete ?"}}},methods:{deleteData:function(e,a){var t=this;return new Promise((function(l,r){!t.loading&&e&&(t.loading=!0,t.$http.delete(e,a||{}).then((function(e){t.crud.message&&setTimeout((function(){t.notifyUser(t.crud.message)}),1e3),l(e),t.loading=!1})).catch((function(e){t.pushErrors(e),t.notifyInvalidFormResponse(),r(e),t.loading=!1})).finally((function(){t.deleteNotification.dialog=!1})))}))}}}},"77c1":function(e,a,t){var l=t("7948"),r=t("badf"),i=t("89d9"),s=t("1bac");function o(e,a){if(null==e)return{};var t=l(s(e),(function(e){return[e]}));return a=r(a),i(e,t,(function(e,t){return a(e,t[0])}))}e.exports=o},8691:function(e,a,t){"use strict";var l=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-row",[e.title?t("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[t("div",[t("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-clock")}}),e._v(" Duration ")],1)]):e._e(),t("v-col",{staticClass:"py-0"},[t("v-text-field",{staticClass:"py-0",attrs:{placeholder:"HH","data-cy":"input-hour-"+e.dataCyVariable,disabled:e.disabled,min:"0",type:"number","hide-details":"",max:"23",suffix:e.showSuffix?"Hour":""},model:{value:e.hour,callback:function(a){e.hour=a},expression:"hour"}})],1),t("v-col",{staticClass:"py-0"},[t("v-text-field",{staticClass:"py-0",attrs:{"data-cy":"input-minute-"+e.dataCyVariable,disabled:e.disabled,placeholder:"MM",type:"number","hide-details":"",min:"0",max:"59",suffix:e.showSuffix?"Minute":""},model:{value:e.minutes,callback:function(a){e.minutes=a},expression:"minutes"}})],1),t("v-col",{staticClass:"py-1",attrs:{cols:"12"}},[e.errorMessages.length>0?t("span",{staticClass:"danger--text"},[e._v(" "+e._s(e.errorMessages[0])+" ")]):e._e()])],1)},r=[],i=(t("ac1f"),t("1276"),t("99af"),{props:{value:{type:String,default:""},dataCyVariable:{type:String,default:""},title:{type:Boolean,default:!1},errorMessages:{type:[String,Array],default:function(){return[]}},disabled:{type:Boolean,default:!1},showSuffix:{type:Boolean,default:!1}},data:function(){return{duration:this.value||"00:00:00",hour:"00",minutes:"00",second:"00"}},watch:{hour:function(){this.$emit("input",this.makeDuration())},minutes:function(){this.$emit("input",this.makeDuration())}},created:function(){this.getTime()},methods:{getTime:function(){var e=this.duration.split(":");this.hour=e[0],this.minutes=e[1],this.seconds=e[2]},makeDuration:function(){var e=this.hour.length>1?this.hour:"0"+this.hour,a=this.minutes.length>1?this.minutes:"0"+this.minutes,t=this.second.length>1?this.second:"0"+this.second;return"".concat(e,":").concat(a,":").concat(t)}}}),s=i,o=t("2877"),n=t("6544"),u=t.n(n),c=t("62ad"),d=t("132d"),_=t("0fd9b"),m=t("8654"),p=Object(o["a"])(s,l,r,!1,null,"1b73b508",null);a["a"]=p.exports;u()(p,{VCol:c["a"],VIcon:d["a"],VRow:_["a"],VTextField:m["a"]})},"89d9":function(e,a,t){var l=t("656b"),r=t("159a"),i=t("e2e4");function s(e,a,t){var s=-1,o=a.length,n={};while(++s<o){var u=a[s],c=l(e,u);t(c,u)&&r(n,i(u,e),c)}return n}e.exports=s},"983c":function(e,a,t){"use strict";t("d3b7");a["a"]={methods:{getData:function(e,a,t){var l=this,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Promise((function(i,s){!l.loading&&e&&(l.clearNonFieldErrors(),l.$validator.errors.clear(),l.loading=r,l.$http.get(e,t||{params:a||{}}).then((function(e){i(e),l.loading=!1})).catch((function(e){l.pushErrors(e),l.notifyInvalidFormResponse(),s(e),l.loading=!1})))}))},getBlockingData:function(e,a,t){var l=this;return new Promise((function(r,i){l.getData(e,a,t,!0).then((function(e){r(e)})).catch((function(e){i(e)}))}))}}}},9934:function(e,a,t){var l=t("6fcd"),r=t("41c3"),i=t("30c9");function s(e){return i(e)?l(e,!0):r(e)}e.exports=s},"999e":function(e,a,t){"use strict";var l=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-card",["General"===e.leaveRulesType?t("general-leave-rules",{attrs:{id:e.ruleId,slug:e.orgSlug,"leave-name":e.leaveName,edit:e.edit,view:e.view,clone:e.clone,"leave-id":e.leaveId,"master-settings":e.masterSettings,"idle-leave-type-list":e.idleLeaveTypeList},on:{edit:function(a){return e.$emit("getLeaveTypes")},close:function(a){return e.$emit("close")},next:function(a){return e.$emit("next")},dismissForm:function(a){return e.$emit("dismissForm")}}}):"Compensatory"===e.leaveRulesType?t("compensatory-leave-rules",{attrs:{id:e.ruleId,"leave-name":e.leaveName,slug:e.orgSlug,"leave-id":e.leaveId,edit:e.edit,view:e.view,clone:e.clone,"master-settings":e.masterSettings,"idle-leave-type-list":e.idleLeaveTypeList},on:{edit:function(a){return e.$emit("getLeaveTypes")},close:function(a){return e.$emit("close")},next:function(a){return e.$emit("next")},dismissForm:function(a){return e.$emit("dismissForm")}}}):"Years of Service"===e.leaveRulesType?t("YearsOfServiceLeaveRules",{attrs:{id:e.ruleId,"master-settings":e.masterSettings,slug:e.orgSlug,edit:e.edit,"leave-name":e.leaveName,view:e.view,clone:e.clone,"leave-id":e.leaveId},on:{edit:function(a){return e.$emit("getLeaveTypes")},close:function(a){return e.$emit("close")},next:function(a){return e.$emit("next")},dismissForm:function(a){return e.$emit("dismissForm")}}}):"Time Off"===e.leaveRulesType?t("time-off-leave-rules",{attrs:{id:e.ruleId,"master-settings":e.masterSettings,slug:e.orgSlug,"leave-name":e.leaveName,edit:e.edit,view:e.view,clone:e.clone,"leave-id":e.leaveId},on:{close:function(a){return e.$emit("close")},dismissForm:function(a){return e.$emit("dismissForm")}}}):"Credit Hour"===e.leaveRulesType?t("credit-hour-leave-rules",{attrs:{id:e.ruleId,"master-settings":e.masterSettings,slug:e.orgSlug,"leave-name":e.leaveName,edit:e.edit,view:e.view,clone:e.clone,"leave-id":e.leaveId},on:{close:function(a){return e.$emit("close")},dismissForm:function(a){return e.$emit("dismissForm")}}}):e._e()],1)},r=[],i=(t("a9e3"),t("c44a")),s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-form",{ref:"generalLeaveRules"},[t("vue-card-title",{attrs:{title:e.leaveName,subtitle:e.leaveRuleName,icon:"mdi-file-document-outline",dark:"",closable:""},on:{close:function(a){e.clear(e.formValues),e.$emit("close")}}}),t("v-divider"),t("div",{staticClass:"scrollbar-thin",staticStyle:{height:"calc(100vh - 124px)"}},[t("v-container",[t("v-card-text",[t("v-row",{attrs:{"no-gutters":""}},[t("v-col",{attrs:{cols:"12"}},[e.nonFieldErrors?t("non-field-form-errors",{attrs:{"non-field-errors":e.nonFieldErrors}}):e._e()],1),t("v-card",{staticClass:"lighten-4 elevation-1 mb-5",attrs:{color:"grey",width:"100%"}},[t("div",{staticClass:"px-3"},[t("v-col",{attrs:{cols:"6"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{counter:"150"},model:{value:e.formValues.name,callback:function(a){e.$set(e.formValues,"name",a)},expression:"formValues.name"}},"v-text-field",e.veeValidate("name","Rule Name *"),!1))],1),t("v-col",{attrs:{cols:"12"}},[t("v-textarea",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{rows:2,counter:"150"},model:{value:e.formValues.description,callback:function(a){e.$set(e.formValues,"description",a)},expression:"formValues.description"}},"v-textarea",e.veeValidate("description","Description *"),!1))],1)],1)]),t("v-card",{staticClass:"lighten-4 elevation-1 mb-5",attrs:{color:"grey",width:"100%"}},[t("div",{staticClass:"px-5"},[t("v-row",{attrs:{"no-gutters":""}},[t("v-col",{attrs:{sm:"12",md:"4",cols:"12"}},[e.masterSettings.paid&&e.masterSettings.unpaid?t("switch-toggle",{attrs:{heading:"Paid Leave","sub-heading":"Paid Leave"},model:{value:e.formValues.is_paid,callback:function(a){e.$set(e.formValues,"is_paid",a)},expression:"formValues.is_paid"}}):e._e()],1),t("v-col",{attrs:{sm:"12",md:"4",cols:"12"}},[e.masterSettings.holiday_inclusive?t("v-row",{staticClass:"pr-4",attrs:{"no-gutters":""}},[t("v-col",{attrs:{cols:"9"}},[t("v-select",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{items:e.holidayInclusiveType},model:{value:e.formValues.inclusive_leave,callback:function(a){e.$set(e.formValues,"inclusive_leave",a)},expression:"formValues.inclusive_leave"}},"v-select",e.veeValidate("inclusive_leave","Holiday Inclusive"),!1))],1),t("v-col",{staticClass:"pl-2",attrs:{cols:"3"}},["Exclude Holiday And Off Day"!==e.formValues.inclusive_leave?t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{hint:"Holiday Inclusive Rule will only be applicable after the added leave count duration.",type:"number",min:"2"},model:{value:e.formValues.inclusive_leave_number,callback:function(a){e.$set(e.formValues,"inclusive_leave_number",a)},expression:"formValues.inclusive_leave_number"}},"v-text-field",e.veeValidate("inclusive_leave_number","Duration"),!1)):e._e()],1)],1):e._e()],1),t("v-col",{attrs:{sm:"12",md:"4",cols:"12"}},[e.masterSettings.admin_can_assign?t("switch-toggle",{attrs:{heading:"Admin can assign leave to employees","sub-heading":"Admin can assign leave to employees"},model:{value:e.formValues.admin_can_assign,callback:function(a){e.$set(e.formValues,"admin_can_assign",a)},expression:"formValues.admin_can_assign"}}):e._e()],1),t("v-col",{attrs:{sm:"12",md:"4",cols:"12"}},[e.masterSettings.employees_can_apply?t("switch-toggle",{attrs:{heading:"Employee can Apply for Leave","sub-heading":"Employee can Apply for Leave"},model:{value:e.formValues.employee_can_apply,callback:function(a){e.$set(e.formValues,"employee_can_apply",a)},expression:"formValues.employee_can_apply"}}):e._e()],1),t("v-col",{attrs:{sm:"12",md:"4",cols:"12"}},[e.masterSettings.proportionate_leave?t("switch-toggle",{attrs:{heading:"Proportionate leave on joined date","sub-heading":"Proportionate leave on joined date"},model:{value:e.formValues.proportionate_on_joined_date,callback:function(a){e.$set(e.formValues,"proportionate_on_joined_date",a)},expression:"formValues.proportionate_on_joined_date"}}):e._e()],1),t("v-col",{attrs:{sm:"12",md:"4",cols:"12"}},[e.masterSettings.half_shift_leave?t("switch-toggle",{attrs:{heading:"Can apply half day / shift leave","sub-heading":"Determine whether employee can apply for half or full leave. "},model:{value:e.formValues.can_apply_half_shift,callback:function(a){e.$set(e.formValues,"can_apply_half_shift",a)},expression:"formValues.can_apply_half_shift"}}):e._e()],1),t("v-col",{attrs:{sm:"12",md:"4",cols:"12"}},[e.masterSettings.proportionate_leave?t("switch-toggle",{attrs:{heading:"Proportionate leave on contract end date","sub-heading":"Proportionate leave on contract end date"},model:{value:e.formValues.proportionate_on_contract_end_date,callback:function(a){e.$set(e.formValues,"proportionate_on_contract_end_date",a)},expression:"formValues.proportionate_on_contract_end_date"}}):e._e()],1),t("v-col",{attrs:{md:"4",cols:"12"}},[e.masterSettings.proportionate_leave?t("switch-toggle",{attrs:{heading:"Proportionate leave on probation end date","sub-heading":"Leave Calculation begins from employee's probation end date or join date."},model:{value:e.formValues.proportionate_on_probation_end_date,callback:function(a){e.$set(e.formValues,"proportionate_on_probation_end_date",a)},expression:"formValues.proportionate_on_probation_end_date"}}):e._e()],1)],1),t("div",{staticClass:"text-subtitle-2 grey--text font-italic"})],1)]),t("v-col",{attrs:{md:"12"}},[t("div",[t("leave-rules-expansion-panel",{attrs:{heading:"Adjacent Offday Inclusive","sub-heading":"Adjacent Offday Inclusive"},model:{value:e.formValues.adjacent_offday_inclusive,callback:function(a){e.$set(e.formValues,"adjacent_offday_inclusive",a)},expression:"formValues.adjacent_offday_inclusive"}},[t("v-col",{staticClass:"mt-1",attrs:{cols:"6"}},[t("vue-auto-complete",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{endpoint:e.leaveTypeEndpoint,params:{master_setting:e.masterSettingId},"item-to-exclude":e.leaveId,"force-fetch":"","item-text":"name","item-value":"id",multiple:""},model:{value:e.formValues.adjacent_offday_inclusive_leave_types,callback:function(a){e.$set(e.formValues,"adjacent_offday_inclusive_leave_types",a)},expression:"formValues.adjacent_offday_inclusive_leave_types"}},"vue-auto-complete",e.veeValidate("adjacent_offday_inclusive_leave_types","Offday Inclusive Leave Types"),!1))],1),t("v-col",{attrs:{cols:"6"}},[t("v-select",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{items:e.adjacentoffdayHolidayInclusiveType},model:{value:e.formValues.adjacent_offday_inclusive_type,callback:function(a){e.$set(e.formValues,"adjacent_offday_inclusive_type",a)},expression:"formValues.adjacent_offday_inclusive_type"}},"v-select",e.veeValidate("adjacent_offday_inclusive_type","Offday Inclusive Type"),!1))],1)],1)],1),e.masterSettings.accumulation?t("div",[t("leave-rules-expansion-panel",{attrs:{heading:"Earned Leave","sub-heading":"At least one between 'Carry Forward', 'Encashment' or 'Collapse' should be filled."},model:{value:e.accumulation_rule,callback:function(a){e.accumulation_rule=a},expression:"accumulation_rule"}},[t("v-col",{attrs:{md:"4",cols:"12"}},[t("v-row",[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],staticClass:"px-3",attrs:{type:"number",min:"1",max:"999",suffix:e.accumulation_rule.duration_type},model:{value:e.accumulation_rule.duration,callback:function(a){e.$set(e.accumulation_rule,"duration",a)},expression:"accumulation_rule.duration"}},"v-text-field",e.veeValidate("accumulation_rule.duration","Duration"),!1))],1)],1),t("v-col",{attrs:{md:"4",cols:"12"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"number",min:"1",max:"999"},model:{value:e.accumulation_rule.balance_added,callback:function(a){e.$set(e.accumulation_rule,"balance_added",a)},expression:"accumulation_rule.balance_added"}},"v-text-field",e.veeValidate("accumulation_rule.balance_added","Balance Added"),!1))],1),t("v-col",{attrs:{md:"4",cols:"12"}},[t("v-row",{attrs:{align:"center"}},[t("v-col",{attrs:{md:"11"}},[t("v-select",e._b({directives:[{name:"validate",rawName:"v-validate"}],staticClass:"pa-0",attrs:{items:e.durationType},model:{value:e.accumulation_rule.duration_type,callback:function(a){e.$set(e.accumulation_rule,"duration_type",a)},expression:"accumulation_rule.duration_type"}},"v-select",e.veeValidate("accumulation_rule.duration_type","Duration Type"),!1))],1),t("v-col",{attrs:{md:"1"}},[t("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(a){var l=a.on;return[t("v-icon",e._g({attrs:{size:"20",color:"primary"}},l),[e._v(" mdi-help-circle")])]}}],null,!1,1554012811)},[t("span",[t("ul",[t("li",[e._v(" Years : Balance will be earned at the start date of the Fiscal Year. ")]),t("li",[e._v(" Months : Balance will be earned at the start date of the Fiscal Month. ")]),t("li",[e._v(" Days : Balance will be earned after the completion of added days count. ")])])])])],1)],1)],1),"Days"===e.accumulation_rule.duration_type?[t("v-col",{attrs:{md:"4",cols:"12"}},[t("v-switch",{staticClass:"pa-0 ma-0",attrs:{label:"Exclude Absent Days"},model:{value:e.accumulation_rule.exclude_absent_days,callback:function(a){e.$set(e.accumulation_rule,"exclude_absent_days",a)},expression:"accumulation_rule.exclude_absent_days"}})],1),t("v-col",{attrs:{md:"4",cols:"12"}},[t("v-switch",{staticClass:"pa-0 ma-0",attrs:{label:"Exclude Off Days"},model:{value:e.accumulation_rule.exclude_off_days,callback:function(a){e.$set(e.accumulation_rule,"exclude_off_days",a)},expression:"accumulation_rule.exclude_off_days"}})],1),t("v-col",{attrs:{md:"4",cols:"12"}},[t("v-switch",{staticClass:"pa-0 ma-0",attrs:{label:"Count if present in Off Days"},model:{value:e.accumulation_rule.count_if_present_in_off_day,callback:function(a){e.$set(e.accumulation_rule,"count_if_present_in_off_day",a)},expression:"accumulation_rule.count_if_present_in_off_day"}})],1),t("v-col",{attrs:{md:"4",cols:"12"}},[t("v-switch",{staticClass:"pa-0 ma-0",attrs:{label:"Exclude Holidays"},model:{value:e.accumulation_rule.exclude_holidays,callback:function(a){e.$set(e.accumulation_rule,"exclude_holidays",a)},expression:"accumulation_rule.exclude_holidays"}})],1),t("v-col",{attrs:{md:"4",cols:"12"}},[t("v-switch",{staticClass:"pa-0 ma-0",attrs:{label:"Count if present in Holidays"},model:{value:e.accumulation_rule.count_if_present_in_holiday,callback:function(a){e.$set(e.accumulation_rule,"count_if_present_in_holiday",a)},expression:"accumulation_rule.count_if_present_in_holiday"}})],1),t("v-col",{attrs:{md:"4",cols:"12"}},[t("v-switch",{staticClass:"pa-0 ma-0",attrs:{label:"Exclude Paid Leaves"},model:{value:e.accumulation_rule.exclude_paid_leave,callback:function(a){e.$set(e.accumulation_rule,"exclude_paid_leave",a)},expression:"accumulation_rule.exclude_paid_leave"}})],1),t("v-col",{attrs:{md:"4",cols:"12"}},[t("v-switch",{staticClass:"pa-0 ma-0",attrs:{label:"Exclude Unpaid Leaves"},model:{value:e.accumulation_rule.exclude_unpaid_leave,callback:function(a){e.$set(e.accumulation_rule,"exclude_unpaid_leave",a)},expression:"accumulation_rule.exclude_unpaid_leave"}})],1),t("v-col",{attrs:{md:"4",cols:"12"}},[t("v-switch",{staticClass:"pa-0 ma-0",attrs:{label:"Exclude Half Leaves"},model:{value:e.accumulation_rule.exclude_half_leave,callback:function(a){e.$set(e.accumulation_rule,"exclude_half_leave",a)},expression:"accumulation_rule.exclude_half_leave"}})],1)]:e._e()],2)],1):e._e(),e.masterSettings.renewal?t("div",[t("leave-rules-expansion-panel",{attrs:{heading:"Renewal Rule","sub-heading":"Please add Renewal Rule"},model:{value:e.renewal_rule,callback:function(a){e.renewal_rule=a},expression:"renewal_rule"}},[t("v-col",{attrs:{md:"3"}},[t("div",[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"number",min:"1",max:"999",suffix:e.renewal_rule.duration_type||"Days"},model:{value:e.renewal_rule.duration,callback:function(a){e.$set(e.renewal_rule,"duration",a)},expression:"renewal_rule.duration"}},"v-text-field",e.veeValidate("renewal_rule.duration","Duration"),!1))],1),t("v-select",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{items:e.durationType},model:{value:e.renewal_rule.duration_type,callback:function(a){e.$set(e.renewal_rule,"duration_type",a)},expression:"renewal_rule.duration_type"}},"v-select",e.veeValidate("renewal_rule.duration_type","Duration Type"),!1))],1),t("v-col",{attrs:{md:"3"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"number",min:"1",max:"999"},model:{value:e.renewal_rule.initial_balance,callback:function(a){e.$set(e.renewal_rule,"initial_balance",a)},expression:"renewal_rule.initial_balance"}},"v-text-field",e.veeValidate("renewal_rule.initial_balance","Initial Balance"),!1)),e.masterSettings.encashment?t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"number",min:"1",max:"999"},model:{value:e.renewal_rule.max_balance_encashed,callback:function(a){e.$set(e.renewal_rule,"max_balance_encashed",a)},expression:"renewal_rule.max_balance_encashed"}},"v-text-field",e.veeValidate("renewal_rule.max_balance_encashed","Maximum no. of days Encashed"),!1)):e._e()],1),t("v-col",{attrs:{md:"3"}},[e.masterSettings.carry_forward?t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"number",min:"1",max:"999"},model:{value:e.renewal_rule.max_balance_forwarded,callback:function(a){e.$set(e.renewal_rule,"max_balance_forwarded",a)},expression:"renewal_rule.max_balance_forwarded"}},"v-text-field",e.veeValidate("renewal_rule.max_balance_forwarded","Maximum Balance Forwarded"),!1)):e._e(),t("v-switch",{attrs:{label:"Set to Default After Consumption"},model:{value:e.renewal_rule.back_to_default_value,callback:function(a){e.$set(e.renewal_rule,"back_to_default_value",a)},expression:"renewal_rule.back_to_default_value"}})],1),t("v-col",{attrs:{md:"3"}},[e.masterSettings.collapsible?t("v-switch",{attrs:{label:"Collapse"},model:{value:e.renewal_rule.is_collapsible,callback:function(a){e.$set(e.renewal_rule,"is_collapsible",a)},expression:"renewal_rule.is_collapsible"}}):e._e()],1)],1)],1):e._e(),e.masterSettings.deductible?t("div",[t("leave-rules-expansion-panel",{attrs:{heading:"Deduction Rule","sub-heading":"Please add Deduction Rule"},model:{value:e.deduction_rule,callback:function(a){e.deduction_rule=a},expression:"deduction_rule"}},[t("v-row",{staticClass:"px-2"},[t("v-col",{attrs:{md:"2"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"number",min:"1",max:"999"},model:{value:e.deduction_rule.duration,callback:function(a){e.$set(e.deduction_rule,"duration",a)},expression:"deduction_rule.duration"}},"v-text-field",e.veeValidate("deduction_rule.duration","Duration"),!1))],1),t("v-col",{attrs:{md:"3"}},[t("v-select",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{items:e.durationType},model:{value:e.deduction_rule.duration_type,callback:function(a){e.$set(e.deduction_rule,"duration_type",a)},expression:"deduction_rule.duration_type"}},"v-select",e.veeValidate("deduction_rule.duration_type","Duration Type"),!1))],1),t("v-col",{attrs:{md:"4"}},[t("v-row",[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"number",min:"1",max:"999",suffix:"Days"},model:{value:e.deduction_rule.balance_deducted,callback:function(a){e.$set(e.deduction_rule,"balance_deducted",a)},expression:"deduction_rule.balance_deducted"}},"v-text-field",e.veeValidate("deduction_rule.balance_deducted","Balance Deducted"),!1))],1)],1)],1)],1)],1):e._e(),e.masterSettings.leave_irregularities?t("div",[t("leave-rules-expansion-panel",{attrs:{heading:"Leave Irregularity","sub-heading":"Please add Irregularity"},model:{value:e.leave_irregularity,callback:function(a){e.leave_irregularity=a},expression:"leave_irregularity"}},[t("v-col",{attrs:{md:"4"}},[t("v-row",[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],staticClass:"px-2",attrs:{type:"number",min:"1",max:"999",suffix:"Days"},model:{value:e.leave_irregularity.weekly_limit,callback:function(a){e.$set(e.leave_irregularity,"weekly_limit",a)},expression:"leave_irregularity.weekly_limit"}},"v-text-field",e.veeValidate("leave_irregularity.weekly_limit","Weekly Limit"),!1))],1),t("v-row",[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],staticClass:"px-2",attrs:{hint:"Must be greater than weekly limit",type:"number",min:"1",max:"999",suffix:"Days"},model:{value:e.leave_irregularity.fortnightly_limit,callback:function(a){e.$set(e.leave_irregularity,"fortnightly_limit",a)},expression:"leave_irregularity.fortnightly_limit"}},"v-text-field",e.veeValidate("leave_irregularity.fortnightly_limit","Fortnightly Limit"),!1))],1)],1),t("v-col",{attrs:{md:"4"}},[t("v-row",[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],staticClass:"px-2",attrs:{hint:"Must be greater than Fortnightly Limit",type:"number",min:"1",max:"999",suffix:"Days"},model:{value:e.leave_irregularity.monthly_limit,callback:function(a){e.$set(e.leave_irregularity,"monthly_limit",a)},expression:"leave_irregularity.monthly_limit"}},"v-text-field",e.veeValidate("leave_irregularity.monthly_limit","Monthly Limit"),!1))],1),t("v-row",[t("v-text-field",e._b({staticClass:"px-2",attrs:{hint:"Must be greater than Monthly Limit",type:"number",min:"1",max:"999",suffix:"Days"},model:{value:e.leave_irregularity.quarterly_limit,callback:function(a){e.$set(e.leave_irregularity,"quarterly_limit",a)},expression:"leave_irregularity.quarterly_limit"}},"v-text-field",e.veeValidate("leave_irregularity.quarterly_limit","Quarterly Limit"),!1))],1)],1),t("v-col",{attrs:{md:"4"}},[t("v-row",[t("v-text-field",e._b({staticClass:"px-2",attrs:{hint:"Must be greater than Quarterly Limit",type:"number",min:"1",max:"999",suffix:"Days"},model:{value:e.leave_irregularity.semi_annually_limit,callback:function(a){e.$set(e.leave_irregularity,"semi_annually_limit",a)},expression:"leave_irregularity.semi_annually_limit"}},"v-text-field",e.veeValidate("leave_irregularity.semi_annually_limit","Semi Annually Limit"),!1))],1),t("v-row",[t("v-text-field",e._b({staticClass:"px-2",attrs:{hint:"Must be greater than Semi Annually Limit",type:"number",min:"1",max:"999",suffix:"Days"},model:{value:e.leave_irregularity.annually_limit,callback:function(a){e.$set(e.leave_irregularity,"annually_limit",a)},expression:"leave_irregularity.annually_limit"}},"v-text-field",e.veeValidate("leave_irregularity.annually_limit","Annually Limit"),!1))],1)],1)],1)],1):e._e(),e.masterSettings.require_document?t("div",[t("leave-rules-expansion-panel",{attrs:{heading:"Require Document","sub-heading":"Require Document"},model:{value:e.formValues.require_docs,callback:function(a){e.$set(e.formValues,"require_docs",a)},expression:"formValues.require_docs"}},[t("v-col",{attrs:{md:"6"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"number",suffix:"Days",min:"1"},model:{value:e.formValues.require_docs_for,callback:function(a){e.$set(e.formValues,"require_docs_for",a)},expression:"formValues.require_docs_for"}},"v-text-field",e.veeValidate("require_docs_for","Require Document For"),!1))],1)],1)],1):e._e(),e.masterSettings.occurrences&&e.masterSettings.leave_limitations?t("div",[t("leave-rules-expansion-panel",{attrs:{heading:"Occurrences / Frequencies","sub-heading":"Occurrences/Frequencies"},model:{value:e.formValues.limit_leave_occurrence,callback:function(a){e.$set(e.formValues,"limit_leave_occurrence",a)},expression:"formValues.limit_leave_occurrence"}},[t("v-col",{attrs:{md:"4"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"number",min:"1",max:"999"},model:{value:e.formValues.limit_leave_occurrence,callback:function(a){e.$set(e.formValues,"limit_leave_occurrence",a)},expression:"formValues.limit_leave_occurrence"}},"v-text-field",e.veeValidate("Limit_leave_occurrence","Limit Leave Occurrence"),!1))],1),t("v-col",{attrs:{md:"4"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"number",min:"1",max:"999"},model:{value:e.formValues.limit_leave_occurrence_duration,callback:function(a){e.$set(e.formValues,"limit_leave_occurrence_duration",a)},expression:"formValues.limit_leave_occurrence_duration"}},"v-text-field",e.veeValidate("limit_leave_occurrence_duration","Duration "),!1))],1),t("v-col",{attrs:{md:"4"}},[t("v-select",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{items:e.occurrencesType},model:{value:e.formValues.limit_leave_occurrence_duration_type,callback:function(a){e.$set(e.formValues,"limit_leave_occurrence_duration_type",a)},expression:"formValues.limit_leave_occurrence_duration_type"}},"v-select",e.veeValidate("limit_leave_occurrence_duration_type","Limit leave Occurrence Duration"),!1))],1)],1)],1):e._e(),e.masterSettings.leave_limitations?t("div",[t("leave-rules-expansion-panel",{attrs:{heading:"Leave Limitations ","sub-heading":"Limit leave to some days in some duration type"},model:{value:e.formValues.limit_leave_to,callback:function(a){e.$set(e.formValues,"limit_leave_to",a)},expression:"formValues.limit_leave_to"}},[t("v-col",{attrs:{md:"4"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],attrs:{type:"number",suffix:"Days",min:"1",max:"999"},model:{value:e.formValues.limit_leave_to,callback:function(a){e.$set(e.formValues,"limit_leave_to",a)},expression:"formValues.limit_leave_to"}},"v-text-field",e.veeValidate("limit_leave_to","Leave Limit"),!1))],1),t("v-col",{attrs:{md:"4"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"number",min:"1",max:"999"},model:{value:e.formValues.limit_leave_duration,callback:function(a){e.$set(e.formValues,"limit_leave_duration",a)},expression:"formValues.limit_leave_duration"}},"v-text-field",e.veeValidate("limit_leave_duration","Limit Leave Duration"),!1))],1),t("v-col",{attrs:{md:"4"}},[t("v-select",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{items:e.occurrencesType},model:{value:e.formValues.limit_leave_duration_type,callback:function(a){e.$set(e.formValues,"limit_leave_duration_type",a)},expression:"formValues.limit_leave_duration_type"}},"v-select",e.veeValidate("limit_leave_duration_type","Limit leave Duration type"),!1))],1)],1)],1):e._e(),e.masterSettings.require_time_period?t("div",[t("leave-rules-expansion-panel",{attrs:{heading:"Require Time - Period","sub-heading":"Require Time - Period"},model:{value:e.formValues.start_date,callback:function(a){e.$set(e.formValues,"start_date",a)},expression:"formValues.start_date"}},[t("v-col",{attrs:{md:"4"}},[t("vue-date-picker",e._b({directives:[{name:"validate",rawName:"v-validate"}],model:{value:e.formValues.start_date,callback:function(a){e.$set(e.formValues,"start_date",a)},expression:"formValues.start_date"}},"vue-date-picker",e.veeValidate("start_date","Start Date"),!1))],1),t("v-col",{attrs:{md:"4"}},[t("vue-date-picker",e._b({directives:[{name:"validate",rawName:"v-validate"}],model:{value:e.formValues.end_date,callback:function(a){e.$set(e.formValues,"end_date",a)},expression:"formValues.end_date"}},"vue-date-picker",e.veeValidate("end_date","End Date"),!1))],1)],1)],1):e._e(),e.masterSettings.depletion_required?t("div",[t("leave-rules-expansion-panel",{attrs:{heading:"Depletion Required ","sub-heading":"Depletion Required"},model:{value:e.formValues.depletion_leave_types,callback:function(a){e.$set(e.formValues,"depletion_leave_types",a)},expression:"formValues.depletion_leave_types"}},[t("v-col",{attrs:{md:"4"}},[t("vue-auto-complete",e._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],attrs:{endpoint:e.leaveTypeEndpoint,params:{master_setting:e.masterSettingId},"item-to-exclude":e.leaveId,"force-fetch":"","item-text":"name","item-value":"id",multiple:""},model:{value:e.formValues.depletion_leave_types,callback:function(a){e.$set(e.formValues,"depletion_leave_types",a)},expression:"formValues.depletion_leave_types"}},"vue-auto-complete",e.veeValidate("depletion_leave_types","Depletion Leave Types"),!1))],1)],1)],1):e._e(),e.masterSettings.beyond_balance?t("div",[t("leave-rules-expansion-panel",{attrs:{heading:"Can Apply Beyond Zero Balance","sub-heading":"Can Apply Beyond Zero Balance"},model:{value:e.formValues.can_apply_beyond_zero_balance,callback:function(a){e.$set(e.formValues,"can_apply_beyond_zero_balance",a)},expression:"formValues.can_apply_beyond_zero_balance"}},[t("v-col",{attrs:{cols:"6"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{type:"number",min:"1",max:"999"},model:{value:e.formValues.beyond_limit,callback:function(a){e.$set(e.formValues,"beyond_limit",a)},expression:"formValues.beyond_limit"}},"v-text-field",e.veeValidate("beyond_limit","Beyond Limit"),!1))],1)],1)],1):e._e(),e.masterSettings.require_prior_approval?t("div",[t("leave-rules-expansion-panel",{attrs:{heading:"Require Prior Approval","sub-heading":"Require Prior Approval"},model:{value:e.formValues.require_prior_approval,callback:function(a){e.$set(e.formValues,"require_prior_approval",a)},expression:"formValues.require_prior_approval"}},[e._l(e.priorCount,(function(a,l){return[t("v-row",{key:a},[t("v-col",{attrs:{md:"3"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],attrs:{type:"number",min:"1"},model:{value:e.prior_approval_rules[l].prior_approval_request_for,callback:function(a){e.$set(e.prior_approval_rules[l],"prior_approval_request_for",a)},expression:"\n                          prior_approval_rules[index]\n                            .prior_approval_request_for\n                        "}},"v-text-field",e.veeValidate("prior_approval_request_for-"+(l+1),"Prior Approval Request For (In Days)"),!1))],1),t("v-col",{attrs:{md:"3"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],attrs:{type:"number",min:"1"},model:{value:e.prior_approval_rules[l].prior_approval,callback:function(a){e.$set(e.prior_approval_rules[l],"prior_approval",a)},expression:"prior_approval_rules[index].prior_approval"}},"v-text-field",e.veeValidate("prior_approval-"+(l+1),"Prior Approval"),!1))],1),t("v-col",{attrs:{md:"3"}},[t("v-select",e._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],attrs:{items:["Days","Hours","Minutes"]},model:{value:e.prior_approval_rules[l].prior_approval_unit,callback:function(a){e.$set(e.prior_approval_rules[l],"prior_approval_unit",a)},expression:"\n                          prior_approval_rules[index].prior_approval_unit\n                        "}},"v-select",e.veeValidate("prior_approval_unit","Prior Approval Unit"),!1))],1),t("v-col",{key:a,staticClass:"py-10"},[t("span",[e.priorCount-1===l?t("v-icon",{attrs:{color:"green"},domProps:{textContent:e._s("mdi-plus-circle-outline")},on:{click:e.addPriorRules}}):e._e(),a>1?t("v-icon",{attrs:{color:"red"},domProps:{textContent:e._s("mdi-minus-circle-outline")},on:{click:function(a){return e.removePriorRules(l)}}}):e._e()],1)])],1)]}))],2)],1):e._e(),e.masterSettings.require_experience?t("div",[t("leave-rules-expansion-panel",{attrs:{heading:"Require Experience","sub-heading":"Require Experience"},model:{value:e.formValues.required_experience,callback:function(a){e.$set(e.formValues,"required_experience",a)},expression:"formValues.required_experience"}},[t("v-col",{attrs:{md:"4"}},[t("v-row",[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],staticClass:"px-2",attrs:{type:"number",min:"1",max:"999",suffix:e.formValues.required_experience_duration||"Days"},model:{value:e.formValues.required_experience,callback:function(a){e.$set(e.formValues,"required_experience",a)},expression:"formValues.required_experience"}},"v-text-field",e.veeValidate("required_experience","Required Experience"),!1))],1)],1),t("v-col",{attrs:{md:"4"}},[t("v-select",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{items:e.durationType},model:{value:e.formValues.required_experience_duration,callback:function(a){e.$set(e.formValues,"required_experience_duration",a)},expression:"formValues.required_experience_duration"}},"v-select",e.veeValidate("required_experience_duration","Required Experience Duration"),!1))],1)],1)],1):e._e(),e.masterSettings.continuous&&e.masterSettings.leave_limitations?t("div",[t("leave-rules-expansion-panel",{attrs:{value:e.formValues.maximum_continuous_leave_length||e.formValues.minimum_continuous_leave_length,heading:"Continuous","sub-heading":"Continuous leave"}},[t("v-col",{attrs:{md:"3"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"number",min:"1",max:"999"},model:{value:e.formValues.maximum_continuous_leave_length,callback:function(a){e.$set(e.formValues,"maximum_continuous_leave_length",a)},expression:"formValues.maximum_continuous_leave_length"}},"v-text-field",e.veeValidate("maximum_continuous_leave_length","Maximum Continuous Leave Length"),!1))],1),t("v-col",{attrs:{md:"3"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"number",min:"1",max:"999"},model:{value:e.formValues.minimum_continuous_leave_length,callback:function(a){e.$set(e.formValues,"minimum_continuous_leave_length",a)},expression:"formValues.minimum_continuous_leave_length"}},"v-text-field",e.veeValidate("minimum_continuous_leave_length","Minimum Continuous Leave Length"),!1))],1),t("v-col",{attrs:{md:"2"}},[t("v-switch",{attrs:{label:"Enable YOS Rule"},model:{value:e.yosRule,callback:function(a){e.yosRule=a},expression:"yosRule"}})],1),e.yosRule?t("v-col",{attrs:{md:"2"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"number",hint:"Continuous Leave rule now will only be applicable for the employee who's years of service is below this limit.",min:"1",max:"999"},model:{value:e.formValues.year_of_service,callback:function(a){e.$set(e.formValues,"year_of_service",a)},expression:"formValues.year_of_service"}},"v-text-field",e.veeValidate("year_of_service","Year of Service (In Months)"),!1))],1):e._e(),e.yosRule?t("v-col",{staticClass:"mt-4",attrs:{md:"1"}},[t("span",[e._v("Months")])]):e._e()],1)],1):e._e(),e.masterSettings.leave_limitations?t("div",[t("leave-rules-expansion-panel",{attrs:{heading:"Maximum / Minimum Leave ","sub-heading":"Determine minimum and maximum Leave."},model:{value:e.formValues.max_balance,callback:function(a){e.$set(e.formValues,"max_balance",a)},expression:"formValues.max_balance"}},[t("v-col",{attrs:{md:"4"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"number",min:"1",max:"999"},model:{value:e.formValues.max_balance,callback:function(a){e.$set(e.formValues,"max_balance",a)},expression:"formValues.max_balance"}},"v-text-field",e.veeValidate("max_balance","Maximum Leave"),!1))],1),t("v-col",{attrs:{md:"4"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"number",min:"1",max:"999"},model:{value:e.formValues.min_balance,callback:function(a){e.$set(e.formValues,"min_balance",a)},expression:"formValues.min_balance"}},"v-text-field",e.veeValidate("min_balance","Minimum Leave"),!1))],1)],1)],1):e._e()])],1)],1)],1)],1),e.dialog?t("v-dialog",{attrs:{"max-width":"450",scrollable:""},on:{keypress:function(a){if(!a.type.indexOf("key")&&e._k(a.keyCode,"esc",27,a.key,["Esc","Escape"]))return null;e.dialog=!1}},model:{value:e.dialog,callback:function(a){e.dialog=a},expression:"dialog"}},[t("v-card",[t("vue-card-title",{attrs:{title:"Mesage",icon:"mdi-file-document-outline",dark:""}}),t("v-card-text",{staticClass:"pa-3 scrollbar-sm"},[t("div",[e._v("If the employee is in probation and has a probation end date specified, leave calculation begins from the probation end date; otherwise, it starts from the employee's joining date. ")])]),t("v-divider"),t("v-card-actions",[t("v-spacer"),t("v-btn",{attrs:{color:"primary"},domProps:{textContent:e._s("Okay")},on:{click:function(a){e.dialog=!1}}})],1)],1)],1):e._e(),e.view?e._e():t("v-footer",{attrs:{fixed:"",height:"auto"}},[t("v-col",{staticClass:"text-right"},[e.edit?t("v-btn",{staticClass:"mr-3",attrs:{right:"",color:"primary",depressed:""},on:{click:e.updateLeaveRule}},[e._v(" Update ")]):t("v-btn",{staticClass:"mr-3",attrs:{depressed:"",color:"primary",right:""},on:{click:e.createLeaveRule}},[t("v-icon",{attrs:{size:"14",left:""}},[e._v(" mdi-content-save-outline ")]),e._v(" Save ")],1),t("v-btn",{attrs:{right:"",outlined:"",color:"primary"},on:{click:function(a){return e.clear(e.formValues)}}},[e._v(" Clear ")])],1)],1)],1)},o=[],n=(t("b0c0"),t("159b"),t("caad"),t("2532"),t("a434"),t("f12b")),u=t("741f"),c=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-card",{staticClass:"mt-5 lighten-4 elevation-1 mb-5",attrs:{color:"grey"}},[t("v-col",{attrs:{md:"12"}},[t("v-row",[t("v-col",{staticClass:"px-5",attrs:{md:"8"}},[t("div",{domProps:{textContent:e._s(e.heading)}}),t("div",{staticClass:"text-caption grey--text",domProps:{textContent:e._s(e.subHeading)}})]),t("v-spacer"),t("div",{staticClass:"mr-12"},[e.alwaysOpen?e._e():t("v-switch",{model:{value:e.showFields,callback:function(a){e.showFields=a},expression:"showFields"}})],1)],1),e.showFields?t("v-card-text",[t("v-form",{ref:"expansionForm"},[t("v-row",[e._t("default")],2)],1)],1):e._e()],1)],1)},d=[],_=t("53ca"),m=t("13ea"),p=t.n(m),v={props:{heading:{type:String,default:""},subHeading:{type:String,default:""},value:{type:[Boolean,Object,Number,String,Array],default:!0},alwaysOpen:{type:Boolean,default:!1}},data:function(){return{showFields:this.alwaysOpen}},watch:{showFields:{handler:function(e){if("boolean"===typeof this.value&&this.$emit("input",e||!1),!e&&(this.$refs.expansionForm&&this.$refs.expansionForm.reset(),"boolean"!==typeof this.value)){var a=null;this.value&&Array.isArray(this.value)?a=[]:this.value&&"object"===Object(_["a"])(this.value)&&(a={}),this.$emit("input",a)}},immediate:!1},value:{handler:function(e){this.alwaysOpen||(this.showFields="object"===Object(_["a"])(e)?!p()(e):!!e)},immediate:!0}}},f=v,h=t("2877"),y=t("6544"),V=t.n(y),b=t("b0af"),g=t("99d9"),x=t("62ad"),w=t("4bd4"),q=t("0fd9b"),k=t("2fa4"),S=t("b73d"),C=Object(h["a"])(f,c,d,!1,null,null,null),$=C.exports;V()(C,{VCard:b["a"],VCardText:g["c"],VCol:x["a"],VForm:w["a"],VRow:q["a"],VSpacer:k["a"],VSwitch:S["a"]});var R=t("be65"),N=t("5660"),D=t("77c1"),L=t.n(D),I=t("bc60"),E={components:{VueAutoComplete:N["default"],VueDatePicker:u["default"],LeaveRulesExpansionPanel:$,SwitchToggle:R["a"]},mixins:[n["a"]],props:{slug:{type:String,required:!0},masterSettings:{type:Object,required:!0},id:{type:[String,Number],default:""},leaveId:{type:Number,default:void 0},edit:{type:Boolean,default:!1},view:{type:Boolean,default:!1},clone:{type:Boolean,default:!1},leaveName:{type:String,default:""},idleLeaveTypeList:{type:Array,default:function(){return[]}}},data:function(){return{accumulation_rule:{},renewal_rule:{},deduction_rule:{},leave_irregularity:{},masterSettingId:"",leaveRuleName:"",bottomNav:"recent",formValues:{name:"",description:"",accumulation_rule:null,renewal_rule:null,deduction_rule:null,yos_rule:null,compensatory_rule:null,irregularity_report:!1,leave_irregularity:null,is_archived:!1,limit_leave_to:null,limit_leave_duration:null,min_balance:null,max_balance:null,limit_leave_occurrence:null,limit_leave_occurrence_duration:null,limit_leave_occurrence_duration_type:null,maximum_continuous_leave_length:null,minimum_continuous_leave_length:null,year_of_service:null,limit_leave_duration_type:null,inclusive_leave:null,inclusive_leave_number:null,required_experience_duration:null,is_paid:!1,proportionate_on_joined_date:null,proportionate_on_contract_end_date:null,proportionate_on_probation_end_date:null,can_apply_half_shift:null,employee_can_apply:!1,admin_can_assign:!1,can_apply_beyond_zero_balance:null,beyond_limit:null,required_experience:null,require_prior_approval:!1,prior_approval_rules:[],require_docs:!1,require_docs_for:null,start_date:null,end_date:null,depletion_required:null,depletion_leave_types:[],leave_type:this.leaveId,cloned_from:null,adjacent_offday_inclusive:!1,adjacent_offday_inclusive_leave_types:[],adjacent_offday_inclusive_type:""},prior_approval_rules:[{prior_approval_request_for:"",prior_approval:"",prior_approval_unit:""}],yosRule:!1,leaveTypeEndpoint:"",durationType:["Years","Months","Days"],holidayInclusiveType:["Exclude Holiday And Off Day","Include Holiday","Include Off Day","Include Holiday And Off Day"],adjacentoffdayHolidayInclusiveType:["Include Holiday","Include Off Day","Include Holiday And Off Day"],occurrencesType:["Years","Months"],priorCount:1,dialog:!1}},watch:{leaveId:function(){this.formValues.leave_type=this.leaveId},"formValues.proportionate_on_joined_date":function(e){e&&this.formValues.proportionate_on_probation_end_date&&(this.dialog=!0)},"formValues.proportionate_on_probation_end_date":function(e){e&&this.formValues.proportionate_on_joined_date&&(this.dialog=!0)}},created:function(){this.masterSettingId=this.$route.query.name||this.masterSettings.id,this.formValues.leave_type=this.leaveId,this.leaveTypeEndpoint="/leave/".concat(this.slug,"/leave-types"),(this.edit||this.view||this.clone)&&this.getLeaveRule()},methods:{clear:function(){this.$refs.generalLeaveRules.reset(),this.clearNonFieldErrors(),this.$validator.errors.clear()},createLeaveRule:function(){var e=this;this.checkOptionalRule();var a=I["a"].getLeaveRules(this.slug);this.formValues.prior_approval_rules=this.formValues.require_prior_approval?this.prior_approval_rules:[],this.crud.message="Successfully created Leave Rule Settings.",this.setDefaultBooleanField(),this.insertData(a,this.formValues,{clearForm:!1}).then((function(){e.clear(e.formValues),e.$emit("close")})).catch((function(a){e.pushIndexedErrors(a,"prior_approval_request_for",!1,""),e.pushIndexedErrors(a,"prior_approval",!1,"")}))},updateLeaveRule:function(){var e=this;this.checkOptionalRule();var a=I["a"].getLeaveRule(this.slug,this.id);this.crud.message="Successfully Updated Leave Rule Settings.",this.formValues.prior_approval_rules=this.formValues.require_prior_approval?this.prior_approval_rules:[],this.setDefaultBooleanField(),this.putData(a,this.formValues,{clearForm:!1}).then((function(){e.clear(e.formValues),e.$emit("close")})).catch((function(a){e.pushIndexedErrors(a,"prior_approval_request_for",!1,""),e.pushIndexedErrors(a,"prior_approval",!1,"")}))},checkOptionalRule:function(){var e=function(e){return p()(L()(e))?null:e};for(var a in this.formValues.accumulation_rule=e(this.accumulation_rule),this.formValues.accumulation_rule&&"Days"!==this.accumulation_rule.duration_type&&(this.formValues.accumulation_rule.exclude_absent_days=!1,this.formValues.accumulation_rule.exclude_off_days=!1,this.formValues.accumulation_rule.count_if_present_in_off_day=!1,this.formValues.accumulation_rule.exclude_holidays=!1,this.formValues.accumulation_rule.count_if_present_in_holiday=!1,this.formValues.accumulation_rule.exclude_paid_leave=!1,this.formValues.accumulation_rule.exclude_unpaid_leave=!1,this.formValues.accumulation_rule.exclude_half_leave=!1),this.formValues.renewal_rule=e(this.renewal_rule),this.formValues.deduction_rule=e(this.deduction_rule),this.leave_irregularity)""===this.leave_irregularity[a]&&(this.leave_irregularity[a]=null);this.formValues.leave_irregularity=e(this.leave_irregularity),null!==this.formValues.leave_irregularity&&(this.formValues.irregularity_report=!0),null!==this.formValues.beyond_limit&&this.formValues.beyond_limit?this.formValues.can_apply_beyond_zero_balance=!0:this.formValues.can_apply_beyond_zero_balance=!1,null!==this.formValues.require_docs_for&&this.formValues.require_docs_for?this.formValues.require_docs=!0:this.formValues.require_docs=!1,this.formValues.depletion_leave_types!==[]&&this.formValues.depletion_leave_types?this.formValues.depletion_required=!1:this.formValues.depletion_required=!0,this.formValues.depletion_required=!!e(this.formValues.depletion_leave_types),this.formValues.maximum_continuous_leave_length||(this.formValues.maximum_continuous_leave_length=null),this.formValues.minimum_continuous_leave_length||(this.formValues.minimum_continuous_leave_length=null),this.formValues.year_of_service||(this.formValues.year_of_service=null),this.masterSettings.paid&&!this.masterSettings.unpaid?this.formValues.is_paid=!0:!this.masterSettings.paid&&this.masterSettings.unpaid&&(this.formValues.is_paid=!1),this.masterSettings.proportionate_leave||(this.formValues.proportionate_on_joined_date=!1),this.masterSettings.employees_can_apply||(this.formValues.employee_can_apply=!1),this.masterSettings.admin_can_assign||(this.formValues.admin_can_assign=!1),this.masterSettings.half_shift_leave||(this.formValues.can_apply_half_shift=!1),this.masterSettings.accumulation||(this.formValues.accumulation_rule=null),this.masterSettings.renewal||(this.formValues.renewal_rule=null),this.masterSettings.deductible||(this.formValues.deduction_rule=null),this.masterSettings.leave_irregularities||(this.formValues.leave_irregularity=null),this.masterSettings.leave_limitations||(this.formValues.limit_leave_to=null,this.formValues.limit_leave_duration=null,this.formValues.limit_leave_duration_type=null,this.formValues.max_balance=null,this.formValues.min_balance=null,this.formValues.limit_leave_occurrence=null,this.formValues.limit_leave_occurrence_duration=null,this.formValues.limit_leave_occurrence_duration_type=null,this.formValues.maximum_continuous_leave_length=null,this.formValues.minimum_continuous_leave_length=null,this.formValues.year_of_service=null),this.masterSettings.holiday_inclusive?"Exclude Holiday And Off Day"===this.formValues.inclusive_leave&&(this.formValues.inclusive_leave_number=0):(this.formValues.inclusive_leave=null,this.formValues.inclusive_leave_number=null),this.masterSettings.occurrences||(this.formValues.limit_leave_occurrence=null,this.formValues.limit_leave_occurrence_duration=null,this.formValues.limit_leave_occurrence_duration_type=null),this.masterSettings.continuous||(this.formValues.maximum_continuous_leave_length=null,this.formValues.minimum_continuous_leave_length=null),this.masterSettings.continuous&&this.yosRule||(this.formValues.year_of_service=null),this.masterSettings.beyond_balance||(this.formValues.can_apply_beyond_zero_balance=null,this.formValues.beyond_limit=null),this.masterSettings.depletion_required||(this.formValues.depletion_leave_types=[],this.formValues.depletion_required=null),this.masterSettings.require_experience||(this.formValues.required_experience=null,this.formValues.required_experience_duration=null),this.masterSettings.require_time_period||(this.formValues.start_date=null,this.formValues.end_date=null),this.formValues.require_prior_approval||(this.formValues.prior_approval_rules=[]),this.masterSettings.require_prior_approval||(this.formValues.prior_approval_rules=[],this.formValues.require_prior_approval=!1),this.masterSettings.require_document||(this.formValues.require_docs=null,this.formValues.require_docs_for=null),this.formValues.adjacent_offday_inclusive||(this.formValues.adjacent_offday_inclusive_leave_types=[],this.formValues.adjacent_offday_inclusive_type="")},getLeaveRule:function(){var e=this,a=I["a"].getLeaveRule(this.slug,this.id);this.getData(a).then((function(a){if(e.formValues=a,e.prior_approval_rules=e.formValues.prior_approval_rules,e.leaveRuleName=e.formValues.name,e.clone){e.formValues.cloned_from=e.formValues.id,e.formValues.leave_type=e.leaveId;var t=e.formValues.depletion_leave_types,l=e.formValues.adjacent_offday_inclusive_leave_types;e.formValues.depletion_leave_types=[],e.formValues.adjacent_offday_inclusive_leave_types=[],e.idleLeaveTypeList.forEach((function(a){a.leave_type&&(t.includes(a.leave_type.cloned_from)&&e.formValues.depletion_leave_types.push(a.leave_type.id),l.includes(a.leave_type.cloned_from)&&e.formValues.adjacent_offday_inclusive_leave_types.push(a.leave_type.id))}))}e.formValues.year_of_service&&(e.yosRule=!0),e.accumulation_rule=e.formValues.accumulation_rule||{},e.renewal_rule=e.formValues.renewal_rule||{},e.deduction_rule=e.formValues.deduction_rule||{},e.leave_irregularity=e.formValues.leave_irregularity||{},e.priorCount=e.formValues.prior_approval_rules.length,0===e.priorCount&&(e.formValues.prior_approval_rules[0]={prior_approval_request_for:"",prior_approval:"",prior_approval_unit:""},e.priorCount=1)}))},addPriorRules:function(){this.prior_approval_rules[this.priorCount-1].prior_approval_request_for&&this.prior_approval_rules[this.priorCount-1].prior_approval&&this.prior_approval_rules[this.priorCount-1].prior_approval_unit&&(this.prior_approval_rules[this.priorCount]={prior_approval_request_for:"",prior_approval:"",prior_approval_unit:""},this.priorCount+=1)},removePriorRules:function(e){this.priorCount>1&&(this.prior_approval_rules.splice(e,1),this.priorCount-=1)},setDefaultBooleanField:function(){this.formValues.employee_can_apply=this.formValues.employee_can_apply||!1,this.formValues.admin_can_assign=this.formValues.admin_can_assign||!1,this.formValues.is_paid=this.formValues.is_paid||!1}}},T=E,j=t("8336"),F=t("a523"),O=t("169a"),A=t("ce7e"),P=t("553a"),B=t("132d"),H=t("b974"),M=t("8654"),z=t("a844"),U=t("3a2f"),Y=Object(h["a"])(T,s,o,!1,null,null,null),K=Y.exports;V()(Y,{VBtn:j["a"],VCard:b["a"],VCardActions:g["a"],VCardText:g["c"],VCol:x["a"],VContainer:F["a"],VDialog:O["a"],VDivider:A["a"],VFooter:P["a"],VForm:w["a"],VIcon:B["a"],VRow:q["a"],VSelect:H["a"],VSpacer:k["a"],VSwitch:S["a"],VTextField:M["a"],VTextarea:z["a"],VTooltip:U["a"]});var G=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-form",{ref:"yosRule"},[t("vue-card-title",{attrs:{title:e.leaveName,subtitle:e.leaveRuleName,icon:"mdi-file-document-outline",dark:"",closable:""},on:{close:function(a){e.clear(),e.$emit("close")}}}),t("v-divider"),t("v-container",[t("v-card-text",[t("v-row",{attrs:{"no-gutters":""}},[t("v-col",{attrs:{cols:"12"}},[e.nonFieldErrors?t("non-field-form-errors",{attrs:{"non-field-errors":e.nonFieldErrors}}):e._e()],1),t("v-card",{staticClass:"lighten-4 elevation-1 mb-5",attrs:{color:"grey",width:"100%"}},[t("div",{staticClass:"px-5"},[t("v-col",{staticClass:"pl-0",attrs:{cols:"6"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{counter:"150"},model:{value:e.formValues.name,callback:function(a){e.$set(e.formValues,"name",a)},expression:"formValues.name"}},"v-text-field",e.veeValidate("name","Rule Name *"),!1))],1),t("v-col",{staticClass:"pl-0",attrs:{cols:"12"}},[t("v-textarea",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{rows:"2",counter:"150"},model:{value:e.formValues.description,callback:function(a){e.$set(e.formValues,"description",a)},expression:"formValues.description"}},"v-textarea",e.veeValidate("description","Description *"),!1))],1)],1)]),t("v-col",{attrs:{cols:"12"}},[t("v-card",{staticClass:"lighten-4 elevation-1",attrs:{color:"grey"}},[t("div",{staticClass:"pl-6"},[t("v-row",[t("v-col",{attrs:{md:"4",cols:"12"}},[e.masterSettings.paid?t("switch-toggle",{attrs:{heading:"Paid Leave","sub-heading":"Paid Leave"},model:{value:e.formValues.is_paid,callback:function(a){e.$set(e.formValues,"is_paid",a)},expression:"formValues.is_paid"}}):e._e()],1),t("v-col",{attrs:{md:"4",cols:"12"}},[e.masterSettings.admin_can_assign?t("switch-toggle",{attrs:{heading:"Admin can assign leave to employees","sub-heading":"Admin can assign leave to employees"},model:{value:e.formValues.admin_can_assign,callback:function(a){e.$set(e.formValues,"admin_can_assign",a)},expression:"formValues.admin_can_assign"}}):e._e()],1),t("v-col",{attrs:{md:"4",cols:"12"}},[e.masterSettings.employees_can_apply?t("switch-toggle",{attrs:{heading:"Employee can Apply for Leave","sub-heading":"Employee can Apply for Leave"},model:{value:e.formValues.employee_can_apply,callback:function(a){e.$set(e.formValues,"employee_can_apply",a)},expression:"formValues.employee_can_apply"}}):e._e()],1),t("v-col",{attrs:{md:"4",cols:"12"}},[e.masterSettings.half_shift_leave?t("switch-toggle",{attrs:{heading:"Can apply half day / shift leave","sub-heading":"Can apply half day / shift leave"},model:{value:e.formValues.can_apply_half_shift,callback:function(a){e.$set(e.formValues,"can_apply_half_shift",a)},expression:"formValues.can_apply_half_shift"}}):e._e()],1),t("v-col",{attrs:{md:"4",cols:"12"}},[e.masterSettings.holiday_inclusive?t("v-row",{staticClass:"pr-4",attrs:{"no-gutters":""}},[t("v-col",{attrs:{cols:"9"}},[t("v-select",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{items:e.holidayInclusiveType},model:{value:e.formValues.inclusive_leave,callback:function(a){e.$set(e.formValues,"inclusive_leave",a)},expression:"formValues.inclusive_leave"}},"v-select",e.veeValidate("inclusive_leave","Holiday Inclusive *"),!1))],1),t("v-col",{staticClass:"pl-2",attrs:{cols:"3"}},["Exclude Holiday And Off Day"!==e.formValues.inclusive_leave?t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{hint:"Holiday Inclusive Rule will only be applicable after the added leave count duration.",type:"number",min:"2"},model:{value:e.formValues.inclusive_leave_number,callback:function(a){e.$set(e.formValues,"inclusive_leave_number",a)},expression:"formValues.inclusive_leave_number"}},"v-text-field",e.veeValidate("inclusive_leave_number","Duration"),!1)):e._e()],1)],1):e._e()],1)],1)],1)]),e.masterSettings.years_of_service?t("div",[t("leave-rules-expansion-panel",{attrs:{"always-open":"",heading:"Year of Service","sub-heading":"Please Add Years of Service Rule"},model:{value:e.formValues.yos_rule,callback:function(a){e.$set(e.formValues,"yos_rule",a)},expression:"formValues.yos_rule"}},[t("v-row",{staticClass:"px-2"},[t("v-col",{attrs:{cols:"6"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"number",min:"1"},model:{value:e.formValues.yos_rule.years_of_service,callback:function(a){e.$set(e.formValues.yos_rule,"years_of_service",a)},expression:"formValues.yos_rule.years_of_service"}},"v-text-field",e.veeValidate("yos_rule.years_of_service","Years of Service"),!1))],1),t("v-col",{attrs:{cols:"6"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"number",min:"1",suffix:"Day"},model:{value:e.formValues.yos_rule.balance_added,callback:function(a){e.$set(e.formValues.yos_rule,"balance_added",a)},expression:"formValues.yos_rule.balance_added"}},"v-text-field",e.veeValidate("yos_rule.balance_added","Balance Added"),!1))],1),e.masterSettings.is_collapsible?t("v-col",{attrs:{md:"2"}},[t("input-form",{attrs:{title:"Collapse After"},model:{value:e.formValues.yos_rule.collapse_after,callback:function(a){e.$set(e.formValues.yos_rule,"collapse_after",a)},expression:"formValues.yos_rule.collapse_after"}})],1):e._e(),e.masterSettings.is_collapsible?t("v-col",{attrs:{md:"2"}},[t("v-select",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{items:e.durationType},model:{value:e.formValues.yos_rule.collapse_after_unit,callback:function(a){e.$set(e.formValues.yos_rule,"collapse_after_unit",a)},expression:"formValues.yos_rule.collapse_after_unit"}},"v-select",e.veeValidate("yos_rule.collapse_after_unit","Collapse After Unit"),!1))],1):e._e()],1)],1)],1):e._e(),t("div",[t("leave-rules-expansion-panel",{attrs:{heading:"Adjacent Offday Inclusive","sub-heading":"Adjacent Offday Inclusive"},model:{value:e.formValues.adjacent_offday_inclusive,callback:function(a){e.$set(e.formValues,"adjacent_offday_inclusive",a)},expression:"formValues.adjacent_offday_inclusive"}},[t("v-col",{staticClass:"mt-1",attrs:{cols:"6"}},[t("vue-auto-complete",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{endpoint:e.leaveTypeEndpoint,params:{master_setting:e.masterSettingId},"item-to-exclude":e.leaveId,"force-fetch":"","item-text":"name","item-value":"id",multiple:""},model:{value:e.formValues.adjacent_offday_inclusive_leave_types,callback:function(a){e.$set(e.formValues,"adjacent_offday_inclusive_leave_types",a)},expression:"formValues.adjacent_offday_inclusive_leave_types"}},"vue-auto-complete",e.veeValidate("adjacent_offday_inclusive_leave_types","Offday Inclusive Leave Types"),!1))],1),t("v-col",{attrs:{cols:"6"}},[t("v-select",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{items:e.adjacentOffdayHolidayInclusiveType},model:{value:e.formValues.adjacent_offday_inclusive_type,callback:function(a){e.$set(e.formValues,"adjacent_offday_inclusive_type",a)},expression:"formValues.adjacent_offday_inclusive_type"}},"v-select",e.veeValidate("adjacent_offday_inclusive_type","Offday Inclusive Type"),!1))],1)],1)],1),e.masterSettings.require_prior_approval?t("div",[t("leave-rules-expansion-panel",{attrs:{heading:"Require Prior Approval","sub-heading":"Require Prior Approval"},model:{value:e.formValues.require_prior_approval,callback:function(a){e.$set(e.formValues,"require_prior_approval",a)},expression:"formValues.require_prior_approval"}},[e._l(e.priorCount,(function(a,l){return[t("v-row",{key:a},[t("v-col",{attrs:{md:"3"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],attrs:{type:"number",min:"1"},model:{value:e.prior_approval_rules[l].prior_approval_request_for,callback:function(a){e.$set(e.prior_approval_rules[l],"prior_approval_request_for",a)},expression:"\n                          prior_approval_rules[index]\n                          .prior_approval_request_for\n                      "}},"v-text-field",e.veeValidate("prior_approval_request_for-"+(l+1),"Prior Approval Request For (In Days)"),!1))],1),t("v-col",{attrs:{md:"3"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],attrs:{type:"number",min:"1"},model:{value:e.prior_approval_rules[l].prior_approval,callback:function(a){e.$set(e.prior_approval_rules[l],"prior_approval",a)},expression:"\n                          prior_approval_rules[index].prior_approval\n                      "}},"v-text-field",e.veeValidate("prior_approval-"+(l+1),"Prior Approval"),!1))],1),t("v-col",{attrs:{md:"3"}},[t("v-select",e._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],attrs:{items:["Days","Hours","Minutes"]},model:{value:e.prior_approval_rules[l].prior_approval_unit,callback:function(a){e.$set(e.prior_approval_rules[l],"prior_approval_unit",a)},expression:"\n                          prior_approval_rules[index]\n                          .prior_approval_unit\n                      "}},"v-select",e.veeValidate("prior_approval_unit","Prior Approval Unit"),!1))],1),t("v-col",{key:a,staticClass:"py-10"},[t("span",[e.priorCount-1===l?t("v-icon",{attrs:{color:"green"},domProps:{textContent:e._s("mdi-plus-circle-outline")},on:{click:e.addPriorRules}}):e._e(),a>1?t("v-icon",{attrs:{color:"red"},domProps:{textContent:e._s("mdi-minus-circle-outline")},on:{click:function(a){return e.removePriorRules(l)}}}):e._e()],1)])],1)]}))],2)],1):e._e()],1)],1)],1)],1),t("v-spacer"),e.view?e._e():t("v-footer",{attrs:{fixed:"",height:"auto"}},[t("v-col",{staticClass:"text-right"},[e.edit?t("v-btn",{staticClass:"mr-3",attrs:{right:"",depressed:"",color:"primary"},on:{click:e.updateLeaveRule}},[e._v(" Update ")]):t("v-btn",{staticClass:"mr-3",attrs:{right:"",depressed:"",color:"primary"},on:{click:e.createLeaveRule}},[t("v-icon",{attrs:{size:"14",left:""}},[e._v(" mdi-content-save-outline ")]),e._v(" Save ")],1),t("v-btn",{attrs:{right:"",outlined:"",color:"primary"},on:{click:function(a){return e.clear(e.formValues)}}},[e._v(" Clear ")])],1)],1)],1)},W=[],J=(t("b64b"),function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-row",[t("v-text-field",{attrs:{label:e.title,error:e.errorMessages.length>0,"error-messages":e.errorMessages,type:"number",min:"1",max:"999"},model:{value:e.values,callback:function(a){e.values=a},expression:"values"}}),e.combinetext?t("span",[e._v(e._s(e.combinetext))]):e._e()],1)}),Q=[],Z=(t("d3b7"),t("ddb0"),{mixins:[i["a"]],props:{title:{type:String,default:""},combinetext:{type:String,default:""},value:{type:[Boolean,Number,String,Object],default:!1},errorMessages:{type:[String,Array],default:function(){return[]}}},data:function(){return{values:this.value}},watch:{value:function(){this.values=this.value},values:function(e){this.$emit("input",e)}}}),X=Z,ee=Object(h["a"])(X,J,Q,!1,null,null,null),ae=ee.exports;V()(ee,{VRow:q["a"],VTextField:M["a"]});var te={components:{VueAutoComplete:N["default"],LeaveRulesExpansionPanel:$,InputForm:ae,SwitchToggle:R["a"]},mixins:[n["a"]],props:{slug:{type:String,required:!0},masterSettings:{type:Object,required:!0},id:{type:[String,Number],default:""},leaveId:{type:Number,default:void 0},edit:{type:Boolean,default:!1},view:{type:Boolean,default:!1},clone:{type:Boolean,default:!1},leaveName:{type:String,default:""},idleLeaveTypeList:{type:Array,default:function(){return[]}}},data:function(){return{leaveRuleName:"",formValues:{name:"",description:"",accumulation_rule:null,renewal_rule:null,deduction_rule:null,yos_rule:{years_of_service:null,collapse_after:null,collapse_after_unit:null},compensatory_rule:null,irregularity_report:!1,is_archived:!1,limit_leave_to:null,limit_leave_duration:null,min_balance:null,max_balance:null,limit_leave_occurrence:null,limit_leave_occurrence_duration:null,maximum_continuous_leave_length:null,minimum_continuous_leave_length:null,holiday_inclusive:null,inclusive_leave_number:null,required_experience_duration:null,is_paid:!1,proportionate_on_joined_date:null,can_apply_half_shift:null,employee_can_apply:!1,admin_can_assign:!1,can_apply_beyond_zero_balance:null,beyond_limit:null,required_experience:null,require_prior_approval:!1,prior_approval_rules:[],require_docs:null,require_docs_for:null,start_date:null,end_date:null,depletion_required:null,depletion_leave_types:[],leave_type:this.leaveId,cloned_from:null,adjacent_offday_inclusive:!1,adjacent_offday_inclusive_leave_types:[],adjacent_offday_inclusive_type:"",inclusive_leave:"Exclude Holiday And Off Day"},prior_approval_rules:[{prior_approval_request_for:"",prior_approval:"",prior_approval_unit:""}],durationType:["Years","Months","Days"],mapKeys:{renewal:"renewal_rule",compensatory:"compensatory_rule",deductible:"deduction_rule",paid:"paid",unpaid:"is_paid",leave_limitations:["min_balance","max_balance","limit_leave_occurrence","limit_leave_occurrence_duration","maximum_continuous_leave_length","minimum_continuous_leave_length"],occurrences:["limit_leave_occurrence","limit_leave_occurrence_duration"],beyond_balance:["can_apply_beyond_zero_balance","beyond_limit"],proportionate_leave:"proportionate_on_joined_date",depletion_required:["depletion_required","depletion_leave_types"],require_experience:["require_experience","required_experience_duration"],require_time_period:["start_date","end_date"],require_prior_approval:["require_prior_approval","prior_approval_days"],require_document:["require_docs","require_docs_for"],holiday_inclusive:"holiday_inclusive",employees_can_apply:"employee_can_apply",admin_can_assign:"admin_can_assign",carry_forward:"max_balance_forwarded",encashment:"max_balance_encashed",collapsible:"collapsible",years_of_experience:"yos_rule"},holidayInclusiveType:["Exclude Holiday And Off Day","Include Holiday","Include Off Day","Include Holiday And Off Day"],adjacentOffdayHolidayInclusiveType:["Include Holiday","Include Off Day","Include Holiday And Off Day"],leaveTypeEndpoint:"",priorCount:1}},watch:{leaveId:function(){this.formValues.leave_type=this.leaveId},edit:function(){this.getLeaveRule()}},created:function(){this.leaveId&&(this.formValues.leave_type=this.leaveId),(this.edit||this.view||this.clone)&&this.getLeaveRule(),this.masterSettingId=this.$route.query.name||this.masterSettings.id,this.leaveTypeEndpoint=I["a"].getLeaveRules(this.slug)},methods:{clear:function(){this.$refs.yosRule.reset(),this.clearNonFieldErrors(),this.$validator.errors.clear(),this.formValues.yos_rule={}},createLeaveRule:function(){var e=this,a=I["a"].getLeaveRules(this.slug);this.checkOptionalRule(),this.formValues.prior_approval_rules=this.formValues.require_prior_approval?this.prior_approval_rules:[],this.crud.message="Successfully created Leave Rule Settings.",this.setDefaultBooleanField(),this.insertData(a,this.formValues,{clearForm:!1}).then((function(){e.$emit("close")})).catch((function(a){e.pushIndexedErrors(a,"prior_approval_request_for",!1,""),e.pushIndexedErrors(a,"prior_approval",!1,"")}))},updateLeaveRule:function(){var e=this,a=I["a"].getLeaveRule(this.slug,this.id);this.checkOptionalRule(),this.crud.message="Successfully Updated Leave Rule Settings.",this.formValues.prior_approval_rules=this.formValues.require_prior_approval?this.prior_approval_rules:[],this.setDefaultBooleanField(),this.putData(a,this.formValues,{clearForm:!1}).then((function(){e.$emit("close")})).catch((function(a){e.pushIndexedErrors(a,"prior_approval_request_for",!1,""),e.pushIndexedErrors(a,"prior_approval",!1,"")}))},getLeaveRule:function(){var e=this,a=I["a"].getLeaveRule(this.slug,this.id);this.getData(a).then((function(a){if(e.formValues=a,e.prior_approval_rules=e.formValues.prior_approval_rules,e.leaveRuleName=e.formValues.name,e.clone){e.formValues.cloned_from=e.formValues.id,e.formValues.leave_type=e.leaveId;var t=e.formValues.adjacent_offday_inclusive_leave_types;e.formValues.adjacent_offday_inclusive_leave_types=[],e.idleLeaveTypeList.forEach((function(a){a.leave_type&&t.includes(a.leave_type.cloned_from)&&e.formValues.adjacent_offday_inclusive_leave_types.push(a.leave_type.id)}))}e.priorCount=e.formValues.prior_approval_rules.length,0===e.priorCount&&(e.formValues.prior_approval_rules[0]={prior_approval_request_for:"",prior_approval:"",prior_approval_unit:""},e.priorCount=1)}))},mapFormValues:function(e){var a=this;Object.keys(e).forEach((function(t){!1===e[t]&&"boolean"!==typeof a.formValues[a.mapKeys[t]]&&(a.formValues[a.mapKeys[t]]=null)}))},checkOptionalRule:function(){this.masterSettings.paid&&!this.masterSettings.unpaid?this.formValues.is_paid=!0:!this.masterSettings.paid&&this.masterSettings.unpaid&&(this.formValues.is_paid=!1),this.masterSettings.employees_can_apply||(this.formValues.employee_can_apply=!1),this.masterSettings.admin_can_assign||(this.formValues.admin_can_assign=!1),this.masterSettings.half_shift_leave||(this.formValues.can_apply_half_shift=!1),this.formValues.require_prior_approval||(this.formValues.prior_approval_rules=[]),this.masterSettings.require_prior_approval||(this.formValues.prior_approval_rules=[],this.formValues.require_prior_approval=!1),this.masterSettings.require_document||(this.formValues.require_docs=null,this.formValues.require_docs_for=null),this.formValues.adjacent_offday_inclusive||(this.formValues.adjacent_offday_inclusive_leave_types=[],this.formValues.adjacent_offday_inclusive_type=""),this.masterSettings.holiday_inclusive?"Exclude Holiday And Off Day"===this.formValues.inclusive_leave&&(this.formValues.inclusive_leave_number=0):(this.formValues.inclusive_leave=null,this.formValues.inclusive_leave_number=null)},addPriorRules:function(){this.prior_approval_rules[this.priorCount-1].prior_approval_request_for&&this.prior_approval_rules[this.priorCount-1].prior_approval&&this.prior_approval_rules[this.priorCount-1].prior_approval_unit&&(this.prior_approval_rules[this.priorCount]={prior_approval_request_for:"",prior_approval:"",prior_approval_unit:""},this.priorCount+=1)},removePriorRules:function(e){this.priorCount>1&&(this.prior_approval_rules.splice(e,1),this.priorCount-=1)},setDefaultBooleanField:function(){this.formValues.employee_can_apply=this.formValues.employee_can_apply||!1,this.formValues.admin_can_assign=this.formValues.admin_can_assign||!1,this.formValues.is_paid=this.formValues.is_paid||!1}}},le=te,re=Object(h["a"])(le,G,W,!1,null,null,null),ie=re.exports;V()(re,{VBtn:j["a"],VCard:b["a"],VCardText:g["c"],VCol:x["a"],VContainer:F["a"],VDivider:A["a"],VFooter:P["a"],VForm:w["a"],VIcon:B["a"],VRow:q["a"],VSelect:H["a"],VSpacer:k["a"],VTextField:M["a"],VTextarea:z["a"]});var se=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-form",{ref:"compensatoryRules",on:{submit:function(a){return a.preventDefault(),e.getFormAction.apply(null,arguments)}}},[t("vue-card-title",{attrs:{title:e.leaveName,subtitle:e.leaveRuleName,icon:"mdi-file-document-outline",dark:"",closable:""},on:{close:function(a){e.clear(e.formValues),e.$emit("close")}}}),t("v-divider"),t("v-container",[t("v-card-text",[t("v-row",[t("v-col",{attrs:{cols:"12"}},[e.nonFieldErrors?t("non-field-form-errors",{attrs:{"non-field-errors":e.nonFieldErrors}}):e._e()],1),t("v-card",{staticClass:"lighten-4 elevation-1 mb-5",attrs:{color:"grey",width:"100%"}},[t("div",{staticClass:"px-3"},[t("v-col",{attrs:{cols:"6"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{counter:"150"},model:{value:e.formValues.name,callback:function(a){e.$set(e.formValues,"name",a)},expression:"formValues.name"}},"v-text-field",e.veeValidate("name","Rule Name"),!1))],1),t("v-col",{attrs:{md:"12"}},[t("v-textarea",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{rows:2,counter:"150"},model:{value:e.formValues.description,callback:function(a){e.$set(e.formValues,"description",a)},expression:"formValues.description"}},"v-textarea",e.veeValidate("description","Description"),!1))],1)],1)]),t("v-card",{staticClass:"lighten-4 elevation-1 mb-5",attrs:{color:"grey",width:"100%"}},[t("div",{staticClass:"px-5"},[t("v-row",[t("v-col",{attrs:{md:"4",cols:"12"}},[e.masterSettings.paid?t("switch-toggle",{attrs:{heading:"Paid Leave","sub-heading":"Determine whether a leave is paid or not"},model:{value:e.formValues.is_paid,callback:function(a){e.$set(e.formValues,"is_paid",a)},expression:"formValues.is_paid"}}):e._e()],1),t("v-col",{attrs:{md:"4",cols:"12"}},[e.masterSettings.employees_can_apply?t("switch-toggle",{attrs:{heading:"Employees can apply for this leave","sub-heading":"Employees can apply for this leave"},model:{value:e.formValues.employee_can_apply,callback:function(a){e.$set(e.formValues,"employee_can_apply",a)},expression:"formValues.employee_can_apply"}}):e._e()],1),t("v-col",{attrs:{md:"4",cols:"12"}},[e.masterSettings.admin_can_assign?t("switch-toggle",{attrs:{heading:"Admin can assign leave to employees","sub-heading":"Admin can assign leave to employees"},model:{value:e.formValues.admin_can_assign,callback:function(a){e.$set(e.formValues,"admin_can_assign",a)},expression:"formValues.admin_can_assign"}}):e._e()],1),t("v-col",{attrs:{md:"4",cols:"12"}},[e.masterSettings.half_shift_leave?t("switch-toggle",{attrs:{heading:"Can apply half day / shift leave","sub-heading":"Can apply half day / shift leave"},model:{value:e.formValues.can_apply_half_shift,callback:function(a){e.$set(e.formValues,"can_apply_half_shift",a)},expression:"formValues.can_apply_half_shift"}}):e._e()],1),t("v-col",{attrs:{md:"4",cols:"12"}},[e.masterSettings.holiday_inclusive?t("v-row",{staticClass:"pr-4",attrs:{"no-gutters":""}},[t("v-col",{attrs:{cols:"9"}},[t("v-select",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{items:e.holidayInclusiveType},model:{value:e.formValues.inclusive_leave,callback:function(a){e.$set(e.formValues,"inclusive_leave",a)},expression:"formValues.inclusive_leave"}},"v-select",e.veeValidate("inclusive_leave","Holiday Inclusive *"),!1))],1),t("v-col",{staticClass:"pl-2",attrs:{cols:"3"}},["Exclude Holiday And Off Day"!==e.formValues.inclusive_leave?t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{hint:"Holiday Inclusive Rule will only be applicable after the added leave count duration.",type:"number",min:"2"},model:{value:e.formValues.inclusive_leave_number,callback:function(a){e.$set(e.formValues,"inclusive_leave_number",a)},expression:"formValues.inclusive_leave_number"}},"v-text-field",e.veeValidate("inclusive_leave_number","Duration"),!1)):e._e()],1)],1):e._e()],1)],1)],1)]),t("v-col",{staticClass:"pa-0",attrs:{cols:"12"}},[e.masterSettings.compensatory?t("div",[t("leave-rules-expansion-panel",{attrs:{heading:"Compensatory","sub-heading":"Compensatory Settings"},model:{value:e.formValues.compensatory,callback:function(a){e.$set(e.formValues,"compensatory",a)},expression:"formValues.compensatory"}},[e._l(e.CompensatoryCount,(function(a,l){return[t("v-row",{key:a,staticClass:"px-8"},[t("v-col",{attrs:{md:"4"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"number",min:"1",suffix:"Days"},model:{value:e.compensatory_rules[l].balance_to_grant,callback:function(a){e.$set(e.compensatory_rules[l],"balance_to_grant",a)},expression:"compensatory_rules[index].balance_to_grant"}},"v-text-field",e.veeValidate("balance_to_grant-"+(l+1),"Number of leave provided when work on holiday and off day (per day)"),!1))],1),t("v-col",{attrs:{md:"4"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"number",min:"1"},model:{value:e.compensatory_rules[l].hours_in_off_day,callback:function(a){e.$set(e.compensatory_rules[l],"hours_in_off_day",a)},expression:"compensatory_rules[index].hours_in_off_day"}},"v-text-field",e.veeValidate("hours_in_off_day-"+(l+1),"Hours In Holiday and Off Day"),!1))],1),t("v-col",{staticClass:"py-10"},[t("span",[e.CompensatoryCount-1===l?t("v-icon",{attrs:{color:"green"},domProps:{textContent:e._s("mdi-plus-circle-outline")},on:{click:e.addRule}}):e._e(),a>1?t("v-icon",{attrs:{color:"red"},domProps:{textContent:e._s("mdi-minus-circle-outline")},on:{click:function(a){return e.removeRule(l)}}}):e._e()],1)])],1)]})),[t("v-row",{key:e.count,staticClass:"px-8"},[e.masterSettings.collapsible?t("v-col",{attrs:{md:"4"}},[t("v-text-field",e._b({attrs:{type:"number",min:"1",suffix:e.formValues.leave_collapsible_rule.collapse_after_unit||"Days"},model:{value:e.formValues.leave_collapsible_rule.collapse_after,callback:function(a){e.$set(e.formValues.leave_collapsible_rule,"collapse_after",a)},expression:"\n                        formValues.leave_collapsible_rule.collapse_after\n                      "}},"v-text-field",e.veeValidate("collapse_after","Collapse After"),!1))],1):e._e(),e.masterSettings.collapsible?t("v-col",{attrs:{md:"4"}},[t("v-select",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{items:e.durationType},model:{value:e.formValues.leave_collapsible_rule.collapse_after_unit,callback:function(a){e.$set(e.formValues.leave_collapsible_rule,"collapse_after_unit",a)},expression:"\n                        formValues.leave_collapsible_rule.collapse_after_unit\n                      "}},"v-select",e.veeValidate("collapse_after_unit","Collapse After Unit"),!1))],1):e._e(),t("v-col",{attrs:{cols:"12"}},[t("v-switch",{attrs:{label:"Requires Approval"},model:{value:e.formValues.set_approval,callback:function(a){e.$set(e.formValues,"set_approval",a)},expression:"formValues.set_approval"}})],1)],1)]],2)],1):e._e()]),t("v-col",{staticClass:"pa-0",attrs:{cols:"12"}},[t("div",[t("leave-rules-expansion-panel",{attrs:{heading:"Adjacent Offday Inclusive","sub-heading":"Adjacent Offday Inclusive"},model:{value:e.formValues.adjacent_offday_inclusive,callback:function(a){e.$set(e.formValues,"adjacent_offday_inclusive",a)},expression:"formValues.adjacent_offday_inclusive"}},[t("v-col",{staticClass:"mt-1",attrs:{cols:"6"}},[t("vue-auto-complete",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{endpoint:e.leaveTypeEndpoint,params:{master_setting:e.masterSettingId},"item-to-exclude":e.leaveId,"force-fetch":"","item-text":"name","item-value":"id",multiple:""},model:{value:e.formValues.adjacent_offday_inclusive_leave_types,callback:function(a){e.$set(e.formValues,"adjacent_offday_inclusive_leave_types",a)},expression:"formValues.adjacent_offday_inclusive_leave_types"}},"vue-auto-complete",e.veeValidate("adjacent_offday_inclusive_leave_types","Offday Inclusive Leave Types"),!1))],1),t("v-col",{attrs:{cols:"6"}},[t("v-select",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{items:e.adjacentOffdayHolidayInclusiveType},model:{value:e.formValues.adjacent_offday_inclusive_type,callback:function(a){e.$set(e.formValues,"adjacent_offday_inclusive_type",a)},expression:"formValues.adjacent_offday_inclusive_type"}},"v-select",e.veeValidate("adjacent_offday_inclusive_type","Offday Inclusive Type"),!1))],1)],1)],1)]),t("v-col",{staticClass:"pa-0",attrs:{cols:"12"}},[e.masterSettings.require_experience?t("div",[t("leave-rules-expansion-panel",{attrs:{heading:"Require Experience","sub-heading":"Require Experience"},model:{value:e.formValues.required_experience,callback:function(a){e.$set(e.formValues,"required_experience",a)},expression:"formValues.required_experience"}},[t("v-col",{attrs:{md:"4"}},[t("v-row",[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],staticClass:"pl-2",attrs:{type:"number",min:"1",suffix:e.formValues.required_experience_duration||"Days"},model:{value:e.formValues.required_experience,callback:function(a){e.$set(e.formValues,"required_experience",a)},expression:"formValues.required_experience"}},"v-text-field",e.veeValidate("required_experience","Required Experience"),!1))],1)],1),t("v-col",{attrs:{md:"4"}},[t("v-select",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{items:e.durationType},model:{value:e.formValues.required_experience_duration,callback:function(a){e.$set(e.formValues,"required_experience_duration",a)},expression:"formValues.required_experience_duration"}},"v-select",e.veeValidate("required_experience_duration","Required Experience Duration"),!1))],1)],1)],1):e._e()]),t("v-col",{staticClass:"pa-0",attrs:{cols:"12"}},[e.masterSettings.deductible?t("div",[t("leave-rules-expansion-panel",{attrs:{heading:"Deduction Rule","sub-heading":"Please Add Deduction Rule"},model:{value:e.deduction_rule,callback:function(a){e.deduction_rule=a},expression:"deduction_rule"}},[t("v-row",{staticClass:"pa-2"},[t("v-col",{attrs:{md:"2"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"number",min:"1"},model:{value:e.deduction_rule.duration,callback:function(a){e.$set(e.deduction_rule,"duration",a)},expression:"deduction_rule.duration"}},"v-text-field",e.veeValidate("deduction_rule.duration","Duration"),!1))],1),t("v-col",{attrs:{md:"3"}},[t("v-select",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{items:e.durationType},model:{value:e.deduction_rule.duration_type,callback:function(a){e.$set(e.deduction_rule,"duration_type",a)},expression:"deduction_rule.duration_type"}},"v-select",e.veeValidate("deduction_rule.duration_type","Duration Type"),!1))],1),t("v-col",{attrs:{md:"4"}},[t("v-row",[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"number",min:"1",suffix:"Days"},model:{value:e.deduction_rule.balance_deducted,callback:function(a){e.$set(e.deduction_rule,"balance_deducted",a)},expression:"deduction_rule.balance_deducted"}},"v-text-field",e.veeValidate("deduction_rule.balance_deducted","Balance Deducted"),!1))],1)],1)],1)],1)],1):e._e()]),t("v-col",{staticClass:"pa-0",attrs:{cols:"12"}},[e.masterSettings.require_document?t("div",[t("leave-rules-expansion-panel",{attrs:{heading:"Require Document","sub-heading":"Require Document"},model:{value:e.formValues.require_docs,callback:function(a){e.$set(e.formValues,"require_docs",a)},expression:"formValues.require_docs"}},[t("v-col",{attrs:{md:"6"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{suffix:"Days",type:"number",min:"1"},model:{value:e.formValues.require_docs_for,callback:function(a){e.$set(e.formValues,"require_docs_for",a)},expression:"formValues.require_docs_for"}},"v-text-field",e.veeValidate("require_docs_for","Require Document For"),!1))],1)],1)],1):e._e()]),t("v-col",{staticClass:"pa-0",attrs:{cols:"12"}},[e.masterSettings.prior_approval?t("div",[t("leave-rules-expansion-panel",{attrs:{heading:"Require Prior Approval","sub-heading":"Require Prior Approval"},model:{value:e.formValues.prior_approval_days,callback:function(a){e.$set(e.formValues,"prior_approval_days",a)},expression:"formValues.prior_approval_days"}},[t("v-col",{attrs:{md:"6"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"number",min:"1"},model:{value:e.formValues.prior_approval_days,callback:function(a){e.$set(e.formValues,"prior_approval_days",a)},expression:"formValues.prior_approval_days"}},"v-text-field",e.veeValidate("prior_approval_days","Prior Approval Days"),!1))],1)],1)],1):e._e()])],1)],1)],1),e.view?e._e():t("v-footer",{attrs:{fixed:"",height:"auto"}},[t("v-col",{staticClass:"text-right"},[e.edit?t("v-btn",{staticClass:"mr-3",attrs:{color:"primary",right:""},on:{click:e.updateLeaveRule}},[e._v(" Update ")]):t("v-btn",{staticClass:"mr-3",attrs:{right:"",depressed:"",color:"primary"},on:{click:e.createLeaveRule}},[t("v-icon",{attrs:{size:"14",left:""}},[e._v(" mdi-content-save-outline ")]),e._v(" Save ")],1),t("v-btn",{attrs:{right:"",outlined:"",color:"primary"},on:{click:function(a){return e.clear(e.formValues)}}},[e._v(" Clear ")])],1)],1)],1)},oe=[],ne={components:{VueAutoComplete:N["default"],LeaveRulesExpansionPanel:$,SwitchToggle:R["a"]},mixins:[n["a"]],props:{slug:{type:String,required:!0},masterSettings:{type:Object,required:!0},id:{type:[String,Number],default:""},leaveId:{type:[String,Number],default:""},edit:{type:Boolean,default:!1},view:{type:Boolean,default:!1},clone:{type:Boolean,default:!1},leaveName:{type:String,default:""},idleLeaveTypeList:{type:Array,default:function(){return[]}}},data:function(){return{deduction_rule:{},settingId:this.$route.query.name,leaveRuleName:"",formValues:{name:"",description:"",accumulation_rule:null,renewal_rule:null,deduction_rule:null,duration:null,duration_type:null,balance_deducted:null,yos_rule:null,compensatory_rules:[],leave_collapsible_rule:{collapse_after:null,collapse_after_unit:null},compensatory:!1,irregularity_report:!1,is_archived:!1,limit_leave_to:null,limit_leave_duration:null,min_balance:null,max_balance:null,limit_leave_occurrence:null,limit_leave_occurrence_duration:null,maximum_continuous_leave_length:null,minimum_continuous_leave_length:null,holiday_inclusive:null,is_paid:!1,proportionate_on_joined_date:null,can_apply_half_shift:null,employee_can_apply:!1,admin_can_assign:!1,can_apply_beyond_zero_balance:null,beyond_limit:null,required_experience:null,require_prior_approval:!1,prior_approval_days:null,require_docs:null,require_docs_for:null,start_date:null,end_date:null,leave_irregularities:{weekly_limit:null,fortnightly_limit:null,monthly_limit:null,quarterly_limit:null,semi_annually_limit:null,annually_limit:null},depletion_required:!1,depletion_leave_types:[],leave_type:this.leaveId,cloned_from:null,adjacent_offday_inclusive:!1,adjacent_offday_inclusive_leave_types:[],adjacent_offday_inclusive_type:"",inclusive_leave:"Exclude Holiday And Off Day",set_approval:!1},leaveTypeEndpoint:"",durationType:["Years","Months","Days"],mapKeys:{renewal:"renewal_rule",compensatory:"compensatory_rules",deductible:"deduction_rule",paid:"paid",unpaid:"is_paid",leave_limitations:["min_balance","max_balance","limit_leave_occurrence","limit_leave_occurrence_duration","maximum_continuous_leave_length","minimum_continuous_leave_length"],occurrences:["limit_leave_occurrence","limit_leave_occurrence_duration"],beyond_balance:["can_apply_beyond_zero_balance","beyond_limit"],proportionate_leave:"proportionate_on_joined_date",depletion_required:["depletion_leave_types","depletion_required"],require_experience:["require_experience","required_experience_duration"],require_time_period:["start_date","end_date"],require_prior_approval:["require_prior_approval","prior_approval_days"],require_document:["require_docs","require_docs_for"],holiday_inclusive:"holiday_inclusive",employees_can_apply:"employee_can_apply",admin_can_assign:"admin_can_assign",carry_forward:"max_balance_forwarded",encashment:"max_balance_encashed",collapsible:"collapsible",years_of_experience:"yos_rule"},holidayInclusiveType:["Exclude Holiday And Off Day","Include Holiday","Include Off Day","Include Holiday And Off Day"],adjacentOffdayHolidayInclusiveType:["Include Holiday","Include Off Day","Include Holiday And Off Day"],count:"",CompensatoryCount:1,compensatory_rules:[{balance_to_grant:null,hours_in_off_day:null}]}},watch:{leaveId:function(){this.formValues.leave_type=this.leaveId},edit:function(){this.getLeaveRule()}},created:function(){this.leaveTypeEndpoint=I["a"].getLeaveTypes(this.slug),this.masterSettingId=this.$route.query.name||this.masterSettings.id,this.mapFormValues(this.masterSettings),(this.edit||this.view||this.clone)&&this.getLeaveRule()},methods:{clear:function(){this.$refs.compensatoryRules.reset(),this.errors.clear(),this.formValues.compensatory_rules={},this.clearNonFieldErrors(),this.$validator.errors.clear()},checkOptionalRule:function(){null!==this.formValues.beyond_limit&&this.formValues.beyond_limit?this.formValues.can_apply_beyond_zero_balance=!0:this.formValues.can_apply_beyond_zero_balance=!1,null!==this.formValues.require_docs_for&&this.formValues.require_docs_for?this.formValues.require_docs=!0:this.formValues.require_docs=!1;var e=function(e){return p()(L()(e))?null:e};this.formValues.deduction_rule=e(this.deduction_rule),this.masterSettings.paid&&!this.masterSettings.unpaid?this.formValues.is_paid=!0:!this.masterSettings.paid&&this.masterSettings.unpaid&&(this.formValues.is_paid=!1),this.masterSettings.proportionate_leave||(this.formValues.proportionate_on_joined_date=!1),this.masterSettings.employees_can_apply||(this.formValues.employee_can_apply=!1),this.masterSettings.admin_can_assign||(this.formValues.admin_can_assign=!1),this.masterSettings.half_shift_leave||(this.formValues.can_apply_half_shift=!1),this.masterSettings.accumulation||(this.formValues.accumulation_rule=null),this.masterSettings.renewal||(this.formValues.renewal_rule=null),this.masterSettings.deductible||(this.formValues.deduction_rule=null),this.masterSettings.leave_irregularities||(this.formValues.leave_irregularity=null),this.masterSettings.leave_limitations||(this.formValues.limit_leave_to=null,this.formValues.limit_leave_duration=null,this.formValues.limit_leave_duration_type=null,this.formValues.max_balance=null,this.formValues.min_balance=null,this.formValues.limit_leave_occurrence=null,this.formValues.limit_leave_occurrence_duration=null,this.formValues.limit_leave_occurrence_duration_type=null,this.formValues.maximum_continuous_leave_length=null,this.formValues.minimum_continuous_leave_length=null),this.masterSettings.occurrences||(this.formValues.limit_leave_occurrence=null,this.formValues.limit_leave_occurrence_duration=null,this.formValues.limit_leave_occurrence_duration_type=null),this.masterSettings.continuous||(this.formValues.maximum_continuous_leave_length=null,this.formValues.minimum_continuous_leave_length=null),this.masterSettings.beyond_balance||(this.formValues.can_apply_beyond_zero_balance=null,this.formValues.beyond_limit=null),this.masterSettings.depletion_required||(this.formValues.depletion_leave_types=[],this.formValues.depletion_required=null),this.masterSettings.require_experience||(this.formValues.required_experience=null,this.formValues.required_experience_duration=null),this.masterSettings.require_time_period||(this.formValues.start_date=null,this.formValues.end_date=null),this.formValues.require_prior_approval||(this.formValues.prior_approval=null,this.formValues.prior_approval=null),this.masterSettings.require_prior_approval||(this.formValues.prior_approval=null,this.formValues.prior_approval=null,this.formValues.require_prior_approval=!1),this.masterSettings.require_document||(this.formValues.require_docs=null,this.formValues.require_docs_for=null),this.masterSettings.collapsible||(this.formValues.leave_collapsible_rule.collapse_after=null,this.formValues.leave_collapsible_rule=[]),this.masterSettings.compensatory||(this.formValues.compensatory_rules=[],this.formValues.compensatory=!1),this.formValues.compensatory||(this.formValues.compensatory_rules=[]),this.formValues.adjacent_offday_inclusive||(this.formValues.adjacent_offday_inclusive_leave_types=[],this.formValues.adjacent_offday_inclusive_type=""),this.masterSettings.holiday_inclusive?"Exclude Holiday And Off Day"===this.formValues.inclusive_leave&&(this.formValues.inclusive_leave_number=0):(this.formValues.inclusive_leave=null,this.formValues.inclusive_leave_number=null)},createLeaveRule:function(){var e=this;this.checkOptionalRule();var a=I["a"].getLeaveRules(this.slug);this.formValues.compensatory_rules=this.formValues.compensatory?this.compensatory_rules:[],""==this.formValues.leave_collapsible_rule.collapse_after&&(this.formValues.leave_collapsible_rule.collapse_after=null),this.crud.message="Successfully created Leave Rule Settings.",this.setDefaultBooleanField(),this.insertData(a,this.formValues,{clearForm:!1}).then((function(){e.$emit("close"),e.clear(e.formValues)})).catch((function(a){e.pushIndexedErrors(a,"balance_to_grant",!1,""),e.pushIndexedErrors(a,"hours_in_off_day",!1,"")}))},getLeaveRule:function(){var e=this,a=I["a"].getLeaveRule(this.slug,this.id);this.getData(a).then((function(a){if(e.formValues=a,e.compensatory_rules=e.formValues.compensatory_rules,e.leaveRuleName=a.name,e.clone){e.formValues.cloned_from=e.formValues.id,e.formValues.leave_type=e.leaveId;var t=e.formValues.adjacent_offday_inclusive_leave_types;e.formValues.adjacent_offday_inclusive_leave_types=[],e.idleLeaveTypeList.forEach((function(a){a.leave_type&&t.includes(a.leave_type.cloned_from)&&e.formValues.adjacent_offday_inclusive_leave_types.push(a.leave_type.id)}))}e.deduction_rule=e.formValues.deduction_rule||{},e.CompensatoryCount=e.compensatory_rules.length,0===e.CompensatoryCount&&(e.compensatory_rules[0]={balance_to_grant:null,hours_in_off_day:null},e.CompensatoryCount=1),e.formValues.leave_collapsible_rule||(e.formValues.leave_collapsible_rule={collapse_after:null,collapse_after_unit:null})}))},updateLeaveRule:function(){var e=this;this.checkOptionalRule();var a=I["a"].getLeaveRule(this.slug,this.id);this.crud.message="Successfully Updated Leave Rule Settings.",this.formValues.compensatory_rules=this.formValues.compensatory?this.compensatory_rules:[],""==this.formValues.leave_collapsible_rule.collapse_after&&(this.formValues.leave_collapsible_rule.collapse_after=null),this.setDefaultBooleanField(),this.putData(a,this.formValues,{clearForm:!1}).then((function(){e.$emit("close"),e.clear(e.formValues),e.clearNonFieldErrors(),e.$validator.errors.clear()})).catch((function(a){e.pushIndexedErrors(a,"balance_to_grant",!1,""),e.pushIndexedErrors(a,"hours_in_off_day",!1,"")}))},mapFormValues:function(e){var a=this;Object.keys(e).forEach((function(t){!1===e[t]&&("boolean"===typeof a.formValues[a.mapKeys[t]]||(a.formValues[a.mapKeys[t]]=null))}))},addRule:function(){this.compensatory_rules[this.CompensatoryCount-1].balance_to_grant&&this.compensatory_rules[this.CompensatoryCount-1].hours_in_off_day&&(this.compensatory_rules[this.CompensatoryCount]={balance_to_grant:null,hours_in_off_day:null},this.CompensatoryCount+=1)},removeRule:function(e){this.CompensatoryCount>1&&(this.compensatory_rules.splice(e,1),this.CompensatoryCount-=1)},setDefaultBooleanField:function(){this.formValues.employee_can_apply=this.formValues.employee_can_apply||!1,this.formValues.admin_can_assign=this.formValues.admin_can_assign||!1,this.formValues.is_paid=this.formValues.is_paid||!1}}},ue=ne,ce=Object(h["a"])(ue,se,oe,!1,null,null,null),de=ce.exports;V()(ce,{VBtn:j["a"],VCard:b["a"],VCardText:g["c"],VCol:x["a"],VContainer:F["a"],VDivider:A["a"],VFooter:P["a"],VForm:w["a"],VIcon:B["a"],VRow:q["a"],VSelect:H["a"],VSwitch:S["a"],VTextField:M["a"],VTextarea:z["a"]});var _e=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-form",{ref:"timeOffRule"},[t("vue-card-title",{attrs:{title:e.leaveName,subtitle:e.leaveRuleName,icon:"mdi-file-document-outline",dark:"",closable:""},on:{close:function(a){e.clear(e.formValues),e.$emit("close")}}}),t("v-divider"),t("v-container",[t("v-card-text",[t("v-row",{attrs:{"no-gutters":""}},[t("v-col",{attrs:{cols:"12"}},[e.nonFieldErrors?t("non-field-form-errors",{attrs:{"non-field-errors":e.nonFieldErrors}}):e._e()],1),t("v-card",{staticClass:"lighten-4 elevation-1 mb-5",attrs:{color:"grey",width:"100%"}},[t("div",{staticClass:"px-5"},[t("v-col",{staticClass:"pl-0",attrs:{cols:"6"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{counter:"150"},model:{value:e.formValues.name,callback:function(a){e.$set(e.formValues,"name",a)},expression:"formValues.name"}},"v-text-field",e.veeValidate("name","Rule Name *"),!1))],1),e.formValues.require_docs?t("v-col",{staticClass:"pl-0",attrs:{cols:"6"}},[t("v-text-field",e._b({attrs:{type:"number"},model:{value:e.formValues.require_docs_for,callback:function(a){e.$set(e.formValues,"require_docs_for",a)},expression:"formValues.require_docs_for"}},"v-text-field",e.veeValidate("require_docs_for","Require Document"),!1))],1):e._e(),t("v-col",{staticClass:"pl-0",attrs:{cols:"12"}},[t("v-textarea",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{rows:"2",counter:"150"},model:{value:e.formValues.description,callback:function(a){e.$set(e.formValues,"description",a)},expression:"formValues.description"}},"v-textarea",e.veeValidate("description","Description *"),!1))],1)],1)])],1),t("v-card",{staticClass:"lighten-4 elevation-1 mb-5",attrs:{color:"grey",width:"100%"}},[t("v-row",{staticClass:"px-5"},[t("v-col",{attrs:{md:"6",cols:"12"}},[e.masterSettings.paid&&e.masterSettings.unpaid?t("switch-toggle",{attrs:{heading:"Paid Leave","sub-heading":"Paid Leave"},model:{value:e.formValues.is_paid,callback:function(a){e.$set(e.formValues,"is_paid",a)},expression:"formValues.is_paid"}}):e._e()],1),t("v-col",{attrs:{md:"6",cols:"12"}},[e.masterSettings.proportionate_leave?t("switch-toggle",{attrs:{heading:"Proportionate leave on joined date","sub-heading":"Proportionate leave on joined date"},model:{value:e.formValues.proportionate_on_joined_date,callback:function(a){e.$set(e.formValues,"proportionate_on_joined_date",a)},expression:"formValues.proportionate_on_joined_date"}}):e._e()],1),t("v-col",{attrs:{md:"6",cols:"12"}},[e.masterSettings.proportionate_leave?t("switch-toggle",{attrs:{heading:"Proportionate leave on contract end date","sub-heading":"Proportionate leave on contract end date"},model:{value:e.formValues.proportionate_on_contract_end_date,callback:function(a){e.$set(e.formValues,"proportionate_on_contract_end_date",a)},expression:"formValues.proportionate_on_contract_end_date"}}):e._e()],1),t("v-col",{attrs:{md:"6",cols:"12"}},[e.masterSettings.proportionate_leave?t("switch-toggle",{attrs:{heading:"Proportionate leave on probation end date","sub-heading":"Leave Calculation begins from employee's probation end date or join date."},model:{value:e.formValues.proportionate_on_probation_end_date,callback:function(a){e.$set(e.formValues,"proportionate_on_probation_end_date",a)},expression:"formValues.proportionate_on_probation_end_date"}}):e._e()],1)],1)],1),t("v-card",{staticClass:"lighten-4 elevation-1 mb-5",attrs:{color:"grey"}},[t("v-row",{staticClass:"px-5"},[t("v-col",[e._v(" One Option Must be selected between these two ")])],1),t("v-row",{staticClass:"px-5"},[t("v-col",{attrs:{cols:"12",md:"6"}},[e.masterSettings.admin_can_assign?t("switch-toggle",{attrs:{heading:"Admin can assign leave to employees","sub-heading":"Admin can assign leave to employees"},model:{value:e.formValues.admin_can_assign,callback:function(a){e.$set(e.formValues,"admin_can_assign",a)},expression:"formValues.admin_can_assign"}}):e._e()],1),t("v-col",{attrs:{cols:"12",md:"6"}},[e.masterSettings.employees_can_apply?t("switch-toggle",{attrs:{heading:"Employee can Apply for Leave","sub-heading":"Employee can Apply for Leave"},model:{value:e.formValues.employee_can_apply,callback:function(a){e.$set(e.formValues,"employee_can_apply",a)},expression:"formValues.employee_can_apply"}}):e._e()],1)],1)],1),t("v-col",{staticClass:"pa-0",attrs:{md:"12"}},[e.masterSettings.accumulation?t("div",[t("leave-rules-expansion-panel",{attrs:{heading:"Earned Leave","sub-heading":"At least One Options between collapsible, carry Forward and Encashment should be Filled"},model:{value:e.accumulation_rule,callback:function(a){e.accumulation_rule=a},expression:"accumulation_rule"}},[t("v-col",{attrs:{md:"4"}},[t("v-row",[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"number",min:"1",suffix:e.accumulation_rule.duration_type||"Days"},model:{value:e.accumulation_rule.duration,callback:function(a){e.$set(e.accumulation_rule,"duration",a)},expression:"accumulation_rule.duration"}},"v-text-field",e.veeValidate("accumulation_rule.duration","Time interval for leave accumulation"),!1))],1),t("v-row",{attrs:{align:"center"}},[t("v-col",{attrs:{md:"11"}},[t("v-select",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{items:e.durationType},model:{value:e.accumulation_rule.duration_type,callback:function(a){e.$set(e.accumulation_rule,"duration_type",a)},expression:"accumulation_rule.duration_type"}},"v-select",e.veeValidate("accumulation_rule.duration_type","Duration Type"),!1))],1),t("v-col",{attrs:{md:"1"}},[t("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(a){var l=a.on;return[t("v-icon",e._g({attrs:{size:"20",color:"primary"}},l),[e._v(" mdi-help-circle")])]}}],null,!1,1554012811)},[t("span",[t("ul",[t("li",[e._v(" Years : Balance will be earned at the start date of the Fiscal Year. ")]),t("li",[e._v(" Months : Balance will be earned at the start date of the Fiscal Month. ")]),t("li",[e._v(" Days : Balance will be earned after the completion of added days count. ")])])])])],1)],1)],1),t("v-col",{attrs:{md:"4"}},[t("div",[e._v("Maximum Leave Hours Per Year")]),t("v-row",[t("v-col",[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"number",min:"1"},model:{value:e.balances.accumulationBalance.hours,callback:function(a){e.$set(e.balances.accumulationBalance,"hours",a)},expression:"balances.accumulationBalance.hours"}},"v-text-field",e.veeValidate("accumulation_rule.balance_added","Hours"),!1))],1),t("v-col",[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"number",min:"1"},model:{value:e.balances.accumulationBalance.minutes,callback:function(a){e.$set(e.balances.accumulationBalance,"minutes",a)},expression:"balances.accumulationBalance.minutes"}},"v-text-field",e.veeValidate("accumulation_rule.balance_added","Minutes"),!1))],1)],1)],1)],1)],1):e._e(),e.masterSettings.renewal?t("div",[t("leave-rules-expansion-panel",{attrs:{heading:"Renewal","sub-heading":"Add Renewal"},model:{value:e.renewal_rule,callback:function(a){e.renewal_rule=a},expression:"renewal_rule"}},[t("v-col",{attrs:{md:"4"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"number",min:"1",suffix:e.renewal_rule.duration_type||"Days"},model:{value:e.renewal_rule.duration,callback:function(a){e.$set(e.renewal_rule,"duration",a)},expression:"renewal_rule.duration"}},"v-text-field",e.veeValidate("renewal_rule.duration","Duration"),!1)),t("v-select",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{items:e.durationType},model:{value:e.renewal_rule.duration_type,callback:function(a){e.$set(e.renewal_rule,"duration_type",a)},expression:"renewal_rule.duration_type"}},"v-select",e.veeValidate("renewal_rule.duration_type","Duration Type"),!1)),e.masterSettings.collapsible?t("v-switch",{attrs:{label:"Collapse"},model:{value:e.renewal_rule.is_collapsible,callback:function(a){e.$set(e.renewal_rule,"is_collapsible",a)},expression:"renewal_rule.is_collapsible"}}):e._e()],1),t("v-col",{attrs:{md:"4"}},[e.masterSettings.carry_forward?t("div",[e._v(" Maximum leave Carry Forward ")]):e._e(),t("v-row",[t("v-col",[e.masterSettings.carry_forward?t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"number",min:"1"},model:{value:e.balances.renewalCarryForward.hours,callback:function(a){e.$set(e.balances.renewalCarryForward,"hours",a)},expression:"balances.renewalCarryForward.hours"}},"v-text-field",e.veeValidate("renewal_rule.max_balance_forwarded","Hours"),!1)):e._e()],1),t("v-col",[e.masterSettings.carry_forward?t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"number",min:"1"},model:{value:e.balances.renewalCarryForward.minutes,callback:function(a){e.$set(e.balances.renewalCarryForward,"minutes",a)},expression:"balances.renewalCarryForward.minutes"}},"v-text-field",e.veeValidate("renewal_rule.max_balance_forwarded","Minutes"),!1)):e._e()],1)],1),t("div",[e._v("Initial Balance")]),t("v-row",[t("v-col",[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"number",min:"1"},model:{value:e.balances.renewalBalance.hours,callback:function(a){e.$set(e.balances.renewalBalance,"hours",a)},expression:"balances.renewalBalance.hours"}},"v-text-field",e.veeValidate("renewal_rule.initial_balance","Hours"),!1))],1),t("v-col",[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"number",min:"1"},model:{value:e.balances.renewalBalance.minutes,callback:function(a){e.$set(e.balances.renewalBalance,"minutes",a)},expression:"balances.renewalBalance.minutes"}},"v-text-field",e.veeValidate("renewal_rule.initial_balance","Minutes"),!1))],1)],1)],1)],1)],1):e._e(),e.masterSettings.deductible?t("div",[t("leave-rules-expansion-panel",{attrs:{heading:"Deduction Rule","sub-heading":"Please Add Deduction Rule"},model:{value:e.deduction_rule,callback:function(a){e.deduction_rule=a},expression:"deduction_rule"}},[t("v-col",{attrs:{md:"4"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"number",min:"1",suffix:"Days"},model:{value:e.deduction_rule.duration,callback:function(a){e.$set(e.deduction_rule,"duration",a)},expression:"deduction_rule.duration"}},"v-text-field",e.veeValidate("deduction_rule.duration","Duration"),!1)),t("v-select",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{items:e.durationType},model:{value:e.deduction_rule.duration_type,callback:function(a){e.$set(e.deduction_rule,"duration_type",a)},expression:"deduction_rule.duration_type"}},"v-select",e.veeValidate("deduction_rule.duration_type","Duration Type"),!1))],1),t("v-col",{attrs:{md:"4"}},[t("div",[e._v("Leave to be Deducted")]),t("v-row",[t("v-col",[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"number",min:"1"},model:{value:e.balances.deductible.hours,callback:function(a){e.$set(e.balances.deductible,"hours",a)},expression:"balances.deductible.hours"}},"v-text-field",e.veeValidate("deduction_rule.balance_deducted","Hours"),!1))],1),t("v-col",[e.masterSettings.carry_forward?t("v-text-field",e._b({attrs:{type:"number",min:"1"},model:{value:e.balances.deductible.minutes,callback:function(a){e.$set(e.balances.deductible,"minutes",a)},expression:"balances.deductible.minutes"}},"v-text-field",e.veeValidate("deduction_rule.balance_deducted","Minutes"),!1)):e._e()],1)],1)],1)],1)],1):e._e(),e.masterSettings?t("div",[t("leave-rules-expansion-panel",{attrs:{heading:"Time off","sub-heading":"Please Add Time Off Rule"},model:{value:e.time_off_rule,callback:function(a){e.time_off_rule=a},expression:"time_off_rule"}},[t("v-col",{attrs:{md:"4"}},[t("vue-auto-complete",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{endpoint:e.leaveTypeEndpoint,params:{master_setting:e.settingId},"item-to-exclude":e.leaveId,"item-text":"name","item-value":"id"},model:{value:e.time_off_rule.leave_type,callback:function(a){e.$set(e.time_off_rule,"leave_type",a)},expression:"time_off_rule.leave_type"}},"vue-auto-complete",e.veeValidate("time_off_rule.leave_type","Leave Type to Reduce"),!1)),t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"multiple",expression:"'multiple'"}],attrs:{type:"number",min:"1"},model:{value:e.time_off_rule.reduce_leave_by,callback:function(a){e.$set(e.time_off_rule,"reduce_leave_by",a)},expression:"time_off_rule.reduce_leave_by"}},"v-text-field",e.veeValidate("time_off_rule.reduce_leave_by","Reduce Leave By"),!1))],1),t("v-col",{attrs:{md:"4"}},[t("div",[e._v("Total Late Minutes")]),t("v-row",[t("v-col",[t("v-text-field",e._b({attrs:{type:"number",min:"1"},model:{value:e.balances.timeOff.hours,callback:function(a){e.$set(e.balances.timeOff,"hours",a)},expression:"balances.timeOff.hours"}},"v-text-field",e.veeValidate("time_off_rule.total_late_minutes","Hours"),!1))],1),t("v-col",[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"number",min:"1"},model:{value:e.balances.timeOff.minutes,callback:function(a){e.$set(e.balances.timeOff,"minutes",a)},expression:"balances.timeOff.minutes"}},"v-text-field",e.veeValidate("time_off_rule.total_late_minutes","Minutes"),!1))],1)],1)],1)],1)],1):e._e(),e.masterSettings.depletion_required?t("div",[t("leave-rules-expansion-panel",{attrs:{heading:"Depletion Required ","sub-heading":"Depletion Required"},model:{value:e.formValues.depletion_leave_types,callback:function(a){e.$set(e.formValues,"depletion_leave_types",a)},expression:"formValues.depletion_leave_types"}},[t("v-col",{attrs:{md:"4"}},[t("vue-auto-complete",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{endpoint:e.leaveTypeEndpoint,params:{master_setting:e.settingId},"item-to-exclude":e.leaveId,"item-text":"name","item-value":"id",multiple:""},model:{value:e.formValues.depletion_leave_types,callback:function(a){e.$set(e.formValues,"depletion_leave_types",a)},expression:"formValues.depletion_leave_types"}},"vue-auto-complete",e.veeValidate("depletion_leave_types","Depletion Leave Types"),!1))],1)],1)],1):e._e(),e.masterSettings.require_document?t("div",[t("leave-rules-expansion-panel",{attrs:{heading:"Require Document","sub-heading":"Require Document"},model:{value:e.formValues.require_docs,callback:function(a){e.$set(e.formValues,"require_docs",a)},expression:"formValues.require_docs"}},[t("v-col",{attrs:{md:"6"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{type:"number",min:"1",suffix:"Days"},model:{value:e.formValues.require_docs_for,callback:function(a){e.$set(e.formValues,"require_docs_for",a)},expression:"formValues.require_docs_for"}},"v-text-field",e.veeValidate("require_docs_for","Require Document For"),!1))],1)],1)],1):e._e(),e.masterSettings.require_time_period?t("div",[t("leave-rules-expansion-panel",{attrs:{heading:"Require Time - Period","sub-heading":"Require Time - Period"},model:{value:e.require_time_period_rule,callback:function(a){e.require_time_period_rule=a},expression:"require_time_period_rule"}},[t("v-col",{attrs:{md:"4"}},[t("vue-date-picker",e._b({directives:[{name:"validate",rawName:"v-validate"}],model:{value:e.formValues.start_date,callback:function(a){e.$set(e.formValues,"start_date",a)},expression:"formValues.start_date"}},"vue-date-picker",e.veeValidate("start_date","Start Date"),!1))],1),t("v-col",{attrs:{md:"4"}},[t("vue-date-picker",e._b({directives:[{name:"validate",rawName:"v-validate"}],model:{value:e.formValues.end_date,callback:function(a){e.$set(e.formValues,"end_date",a)},expression:"formValues.end_date"}},"vue-date-picker",e.veeValidate("end_date","End Date"),!1))],1)],1)],1):e._e(),e.masterSettings.require_prior_approval?t("div",[t("leave-rules-expansion-panel",{attrs:{heading:"Require Prior Approval","sub-heading":"Require Prior Approval"},model:{value:e.formValues.require_prior_approval,callback:function(a){e.$set(e.formValues,"require_prior_approval",a)},expression:"formValues.require_prior_approval"}},[e._l(e.priorCount,(function(a,l){return[t("v-row",{key:a},[t("v-col",{attrs:{md:"3"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],attrs:{type:"number",min:"1"},model:{value:e.prior_approval_rules[l].prior_approval_request_for,callback:function(a){e.$set(e.prior_approval_rules[l],"prior_approval_request_for",a)},expression:"\n                      prior_approval_rules[index]\n                        .prior_approval_request_for\n                    "}},"v-text-field",e.veeValidate("prior_approval_request_for-"+(l+1),"Prior Approval Request For (In Hours)"),!1))],1),t("v-col",{attrs:{md:"3"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],attrs:{type:"number",min:"1"},model:{value:e.prior_approval_rules[l].prior_approval,callback:function(a){e.$set(e.prior_approval_rules[l],"prior_approval",a)},expression:"\n                      prior_approval_rules[index].prior_approval\n                    "}},"v-text-field",e.veeValidate("prior_approval-"+(l+1),"Prior Approval"),!1))],1),t("v-col",{attrs:{md:"3"}},[t("v-select",e._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],attrs:{items:["Days","Hours","Minutes"]},model:{value:e.prior_approval_rules[l].prior_approval_unit,callback:function(a){e.$set(e.prior_approval_rules[l],"prior_approval_unit",a)},expression:"\n                      prior_approval_rules[index]\n                        .prior_approval_unit\n                    "}},"v-select",e.veeValidate("prior_approval_unit","Prior Approval Unit"),!1))],1),t("v-col",{key:a,staticClass:"py-10"},[t("span",[e.priorCount-1===l?t("v-icon",{attrs:{color:"green"},domProps:{textContent:e._s("mdi-plus-circle-outline")},on:{click:e.addPriorRules}}):e._e(),a>1?t("v-icon",{attrs:{color:"red"},domProps:{textContent:e._s("mdi-minus-circle-outline")},on:{click:function(a){return e.removePriorRules(l)}}}):e._e()],1)])],1)]}))],2)],1):e._e(),e.masterSettings.require_experience?t("div",[t("leave-rules-expansion-panel",{attrs:{heading:"Require Experience","sub-heading":"Require Experience"},model:{value:e.formValues.required_experience,callback:function(a){e.$set(e.formValues,"required_experience",a)},expression:"formValues.required_experience"}},[t("v-col",{attrs:{md:"4"}},[t("v-row",[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],staticClass:"px-2",attrs:{type:"number",min:"1",suffix:e.formValues.required_experience_duration||"Days"},model:{value:e.formValues.required_experience,callback:function(a){e.$set(e.formValues,"required_experience",a)},expression:"formValues.required_experience"}},"v-text-field",e.veeValidate("required_experience","Required Experience"),!1))],1)],1),t("v-col",{attrs:{md:"4"}},[t("v-select",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{items:e.durationType},model:{value:e.formValues.required_experience_duration,callback:function(a){e.$set(e.formValues,"required_experience_duration",a)},expression:"formValues.required_experience_duration"}},"v-select",e.veeValidate("required_experience_duration","Required Experience Duration"),!1))],1)],1)],1):e._e()])],1)],1),t("v-spacer"),e.view?e._e():t("v-footer",{attrs:{fixed:"",height:"auto"}},[t("v-col",{staticClass:"text-right"},[e.edit?t("v-btn",{staticClass:"mr-3",attrs:{right:"",color:"primary"},on:{click:e.updateLeaveRule}},[e._v(" Update ")]):t("v-btn",{staticClass:"mr-3",attrs:{right:"",depressed:"",color:"primary"},on:{click:e.createLeaveRule}},[t("v-icon",{attrs:{size:"14",left:""}},[e._v(" mdi-content-save-outline ")]),e._v(" Save ")],1),t("v-btn",{attrs:{right:"",outlined:"",color:"primary"},on:{click:function(a){return e.clear(e.formValues)}}},[e._v(" Clear ")])],1),e.dialog?t("v-dialog",{attrs:{"max-width":"450",scrollable:""},on:{keypress:function(a){if(!a.type.indexOf("key")&&e._k(a.keyCode,"esc",27,a.key,["Esc","Escape"]))return null;e.dialog=!1}},model:{value:e.dialog,callback:function(a){e.dialog=a},expression:"dialog"}},[t("v-card",[t("vue-card-title",{attrs:{title:"Mesage",icon:"mdi-file-document-outline",dark:""}}),t("v-card-text",{staticClass:"pa-3 scrollbar-sm"},[t("div",[e._v("If the employee is in probation and has a probation end date specified, leave calculation begins from the probation end date; otherwise, it starts from the employee's joining date. ")])]),t("v-divider"),t("v-card-actions",[t("v-spacer"),t("v-btn",{attrs:{color:"primary"},domProps:{textContent:e._s("Okay")},on:{click:function(a){e.dialog=!1}}})],1)],1)],1):e._e()],1)],1)},me=[],pe=t("7bb1");pe["b"].Validator.extend("multiple",{validate:function(e){var a=!0;return a=a&&e%.5===0,a},getMessage:function(e){return"".concat(e," must be multiple of 0.5")}});var ve={components:{VueAutoComplete:N["default"],VueDatePicker:u["default"],LeaveRulesExpansionPanel:$,SwitchToggle:R["a"]},mixins:[n["a"]],props:{slug:{type:String,required:!0},masterSettings:{type:Object,required:!0},id:{type:[Number,String],required:!0},leaveId:{type:Number,default:void 0},edit:{type:Boolean,default:!1},view:{type:Boolean,default:!1},clone:{type:Boolean,default:!1},leaveName:{type:String,default:""},idleLeaveTypeList:{type:Array,default:function(){return[]}}},data:function(){return{durationType:["Years","Months","Days"],leaveRuleName:"",balances:{carryForward:{hours:0,minutes:0,path:"accumulation_rule.max_balance_forwarded"},accumulationBalance:{hours:0,minutes:0,path:"accumulation_rule.balance_added"},renewalBalance:{hours:0,minutes:0,path:"renewal_rule.initial_balance"},renewalCarryForward:{hours:0,minutes:0,path:"renewal_rule.max_balance_forwarded"},deductible:{hours:0,minutes:0,path:"deduction_rule.balance_deducted"},timeOff:{hours:0,minutes:0,path:"time_off_rule.total_late_minutes"},minLeave:{hours:0,minutes:0,path:"min_leave"},maxLeave:{hours:0,minutes:0,path:"max_leave"}},accumulation_rule:{},renewal_rule:{},deduction_rule:{},time_off_rule:{},require_time_period_rule:!1,bottomNav:"recent",settingId:this.$route.query.name,formValues:{name:"",description:"",accumulation_rule:null,renewal_rule:null,deduction_rule:null,time_off_rule:null,compensatory_rule:null,irregularity_report:!1,is_archived:!1,limit_leave_to:null,limit_leave_duration:null,min_balance:null,max_balance:null,limit_leave_occurrence:null,limit_leave_occurrence_duration:null,maximum_continuous_leave_length:null,minimum_continuous_leave_length:null,holiday_inclusive:null,required_experience_duration:null,is_paid:!1,proportionate_on_joined_date:!1,proportionate_on_contract_end_date:!1,proportionate_on_probation_end_date:!1,can_apply_half_shift:null,employee_can_apply:!1,admin_can_assign:!1,can_apply_beyond_zero_balance:null,beyond_limit:null,required_experience:null,require_prior_approval:!1,prior_approval_rules:[],require_docs:null,require_docs_for:null,start_date:null,end_date:null,leave_irregularities:null,depletion_required:null,depletion_leave_types:[],leave_type:this.leaveId,cloned_from:null,inclusive_leave:"Exclude Holiday And Off Day"},leaveTypeEndpoint:"",priorCount:1,prior_approval_rules:[{prior_approval_request_for:"",prior_approval:"",prior_approval_unit:""}],dialog:!1}},watch:{leaveId:function(){this.formValues.leave_type=this.leaveId},edit:function(){this.getLeaveRule()},require_time_period_rule:function(e){e||(this.formValues.start_date=null,this.formValues.end_date=null)},"formValues.proportionate_on_joined_date":function(e){e&&this.formValues.proportionate_on_probation_end_date&&(this.dialog=!0)},"formValues.proportionate_on_probation_end_date":function(e){e&&this.formValues.proportionate_on_joined_date&&(this.dialog=!0)}},created:function(){this.leaveTypeEndpoint="/leave/".concat(this.slug,"/leave-types/"),(this.edit||this.view||this.clone)&&this.getLeaveRule()},methods:{clear:function(){this.$refs.timeOffRule.reset(),this.errors.clear(),this.clearNonFieldErrors(),this.$validator.errors.clear(),this.renewal_rule={},this.accumulation_rule={}},createLeaveRule:function(){var e=this;this.checkOptionalRule();var a=I["a"].getLeaveRules(this.slug);this.formValues.prior_approval_rules=this.formValues.require_prior_approval?this.prior_approval_rules:[],this.crud.message="Successfully created Leave Rule Settings.",this.insertData(a,this.formValues,{clearForm:!1}).then((function(){e.clear(e.formValues),e.$emit("close")})).catch((function(a){e.pushIndexedErrors(a,"prior_approval_request_for",!1,""),e.pushIndexedErrors(a,"prior_approval",!1,"")}))},updateLeaveRule:function(){var e=this;this.checkOptionalRule();var a=I["a"].getLeaveRule(this.slug,this.id);this.crud.message="Successfully Updated Leave Rule Settings.",this.formValues.prior_approval_rules=this.formValues.require_prior_approval?this.prior_approval_rules:[],this.putData(a,this.formValues,{clearForm:!1}).then((function(){e.clear(e.formValues),e.$emit("close")})).catch((function(a){e.pushIndexedErrors(a,"prior_approval_request_for",!1,""),e.pushIndexedErrors(a,"prior_approval",!1,"")}))},getLeaveRule:function(){var e=this,a=I["a"].getLeaveRule(this.slug,this.id);this.getData(a).then((function(a){if(e.formValues=a,e.prior_approval_rules=e.formValues.prior_approval_rules,e.leaveRuleName=e.formValues.name,e.clone){e.formValues.cloned_from=e.formValues.id,e.formValues.leave_type=e.leaveId;var t=e.formValues.depletion_leave_types,l=null;e.formValues.time_off_rule&&(l=e.formValues.time_off_rule.leave_type),e.formValues.depletion_leave_types=[],e.formValues.time_off_rule.leave_type=[],e.idleLeaveTypeList.forEach((function(a){a.leave_type&&(t.includes(a.leave_type.cloned_from)&&e.formValues.depletion_leave_types.push(a.leave_type.id),l&&l.includes(a.leave_type.cloned_from)&&e.formValues.time_off_rule.leave_type.push(a.leave_type.id))}))}e.prepareData(),e.priorCount=e.formValues.prior_approval_rules.length,0===e.priorCount&&(e.formValues.prior_approval_rules[0]={prior_approval_request_for:"",prior_approval:"",prior_approval_unit:""},e.priorCount=1)}))},prepareData:function(){for(var e in this.balances)this.balances[e].minutes=this.get(this.formValues,this.balances[e].path,"0")%60,this.balances[e].hours=parseInt(this.get(this.formValues,this.balances[e].path,"0")/60);this.accumulation_rule=this.formValues.accumulation_rule||{},this.renewal_rule=this.formValues.renewal_rule||{},this.deduction_rule=this.formValues.deduction_rule||{},this.time_off_rule=this.formValues.time_off_rule||{},(this.formValues.start_date||this.formValues.end_date)&&(this.require_time_period_rule=!0)},checkOptionalRule:function(){var e=function(e){return p()(L()(e))?null:e};this.renewal_rule.max_balance_forwarded=60*this.balances.renewalCarryForward.hours+Number(this.balances.renewalCarryForward.minutes),this.accumulation_rule.balance_added=60*this.balances.accumulationBalance.hours+Number(this.balances.accumulationBalance.minutes),this.renewal_rule.initial_balance=60*this.balances.renewalBalance.hours+Number(this.balances.renewalBalance.minutes),this.deduction_rule.balance_deducted=60*this.balances.deductible.hours+Number(this.balances.deductible.minutes),this.time_off_rule.total_late_minutes=60*this.balances.timeOff.hours+Number(this.balances.timeOff.minutes),null!==this.formValues.beyond_limit&&this.formValues.beyond_limit?this.formValues.can_apply_beyond_zero_balance=!0:this.formValues.can_apply_beyond_zero_balance=!1,null!==this.formValues.require_docs_for&&this.formValues.require_docs_for?this.formValues.require_docs=!0:this.formValues.require_docs=!1,this.formValues.depletion_leave_types!==[]&&this.formValues.depletion_leave_types?this.formValues.depletion_required=!1:this.formValues.depletion_required=!0,this.formValues.depletion_required=!!e(this.formValues.depletion_leave_types),this.masterSettings.paid&&!this.masterSettings.unpaid?this.formValues.is_paid=!0:!this.masterSettings.paid&&this.masterSettings.unpaid&&(this.formValues.is_paid=!1),this.formValues.max_balance=60*this.balances.maxLeave.hours+Number(this.balances.maxLeave.minutes),this.formValues.min_balance=60*this.balances.minLeave.hours+Number(this.balances.minLeave.minutes),this.formValues.accumulation_rule=e(this.accumulation_rule),this.formValues.renewal_rule=e(this.renewal_rule),this.formValues.deduction_rule=e(this.deduction_rule),this.formValues.accumulation_rule=e(this.accumulation_rule),this.formValues.time_off_rule=e(this.time_off_rule),this.masterSettings.proportionate_leave||(this.formValues.proportionate_on_joined_date=!1,this.formValues.proportionate_on_contract_end_date=!1,this.formValues.proportionate_on_probation_end_date=!1),this.masterSettings.holiday_inclusive||(this.formValues.holiday_inclusive=!1),this.masterSettings.employees_can_apply||(this.formValues.employee_can_apply=!1),this.masterSettings.admin_can_assign||(this.formValues.admin_can_assign=!1),this.masterSettings.half_shift_leave||(this.formValues.can_apply_half_shift=!1),this.masterSettings.accumulation||(this.formValues.accumulation_rule=null),this.masterSettings.renewal||(this.formValues.renewal_rule=null),this.masterSettings.deductible||(this.formValues.deduction_rule=null),this.masterSettings.leave_irregularities||(this.formValues.leave_irregularity=null),this.masterSettings.leave_limitations||(this.formValues.limit_leave_to=null,this.formValues.limit_leave_duration=null,this.formValues.limit_leave_duration_type=null,this.formValues.max_balance=null,this.formValues.min_balance=null,this.formValues.limit_leave_occurrence=null,this.formValues.limit_leave_occurrence_duration=null,this.formValues.limit_leave_occurrence_duration_type=null,this.formValues.maximum_continuous_leave_length=null,this.formValues.minimum_continuous_leave_length=null),this.masterSettings.occurrences||(this.formValues.limit_leave_occurrence=null,this.formValues.limit_leave_occurrence_duration=null,this.formValues.limit_leave_occurrence_duration_type=null),this.masterSettings.continuous||(this.formValues.maximum_continuous_leave_length=null,this.formValues.minimum_continuous_leave_length=null),this.masterSettings.beyond_balance||(this.formValues.can_apply_beyond_zero_balance=null,this.formValues.beyond_limit=null),this.masterSettings.depletion_required||(this.formValues.depletion_leave_types=[],this.formValues.depletion_required=null),this.masterSettings.require_experience||(this.formValues.required_experience=null,this.formValues.required_experience_duration=null),this.masterSettings.require_time_period||(this.formValues.start_date=null,this.formValues.end_date=null),this.formValues.require_prior_approval||(this.formValues.prior_approval_rules=[]),this.masterSettings.require_prior_approval||(this.formValues.prior_approval_rules=[],this.formValues.require_prior_approval=!1),this.masterSettings.require_document||(this.formValues.require_docs=null,this.formValues.require_docs_for=null),this.masterSettings.require_document||(this.formValues.require_docs=null,this.formValues.require_docs_for=null)},addPriorRules:function(){this.prior_approval_rules[this.priorCount-1].prior_approval_request_for&&this.prior_approval_rules[this.priorCount-1].prior_approval&&this.prior_approval_rules[this.priorCount-1].prior_approval_unit&&(this.prior_approval_rules[this.priorCount]={prior_approval_request_for:"",prior_approval:"",prior_approval_unit:""},this.priorCount+=1)},removePriorRules:function(e){this.priorCount>1&&(this.prior_approval_rules.splice(e,1),this.priorCount-=1)}}},fe=ve,he=Object(h["a"])(fe,_e,me,!1,null,null,null),ye=he.exports;V()(he,{VBtn:j["a"],VCard:b["a"],VCardActions:g["a"],VCardText:g["c"],VCol:x["a"],VContainer:F["a"],VDialog:O["a"],VDivider:A["a"],VFooter:P["a"],VForm:w["a"],VIcon:B["a"],VRow:q["a"],VSelect:H["a"],VSpacer:k["a"],VSwitch:S["a"],VTextField:M["a"],VTextarea:z["a"],VTooltip:U["a"]});var Ve=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-form",{ref:"creditHourLeaveRules"},[t("vue-card-title",{attrs:{title:e.leaveName,subtitle:e.leaveRuleName,icon:"mdi-file-document-outline",dark:"",closable:""},on:{close:function(a){e.clear(e.formValues),e.$emit("close")}}}),t("v-divider"),t("div",{staticClass:"scrollbar-thin",staticStyle:{height:"calc(100vh - 124px)"}},[t("v-container",[t("v-card-text",[t("v-row",{attrs:{"no-gutters":""}},[t("v-col",{attrs:{cols:"12"}},[e.nonFieldErrors?t("non-field-form-errors",{attrs:{"non-field-errors":e.nonFieldErrors}}):e._e()],1),t("v-card",{staticClass:"lighten-4 elevation-1 mb-5",attrs:{color:"grey",width:"100%"}},[t("div",{staticClass:"px-3"},[t("v-col",{attrs:{cols:"6"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{counter:"150"},model:{value:e.formValues.name,callback:function(a){e.$set(e.formValues,"name",a)},expression:"formValues.name"}},"v-text-field",e.veeValidate("name","Rule Name *"),!1))],1),t("v-col",{attrs:{cols:"12"}},[t("v-textarea",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{rows:2,counter:"150"},model:{value:e.formValues.description,callback:function(a){e.$set(e.formValues,"description",a)},expression:"formValues.description"}},"v-textarea",e.veeValidate("description","Description *"),!1))],1)],1)]),t("v-card",{staticClass:"lighten-4 elevation-1 mb-5",attrs:{color:"grey",width:"100%"}},[t("div",{staticClass:"px-5"},[t("v-row",{attrs:{"no-gutters":""}},[t("v-col",{attrs:{sm:"12",md:"4",cols:"12"}},[e.masterSettings.paid&&e.masterSettings.unpaid?t("switch-toggle",{attrs:{heading:"Paid Leave","sub-heading":"Paid Leave"},model:{value:e.formValues.is_paid,callback:function(a){e.$set(e.formValues,"is_paid",a)},expression:"formValues.is_paid"}}):e._e()],1),t("v-col",{attrs:{sm:"12",md:"4",cols:"12"}},[e.masterSettings.admin_can_assign?t("switch-toggle",{attrs:{heading:"Admin can assign leave to employees","sub-heading":"Admin can assign leave to employees"},model:{value:e.formValues.admin_can_assign,callback:function(a){e.$set(e.formValues,"admin_can_assign",a)},expression:"formValues.admin_can_assign"}}):e._e()],1),t("v-col",{attrs:{sm:"12",md:"4",cols:"12"}},[e.masterSettings.employees_can_apply?t("switch-toggle",{attrs:{heading:"Employee can Apply for Leave","sub-heading":"Employee can Apply for Leave"},model:{value:e.formValues.employee_can_apply,callback:function(a){e.$set(e.formValues,"employee_can_apply",a)},expression:"formValues.employee_can_apply"}}):e._e()],1)],1)],1)]),t("v-col",{attrs:{md:"12"}},[e.masterSettings.credit_hour?t("div",[t("leave-rules-expansion-panel",{attrs:{heading:"Credit Hour","sub-heading":"Fill credit hour detail for this rule."},model:{value:e.formValues.creditHour,callback:function(a){e.$set(e.formValues,"creditHour",a)},expression:"formValues.creditHour"}},[t("v-col",{attrs:{md:"4"}},[t("v-checkbox",e._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],model:{value:e.creditHour.minimum_request_duration_applicable,callback:function(a){e.$set(e.creditHour,"minimum_request_duration_applicable",a)},expression:"creditHour.minimum_request_duration_applicable"}},"v-checkbox",e.veeValidate("minimum_request_duration_applicable","Minimum Request Applicable"),!1)),e.creditHour.minimum_request_duration_applicable?t("duration-picker",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{title:""},model:{value:e.creditHour.minimum_request_duration,callback:function(a){e.$set(e.creditHour,"minimum_request_duration",a)},expression:"creditHour.minimum_request_duration"}},"duration-picker",e.veeValidate("minimum_request_duration","Duration"),!1)):e._e()],1),t("v-col",{attrs:{md:"4"}},[t("v-checkbox",e._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],model:{value:e.creditHour.maximum_request_duration_applicable,callback:function(a){e.$set(e.creditHour,"maximum_request_duration_applicable",a)},expression:"creditHour.maximum_request_duration_applicable"}},"v-checkbox",e.veeValidate("maximum_request_duration_applicable","Maximum Request Applicable"),!1)),e.creditHour.maximum_request_duration_applicable?t("duration-picker",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{title:""},model:{value:e.creditHour.maximum_request_duration,callback:function(a){e.$set(e.creditHour,"maximum_request_duration",a)},expression:"creditHour.maximum_request_duration"}},"duration-picker",e.veeValidate("maximum_request_duration","Duration"),!1)):e._e()],1),t("v-col",{staticClass:"pt-8",attrs:{md:"4"}},[t("v-row",[t("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[e._v("Max Balance")]),t("v-col",{staticClass:"py-0",attrs:{cols:"6"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],attrs:{type:"number"},model:{value:e.maxBalance.hours,callback:function(a){e.$set(e.maxBalance,"hours",a)},expression:"maxBalance.hours"}},"v-text-field",e.veeValidate("hour","Hours"),!1))],1),t("v-col",{staticClass:"py-0",attrs:{cols:"6"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"max_value:59",expression:"'max_value:59'"}],attrs:{max:"59",type:"number"},model:{value:e.maxBalance.minutes,callback:function(a){e.$set(e.maxBalance,"minutes",a)},expression:"maxBalance.minutes"}},"v-text-field",e.veeValidate("minute","Minutes"),!1))],1)],1)],1)],1)],1):e._e(),e.masterSettings.require_prior_approval?t("div",[t("leave-rules-expansion-panel",{attrs:{heading:"Require Prior Approval","sub-heading":"Require Prior Approval"},model:{value:e.formValues.require_prior_approval,callback:function(a){e.$set(e.formValues,"require_prior_approval",a)},expression:"formValues.require_prior_approval"}},[e._l(e.priorCount,(function(a,l){return[t("v-row",{key:a},[t("v-col",{attrs:{md:"3"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],attrs:{type:"number",min:"1"},model:{value:e.prior_approval_rules[l].prior_approval_request_for,callback:function(a){e.$set(e.prior_approval_rules[l],"prior_approval_request_for",a)},expression:"\n                          prior_approval_rules[index]\n                            .prior_approval_request_for\n                        "}},"v-text-field",e.veeValidate("prior_approval_request_for-"+(l+1),"Prior Approval Request For (In Hours)"),!1))],1),t("v-col",{attrs:{md:"3"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],attrs:{type:"number",min:"1"},model:{value:e.prior_approval_rules[l].prior_approval,callback:function(a){e.$set(e.prior_approval_rules[l],"prior_approval",a)},expression:"\n                          prior_approval_rules[index]\n                            .prior_approval\n                        "}},"v-text-field",e.veeValidate("prior_approval-"+(l+1),"Prior Approval"),!1))],1),t("v-col",{attrs:{md:"3"}},[t("v-select",e._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],attrs:{items:["Days","Hours","Minutes"]},model:{value:e.prior_approval_rules[l].prior_approval_unit,callback:function(a){e.$set(e.prior_approval_rules[l],"prior_approval_unit",a)},expression:"\n                          prior_approval_rules[index]\n                            .prior_approval_unit\n                        "}},"v-select",e.veeValidate("prior_approval_unit","Prior Approval Unit"),!1))],1),t("v-col",{key:a,staticClass:"py-10"},[t("span",[e.priorCount-1===l?t("v-icon",{attrs:{color:"green"},domProps:{textContent:e._s("mdi-plus-circle-outline")},on:{click:e.addPriorRules}}):e._e(),a>1?t("v-icon",{attrs:{color:"red"},domProps:{textContent:e._s("mdi-minus-circle-outline")},on:{click:function(a){return e.removePriorRules(l)}}}):e._e()],1)])],1)]}))],2)],1):e._e(),e.masterSettings.require_experience?t("div",[t("leave-rules-expansion-panel",{attrs:{heading:"Require Experience","sub-heading":"Require Experience"},model:{value:e.formValues.required_experience,callback:function(a){e.$set(e.formValues,"required_experience",a)},expression:"formValues.required_experience"}},[t("v-col",{attrs:{md:"4"}},[t("v-row",[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate"}],staticClass:"px-2",attrs:{type:"number",min:"1",max:"999",suffix:e.formValues.required_experience_duration||"Days"},model:{value:e.formValues.required_experience,callback:function(a){e.$set(e.formValues,"required_experience",a)},expression:"formValues.required_experience"}},"v-text-field",e.veeValidate("required_experience","Required Experience"),!1))],1)],1),t("v-col",{attrs:{md:"4"}},[t("v-select",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{items:e.durationType},model:{value:e.formValues.required_experience_duration,callback:function(a){e.$set(e.formValues,"required_experience_duration",a)},expression:"formValues.required_experience_duration"}},"v-select",e.veeValidate("required_experience_duration","Required Experience Duration"),!1))],1)],1)],1):e._e()])],1)],1)],1)],1),e.view?e._e():t("v-footer",{attrs:{fixed:"",height:"auto"}},[t("v-col",{staticClass:"text-right"},[e.edit?t("v-btn",{staticClass:"mr-3",attrs:{right:"",color:"primary",depressed:""},on:{click:e.updateLeaveRule}},[e._v(" Update ")]):t("v-btn",{staticClass:"mr-3",attrs:{depressed:"",color:"primary",right:""},on:{click:e.createLeaveRule}},[t("v-icon",{attrs:{size:"14",left:""}},[e._v(" mdi-content-save-outline ")]),e._v(" Save ")],1),t("v-btn",{attrs:{right:"",outlined:"",color:"primary"},on:{click:function(a){return e.clear(e.formValues)}}},[e._v(" Clear ")])],1)],1)],1)},be=[],ge=(t("b65f"),t("8691")),xe={components:{DurationPicker:ge["a"],LeaveRulesExpansionPanel:$,SwitchToggle:R["a"]},mixins:[n["a"]],props:{slug:{type:String,required:!0},masterSettings:{type:Object,required:!0},id:{type:[String,Number],default:""},leaveId:{type:Number,default:void 0},edit:{type:Boolean,default:!1},view:{type:Boolean,default:!1},clone:{type:Boolean,default:!1},leaveName:{type:String,default:""}},data:function(){return{accumulation_rule:{},creditHour:{minimum_request_duration_applicable:!1,minimum_request_duration:null,maximum_request_duration_applicable:!1,maximum_request_duration:null},renewal_rule:{},deduction_rule:{},leave_irregularity:{},masterSettingId:"",maxBalance:{hours:0,minutes:0},leaveRuleName:"",bottomNav:"recent",formValues:{name:"",description:"",credit_hour_rule:null,accumulation_rule:null,renewal_rule:null,deduction_rule:null,yos_rule:null,compensatory_rule:null,irregularity_report:!1,leave_irregularity:null,is_archived:!1,limit_leave_to:null,limit_leave_duration:null,min_balance:null,max_balance:null,limit_leave_occurrence:null,limit_leave_occurrence_duration:null,limit_leave_occurrence_duration_type:null,maximum_continuous_leave_length:null,minimum_continuous_leave_length:null,limit_leave_duration_type:null,holiday_inclusive:null,inclusive_leave:null,required_experience_duration:null,is_paid:!1,proportionate_on_joined_date:null,can_apply_half_shift:null,employee_can_apply:!1,admin_can_assign:!1,can_apply_beyond_zero_balance:null,beyond_limit:null,required_experience:null,require_prior_approval:!1,prior_approval_rules:[],require_docs:!1,require_docs_for:null,start_date:null,end_date:null,depletion_required:null,depletion_leave_types:[],leave_type:this.leaveId,cloned_from:null},leaveType:"",durationType:["Years","Months","Days"],occurrencesType:["Years","Months"],priorCount:1,prior_approval_rules:[{prior_approval_request_for:"",prior_approval:"",prior_approval_unit:""}]}},watch:{leaveId:function(){this.formValues.leave_type=this.leaveId}},created:function(){this.masterSettingId=this.$route.query.name||this.masterSettings.id,this.formValues.leave_type=this.leaveId,this.leaveType="/leave/".concat(this.slug,"/leave-types"),(this.edit||this.view||this.clone)&&this.getLeaveRule()},methods:{clear:function(){this.$refs.creditHourLeaveRules.reset(),this.clearNonFieldErrors(),this.$validator.errors.clear()},createLeaveRule:function(){var e=this;this.checkOptionalRule();var a=I["a"].getLeaveRules(this.slug);this.formValues.prior_approval_rules=this.formValues.require_prior_approval?this.prior_approval_rules:[],this.crud.message="Successfully created Leave Rule Settings.",this.setDefaultBooleanField(),this.insertData(a,this.formValues,{clearForm:!1}).then((function(){e.clear(e.formValues),e.$emit("close")})).catch((function(a){e.pushIndexedErrors(a,"prior_approval_request_for",!1,""),e.pushIndexedErrors(a,"prior_approval",!1,"")}))},updateLeaveRule:function(){var e=this;this.checkOptionalRule();var a=I["a"].getLeaveRule(this.slug,this.id);this.crud.message="Successfully Updated Leave Rule Settings.",this.formValues.prior_approval_rules=this.formValues.require_prior_approval?this.prior_approval_rules:[],this.setDefaultBooleanField(),this.putData(a,this.formValues,{clearForm:!1}).then((function(){e.clear(e.formValues),e.$emit("close")})).catch((function(a){e.pushIndexedErrors(a,"prior_approval_request_for",!1,""),e.pushIndexedErrors(a,"prior_approval",!1,"")}))},checkOptionalRule:function(){var e=function(e){return p()(L()(e))?null:e};for(var a in this.formValues.accumulation_rule=e(this.accumulation_rule),this.maxBalance&&(this.formValues.max_balance=60*parseInt(this.maxBalance.hours)+parseInt(this.maxBalance.minutes)),this.formValues.credit_hour_rule=e(this.creditHour),this.formValues.credit_hour_rule&&(this.formValues.credit_hour_rule.maximum_request_duration_applicable||(this.formValues.credit_hour_rule.maximum_request_duration=null,this.formValues.credit_hour_rule.maximum_request_duration_applicable=!1),this.formValues.credit_hour_rule.minimum_request_duration_applicable||(this.formValues.credit_hour_rule.minimum_request_duration=null,this.formValues.credit_hour_rule.minimum_request_duration_applicable=!1),this.formValues.credit_hour_rule.maximum_request_duration&&5===this.formValues.credit_hour_rule.maximum_request_duration.length&&(this.formValues.credit_hour_rule.maximum_request_duration=this.formValues.credit_hour_rule.maximum_request_duration+":00"),this.formValues.credit_hour_rule.minimum_request_duration&&5===this.formValues.credit_hour_rule.minimum_request_duration.length&&(this.formValues.credit_hour_rule.minimum_request_duration=this.formValues.credit_hour_rule.minimum_request_duration+":00"),this.formValues.credit_hour_rule.maximum_request_duration_applicable&&!this.formValues.credit_hour_rule.maximum_request_duration&&(this.formValues.credit_hour_rule.maximum_request_duration="00:00:00"),this.formValues.credit_hour_rule.minimum_request_duration_applicable&&!this.formValues.credit_hour_rule.minimum_request_duration&&(this.formValues.credit_hour_rule.minimum_request_duration="00:00:00")),this.formValues.renewal_rule=e(this.renewal_rule),this.formValues.deduction_rule=e(this.deduction_rule),this.leave_irregularity)""===this.leave_irregularity[a]&&(this.leave_irregularity[a]=null);this.formValues.leave_irregularity=e(this.leave_irregularity),null!==this.formValues.leave_irregularity&&(this.formValues.irregularity_report=!0),null!==this.formValues.beyond_limit&&this.formValues.beyond_limit?this.formValues.can_apply_beyond_zero_balance=!0:this.formValues.can_apply_beyond_zero_balance=!1,null!==this.formValues.require_docs_for&&this.formValues.require_docs_for?this.formValues.require_docs=!0:this.formValues.require_docs=!1,this.formValues.depletion_leave_types!==[]&&this.formValues.depletion_leave_types?this.formValues.depletion_required=!1:this.formValues.depletion_required=!0,this.formValues.depletion_required=!!e(this.formValues.depletion_leave_types),this.formValues.maximum_continuous_leave_length||(this.formValues.maximum_continuous_leave_length=null),this.formValues.minimum_continuous_leave_length||(this.formValues.minimum_continuous_leave_length=null),this.masterSettings.paid&&!this.masterSettings.unpaid?this.formValues.is_paid=!0:!this.masterSettings.paid&&this.masterSettings.unpaid&&(this.formValues.is_paid=!1),this.masterSettings.proportionate_leave||(this.formValues.proportionate_on_joined_date=!1),this.masterSettings.holiday_inclusive||(this.formValues.holiday_inclusive=!1),this.masterSettings.employees_can_apply||(this.formValues.employee_can_apply=!1),this.masterSettings.admin_can_assign||(this.formValues.admin_can_assign=!1),this.masterSettings.half_shift_leave||(this.formValues.can_apply_half_shift=!1),this.masterSettings.accumulation||(this.formValues.accumulation_rule=null),this.masterSettings.renewal||(this.formValues.renewal_rule=null),this.masterSettings.credit_hour||(this.formValues.credit_hour=null),this.masterSettings.renewal||(this.formValues.renewal_rule=null),this.masterSettings.deductible||(this.formValues.deduction_rule=null),this.masterSettings.leave_irregularities||(this.formValues.leave_irregularity=null),this.masterSettings.leave_limitations||(this.formValues.limit_leave_to=null,this.formValues.limit_leave_duration=null,this.formValues.limit_leave_duration_type=null,this.formValues.max_balance=null,this.formValues.min_balance=null,this.formValues.limit_leave_occurrence=null,this.formValues.limit_leave_occurrence_duration=null,this.formValues.limit_leave_occurrence_duration_type=null,this.formValues.maximum_continuous_leave_length=null,this.formValues.minimum_continuous_leave_length=null),this.masterSettings.occurrences||(this.formValues.limit_leave_occurrence=null,this.formValues.limit_leave_occurrence_duration=null,this.formValues.limit_leave_occurrence_duration_type=null),this.masterSettings.continuous||(this.formValues.maximum_continuous_leave_length=null,this.formValues.minimum_continuous_leave_length=null),this.masterSettings.beyond_balance||(this.formValues.can_apply_beyond_zero_balance=null,this.formValues.beyond_limit=null),this.masterSettings.depletion_required||(this.formValues.depletion_leave_types=[],this.formValues.depletion_required=null),this.masterSettings.require_experience||(this.formValues.required_experience=null,this.formValues.required_experience_duration=null),this.masterSettings.require_time_period||(this.formValues.start_date=null,this.formValues.end_date=null),this.formValues.require_prior_approval||(this.formValues.prior_approval_rules=[]),this.masterSettings.require_prior_approval||(this.formValues.prior_approval_rules=[],this.formValues.require_prior_approval=!1),this.masterSettings.require_document||(this.formValues.require_docs=null,this.formValues.require_docs_for=null)},getLeaveRule:function(){var e=this,a=I["a"].getLeaveRule(this.slug,this.id);this.getData(a).then((function(a){e.formValues=a,e.prior_approval_rules=e.formValues.prior_approval_rules,e.leaveRuleName=e.formValues.name,e.clone&&(e.formValues.cloned_from=e.formValues.id,e.formValues.leave_type=e.leaveId),e.creditHour=e.formValues.credit_hour_rule||{},e.accumulation_rule=e.formValues.accumulation_rule||{},e.renewal_rule=e.formValues.renewal_rule||{},e.deduction_rule=e.formValues.deduction_rule||{},e.maxBalance.hours=Math.trunc(e.formValues.max_balance/60),e.maxBalance.minutes=e.formValues.max_balance%60,e.leave_irregularity=e.formValues.leave_irregularity||{},e.priorCount=e.formValues.prior_approval_rules.length,0===e.priorCount&&(e.formValues.prior_approval_rules[0]={prior_approval_request_for:"",prior_approval:"",prior_approval_unit:""},e.priorCount=1)}))},addPriorRules:function(){this.prior_approval_rules[this.priorCount-1].prior_approval_request_for&&this.prior_approval_rules[this.priorCount-1].prior_approval&&this.prior_approval_rules[this.priorCount-1].prior_approval_unit&&(this.prior_approval_rules[this.priorCount]={prior_approval_request_for:"",prior_approval:"",prior_approval_unit:""},this.priorCount+=1)},removePriorRules:function(e){this.priorCount>1&&(this.prior_approval_rules.splice(e,1),this.priorCount-=1)},setDefaultBooleanField:function(){this.formValues.employee_can_apply=this.formValues.employee_can_apply||!1,this.formValues.admin_can_assign=this.formValues.admin_can_assign||!1,this.formValues.is_paid=this.formValues.is_paid||!1}}},we=xe,qe=t("ac7c"),ke=Object(h["a"])(we,Ve,be,!1,null,null,null),Se=ke.exports;V()(ke,{VBtn:j["a"],VCard:b["a"],VCardText:g["c"],VCheckbox:qe["a"],VCol:x["a"],VContainer:F["a"],VDivider:A["a"],VFooter:P["a"],VForm:w["a"],VIcon:B["a"],VRow:q["a"],VSelect:H["a"],VTextField:M["a"],VTextarea:z["a"]});var Ce={components:{GeneralLeaveRules:K,YearsOfServiceLeaveRules:ie,CompensatoryLeaveRules:de,TimeOffLeaveRules:ye,CreditHourLeaveRules:Se},mixins:[i["a"]],props:{leaveRulesType:{type:String,default:""},masterSettings:{type:Object,required:!0},ruleId:{type:[String,Number],default:""},leaveId:{type:[String,Number],default:""},edit:{type:Boolean,default:!1},view:{type:Boolean,default:!1},clone:{type:Boolean,default:!1},leaveName:{type:String,default:""},idleLeaveTypeList:{type:Array,default:function(){return[]}}},data:function(){return{orgSlug:this.$route.params.slug}}},$e=Ce,Re=Object(h["a"])($e,l,r,!1,null,null,null);a["a"]=Re.exports;V()(Re,{VCard:b["a"]})},a029:function(e,a,t){var l=t("087d"),r=t("2dcb"),i=t("32f4"),s=t("d327"),o=Object.getOwnPropertySymbols,n=o?function(e){var a=[];while(e)l(a,i(e)),e=r(e);return a}:s;e.exports=n},b5b6:function(e,a,t){},b65f:function(e,a,t){var l=t("23e7"),r=Math.ceil,i=Math.floor;l({target:"Math",stat:!0},{trunc:function(e){return(e>0?i:r)(e)}})},cba9:function(e,a,t){"use strict";var l=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-card",[t("vue-card-title",{attrs:{title:"Leave Types",subtitle:"",icon:"mdi-file-document-outline",dark:"",closable:""},on:{close:function(a){return e.$emit("close")}}}),t("v-divider"),t("v-form",{ref:"leaveTypeForm",model:{value:e.valid,callback:function(a){e.valid=a},expression:"valid"}},[e.nonFieldErrors?t("non-field-form-errors",{attrs:{"non-field-errors":e.nonFieldErrors}}):e._e(),t("v-card-text",{staticClass:"scrollbar-md"},[t("v-row",[t("v-col",{attrs:{md:"4"}},[t("v-row",[t("v-col",{attrs:{md:"6",cols:"12"}},[t("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{counter:"150"},model:{value:e.formValues.name,callback:function(a){e.$set(e.formValues,"name",a)},expression:"formValues.name"}},"v-text-field",e.veeValidate("name","Leave Name *"),!1))],1),t("v-spacer"),t("v-col",{attrs:{md:"6",cols:"12"}},[t("v-select",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{disabled:!!e.actionData.id,items:e.items},on:{input:function(a){return e.$emit("type",e.formValues.category)}},model:{value:e.formValues.category,callback:function(a){e.$set(e.formValues,"category",a)},expression:"formValues.category"}},"v-select",e.veeValidate("category","Category *"),!1))],1),t("v-col",{attrs:{md:"12",cols:"12"}},[t("v-textarea",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{rows:"2",counter:"600"},model:{value:e.formValues.description,callback:function(a){e.$set(e.formValues,"description",a)},expression:"formValues.description"}},"v-textarea",e.veeValidate("description","Description *"),!1))],1)],1)],1),t("v-col",{attrs:{md:"4"}},[t("div",{staticClass:"pt-6"},[e._v("Applicable for Gender :")]),t("v-tabs",{staticClass:"mt-2",attrs:{"hide-slider":"","show-arrows":"","prepend-icon":"mdi-human-male-female"}},e._l(e.genderChoices,(function(a,l){return t("v-tab",{key:l,class:a.value===e.formValues.applicable_for_gender?"white--text indigo accent-1 text-caption":"",attrs:{"data-cy":"tab-gender"},on:{click:function(t){e.formValues.applicable_for_gender=a.value}}},[t("v-icon",{class:[a.value===e.formValues.applicable_for_gender?"white--text":""]+" pr-2 text-body-1",domProps:{textContent:e._s(a.icon)}}),t("span",{staticClass:"text-capitalize",domProps:{textContent:e._s(a.value)}})],1)})),1),t("div",{staticClass:"pt-6"},[e._v("Applicable for Marital status :")]),t("v-tabs",{staticClass:"mt-2",attrs:{"hide-slider":"","show-arrows":"","prepend-icon":"mdi-human-male-female"}},e._l(e.maritalStatus,(function(a,l){return t("v-tab",{key:l,class:a.value===e.formValues.applicable_for_marital_status?"white--text indigo accent-1 text-caption":"",attrs:{"data-cy":"tab-marital-status"},on:{click:function(t){e.formValues.applicable_for_marital_status=a.value}}},[t("v-icon",{class:[l===e.formValues.applicable_for_marital_status?"white--text":""]+" pr-2 text-body-1",domProps:{textContent:e._s(a.icon)}}),t("span",{staticClass:"text-capitalize",domProps:{textContent:e._s(a.value)}})],1)})),1)],1),t("v-col",{staticClass:"px-7",attrs:{md:"4"}},[t("v-row",[t("div",[t("div",{domProps:{textContent:e._s("Enable Notification for This Type")}}),t("div",{staticClass:"grey--text text-caption",domProps:{textContent:e._s("Enable Notification Through Email")}})]),t("v-spacer"),t("v-switch",{attrs:{"data-cy":"switch-enable-notification"},model:{value:e.enable_notification,callback:function(a){e.enable_notification=a},expression:"enable_notification"}})],1),e.enable_notification?t("v-row",[t("v-checkbox",e._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],staticClass:"pa-0",attrs:{"data-cy":"checkbox-email",label:"Email"},on:{change:function(a){return e.checkEmailTemplate(a,"Leave Email","email_notification")}},model:{value:e.formValues.email_notification,callback:function(a){e.$set(e.formValues,"email_notification",a)},expression:"formValues.email_notification"}},"v-checkbox",e.veeValidate("email_notification","Email Notification"),!1))],1):e._e(),t("v-row",[t("div",[t("div",{domProps:{textContent:e._s("Make visible by default")}}),t("div",{staticClass:"grey--text text-caption",domProps:{textContent:e._s("Will be displayed by default on leave request page")}})]),t("v-spacer"),t("v-switch",{attrs:{"data-cy":"switch-visible-on-default"},model:{value:e.formValues.visible_on_default,callback:function(a){e.$set(e.formValues,"visible_on_default",a)},expression:"formValues.visible_on_default"}})],1),t("v-row",[t("v-col",{attrs:{cols:"8"}},[t("div",{domProps:{textContent:e._s("Set Multilevel Approval")}}),t("div",{staticClass:"grey--text text-caption",domProps:{textContent:e._s("Will need approval from other approval levels too. Need to set approval level otherwise supervisor approval will be final.")}})]),t("v-spacer"),t("v-switch",{attrs:{"data-cy":"switch-multi-level-approval"},model:{value:e.formValues.multi_level_approval,callback:function(a){e.$set(e.formValues,"multi_level_approval",a)},expression:"formValues.multi_level_approval"}})],1)],1)],1)],1),t("v-divider"),t("v-card-actions",[t("v-spacer"),t("v-btn",{attrs:{depressed:"",color:"primary"},on:{click:e.getFormAction}},[t("v-icon",{attrs:{size:"14"}},[e._v(" mdi-content-save-outline ")]),e._v(" Save ")],1),t("v-btn",{attrs:{outlined:"",color:"primary"},on:{click:function(a){return e.clear(e.formValues)}}},[e._v(" Clear ")])],1)],1)],1)},r=[],i=t("1da1"),s=(t("96cf"),t("a9e3"),t("b64b"),t("b0c0"),t("159b"),t("99af"),t("ab8a")),o=t("c44a"),n=t("bc60"),u=t("44ac"),c={components:{NonFieldFormErrors:s["default"]},mixins:[o["a"]],props:{masterSetting:{type:Object,required:!0},actionData:{type:Object,required:!0},slug:{type:String,required:!0},clone:{type:Boolean,default:!1},isEdit:{type:Boolean,default:!1},cloneMasterSettingId:{type:[String,Number],default:""}},data:function(){return{items:[{text:"General"}],leaveTakenIntervalItems:["Monthly","Yearly","Annually"],valid:!1,masterId:"",formValues:this.deepCopy(this.actionData),genderChoices:[{value:"All"},{icon:"mdi-gender-male",value:"Male"},{icon:"mdi-gender-female",value:"Female"},{icon:"mdi-gender-male-female",value:"Other"}],enable_notification:!1,maritalStatus:[{value:"All"},{value:"Single"},{value:"Married"}],toggleMultiple:""}},watch:{masterSetting:function(){this.getSelections()},enable_notification:function(){this.formValues.email_notification=!1,this.formValues.sms_notification=!1}},created:function(){var e=this;0===Object.keys(this.actionData).length?this.formValues={master_setting:"",name:"",category:"",description:"",applicable_for_marital_status:"All",applicable_for_gender:"All",email_notification:!1,sms_notification:!1,visible_on_default:!0,valid:!1}:this.$nextTick((function(){e.formValues=e.deepCopy(e.actionData)})),this.clone?this.masterId=this.cloneMasterSettingId:this.masterId=this.$route.query.name,this.getSelections()},methods:{getFormAction:function(){this.clone?(this.formValues.cloned_from=this.formValues.id,this.next()):this.actionData.id?this.editLeaveType():this.next()},clear:function(e){Object.keys(e).forEach((function(a){e[a]=""})),this.clearNonFieldErrors(),this.$validator.errors.clear(),this.formValues.applicable_for_gender="All",this.formValues.applicable_for_marital_status="All",this.enable_notification=!1,this.formValues.visible_on_default=!1,this.formValues.multi_level_approval=!1},next:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var t;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.validateAllFields();case 2:if(!a.sent){a.next=7;break}return e.formValues.master_setting=e.masterId,t=n["a"].getLeaveTypes(e.slug),a.next=7,e.$http.post(t,e.formValues).then((function(){e.clear(e.formValues),e.notifyUser("Successfully created Leave Type."),e.$emit("next")})).catch((function(a){e.notifyInvalidFormResponse(),e.pushErrors(a)}));case 7:case"end":return a.stop()}}),a)})))()},editLeaveType:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.validateAllFields();case 2:if(!a.sent){a.next=5;break}e.formValues.master_setting=e.masterId,e.$http.put("/leave/".concat(e.slug,"/leave-types/").concat(e.actionData.id,"/"),e.formValues).then((function(){e.clear(e.formValues),e.notifyUser("Successfully updated Leave Type."),e.$emit("next")})).catch((function(a){e.notifyInvalidFormResponse(),e.pushErrors(a)}));case 5:case"end":return a.stop()}}),a)})))()},getSelections:function(){this.masterSetting.time_off&&this.items.push({text:"Time Off"}),this.masterSetting.compensatory&&this.items.push({text:"Compensatory"}),this.masterSetting.years_of_service&&this.items.push({text:"Years of Service"}),this.masterSetting.credit_hour&&this.items.push({text:"Credit Hour"}),(this.formValues.email_notification||this.formValues.sms_notification)&&(this.enable_notification=!0)},checkEmailTemplate:function(e,a,t){var l=this;!1!==e?this.$http.get(u["a"].getTemplate(this.getOrganizationSlug)+"?template_type="+a+"&is_active=true").then((function(e){e.count<1&&l.displayErrors(t,"No email will be sent to employee unless email template for ".concat(a," is created and activated. Either email template has not been created or has not been activated yet. Please confirm."))})).catch((function(e){l.notifyInvalidFormResponse(),l.pushErrors(e)})):this.$validator.errors.remove(t)}}},d=c,_=(t("270a"),t("2877")),m=t("6544"),p=t.n(m),v=t("8336"),f=t("b0af"),h=t("99d9"),y=t("ac7c"),V=t("62ad"),b=t("ce7e"),g=t("4bd4"),x=t("132d"),w=t("0fd9b"),q=t("b974"),k=t("2fa4"),S=t("b73d"),C=t("71a3"),$=t("fe57"),R=t("8654"),N=t("a844"),D=Object(_["a"])(d,l,r,!1,null,null,null);a["a"]=D.exports;p()(D,{VBtn:v["a"],VCard:f["a"],VCardActions:h["a"],VCardText:h["c"],VCheckbox:y["a"],VCol:V["a"],VDivider:b["a"],VForm:g["a"],VIcon:x["a"],VRow:w["a"],VSelect:q["a"],VSpacer:k["a"],VSwitch:S["a"],VTab:C["a"],VTabs:$["a"],VTextField:R["a"],VTextarea:N["a"]})},ec8c:function(e,a){function t(e){var a=[];if(null!=e)for(var t in Object(e))a.push(t);return a}e.exports=t},f0d5:function(e,a,t){"use strict";t("d3b7"),t("3ca3"),t("ddb0");var l=t("c44a");a["a"]={components:{NonFieldFormErrors:function(){return t.e("chunk-6441e173").then(t.bind(null,"ab8a"))}},mixins:[l["a"]],data:function(){return{crud:{name:"record",message:"",addAnother:!1},formValues:{},loading:!1}}}},f12b:function(e,a,t){"use strict";var l=t("f0d5"),r=t("983c"),i=t("f70a"),s=t("6c6f");a["a"]={mixins:[l["a"],r["a"],i["a"],s["a"]]}},f70a:function(e,a,t){"use strict";t("d3b7"),t("caad");a["a"]={methods:{insertData:function(e,a){var t=this,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=l.validate,i=void 0===r||r,s=l.clearForm,o=void 0===s||s,n=arguments.length>3?arguments[3]:void 0;return new Promise((function(l,r){!t.loading&&e&&(t.clearErrors(),t.$validator.validateAll().then((function(s){i||(s=!0),s&&(t.loading=!0,t.$http.post(e,a,n||{}).then((function(e){t.clearErrors(),o&&(t.formValues={}),t.crud.addAnother||t.$emit("create"),t.crud.message&&setTimeout((function(){t.notifyUser(t.crud.message)}),1e3),l(e),t.loading=!1})).catch((function(e){t.pushErrors(e),t.notifyInvalidFormResponse(),r(e),t.loading=!1})))})))}))},patchData:function(e,a){var t=this,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=l.validate,i=void 0===r||r,s=l.clearForm,o=void 0===s||s,n=arguments.length>3?arguments[3]:void 0;return new Promise((function(l,r){t.updateData(e,a,{validate:i,clearForm:o},"patch",n).then((function(e){l(e)})).catch((function(e){r(e)}))}))},putData:function(e,a){var t=this,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=l.validate,i=void 0===r||r,s=l.clearForm,o=void 0===s||s,n=arguments.length>3?arguments[3]:void 0;return new Promise((function(l,r){t.updateData(e,a,{validate:i,clearForm:o},"put",n).then((function(e){l(e)})).catch((function(e){r(e)}))}))},updateData:function(e,a){var t=this,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=l.validate,i=void 0===r||r,s=l.clearForm,o=void 0===s||s,n=arguments.length>3?arguments[3]:void 0,u=arguments.length>4?arguments[4]:void 0;return new Promise((function(l,r){!t.loading&&e&&["put","patch"].includes(n)&&(t.clearErrors(),t.$validator.validateAll().then((function(s){i||(s=!0),s&&(t.loading=!0,t.$http[n](e,a,u||{}).then((function(e){t.$emit("update"),t.clearErrors(),o&&(t.formValues={}),t.crud.message&&setTimeout((function(){t.notifyUser(t.crud.message)}),1e3),l(e),t.loading=!1})).catch((function(e){t.pushErrors(e),t.notifyInvalidFormResponse(),r(e),t.loading=!1})))})))}))},clearErrors:function(){this.clearNonFieldErrors(),this.$validator.errors.clear()}}}}}]);