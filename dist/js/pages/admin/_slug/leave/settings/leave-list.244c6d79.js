(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages/admin/_slug/leave/settings/leave-list","chunk-26c51c79","chunk-2d2259e9"],{1229:function(e,t,a){"use strict";a("99af");t["a"]={getDivision:function(e){return"/org/".concat(e,"/division/")},postDivision:function(e){return"/org/".concat(e,"/division/")},getDivisionDetails:function(e,t){return"/org/".concat(e,"/division/").concat(t,"/")},putDivision:function(e,t){return"/org/".concat(e,"/division/").concat(t,"/")},deleteDivision:function(e,t){return"/org/".concat(e,"/division/").concat(t,"/")},importDivision:function(e){return"/org/".concat(e,"/division/import/")},downloadSampleDivision:function(e){return"/org/".concat(e,"/division/import/sample")}}},"17cc":function(e,t,a){"use strict";var i=a("b85c"),n=a("1da1"),s=a("5530");a("96cf"),a("ac1f"),a("841c"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("b64b");t["a"]={data:function(){return{fetchedResults:[],response:{},extra_data:"",appliedFilters:{},footerProps:{itemsPerPageOptions:[10,20,30,40,50,100]},pagination:{sortBy:["modified_at"],descending:!1,totalItems:0,page:1,rowsPerPage:10,pageCount:0},triggerDataTable:!0,fullParams:""}},created:function(){this.getParams(this.DataTableFilter)},methods:{getParams:function(e){var t=Object(s["a"])(Object(s["a"])({},e),{},{offset:(this.pagination.page-1)*this.pagination.rowsPerPage,limit:this.pagination.rowsPerPage,ordering:this.pagination.descending?this.pagination.sortBy:"-"+this.pagination.sortBy});this.fullParams=this.convertToURLSearchParams(t)},loadDataTable:function(e){this.response=e,this.fetchedResults=e.results,this.pagination.totalItems=e.count,this.extra_data=e.extra_data,this.triggerDataTable=!0},fetchData:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.warn("DatatableMixin: fetchData has been deprecated. Please use the function in page itself."),i=Object(s["a"])(Object(s["a"])(Object(s["a"])({},e),t.appliedFilters),{},{search:t.search,offset:(t.pagination.page-1)*t.pagination.rowsPerPage,limit:t.pagination.rowsPerPage,ordering:t.pagination.descending?t.pagination.sortBy:"-"+t.pagination.sortBy}),n=t.convertToURLSearchParams(i),t.loading=!0,a.next=6,t.$http.get(t.endpoint,{params:n}).then((function(e){t.response=e,t.fetchedResults=e.results,t.pagination.totalItems=e.count})).finally((function(){t.loading=!1}));case 6:case"end":return a.stop()}}),a)})))()},applyFilters:function(e){this.appliedFilters=e,this.fetchData(e)},convertToURLSearchParams:function(e){for(var t=new URLSearchParams,a=0,n=Object.keys(e);a<n.length;a++){var s=n[a],o=e[s];if(void 0===o&&(o=""),Array.isArray(o)){var r,l=Object(i["a"])(o);try{for(l.s();!(r=l.n()).done;){var c=r.value;t.append(s,c)}}catch(u){l.e(u)}finally{l.f()}}else t.append(s,o)}return t},loadDataTableChange:function(){var e=this;this.triggerDataTable&&(this.getParams(this.DataTableFilter),this.$nextTick((function(){e.fetchDataTable()})))}},watch:{DataTableFilter:function(e){this.fetchedResults=[],this.getParams(e),this.fetchDataTable(),this.pagination.page=1},"pagination.sortBy":function(){this.fetchedResults=[],this.loadDataTableChange()},"pagination.descending":function(){this.fetchedResults=[],this.loadDataTableChange()},"pagination.page":function(){this.fetchedResults=[],this.loadDataTableChange()},"pagination.rowsPerPage":function(){this.fetchedResults=[],this.loadDataTableChange()}}}},"1f09":function(e,t,a){},3129:function(e,t,a){"use strict";var i=a("3835"),n=a("5530"),s=(a("ac1f"),a("1276"),a("d81d"),a("a630"),a("3ca3"),a("5319"),a("1f09"),a("c995")),o=a("24b2"),r=a("7560"),l=a("58df"),c=a("80d2");t["a"]=Object(l["a"])(s["a"],o["a"],r["a"]).extend({name:"VSkeletonLoader",props:{boilerplate:Boolean,loading:Boolean,tile:Boolean,transition:String,type:String,types:{type:Object,default:function(){return{}}}},computed:{attrs:function(){return this.isLoading?this.boilerplate?{}:Object(n["a"])({"aria-busy":!0,"aria-live":"polite",role:"alert"},this.$attrs):this.$attrs},classes:function(){return Object(n["a"])(Object(n["a"])({"v-skeleton-loader--boilerplate":this.boilerplate,"v-skeleton-loader--is-loading":this.isLoading,"v-skeleton-loader--tile":this.tile},this.themeClasses),this.elevationClasses)},isLoading:function(){return!("default"in this.$scopedSlots)||this.loading},rootTypes:function(){return Object(n["a"])({actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, card-heading","card-avatar":"image, list-item-avatar","card-heading":"heading",chip:"chip","date-picker":"list-item, card-heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",paragraph:"text@3",sentences:"text@2",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"heading, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"table-cell@6","table-cell":"text","table-tfoot":"text@2, avatar@2",text:"text"},this.types)}},methods:{genBone:function(e,t){return this.$createElement("div",{staticClass:"v-skeleton-loader__".concat(e," v-skeleton-loader__bone")},t)},genBones:function(e){var t=this,a=e.split("@"),n=Object(i["a"])(a,2),s=n[0],o=n[1],r=function(){return t.genStructure(s)};return Array.from({length:o}).map(r)},genStructure:function(e){var t=[];e=e||this.type||"";var a=this.rootTypes[e]||"";if(e===a);else{if(e.indexOf(",")>-1)return this.mapBones(e);if(e.indexOf("@")>-1)return this.genBones(e);a.indexOf(",")>-1?t=this.mapBones(a):a.indexOf("@")>-1?t=this.genBones(a):a&&t.push(this.genStructure(a))}return[this.genBone(e,t)]},genSkeleton:function(){var e=[];return this.isLoading?e.push(this.genStructure()):e.push(Object(c["s"])(this)),this.transition?this.$createElement("transition",{props:{name:this.transition},on:{afterEnter:this.resetStyles,beforeEnter:this.onBeforeEnter,beforeLeave:this.onBeforeLeave,leaveCancelled:this.resetStyles}},e):e},mapBones:function(e){return e.replace(/\s/g,"").split(",").map(this.genStructure)},onBeforeEnter:function(e){this.resetStyles(e),this.isLoading&&(e._initialStyle={display:e.style.display,transition:e.style.transition},e.style.setProperty("transition","none","important"))},onBeforeLeave:function(e){e.style.setProperty("display","none","important")},resetStyles:function(e){e._initialStyle&&(e.style.display=e._initialStyle.display||"",e.style.transition=e._initialStyle.transition,delete e._initialStyle)}},render:function(e){return e("div",{staticClass:"v-skeleton-loader",attrs:this.attrs,on:this.$listeners,class:this.classes,style:this.isLoading?this.measurableStyles:void 0},[this.genSkeleton()])}})},"7e77":function(e,t,a){"use strict";a("99af");t["a"]={getEmploymentType:function(e){return"/org/".concat(e,"/employment/status/")},postEmploymentType:function(e){return"/org/".concat(e,"/employment/status/")},getEmploymentStatusDetail:function(e,t){return"/org/".concat(e,"/employment/status/").concat(t,"/")},updateEmploymentType:function(e,t){return"/org/".concat(e,"/employment/status/").concat(t,"/")},deleteEmploymentType:function(e,t){return"/org/".concat(e,"/employment/status/").concat(t,"/")},downloadSampleEmploymentType:function(e){return"/org/".concat(e,"/employment/status/import/sample")},importEmploymentType:function(e){return"/org/".concat(e,"/employment/status/import/")}}},a51f:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.search.length>0?a("span",[e._v(' Your search for "'+e._s(e.search)+'" found no results. ')]):e.loading?a("v-skeleton-loader",{attrs:{type:"table",height:e.skeletonLoaderHeight}}):a("no-data-found",{attrs:{text:e.text,height:e.height}},[e._t("default")],2)],1)},n=[],s=(a("a9e3"),a("e585")),o={components:{NoDataFound:s["default"]},props:{search:{type:String,default:""},loading:{type:Boolean,required:!0},text:{type:String,default:"No data available at the moment"},height:{type:[String,Number],default:200},skeletonLoaderHeight:{type:[String,Number],default:void 0}}},r=o,l=a("2877"),c=a("6544"),u=a.n(c),d=a("3129"),m=Object(l["a"])(r,i,n,!1,null,null,null);t["default"]=m.exports;u()(m,{VSkeletonLoader:d["a"]})},ad37:function(e,t,a){"use strict";t["a"]={getReligionEthnicity:"/commons/religion-ethnicity/",postReligionEthnicity:"/commons/religion-ethnicity/",updateReligionEthnicity:function(e){return"/commons/religion-ethnicity/".concat(e,"/")},deleteReligionEthnicity:function(e){return"/commons/religion-ethnicity/".concat(e,"/")}}},d401:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vue-page-wrapper",{attrs:{title:e.htmlTitle,"bread-crumbs":e.breadCrumbItems}},[a("v-card",[a("vue-card-title",{attrs:{title:"Leave Types",subtitle:"The list below contains all leave types for organization.",icon:"mdi-file-document-outline"}},[a("template",{slot:"actions"},[!e.verifyPermission(e.allPermissions.CAN_ADD_EDIT_UPDATE_MASTER_SETTINGS)||"Idle"!==e.masterSettings.status&&"Active"!==e.masterSettings.status?e._e():a("v-btn",{attrs:{small:"",color:"primary",depressed:""},on:{click:function(t){e.selectedLeaveType={},e.sheet=!0,e.active=0}}},[e._v(" Create New ")]),a("v-btn",{attrs:{"data-cy":"btn-filter",icon:""},on:{click:function(t){e.showFilters=!e.showFilters}}},[a("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-filter-variant")}})],1)],1)],2),a("v-divider"),a("v-slide-y-transition",[e.showFilters?a("div",[a("v-col",[a("vue-search",{attrs:{search:e.search},on:{"update:search":function(t){e.search=t}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-divider")],1):e._e()]),a("v-data-table",{attrs:{headers:e.headersLeaveType,items:e.fetchedResults,"sort-desc":e.pagination.descending,"sort-by":e.pagination.sortBy,page:e.pagination.page,"items-per-page":e.pagination.rowsPerPage,"footer-props":e.footerProps,"server-items-length":e.pagination.totalItems,"mobile-breakpoint":0,"hide-default-header":"","single-expand":"","must-sort":""},on:{"update:sortDesc":function(t){return e.$set(e.pagination,"descending",t)},"update:sort-desc":function(t){return e.$set(e.pagination,"descending",t)},"update:sortBy":function(t){return e.$set(e.pagination,"sortBy",t)},"update:sort-by":function(t){return e.$set(e.pagination,"sortBy",t)},"update:page":function(t){return e.$set(e.pagination,"page",t)},"update:itemsPerPage":function(t){return e.$set(e.pagination,"rowsPerPage",t)},"update:items-per-page":function(t){return e.$set(e.pagination,"rowsPerPage",t)}},scopedSlots:e._u([{key:"header",fn:function(t){var i=t.props.headers;return[a("thead",[a("tr",e._l(i,(function(t){return a("th",{key:t.value,staticClass:"\n                grey--text\n                text--darken-2\n                very-light-blue\n                text-body-2\n                font-weight-bold\n                px-4\n              ",class:"text-"+t.align,staticStyle:{"border-bottom":"1px solid lightgrey","border-top":"1px solid lightgrey"}},[a("span",[e._v(e._s(t.text))]),"applicable"===t.value?a("br"):e._e(),"applicable"===t.value?a("span",{staticClass:"text-caption"},[e._v(" (Gender/Marital Status) ")]):e._e()])})),0)])]}},{key:"item",fn:function(t){return[a("tr",[a("td",[a("div",{on:{click:function(a){t.expand(!t.isExpanded),e.toggleLeaveRules(t.item.id),e.leaveRuleType=t.item.category}}},[e._v(" "+e._s(t.item.name)+" "),a("v-icon",{staticClass:"pointer",attrs:{size:"20",color:"info"},domProps:{textContent:e._s(t.expanded?"mdi-chevron-up":"mdi-chevron-down")}})],1)]),a("td",{domProps:{textContent:e._s(t.item.category)}}),a("td",{staticClass:"text-center"},[a("v-chip",{attrs:{outlined:"",small:"",color:"pink"}},[a("span",[e._v(e._s(t.item.applicable_for_gender))])]),e._v(" | "),a("v-chip",{attrs:{outlined:"",small:"",color:"info"}},[a("span",[e._v(e._s(t.item.applicable_for_marital_status))])])],1),a("td",{staticClass:"text-center"},[a("vue-context-menu",{attrs:{"context-list":[{name:t.isExpanded?"Collapse":"Expand",icon:t.isExpanded?"mdi-chevron-up":"mdi-chevron-down"},{name:"Add Rule",icon:"mdi-plus",color:"primary",hide:!e.verifyPermission(e.allPermissions.CAN_ADD_EDIT_UPDATE_MASTER_SETTINGS)},{name:"Edit Leave Type",icon:"mdi-pencil-outline",color:"grey darken-2",hide:!("Idle"===e.masterSettings.status)||!e.verifyPermission(e.allPermissions.CAN_ADD_EDIT_UPDATE_MASTER_SETTINGS)},{name:"Delete Leave Type",icon:"mdi-delete-outline",color:"grey darken-2",hide:!("Idle"===e.masterSettings.status)||!e.verifyPermission(e.allPermissions.CAN_ADD_EDIT_UPDATE_MASTER_SETTINGS)}]},on:{click0:function(a){t.expand(!t.isExpanded),e.toggleLeaveRules(t.item.id),e.leaveRuleType=t.item.category},click1:function(a){t.expand(!t.isExpanded),e.addRule(t.item.id,t.item.category,t.item.name)},click2:function(a){return e.editLeaveType(t.item)},click3:function(a){e.deleteNotification.dialog=!0,e.deleteId=t.item.id}}})],1)])]}},{key:"expanded-item",fn:function(t){var i=t.item,n=t.headers;return[a("td",{attrs:{colspan:n.length}},[a("v-card",{attrs:{flat:"",outlined:""}},[a("v-card-text",[e.showLeaveRules?a("leave-rule-data-table",{ref:"leaveRule",attrs:{"rule-id":e.leaveID,"master-settings":e.masterSettings},on:{assignEmployee:function(t){e.leaveRuleId=t,e.assignEmployeeForm=!0},edit:function(t){return e.editRules(t,i)},delete:function(t){e.deleteLeaveRuleNotification.dialog=!0,e.deleteId=t},view:function(t){return e.viewRule(t,i)}}}):e._e()],1)],1)],1)]}}])},[a("template",{slot:"no-data"},[a("data-table-no-data",{attrs:{loading:e.loading}})],1)],2),a("vue-dialog",{attrs:{notify:e.deleteNotification},on:{close:function(t){e.deleteNotification.dialog=!1},agree:function(t){return e.deleteLeaveType()}},model:{value:e.deleteNotification.dialog,callback:function(t){e.$set(e.deleteNotification,"dialog",t)},expression:"deleteNotification.dialog"}}),a("vue-dialog",{attrs:{notify:e.deleteLeaveRuleNotification},on:{close:function(t){e.deleteLeaveRuleNotification.dialog=!1},agree:function(t){return e.deleteLeaveRule()}},model:{value:e.deleteLeaveRuleNotification.dialog,callback:function(t){e.$set(e.deleteLeaveRuleNotification,"dialog",t)},expression:"deleteLeaveRuleNotification.dialog"}})],1),a("v-row",{attrs:{justify:"center"}},[a("v-bottom-sheet",{attrs:{persistent:"",transition:"dialog-bottom-transition"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.dismissForm.apply(null,arguments)}},model:{value:e.sheet,callback:function(t){e.sheet=t},expression:"sheet"}},[a("div",[e.sheet?a("create-leave-type-form",{attrs:{"action-data":e.selectedLeaveType,"master-setting":e.masterSettings,slug:e.orgSlug},on:{dismissForm:e.dismissForm,type:function(t){e.leaveRuleType=t},next:function(t){e.sheet=!1,e.leaveDetails=[],e.selectedLeaveType=void 0,e.fetchDataTable()},close:function(t){e.sheet=!1}}}):e._e()],1)]),a("v-dialog",{attrs:{fullscreen:"",scrollable:"",persistent:"",transition:"dialog-bottom-transition"},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.leaveRulesForm=!1,e.leaveDetails=[],e.dismissForm(),e.edit=!1,e.viewLeaveRule=!1}},model:{value:e.leaveRulesForm,callback:function(t){e.leaveRulesForm=t},expression:"leaveRulesForm"}},[a("v-card",[e.leaveRulesForm?a("leave-rules-form",{attrs:{"leave-rules-type":e.leaveRuleType,"leave-name":e.leaveName,"master-settings":e.masterSettings,"rule-id":e.leaveRuleId,"leave-id":e.leaveID,edit:e.edit,view:e.viewLeaveRule},on:{close:function(t){e.leaveRulesForm=!1,e.leaveDetails=[],e.dismissForm(),e.edit=!1,e.viewLeaveRule=!1},next:function(t){e.sheet=!1},back:function(t){e.active--}}}):e._e()],1)],1)],1),a("v-bottom-sheet",{key:e.assignEmployeeForm,attrs:{persistent:"",transition:"dialog-bottom-transition"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.dismissForm.apply(null,arguments)}},model:{value:e.assignEmployeeForm,callback:function(t){e.assignEmployeeForm=t},expression:"assignEmployeeForm"}},[a("assign-employee-form",{attrs:{"leave-category":e.leaveRuleType,slug:e.orgSlug,"leave-id":e.leaveId,"rule-id":e.leaveRuleId},on:{back:function(t){e.active--},close:function(t){e.assignEmployeeForm=!1},next:function(t){e.sheet=!1,e.leaveDetails=[]},dismissForm:e.dismissForm}})],1)],1)},n=[],s=a("1da1"),o=(a("96cf"),a("b0c0"),a("ac1f"),a("841c"),a("d3b7"),a("4de4"),a("caad"),a("2532"),a("99af"),a("c44a")),r=a("17cc"),l=a("cba9"),c=a("999e"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("vue-card-title",{attrs:{title:"Assign Leave Rules",subtitle:"The list below contain list of employee to assign employee.",icon:"mdi-file-document-outline",dark:""}},[a("template",{slot:"actions"},[a("v-btn",{attrs:{icon:""},on:{click:function(t){e.showFilters=!e.showFilters}}},[a("v-icon",{attrs:{small:"",color:"white"},domProps:{textContent:e._s("mdi-filter-variant")}})],1),a("v-btn",{attrs:{icon:""},on:{click:function(t){return e.cancelAssignEmployee()}}},[a("v-icon",{attrs:{small:"",color:"white"},domProps:{textContent:e._s("mdi-close")}})],1)],1)],2),a("v-divider"),a("v-card-text",{staticClass:"px-0"},[a("div",{staticClass:"scrollbar-md"},[a("v-slide-y-transition",[e.showFilters?a("v-row",{staticClass:"px-3"},[a("v-col",{attrs:{md:"3"}},[a("v-text-field",{attrs:{label:"Search By Name or Username","prepend-inner-icon":"mdi-magnify"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-col",{attrs:{md:"3"}},[a("v-select",{attrs:{items:e.categoryList,label:"Category"},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}})],1),a("v-col",{attrs:{md:"3"}},[a("vue-auto-complete",{attrs:{endpoint:e.branchEndpoint,params:{is_archived:"false"},"item-text":"name","item-value":"slug",label:"Search By Branch",multiple:"","force-fetch":""},model:{value:e.formValues.branch,callback:function(t){e.$set(e.formValues,"branch",t)},expression:"formValues.branch"}})],1),a("v-col",{attrs:{md:"3"}},[a("vue-auto-complete",{attrs:{endpoint:e.divisionEndpoint,params:{is_archived:!1},"item-text":"name","item-value":"slug",label:"Search by Division",multiple:"","force-fetch":""},model:{value:e.formValues.division,callback:function(t){e.$set(e.formValues,"division",t)},expression:"formValues.division"}})],1),a("v-col",{attrs:{md:"3"}},[a("vue-auto-complete",e._b({attrs:{endpoint:e.employmentTypeEndpoint,params:{is_archived:"false"},"item-value":"slug","item-text":"title",multiple:"","force-fetch":""},model:{value:e.formValues.employment_status,callback:function(t){e.$set(e.formValues,"employment_status",t)},expression:"formValues.employment_status"}},"vue-auto-complete",e.veeValidate("employment_status","Employment Type"),!1))],1),a("v-col",{attrs:{md:"3"}},[a("vue-auto-complete",{attrs:{endpoint:e.religionEthnicityEndpoint,params:{category:"Religion"},label:"Religion","prepend-inner-icon":"mdi-atom-variant","item-text":"name","item-value":"slug",multiple:"","force-fetch":""},model:{value:e.formValues.religion,callback:function(t){e.$set(e.formValues,"religion",t)},expression:"formValues.religion"}})],1),a("v-col",{attrs:{md:"3"}},[a("vue-auto-complete",{attrs:{endpoint:e.religionEthnicityEndpoint,params:{category:"Ethnicity"},"item-text":"name",label:"Ethnicity","prepend-inner-icon":"mdi-account-multiple","item-value":"slug",multiple:"","force-fetch":""},model:{value:e.formValues.ethnicity,callback:function(t){e.$set(e.formValues,"ethnicity",t)},expression:"formValues.ethnicity"}})],1)],1):e._e()],1),a("v-divider"),e.nonFieldErrors?a("non-field-form-errors",{attrs:{"non-field-errors":e.nonFieldErrors}}):e._e(),a("v-data-table",{attrs:{headers:e.headers,items:e.tableData,loading:e.loading,"sort-desc":e.pagination.descending,"sort-by":e.pagination.sortBy,page:e.pagination.page,"items-per-page":e.pagination.rowsPerPage,"footer-props":e.footerProps,"server-items-length":e.pagination.totalItems,"mobile-breakpoint":0,"must-sort":"","show-select":""},on:{"update:sortDesc":function(t){return e.$set(e.pagination,"descending",t)},"update:sort-desc":function(t){return e.$set(e.pagination,"descending",t)},"update:sortBy":function(t){return e.$set(e.pagination,"sortBy",t)},"update:sort-by":function(t){return e.$set(e.pagination,"sortBy",t)},"update:page":function(t){return e.$set(e.pagination,"page",t)},"update:itemsPerPage":function(t){return e.$set(e.pagination,"rowsPerPage",t)},"update:items-per-page":function(t){return e.$set(e.pagination,"rowsPerPage",t)}},scopedSlots:e._u([{key:"item",fn:function(t){return[a("tr",[a("td",[a("v-checkbox",{staticClass:"pa-0 ma-0",attrs:{"input-value":t.isSelected,primary:"","hide-details":""},on:{change:function(e){return t.select(!t.isSelected)}}})],1),a("td",[a("vue-user",{attrs:{user:t.item.user}})],1),a("td",[e._v(e._s(t.item.user.username))]),a("td",[t.item.supervisor?a("vue-user",{attrs:{user:t.item.supervisor}}):a("div",[e._v("Not Available")])],1)])]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[a("template",{slot:"no-data"},[a("vue-no-data")],1),a("template",{slot:"footer"},[a("v-divider"),a("v-row",{staticClass:"ma-4",attrs:{align:"center"}},[a("span",[e._v("Selected Employees ")]),a("strong",[e._v(e._s(": "+e.selected.length))]),a("v-spacer"),a("v-row",{attrs:{align:"center"}},["Unassigned"===e.status?a("v-col",{attrs:{cols:"12",md:e.assignCustomBalance?"3":"6",sm:"6"}},[a("v-checkbox",{attrs:{disabled:!e.selected.length,label:"Assign User Defined Balance"},model:{value:e.assignCustomBalance,callback:function(t){e.assignCustomBalance=t},expression:"assignCustomBalance"}})],1):e._e(),e.assignCustomBalance&&"Unassigned"===e.status?a("v-col",{attrs:{cols:"12",md:"3",sm:"6"}},[a("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:["Time Off","Credit Hour"].includes(e.leaveCategory)?"required|numeric":"required",expression:"\n                    ['Time Off', 'Credit Hour'].includes(leaveCategory)\n                      ? 'required|numeric'\n                      : 'required'\n                  "}],staticClass:"py-0",attrs:{hint:["Time Off","Credit Hour"].includes(e.leaveCategory)?"In Minutes":"In Days"},model:{value:e.customBalance,callback:function(t){e.customBalance=t},expression:"customBalance"}},"v-text-field",e.veeValidate("default_balance","Custom Balance *"),!1))],1):e._e(),e.assignCustomBalance&&"Unassigned"===e.status?a("v-col",{attrs:{cols:"12",md:"4",sm:e.assignCustomBalance?"12":"6"}},[a("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required|max:255",expression:"'required|max:255'"}],staticClass:"py-0",attrs:{counter:"255"},model:{value:e.remarks,callback:function(t){e.remarks=t},expression:"remarks"}},"v-text-field",e.veeValidate("remarks","Remarks *"),!1))],1):e._e(),"Assigned"===e.status?a("v-col",{staticClass:"text-right",attrs:{cols:"12"}},[a("v-btn",{attrs:{disabled:!e.selected.length,small:"",color:"primary"},domProps:{textContent:e._s("Remove From List")},on:{click:e.removeFromLeaveRules}})],1):e._e(),"Unassigned"===e.status?a("v-col",{staticClass:"text-right",attrs:{cols:"12",md:e.assignCustomBalance?"2":"6",sm:e.assignCustomBalance?"12":"6"}},[a("v-btn",{attrs:{disabled:!e.selected.length,color:"primary",small:""},domProps:{textContent:e._s("Assign Selected")},on:{click:e.assignSelected}})],1):e._e()],1)],1)],1)],2)],1)])],1)},d=[],m=a("b85c"),p=a("5530"),g=(a("a9e3"),a("d81d"),a("5660")),v=a("ad37"),h=a("1229"),f=a("e59e"),y=a("7e77"),b=a("02cb"),_=a("e585"),x=a("ab8a"),T={components:{VueNoData:_["default"],VueUser:b["default"],VueAutoComplete:g["default"],NonFieldFormErrors:x["default"]},mixins:[o["a"],r["a"]],props:{leaveCategory:{type:String,default:""},slug:{type:String,required:!0},leaveId:{type:[String,Number],default:""},ruleId:{type:[String,Number],default:""}},data:function(){return{selected:[],selectedUserIds:[],showFilters:!1,categoryList:[{text:"Assigned",value:"Assigned"},{text:"Unassigned",value:"Unassigned"}],loading:!1,formValues:{rule:null,branch:[],division:[],employment_status:[],religion:[],ethnicity:[]},search:"",username:"",status:"Unassigned",rowsPerPageItems:[10,20,30,40,50],headers:[{text:"Name",value:"full_name",sortable:!0},{text:"Username",value:"username",sortable:!1},{text:"Supervisor",value:"title",sortable:!1}],religionEthnicityEndpoint:v["a"].getReligionEthnicity,divisionEndpoint:h["a"].getDivision(this.slug),branchEndpoint:f["a"].getBranch(this.slug),employmentTypeEndpoint:y["a"].getEmploymentType(this.slug),endpoint:"",assignCustomBalance:!1,customBalance:"",remarks:""}},computed:{DataTableFilter:function(){return{search:this.search,username:this.username,division:this.formValues.division,branch:this.formValues.branch,religion:this.formValues.religion,ethnicity:this.formValues.ethnicity,employment_status:this.formValues.employment_status,leave_rule:this.ruleId,status:this.status}},tableData:function(){return this.fetchedResults.map((function(e){return Object(p["a"])(Object(p["a"])({},e),{},{id:e.user.id})}))}},watch:{filters:function(e){this.applyFilters(e)},ruleId:function(){this.fetchDataTable()},status:function(){this.selected=[]}},created:function(){this.leaveId&&(this.formValues.rule=this.leaveId),this.loadDataTableChange()},methods:{fetchDataTable:function(){var e=this;this.loading||(this.loading=!0,this.$http.get("/leave/".concat(this.slug,"/assign-user/"),{params:this.fullParams}).then((function(t){e.loadDataTable(t)})).finally((function(){e.loading=!1})))},populateSelectedUserIds:function(){var e,t=Object(m["a"])(this.selected);try{for(t.s();!(e=t.n()).done;){var a=e.value;this.selectedUserIds.push(a.id)}}catch(i){t.e(i)}finally{t.f()}},removeFromLeaveRules:function(){var e=this,t="/leave/".concat(this.slug,"/assign-user/?leave_rule=").concat(this.ruleId);this.populateSelectedUserIds();var a={users:this.selectedUserIds,action:"Remove",leave_rule:this.ruleId};this.$http.post(t,a).then((function(t){e.notifyUser(t.message),e.resetData()})).catch((function(t){e.pushErrors(t)}))},assignSelected:function(){var e=this,t="/leave/".concat(this.slug,"/assign-user/?leave_rule=").concat(this.ruleId);this.populateSelectedUserIds();var a={};this.assignCustomBalance&&(a={assign_default_balance:!0,default_balance:this.customBalance,remarks:this.remarks});var i=Object(p["a"])({users:this.selectedUserIds,action:"Assign",leave_rule:this.ruleId},a);this.$http.post(t,i).then((function(t){e.notifyUser(t.message),e.resetData()})).catch((function(t){t.response.data.master_setting&&e.notifyUser(t.response.data.master_setting,"red"),e.pushErrors(t)}))},cancelAssignEmployee:function(){this.formValues.branch=[],this.formValues.division=[],this.formValues.employment_status=[],this.formValues.religion=[],this.formValues.ethnicity=[],this.showFilters=!1,this.search="",this.$emit("close")},resetData:function(){this.selected=[],this.selectedUserIds=[],this.assignCustomBalance=!1,this.remarks="",this.customBalance="",this.fetchDataTable()}}},S=T,D=a("2877"),k=a("6544"),w=a.n(k),P=a("8336"),R=a("b0af"),C=a("99d9"),E=a("ac7c"),L=a("62ad"),I=a("8fea"),V=a("ce7e"),B=a("132d"),$=a("0fd9b"),F=a("b974"),A=a("0789"),N=a("2fa4"),O=a("8654"),U=Object(D["a"])(S,u,d,!1,null,"0d9e512c",null),j=U.exports;w()(U,{VBtn:P["a"],VCard:R["a"],VCardText:C["c"],VCheckbox:E["a"],VCol:L["a"],VDataTable:I["a"],VDivider:V["a"],VIcon:B["a"],VRow:$["a"],VSelect:F["a"],VSlideYTransition:A["g"],VSpacer:N["a"],VTextField:O["a"]});var M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-data-table",{attrs:{headers:e.headers,items:e.leaveDetails,"sort-desc":e.pagination.descending,"sort-by":e.pagination.sortBy,page:e.pagination.page,"items-per-page":e.pagination.rowsPerPage,"footer-props":e.overview?{itemsPerPageOptions:[10]}:e.footerProps,"server-items-length":e.pagination.totalItems,"mobile-breakpoint":0,"must-sort":""},on:{"update:sortDesc":function(t){return e.$set(e.pagination,"descending",t)},"update:sort-desc":function(t){return e.$set(e.pagination,"descending",t)},"update:sortBy":function(t){return e.$set(e.pagination,"sortBy",t)},"update:sort-by":function(t){return e.$set(e.pagination,"sortBy",t)},"update:page":function(t){return e.$set(e.pagination,"page",t)},"update:itemsPerPage":function(t){return e.$set(e.pagination,"rowsPerPage",t)},"update:items-per-page":function(t){return e.$set(e.pagination,"rowsPerPage",t)}},scopedSlots:e._u([{key:"item",fn:function(t){return[a("tr",[a("td",[e._v(e._s(t.item.name))]),a("td",[a("v-chip",{attrs:{color:t.item.is_paid?"green":"red",outlined:"",small:""}},[a("v-avatar",[a("v-icon",{attrs:{color:t.item.is_paid?"green":"red"},domProps:{textContent:e._s(t.item.is_paid?"mdi-check-circle":"mdi-cancel")}})],1),t.item.is_paid?a("span",[e._v("Paid ")]):a("span",[e._v("Unpaid ")])],1)],1),a("td",[t.item.modified_at?a("span",[e._v(" "+e._s(t.item.modified_at.substring(0,10)||"N/A")+" ")]):e._e()]),a("td",[a("v-menu",{attrs:{"offset-y":"",left:"",transition:"slide-y-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({attrs:{small:"",text:"",icon:""}},i),[a("v-icon",{domProps:{textContent:e._s("mdi-dots-vertical")}})],1)]}}],null,!0)},[a("v-list",{attrs:{dense:""}},[e.verifyPermission(e.allPermissions.CAN_ASSIGN_LEAVE_TO_USERS)?a("v-list-item",{on:{click:function(a){return e.$emit("assignEmployee",t.item.id)}}},[a("v-icon",{attrs:{small:"",left:""}},[e._v(" mdi-account-outline ")]),a("span",[e._v("Assign Employees")])],1):e._e(),e.verifyPermission(e.allPermissions.CAN_ADD_EDIT_UPDATE_MASTER_SETTINGS)?a("v-list-item",{on:{click:function(a){return e.$emit("edit",t.item.id)}}},[a("v-icon",{attrs:{small:"",left:""}},[e._v(" mdi-pencil ")]),a("span",[e._v("Edit Rule")])],1):e._e(),"Idle"===e.masterSettings.status&&e.verifyPermission(e.allPermissions.CAN_ADD_EDIT_UPDATE_MASTER_SETTINGS)?a("v-list-item",{on:{click:function(a){return e.$emit("delete",t.item.id)}}},[a("v-icon",{attrs:{small:"",left:""}},[e._v(" mdi-delete ")]),a("span",[e._v("Delete Rule")])],1):e._e(),a("v-list-item",{on:{click:function(a){return e.$emit("view",t.item.id)}}},[a("v-icon",{attrs:{small:"",left:""}},[e._v(" mdi-eye-outline ")]),a("span",[e._v("View Rule")])],1)],1)],1)],1)])]}}])},[a("template",{slot:"no-data"},[a("data-table-no-data",{attrs:{loading:e.loading}})],1)],2)},q=[],G=a("a51f"),H={components:{DataTableNoData:G["default"]},mixins:[r["a"]],props:{ruleId:{type:[Number,String],required:!0},masterSettings:{type:Object,required:!0}},data:function(){return{leaveDetails:[],orgSlug:this.$route.params.slug,headers:[{text:"Name",align:"left",sortable:!0,value:"name"},{text:"Is Paid",align:"left",sortable:!1,value:""},{text:"Modified Date",align:"left",sortable:!0,value:"modified_at"},{text:"Action",align:"left",sortable:!1,value:""}],rowsPerPageItems:[10,20,30,40,50],loading:!1,overview:!0,search:""}},computed:{DataTableFilter:function(){return{leave_type:this.ruleId}}},watch:{fetchedResults:function(e){this.leaveDetails=e,this.leaveId=this.ruleId,this.loading=!1,this.leaveTypesList=this.leaveDetails}},created:function(){this.loadDataTableChange()},methods:{fetchDataTable:function(){var e=this;this.loading||(this.loading=!0,this.$http.get("/leave/".concat(this.orgSlug,"/leave-rules/"),{params:this.fullParams}).then((function(t){e.loadDataTable(t)})).finally((function(){e.loading=!1})))}}},z=H,Y=a("8212"),J=a("cc20"),W=a("8860"),K=a("da13"),Q=a("e449"),X=Object(D["a"])(z,M,q,!1,null,null,null),Z=X.exports;w()(X,{VAvatar:Y["a"],VBtn:P["a"],VChip:J["a"],VDataTable:I["a"],VIcon:B["a"],VList:W["a"],VListItem:K["a"],VMenu:Q["a"]});var ee=a("bc60"),te=a("0549"),ae=a("e4bf"),ie={components:{VuePageWrapper:te["default"],LeaveRuleDataTable:Z,CreateLeaveTypeForm:l["a"],LeaveRulesForm:c["a"],AssignEmployeeForm:j,VueContextMenu:ae["default"],DataTableNoData:G["default"]},mixins:[r["a"],o["a"]],data:function(){return{htmlTitle:"Leave Types | Master Settings | Leave | Admin",masterId:this.$route.query.name,edit:!1,viewLeaveRule:!1,masterSettings:{},deleteNotification:{dialog:!1,heading:"Confirm Delete",text:"Are you sure you want to delete this Leave type?"},deleteLeaveRuleNotification:{dialog:!1,heading:"Confirm Delete",text:"Are you sure you want to delete this Leave rule?"},breadCrumbItems:[{text:"Leave",disabled:!1,to:{name:"admin-slug-leave-overview",params:{slug:this.$route.params.slug}}},{text:"Settings",disabled:!1,to:{name:"admin-slug-leave-settings",params:{slug:this.$route.params.slug}}},{text:"Master Settings",disabled:!1,to:{name:"admin-slug-leave-settings-master-settings",params:{slug:this.$route.params.slug}}},{text:"Leave Types",disabled:!0}],backToggleText:["","Leave Type","Leave Rules"],orgSlug:this.$route.params.slug,search:"",dateFilter:{},showFilters:!1,loading:!1,leaveRuleType:"",headersLeaveType:[{text:"Name",align:"left",sortable:!1,value:"name"},{text:"Category",align:"left",sortable:!1,value:"category"},{text:"Applicable For",align:"center",sortable:!1,value:"applicable"},{text:"Action",align:"center",sortable:!1,value:""}],rowsPerPageItems:[7,10,20,30,40,50],expansionPanelItems:[],sheet:!1,selectedLeaveType:void 0,panel:[!0,!1],active:null,tabs:["Create Leave Type","Leave Rules","Assign Employee"],leavetypes:{},deleteId:"",leaveId:"",leaveRuleId:"",leaveDetails:[],masterSettingsDetails:{},leaveRulesForm:!1,masterSettingId:null,leaveID:null,leaveName:"",assignEmployeeForm:!1,leaveTypesList:[],leaveCategory:"",showLeaveRules:!1}},computed:{DataTableFilter:function(){return{master_setting:this.masterId,search:this.search}}},watch:{filters:function(e){this.applyFilters(e)},search:function(){this.searchArray()}},created:function(){this.getMasterSettingsDetails(),this.loadDataTableChange()},methods:{fetchDataTable:function(){var e=this;this.loading||(this.loading=!0,this.$http.get(ee["a"].getLeaveTypes(this.orgSlug),{params:this.fullParams}).then((function(t){e.loadDataTable(t)})).finally((function(){e.loading=!1})))},dismissForm:function(){this.$validator.errors.clear(),this.sheet=!1,this.search="",this.actionData=null,this.leaveDetails=[],this.fetchedResults=[],this.fetchDataTable()},toggleLeaveRules:function(e){this.leaveID=e,this.showLeaveRules=!0},searchArray:function(){var e=this;this.leaveTypesList=this.leaveDetails.filter((function(t){return t.name.toLowerCase().includes(e.search.toLowerCase())}))},editLeaveType:function(e){this.sheet=!0,this.selectedLeaveType=e},deleteLeaveType:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=ee["a"].getLeaveTypes(e.orgSlug)+e.deleteId+"/",t.next=3,e.$http.delete(a).then((function(){e.notifyUser("Successfully deleted Leave Type."),e.deleteNotification.dialog=!1,e.fetchDataTable()}));case 3:case"end":return t.stop()}}),t)})))()},deleteLeaveRule:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="/leave/".concat(e.orgSlug,"/leave-rules/").concat(e.deleteId,"/"),t.next=3,e.$http.delete(a).then((function(){e.notifyUser("Successfully deleted Leave Rule"),e.deleteLeaveRuleNotification.dialog=!1,e.dismissForm()}));case 3:case"end":return t.stop()}}),t)})))()},getMasterSettingsDetails:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=ee["a"].getMasterSetting(e.orgSlug,e.masterId),t.next=3,e.$http.get(a).then((function(t){e.masterSettings=t}));case 3:e.masterSettingId=e.masterSettings.id;case 4:case"end":return t.stop()}}),t)})))()},addRule:function(e,t,a){this.leaveRulesForm=!0,this.leaveID=e,this.leaveName=a,this.leaveRuleType=t,this.showLeaveRules=!0},editRules:function(e,t){this.leaveRuleId=e,this.leaveRulesForm=!0,this.leaveName=t.name,this.edit=!0},viewRule:function(e,t){this.leaveRuleId=e,this.leaveRulesForm=!0,this.leaveName=t.name,this.viewLeaveRule=!0}}},ne=ie,se=a("288c"),oe=a("169a"),re=Object(D["a"])(ne,i,n,!1,null,null,null);t["default"]=re.exports;w()(re,{VBottomSheet:se["a"],VBtn:P["a"],VCard:R["a"],VCardText:C["c"],VChip:J["a"],VCol:L["a"],VDataTable:I["a"],VDialog:oe["a"],VDivider:V["a"],VIcon:B["a"],VRow:$["a"],VSlideYTransition:A["g"]})},e4bf:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.contextList.filter((function(e){return!e.hide})).length<3&&!e.hideIcons||e.showIcons?a("div",e._l(e.contextList,(function(t,i){return a("span",{key:i},[t.hide?e._e():a("v-tooltip",{attrs:{disabled:e.$vuetify.breakpoint.xs,top:""},scopedSlots:e._u([{key:"activator",fn:function(n){var s=n.on;return[a("v-btn",e._g({staticClass:"mx-0",attrs:{text:"",width:e.small?"18":"22",depressed:"",icon:""}},s),[a("v-icon",{attrs:{disabled:t.disabled,color:t.color,"data-cy":e.dataCyVariable+"btn-dropdown-menu-item-"+(i+1),dark:!t.disabled,small:e.small,size:"20",dense:""},domProps:{textContent:e._s(t.icon)},on:{click:function(t){return e.$emit("click"+i)}}})],1)]}}],null,!0)},[a("span",{domProps:{textContent:e._s(t.disabled&&t.disable_message||t.name)}})])],1)})),0):a("v-menu",{attrs:{"offset-y":"",left:"",transition:"slide-y-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({attrs:{small:"",text:"",icon:""}},i),[a("v-icon",{attrs:{"data-cy":"btn-dropdown-menu"},domProps:{textContent:e._s("mdi-dots-vertical")}})],1)]}}])},e._l(e.contextList,(function(t,i){return a("v-list",{key:i,staticClass:"pa-0",attrs:{dense:""}},[t.hide?e._e():a("div",[t.disabled?a("v-list-item",{attrs:{"data-cy":"btn-dropdown-menu-item"}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(i){var n=i.on;return[a("v-list-item-title",e._g({},n),[a("v-icon",{attrs:{disabled:"",small:"",color:t.color},domProps:{textContent:e._s(t.icon)}}),a("span",{staticClass:"ml-1 grey--text",domProps:{textContent:e._s(t.name)}})],1)]}}],null,!0)},[a("span",{domProps:{textContent:e._s(t.disabled&&t.disable_message||t.name)}})])],1):a("v-list-item",{attrs:{"data-cy":"btn-dropdown-menu-item"},on:{click:function(t){return e.$emit("click"+i)}}},[a("v-list-item-title",[a("v-icon",{attrs:{color:t.color,small:"",dense:""},domProps:{textContent:e._s(t.icon)}}),a("span",{staticClass:"ml-1",class:t.text_color,domProps:{textContent:e._s(t.name)}})],1)],1)],1)])})),1)],1)},n=[],s={name:"VueContextMenu",props:{contextList:{type:Array,default:function(){return[]}},dataCyVariable:{type:String,default:""},showIcons:{type:Boolean,default:!1},hideIcons:{type:Boolean,default:!1},small:{type:Boolean,default:!1}}},o=s,r=a("2877"),l=a("6544"),c=a.n(l),u=a("8336"),d=a("132d"),m=a("8860"),p=a("da13"),g=a("5d23"),v=a("e449"),h=a("3a2f"),f=Object(r["a"])(o,i,n,!1,null,"71ee785c",null);t["default"]=f.exports;c()(f,{VBtn:u["a"],VIcon:d["a"],VList:m["a"],VListItem:p["a"],VListItemTitle:g["c"],VMenu:v["a"],VTooltip:h["a"]})},e59e:function(e,t,a){"use strict";a("99af");t["a"]={getBranch:function(e){return"/org/".concat(e,"/branch/")},postBranch:function(e){return"/org/".concat(e,"/branch/")},getBranchDetail:function(e,t){return"/org/".concat(e,"/branch/").concat(t,"/")},updateBranch:function(e,t){return"/org/".concat(e,"/branch/").concat(t,"/")},deleteBranch:function(e,t){return"/org/".concat(e,"/branch/").concat(t,"/")},importBranch:function(e){return"/org/".concat(e,"/branch/import/")},downloadSampleBranch:function(e){return"/org/".concat(e,"/branch/import/sample")},exportBranch:function(e){return"/org/".concat(e,"/branch/export")},branchType:function(e){return"/org/".concat(e,"/branch-type")},branchTypeDetail:function(e,t){return"org/".concat(e,"/branch-type/").concat(t)}}}}]);