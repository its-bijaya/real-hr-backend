(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages/admin/_slug/leave/overview"],{"3dd0":function(t,e,a){},6123:function(t,e,a){"use strict";a("3dd0")},ffd4:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vue-page-wrapper",{attrs:{title:t.htmlTitle,"bread-crumbs":t.breadCrumbItems}},[a("v-row",[a("v-col",{attrs:{md:"12",cols:"12"}},[a("statistics")],1),t.verifyPermission(t.allPermissions.CAN_VIEW_APPROVE_DENY_LEAVE_REQUESTS)?a("v-col",{attrs:{md:"4",cols:"12"}},[a("leave-request",{attrs:{as:"hr"}})],1):t._e(),a("v-col",{attrs:{md:"4",cols:"12"}},[a("employees-most-least-leaves")],1),t.verifyPermission(t.allPermissions.CAN_VIEW_APPROVE_DENY_LEAVE_REQUESTS)?a("v-col",{attrs:{md:"4",cols:"12"}},[a("future-leave")],1):t._e()],1),a("v-lazy",{attrs:{options:{threshold:.5},"min-height":"200"},model:{value:t.isActive,callback:function(e){t.isActive=e},expression:"isActive"}},[a("v-row",[a("v-col",{attrs:{md:"4",cols:"12"}},[a("on-leave")],1),a("v-col",{attrs:{md:"4",cols:"12"}},[a("overview-leaves",{attrs:{endpoint:t.pendingEndpoint,title:"Most Leave Pending","sub-title":"Supervisor with most pending leave"}})],1),a("v-col",{attrs:{md:"4",cols:"12"}},[a("overview-leaves",{attrs:{endpoint:t.declineEndpoint,title:"Most Leave Declined","sub-title":"Supervisor with most declined leave",denied:""}})],1)],1)],1),a("v-lazy",{attrs:{options:{threshold:.5},"min-height":"200"},model:{value:t.isActive1,callback:function(e){t.isActive1=e},expression:"isActive1"}},[a("v-row",[a("v-col",{attrs:{md:"4",cols:"12"}},[a("irregularities-report",{attrs:{overview:""}})],1),a("v-col",{attrs:{md:"4",cols:"12"}},[a("average-leave-by-division")],1)],1)],1)],1)},s=[],r=a("0549"),o=a("73f9"),n=a("5788"),l=a("4e79"),v=a("4910"),d=a("0d31"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{height:"100%"}},[a("vue-card-title",{attrs:{title:t.title,subtitle:t.subTitle,icon:"mdi-file-document-outline"}},[a("template",{slot:"actions"},[t.denied?a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-chip",t._g({attrs:{color:"primary",small:""}},i),[t._v(" "+t._s(t.notation[t.status.dateStatus]?t.notation[t.status.dateStatus]:"C")+" ")])]}}],null,!1,4285319906)},[a("span",[t._v(" "+t._s(t.status.dateStatus)+" ")])]):t._e(),t.denied?a("v-btn",{attrs:{icon:""},on:{click:function(e){t.showFilters=!t.showFilters}}},[a("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-filter-variant")}})],1):t._e()],1)],2),a("v-divider"),t.loading?a("v-progress-linear",{attrs:{indeterminate:"",height:"2"}}):t._e(),a("v-slide-y-transition",[a("v-row",{directives:[{name:"show",rawName:"v-show",value:t.showFilters,expression:"showFilters"}],staticClass:"px-2"},[a("v-col",{attrs:{md:"12"}},[a("date-filter-menu",{attrs:{default:"This Month"},on:{update:function(e){t.status=e}},model:{value:t.dateFilter,callback:function(e){t.dateFilter=e},expression:"dateFilter"}})],1)],1)],1),a("v-divider"),a("v-card-text",[0===t.leaveDetails.length?a("v-row",[a("v-col",[a("vue-no-data")],1)],1):t._l(t.leaveDetails,(function(e,i){return a("v-row",{key:i,attrs:{align:"center"}},[a("v-col",{attrs:{cols:"10"}},[a("vue-user",{attrs:{user:e}})],1),a("v-col",[a("a",{on:{click:function(a){return t.filterBySupervisor(e.id)}}},[t._v(t._s(e.count)+" ")])]),i<t.leaveDetails.length-1?a("v-col",{attrs:{cols:"12"}},[a("v-divider")],1):t._e()],1)}))],2)],1)},u=[],h=a("5530"),p=(a("a9e3"),a("d3b7"),a("a434"),a("02cb")),m=a("e585"),f=a("ac94"),g=a("2f62"),w={components:{VueNoData:m["default"],VueUser:p["default"],DateFilterMenu:f["a"]},props:{supervisor:{type:[String,Number],default:""},title:{type:String,required:!0},subTitle:{type:String,required:!0},endpoint:{type:String,required:!0},denied:{type:Boolean,default:!1}},data:function(){return{leaveDetails:[],loading:!0,notation:{"This Year":"Y","This Month":"M","Last Month":"M",Today:"D","This Week":"W"},status:{dateStatus:"This Month"},dateFilter:{start_date:"",end_date:""},showFilters:!1}},watch:{dateFilter:function(){this.fetchLeaveDetails()}},methods:Object(h["a"])(Object(h["a"])({},Object(g["d"])({setQueryParams:"common/setQueryParams"})),{},{fetchLeaveDetails:function(){var t=this;this.loading=!0,this.$http.get(this.endpoint,{params:Object(h["a"])({supervisor:this.supervisor},this.dateFilter)}).then((function(e){t.leaveDetails=e.results.splice(0,5)})).finally((function(){t.loading=!1}))},filterBySupervisor:function(t){this.setQueryParams({recipient:t,status:this.denied?"Denied":"",active:this.denied?3:"",default:"All Time"}),this.$router.push({name:"admin-slug-leave-employees-request",params:{slug:this.getOrganizationSlug}})}})},_=w,b=(a("6123"),a("2877")),y=a("6544"),V=a.n(y),S=a("8336"),L=a("b0af"),D=a("99d9"),T=a("cc20"),x=a("62ad"),E=a("ce7e"),A=a("132d"),C=a("8e36"),F=a("0fd9b"),P=a("0789"),M=a("3a2f"),k=Object(b["a"])(_,c,u,!1,null,"14f82b6b",null),O=k.exports;V()(k,{VBtn:S["a"],VCard:L["a"],VCardText:D["c"],VChip:T["a"],VCol:x["a"],VDivider:E["a"],VIcon:A["a"],VProgressLinear:C["a"],VRow:F["a"],VSlideYTransition:P["g"],VTooltip:M["a"]});var B=a("172f"),N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{height:"100%"}},[a("vue-card-title",{attrs:{title:"Leaves By Division",subtitle:"Average leave taken by division",icon:"mdi-file-document-outline"}},[a("template",{slot:"actions"},[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-chip",t._g({attrs:{color:"primary",small:""}},i),[t._v(" "+t._s(t.notation[t.status.dateStatus]?t.notation[t.status.dateStatus]:"C")+" ")])]}}])},[a("span",[t._v(" "+t._s(t.status.dateStatus)+" ")])]),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.filter.show=!t.filter.show}}},[a("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-filter-variant")}})],1)],1)],2),a("v-divider"),a("v-slide-y-transition",[a("v-col",{directives:[{name:"show",rawName:"v-show",value:t.filter.show,expression:"filter.show"}]},[a("date-filter-menu",{attrs:{default:"This Month"},on:{update:function(e){t.status=e}},model:{value:t.filter.dateFilter,callback:function(e){t.$set(t.filter,"dateFilter",e)},expression:"filter.dateFilter"}}),a("v-divider")],1)],1),a("v-divider",{directives:[{name:"show",rawName:"v-show",value:t.filter.show,expression:"filter.show"}]}),t.loading?a("v-progress-linear",{attrs:{indeterminate:"",height:"2"}}):t._e(),a("v-card-text",{staticClass:"scrollbar-sm"},[0===t.leaves.length?a("v-row",[a("v-col",[a("vue-no-data")],1)],1):t._l(t.leaves,(function(e,i){return a("v-row",{key:i,attrs:{align:"center"}},[a("v-col",{attrs:{cols:"7"},domProps:{textContent:t._s(e.division.name)}}),a("v-col",{attrs:{cols:"3"},domProps:{textContent:t._s(e.avg_leave.toFixed(2)||0)}}),a("v-col",{attrs:{cols:"12"}},[a("v-divider")],1)],1)}))],2)],1)},R=[],$=(a("4de4"),a("1e51")),j={components:{VueNoData:m["default"],DateFilterMenu:f["a"]},props:{supervisor:{type:String,default:""}},data:function(){return{leaves:[],loading:!1,filter:{show:!1,dateFilter:{start_date:"",end_date:""}},notation:{"This Year":"Y","This Month":"M","Last Month":"M",Today:"D","This Week":"W"},status:{dateStatus:"This Month"}}},watch:{"filter.dateFilter":function(){this.getAverageLeaveByDivision()}},methods:{getAverageLeaveByDivision:function(){var t=this;if(!this.loading){this.loading=!0;var e=$["a"].getAverageLeaveByDivision(this.getOrganizationSlug);this.$http.get(e,{params:Object(h["a"])({},this.filter.dateFilter)}).then((function(e){t.leaves=e.results})).finally((function(){t.loading=!1}))}}}},Y=j,I=Object(b["a"])(Y,N,R,!1,null,null,null),W=I.exports;V()(I,{VBtn:S["a"],VCard:L["a"],VCardText:D["c"],VChip:T["a"],VCol:x["a"],VDivider:E["a"],VIcon:A["a"],VProgressLinear:C["a"],VRow:F["a"],VSlideYTransition:P["g"],VTooltip:M["a"]});var q={components:{VuePageWrapper:r["default"],Statistics:o["a"],OnLeave:d["a"],EmployeesMostLeastLeaves:l["a"],FutureLeave:v["a"],LeaveRequest:n["a"],OverviewLeaves:O,IrregularitiesReport:B["a"],AverageLeaveByDivision:W},data:function(){return{isActive:!1,isActive1:!1,htmlTitle:"Overview | Leave | Admin",breadCrumbItems:[{text:"Leave",disabled:!0},{text:"Overview",disabled:!0}],pendingEndpoint:$["a"].getMostLeavePending(this.$route.params.slug),declineEndpoint:$["a"].getMostLeaveDenied(this.$route.params.slug)}}},z=q,Q=a("b687"),U=Object(b["a"])(z,i,s,!1,null,null,null);e["default"]=U.exports;V()(U,{VCol:x["a"],VLazy:Q["a"],VRow:F["a"]})}}]);