(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages/admin/_slug/dignity/settings/goal-period"],{c9c4:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vue-page-wrapper",{attrs:{title:t.htmlTitle,"bread-crumbs":t.breadCrumbItems}},[a("v-card",{attrs:{height:"auto"}},[a("vue-card-title",{attrs:{title:"List of Goal Period",subtitle:"These are the list of the organizational goal period.",icon:"mdi-format-list-bulleted"}},[a("template",{slot:"actions"},[a("v-btn",{attrs:{small:"",color:"primary",depressed:""},on:{click:function(e){t.createGoalPeriod=!0}}},[t._v(" Create ")]),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.filters.show=!t.filters.show}}},[a("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-filter-variant")}})],1)],1)],2),a("v-divider"),t.nonFieldErrors.length>0?a("v-col",{attrs:{cols:"12"}},[a("non-field-form-errors",{attrs:{"non-field-errors":t.nonFieldErrors}})],1):t._e(),a("v-slide-y-transition",{directives:[{name:"show",rawName:"v-show",value:t.filters.show,expression:"filters.show"}]},[t.filters.show?a("v-row",{staticClass:"px-2 py-0"},[a("v-col",[a("v-text-field",{attrs:{value:t.filters.search,label:"Search","prepend-inner-icon":"mdi-magnify"},on:{change:function(e){t.filters.search=e}}})],1),a("v-col",[a("date-filter-menu",{staticClass:"mx-1",attrs:{loading:t.loading,default:"All Time",label:"Filter by Start Date"},model:{value:t.filters.startDateFilter,callback:function(e){t.$set(t.filters,"startDateFilter",e)},expression:"filters.startDateFilter"}})],1),a("v-col",[a("date-filter-menu",{staticClass:"mx-1",attrs:{loading:t.loading,default:"All Time",label:"Filter by End Date"},model:{value:t.filters.finishDateFilter,callback:function(e){t.$set(t.filters,"finishDateFilter",e)},expression:"filters.finishDateFilter"}})],1)],1):t._e()],1),t.filters.show?a("v-divider"):t._e(),t.filters.show?a("v-divider"):t._e(),a("v-data-table",{attrs:{headers:t.headers,items:t.fetchedResults,"sort-desc":t.pagination.descending,"sort-by":t.pagination.sortBy,page:t.pagination.page,"items-per-page":t.pagination.rowsPerPage,"footer-props":t.footerProps,"server-items-length":t.pagination.totalItems,"must-sort":"","mobile-breakpoint":0},on:{"update:sortDesc":function(e){return t.$set(t.pagination,"descending",e)},"update:sort-desc":function(e){return t.$set(t.pagination,"descending",e)},"update:sortBy":function(e){return t.$set(t.pagination,"sortBy",e)},"update:sort-by":function(e){return t.$set(t.pagination,"sortBy",e)},"update:page":function(e){return t.$set(t.pagination,"page",e)},"update:itemsPerPage":function(e){return t.$set(t.pagination,"rowsPerPage",e)},"update:items-per-page":function(e){return t.$set(t.pagination,"rowsPerPage",e)}},scopedSlots:t._u([{key:"item",fn:function(e){return[a("tr",[a("td",[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(i){var o=i.on;return[a("span",t._g({},o),[t._v(t._s(e.item.title))])]}}],null,!0)},[a("span",[t._v(" "+t._s(t._f("truncate")(e.item.title,50))+" ")])])],1),a("td",[a("div",[t._v(" "+t._s(t._f("dayjs")(e.item.start,"YYYY.MM.DD"))+" - "+t._s(t._f("dayjs")(e.item.end,"YYYY.MM.DD"))+" ")])]),a("td",[a("vue-context-menu",{attrs:{"context-list":[{name:"View Details",icon:"mdi-eye-outline",color:"info"},{name:"Edit Details",icon:"mdi-pencil-outline",color:"info"},{name:"Delete Period",icon:"mdi-delete-outline",color:"info"}]},on:{click0:function(a){return t.viewGoals(e.item.id)},click1:function(a){t.editGoalPeriod(e.item.id),t.createGoalPeriod=!0},click2:function(a){return t.deleteGoalPeriod(e.item.id)}}})],1)])]}}])},[a("template",{slot:"no-data"},[a("no-data-found",{attrs:{loading:t.loading}})],1)],2)],1),a("v-bottom-sheet",{attrs:{transition:"dialog-bottom-transition",persistent:"",scrollable:""},on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.createGoalPeriod=!1}},model:{value:t.createGoalPeriod,callback:function(e){t.createGoalPeriod=e},expression:"createGoalPeriod"}},[t.createGoalPeriod?a("goal-period-form",{attrs:{"action-data":t.actionData?t.actionData:""},on:{refresh:function(e){t.loadDataTableChange(),t.actionData={}},close:function(e){t.createGoalPeriod=!1,t.actionData={}}}}):t._e()],1)],1)},o=[],r=(a("ac1f"),a("841c"),a("159b"),a("d3b7"),a("0549")),n=a("c760"),s=a("17cc"),l=a("c44a"),d=a("ac94"),c=a("e4bf"),u=a("a51f"),f=a("dd34"),p=a("ab8a"),m={components:{NonFieldFormErrors:p["default"],NoDataFound:u["default"],VueContextMenu:c["default"],DateFilterMenu:d["a"],GoalPeriodForm:n["a"],VuePageWrapper:r["default"]},mixins:[s["a"],l["a"]],data:function(){return{isHrAdmin:!0,htmlTitle:"Goal Period | Dignity | Admin",breadCrumbItems:[{text:"Settings",disabled:!1,to:{name:"admin-slug-dignity-settings",params:{slug:this.$route.params.slug}}},{text:"Goal Period",disabled:!0}],createGoalPeriod:!1,loading:!1,filters:{show:!1,search:"",startDateFilter:{},finishDateFilter:{}},headers:[{text:"Period Name",sortable:!0,value:"title",width:"40%"},{text:"Start-End Date",sortable:!0,width:"50%",value:"start"},{text:"Action",value:"efficiency",sortable:!1}],goalPeriod:"",actionData:{}}},computed:{DataTableFilter:function(){return{search:this.filters.search,priority:this.filters.priority,start_from:this.filters.startDateFilter.start_date||"",start_to:this.filters.startDateFilter.end_date||"",end_from:this.filters.finishDateFilter.start_date||"",end_to:this.filters.finishDateFilter.end_date||""}}},watch:{params:function(){this.fetchDataTable()}},created:function(){this.loadDataTableChange()},methods:{viewGoals:function(t){var e=this.get(this.$route.params,"slug");this.$router.push({name:"admin-slug-dignity-goal-period-id-detail",params:{id:t,slug:e||""}})},editGoalPeriod:function(t){var e=this;this.goalPeriod.forEach((function(a){a.id===t&&(e.actionData=a)}))},deleteGoalPeriod:function(t){var e=this;this.$http.delete(f["a"].viewGoalPeriod(this.getOrganizationSlug,t)).then((function(){e.loadDataTableChange(),e.notifyUser("Successfully deleted goal!","green")})).catch((function(t){e.notifyInvalidFormResponse(),e.pushErrors(t)}))},fetchDataTable:function(){var t=this;this.loading||(this.loading=!0,this.$http.get(f["a"].getGoalPeriod(this.getOrganizationSlug),{params:this.fullParams}).then((function(e){t.loadDataTable(e),t.goalPeriod=e.results})).finally((function(){t.loading=!1})))}}},g=m,h=a("2877"),v=a("6544"),b=a.n(v),D=a("288c"),P=a("8336"),y=a("b0af"),_=a("62ad"),w=a("8fea"),F=a("ce7e"),x=a("132d"),G=a("0fd9b"),k=a("0789"),T=a("8654"),$=a("3a2f"),C=Object(h["a"])(g,i,o,!1,null,null,null);e["default"]=C.exports;b()(C,{VBottomSheet:D["a"],VBtn:P["a"],VCard:y["a"],VCol:_["a"],VDataTable:w["a"],VDivider:F["a"],VIcon:x["a"],VRow:G["a"],VSlideYTransition:k["g"],VTextField:T["a"],VTooltip:$["a"]})}}]);