(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages/admin/_slug/dignity/individual-objective","chunk-2d2259e9","chunk-1b4245df"],{"04fe":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"mb-3"},[a("vue-card-title",{attrs:{title:"Objective Attachments",subtitle:"Refer the following information for objective attachments.",icon:"mdi-file-document-outline",clickable:""},on:{click:function(e){t.showMore=!t.showMore}}},[a("template",{slot:"actions"},[a("v-avatar",{attrs:{size:"30",color:"teal"}},[a("span",{staticClass:"white--text text-caption font-weight-bold",domProps:{textContent:t._s(t.attachmentCount)}})]),a("v-icon",{staticClass:"pointer",domProps:{textContent:t._s(t.showMore?"mdi-menu-up":"mdi-menu-down")},on:{click:function(e){t.showMore=!t.showMore}}})],1)],2),t.showMore?a("div",[a("v-divider"),a("v-card-text",[t.objectiveAttachments.length?t._l(t.objectiveAttachments,(function(e,i){return a("v-row",{key:i,staticClass:"ma-3",attrs:{align:"start"}},[a("v-hover",{scopedSlots:t._u([{key:"default",fn:function(n){var s=n.hover;return a("div",{},[a("span",[t._v(" "+t._s(i+1)+". "+t._s(e.caption||"N/A")+" ")]),a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(i){var n=i.on;return[a("v-icon",t._g({attrs:{small:""},domProps:{textContent:t._s("mdi-eye-outline")},on:{click:function(a){return t.viewAttachment(e.attachment)}}},n))]}}],null,!0)},[a("span",{domProps:{textContent:t._s("View Attachment")}})]),a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(i){var n=i.on;return[a("v-icon",t._g({attrs:{size:"13"},domProps:{textContent:t._s("mdi-content-save-outline")},on:{click:function(a){return t.downloadAttachment(e.attachment)}}},n))]}}],null,!0)},[a("span",{domProps:{textContent:t._s("Download Attachment")}})]),s&&t.canDeleteAttachment(e)?a("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-close")},on:{click:function(e){t.deleteNotification.dialog=!0,t.deleteAttachmentIndex=i}}}):t._e()],1)}}],null,!0)})],1)})):a("vue-no-data",{attrs:{height:100,text:"There are no attachments on this objective."}})],2),a("v-divider"),a("v-card-actions",{staticClass:"primaryLight"},[a("v-row",{staticClass:"px-3",attrs:{align:"center"}},[a("v-col",[a("file-upload",t._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{hint:"Files with jpg, png, odt extensions isn't available for preview."},model:{value:t.form.attachment,callback:function(e){t.$set(t.form,"attachment",e)},expression:"form.attachment"}},"file-upload",t.veeValidate("attachment","Attachment *"),!1))],1),a("v-col",[a("v-text-field",t._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],model:{value:t.form.caption,callback:function(e){t.$set(t.form,"caption",e)},expression:"form.caption"}},"v-text-field",t.veeValidate("caption","Caption *"),!1))],1),a("v-col",{staticClass:"mr-3",attrs:{cols:"1"}},[a("v-btn",{attrs:{small:"",color:"primary",depressed:""},domProps:{textContent:t._s("Add")},on:{click:t.addAttachment}})],1)],1)],1)],1):t._e(),a("vue-dialog",{attrs:{notify:t.deleteNotification},on:{close:function(e){t.deleteNotification.dialog=!1},agree:t.deleteAttachment}})],1)},n=[],s=a("1da1"),o=a("5530"),r=(a("96cf"),a("a434"),a("b0c0"),a("f82f")),c=a("e585"),l=a("c44a"),d=a("2f62"),u=a("dd34"),v={components:{FileUpload:r["a"],VueNoData:c["default"]},mixins:[l["a"]],props:{objectiveDetail:{type:Object,required:!0},readOnly:{type:Boolean,default:!0},isHrAdmin:{type:Boolean,default:!1}},data:function(){return{form:{attachment:"",caption:""},deleteAttachmentIndex:null,deleteNotification:{dialog:!1,heading:"Confirm Delete",text:"Are you sure you want to delete this attachment?"},attachmentCount:"",objectiveAttachments:[],showMore:!1}},computed:Object(o["a"])({},Object(d["c"])({getAuthStateUser:"auth/getAuthStateUser"})),created:function(){this.getObjectiveAttachments()},methods:{getObjectiveAttachments:function(){var t=this;this.$http.get(u["a"].getAttachment(this.objectiveDetail.id)+(this.isHrAdmin?"?as=hr":"")).then((function(e){t.objectiveAttachments=e.results,t.attachmentCount=e.count}))},canDeleteAttachment:function(t){return this.isHrAdmin||t.attachment_created_by===this.getAuthStateUserId},deleteAttachment:function(){var t=this,e=this.objectiveAttachments[this.deleteAttachmentIndex].id;this.$http.delete(u["a"].deleteAttachment(this.objectiveDetail.id,e)+"".concat(this.isHrAdmin?"?as=hr":"")).then((function(){t.notifyUser("Successfully deleted attachment","green"),t.deleteNotification.dialog=!1,t.objectiveAttachments.splice(t.deleteAttachmentIndex,1),t.getObjectiveAttachments()}))},addAttachment:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.validateAllFields();case 2:if(!e.sent){e.next=8;break}a=new FormData,a.append("attachment",t.form.attachment,t.form.attachment.name),a.append("caption",t.form.caption),a.append("objective",t.objectiveDetail.id),t.$http.post(u["a"].postAttachment(t.objectiveDetail.id),a).then((function(e){t.notifyUser("Successfully uploaded attachment","green"),t.objectiveAttachments.push(e),t.form={},t.getObjectiveAttachments()})).catch((function(e){t.pushErrors(e)}));case 8:case"end":return e.stop()}}),e)})))()},downloadAttachment:function(t){window.open(t)},viewAttachment:function(t){var e="https://docs.google.com/viewerng/viewer?url=".concat(t);window.open(e,"_blank")}}},m=v,h=a("2877"),p=a("6544"),f=a.n(p),b=a("8212"),g=a("8336"),_=a("b0af"),x=a("99d9"),y=a("62ad"),C=a("ce7e"),j=a("ce87"),k=a("132d"),D=a("0fd9b"),w=a("8654"),S=a("3a2f"),V=Object(h["a"])(m,i,n,!1,null,null,null);e["a"]=V.exports;f()(V,{VAvatar:b["a"],VBtn:g["a"],VCard:_["a"],VCardActions:x["a"],VCardText:x["c"],VCol:y["a"],VDivider:C["a"],VHover:j["a"],VIcon:k["a"],VRow:D["a"],VTextField:w["a"],VTooltip:S["a"]})},"14b0":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vue-page-wrapper",{attrs:{title:t.htmlTitle,"bread-crumbs":t.breadCrumbItems}},[a("v-card",{attrs:{height:"auto"}},[a("vue-card-title",{attrs:{title:"List of Individual Objectives",subtitle:"These are the list of Individual Objectives.",icon:"mdi-format-list-bulleted"}},[a("template",{slot:"actions"},[a("v-btn",{attrs:{small:"","data-cy":"btn-assign-objective",color:"primary",depressed:""},on:{click:function(e){t.createObjectiveForm=!0}}},[t._v(" Assign Objective ")]),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.filters.show=!t.filters.show}}},[a("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-filter-variant")}})],1)],1)],2),a("v-divider"),a("v-slide-y-transition",{directives:[{name:"show",rawName:"v-show",value:t.filters.show,expression:"filters.show"}]},[t.filters.show?a("v-row",{staticClass:"px-2 py-0"},[a("v-col",[a("v-text-field",{attrs:{value:t.filters.search,label:"Search Objectives","prepend-inner-icon":"mdi-magnify"},on:{change:function(e){t.filters.search=e}}})],1),a("v-col",[a("date-filter-menu",{staticClass:"mx-1",attrs:{loading:t.loading,default:"All Time",label:"Filter by Start Date"},model:{value:t.filters.startDateFilter,callback:function(e){t.$set(t.filters,"startDateFilter",e)},expression:"filters.startDateFilter"}})],1),a("v-col",[a("date-filter-menu",{staticClass:"mx-1",attrs:{loading:t.loading,default:"All Time",label:"Filter by End Date"},model:{value:t.filters.finishDateFilter,callback:function(e){t.$set(t.filters,"finishDateFilter",e)},expression:"filters.finishDateFilter"}})],1),a("v-col",[a("vue-users-auto-complete",{staticClass:"mx-1",attrs:{"data-cy":"input-search-assignee","items-to-exclude":t.getAuthStateUserId,truncate:5,disabled:t.loading,label:"Assigned To",params:{organization:t.getOrganizationSlug,user_status:"current"}},model:{value:t.filters.assignee,callback:function(e){t.$set(t.filters,"assignee",e)},expression:"filters.assignee"}})],1),a("v-col",[a("vue-users-auto-complete",{staticClass:"mx-1",attrs:{"data-cy":"input-search-assigner",truncate:5,"items-to-exclude":t.getAuthStateUserId,disabled:t.loading,label:"Assigned By",params:{organization:t.getOrganizationSlug,user_status:"current"}},model:{value:t.filters.assigner,callback:function(e){t.$set(t.filters,"assigner",e)},expression:"filters.assigner"}})],1)],1):t._e()],1),t.filters.show?a("v-divider"):t._e(),a("v-data-table",{attrs:{headers:t.headers,items:t.fetchedResults,"sort-desc":t.pagination.descending,"sort-by":t.pagination.sortBy,page:t.pagination.page,"items-per-page":t.pagination.rowsPerPage,"footer-props":t.footerProps,"server-items-length":t.pagination.totalItems,"must-sort":"","mobile-breakpoint":0},on:{"update:sortDesc":function(e){return t.$set(t.pagination,"descending",e)},"update:sort-desc":function(e){return t.$set(t.pagination,"descending",e)},"update:sortBy":function(e){return t.$set(t.pagination,"sortBy",e)},"update:sort-by":function(e){return t.$set(t.pagination,"sortBy",e)},"update:page":function(e){return t.$set(t.pagination,"page",e)},"update:itemsPerPage":function(e){return t.$set(t.pagination,"rowsPerPage",e)},"update:items-per-page":function(e){return t.$set(t.pagination,"rowsPerPage",e)}},scopedSlots:t._u([{key:"item",fn:function(e){return[a("tr",[a("td",[a("div",[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(i){var n=i.on;return[a("a",t._g({on:{click:function(a){return t.viewObjectiveDetails(e.item.id)}}},n),[t._v(" "+t._s(t._f("truncate")(e.item.title,25))+" ")])]}}],null,!0)},[a("span",{domProps:{textContent:t._s(e.item.title)}})])],1)]),a("td",[a("div",[t._v(" "+t._s(e.item.dignity_appraisal.title)+" ")])]),a("td",[a("div",[t._v(" "+t._s(t._f("dayjs")(e.item.deadline,"YYYY-MM-DD"))+" ")]),a("div",{staticClass:"grey--text"},[t._v(" "+t._s(t._f("dayjs")(e.item.deadline,"h:mm a"))+" ")])]),a("td",[a("v-chip",{attrs:{color:t.statusMapper[e.item.status-1].color,outlined:"",small:""}},[t._v(" "+t._s(t.statusMapper[e.item.status-1].text)+" ")])],1),a("td",[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(i){var n=i.on;return[a("span",t._g({staticClass:"pointer",on:{click:function(a){return t.addObjectiveScore(e.item)}}},n),[t._v(" "+t._s(e.item.score||"N/A")+" ")])]}}],null,!0)},[a("span",[t._v(" "+t._s(e.item.score?"View Score":"Provide Score")+" ")])]),a("v-tooltip")],1),a("td",[a("user-thumbnails",{attrs:{users:[e.item.created_by],"total-users":1,"img-size":"25"}})],1),a("td",[a("user-thumbnails",{attrs:{users:[e.item.assigned_to],"total-users":1,"img-size":"25"}})],1),a("td",[a("vue-context-menu",{attrs:{"context-list":[{name:"View Details",icon:"mdi-eye-outline",color:"info"}]},on:{click0:function(a){return t.viewObjectiveDetails(e.item.id)}}})],1)])]}}])},[a("template",{slot:"no-data"},[a("no-data-found",{attrs:{loading:t.loading}})],1)],2),a("v-dialog",{attrs:{transition:"dialog-bottom-transition",fullscreen:"",scrollable:"",persistent:""},on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.createObjectiveForm=!1}},model:{value:t.createObjectiveForm,callback:function(e){t.createObjectiveForm=e},expression:"createObjectiveForm"}},[a("v-card",[a("vue-card-title",{attrs:{title:"Assign New Objective",subtitle:"Assign New Objective",icon:"mdi-file-document-outline",dark:"",closable:""},on:{close:function(e){t.createObjectiveForm=!1}}}),a("v-divider"),a("v-card-text",[t.createObjectiveForm?a("objective-form",{attrs:{as:"hr"},on:{"dismiss-form":function(e){t.createObjectiveForm=!1,t.fetchDataTable()}}}):t._e()],1)],1)],1),a("v-bottom-sheet",{attrs:{persistent:"",fullscreen:"",scrollable:"",transition:"dialog-bottom-transition"},on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.addScore=!1}},model:{value:t.addScore,callback:function(e){t.addScore=e},expression:"addScore"}},[t.addScore?a("verify-objective-form",{attrs:{"action-data":t.objectiveDetails,"selected-user":t.objectiveDetails.assigned_to.id,as:"hr"},on:{close:function(e){t.addScore=!1,t.fetchDataTable()}}}):t._e()],1)],1)],1)},n=[],s=(a("ac1f"),a("841c"),a("d3b7"),a("0549")),o=a("17cc"),r=a("ac94"),c=a("ef8c"),l=a("e4bf"),d=a("a51f"),u=a("cde3"),v=a("da0a"),m=a("e8cd"),h={components:{VerifyObjectiveForm:m["a"],ObjectiveForm:v["a"],UserThumbnails:u["default"],NoDataFound:d["default"],VueContextMenu:l["default"],VueUsersAutoComplete:c["default"],DateFilterMenu:r["a"],VuePageWrapper:s["default"]},mixins:[o["a"]],data:function(){return{htmlTitle:"Dignity | Individual Objectives | Admin",breadCrumbItems:[{text:"Individual Objectives",disabled:!0}],loading:!1,filters:{show:!1,search:"",assignee:"",assigner:"",startDateFilter:{},finishDateFilter:{}},objectiveDetails:{},headers:[{text:"Objectives",value:"title"},{text:"Appraisal Cycle",sortable:!1},{text:"Deadline",value:"deadline"},{text:"Status",align:"",sortable:!1},{text:"Score",sortable:!1},{text:"Assigned By",sortable:!1},{text:"Assigned To",sortable:!1},{text:"Action",sortable:!1}],statusMapper:[{text:"Pending",color:"amber"},{text:"In Progress",color:"blue"},{text:"On Hold",color:"pink accent-1"},{text:"Completed",color:"green"},{text:"Closed",color:"purple"}],createObjectiveForm:!1,addScore:!1}},computed:{DataTableFilter:function(){return{search:this.filters.search,assigned_to:this.filters.assignee,created_by:this.filters.assigner,start_from:this.filters.startDateFilter.start_date||"",start_to:this.filters.startDateFilter.end_date||"",end_from:this.filters.finishDateFilter.start_date||"",end_to:this.filters.finishDateFilter.end_date||""}}},watch:{params:function(){this.fetchDataTable()}},created:function(){this.loadDataTableChange()},methods:{fetchDataTable:function(){var t=this;this.loading||(this.loading=!0,this.$http.get("/dignity/objective/?as=hr",{params:this.fullParams}).then((function(e){t.loadDataTable(e)})).finally((function(){t.loading=!1})))},viewObjectiveDetails:function(t){var e=this.get(this.$route.params,"slug"),a=this.$router.resolve({name:"admin-slug-objective-id-detail",params:{id:t,slug:e}});window.open(a.href,"_blank")},addObjectiveScore:function(t){this.addScore=!0,this.objectiveDetails=t}}},p=h,f=a("2877"),b=a("6544"),g=a.n(b),_=a("288c"),x=a("8336"),y=a("b0af"),C=a("99d9"),j=a("cc20"),k=a("62ad"),D=a("8fea"),w=a("169a"),S=a("ce7e"),V=a("132d"),O=a("0fd9b"),A=a("0789"),P=a("8654"),I=a("3a2f"),F=Object(f["a"])(p,i,n,!1,null,null,null);e["default"]=F.exports;g()(F,{VBottomSheet:_["a"],VBtn:x["a"],VCard:y["a"],VCardText:C["c"],VChip:j["a"],VCol:k["a"],VDataTable:D["a"],VDialog:w["a"],VDivider:S["a"],VIcon:V["a"],VRow:O["a"],VSlideYTransition:A["g"],VTextField:P["a"],VTooltip:I["a"]})},"17cc":function(t,e,a){"use strict";var i=a("b85c"),n=a("1da1"),s=a("5530");a("96cf"),a("ac1f"),a("841c"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("b64b");e["a"]={data:function(){return{fetchedResults:[],response:{},extra_data:"",appliedFilters:{},footerProps:{itemsPerPageOptions:[10,20,30,40,50,100]},pagination:{sortBy:["modified_at"],descending:!1,totalItems:0,page:1,rowsPerPage:10,pageCount:0},triggerDataTable:!0,fullParams:""}},created:function(){this.getParams(this.DataTableFilter)},methods:{getParams:function(t){var e=Object(s["a"])(Object(s["a"])({},t),{},{offset:(this.pagination.page-1)*this.pagination.rowsPerPage,limit:this.pagination.rowsPerPage,ordering:this.pagination.descending?this.pagination.sortBy:"-"+this.pagination.sortBy});this.fullParams=this.convertToURLSearchParams(e)},loadDataTable:function(t){this.response=t,this.fetchedResults=t.results,this.pagination.totalItems=t.count,this.extra_data=t.extra_data,this.triggerDataTable=!0},fetchData:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.warn("DatatableMixin: fetchData has been deprecated. Please use the function in page itself."),i=Object(s["a"])(Object(s["a"])(Object(s["a"])({},t),e.appliedFilters),{},{search:e.search,offset:(e.pagination.page-1)*e.pagination.rowsPerPage,limit:e.pagination.rowsPerPage,ordering:e.pagination.descending?e.pagination.sortBy:"-"+e.pagination.sortBy}),n=e.convertToURLSearchParams(i),e.loading=!0,a.next=6,e.$http.get(e.endpoint,{params:n}).then((function(t){e.response=t,e.fetchedResults=t.results,e.pagination.totalItems=t.count})).finally((function(){e.loading=!1}));case 6:case"end":return a.stop()}}),a)})))()},applyFilters:function(t){this.appliedFilters=t,this.fetchData(t)},convertToURLSearchParams:function(t){for(var e=new URLSearchParams,a=0,n=Object.keys(t);a<n.length;a++){var s=n[a],o=t[s];if(void 0===o&&(o=""),Array.isArray(o)){var r,c=Object(i["a"])(o);try{for(c.s();!(r=c.n()).done;){var l=r.value;e.append(s,l)}}catch(d){c.e(d)}finally{c.f()}}else e.append(s,o)}return e},loadDataTableChange:function(){var t=this;this.triggerDataTable&&(this.getParams(this.DataTableFilter),this.$nextTick((function(){t.fetchDataTable()})))}},watch:{DataTableFilter:function(t){this.fetchedResults=[],this.getParams(t),this.fetchDataTable(),this.pagination.page=1},"pagination.sortBy":function(){this.fetchedResults=[],this.loadDataTableChange()},"pagination.descending":function(){this.fetchedResults=[],this.loadDataTableChange()},"pagination.page":function(){this.fetchedResults=[],this.loadDataTableChange()},"pagination.rowsPerPage":function(){this.fetchedResults=[],this.loadDataTableChange()}}}},"1d4d":function(t,e,a){"use strict";a("a9e3"),a("c96a"),a("d81d"),a("696f");var i=a("9d26"),n=a("a9ad"),s=a("16b7"),o=a("af2b"),r=a("5311"),c=a("7560"),l=a("80d2"),d=a("58df");e["a"]=Object(d["a"])(n["a"],s["a"],r["a"],o["a"],c["a"]).extend({name:"v-rating",props:{backgroundColor:{type:String,default:"accent"},color:{type:String,default:"primary"},clearable:Boolean,dense:Boolean,emptyIcon:{type:String,default:"$ratingEmpty"},fullIcon:{type:String,default:"$ratingFull"},halfIcon:{type:String,default:"$ratingHalf"},halfIncrements:Boolean,hover:Boolean,length:{type:[Number,String],default:5},readonly:Boolean,size:[Number,String],value:{type:Number,default:0},iconLabel:{type:String,default:"$vuetify.rating.ariaLabel.icon"}},data:function(){return{hoverIndex:-1,internalValue:this.value}},computed:{directives:function(){return this.readonly||!this.ripple?[]:[{name:"ripple",value:{circle:!0}}]},iconProps:function(){var t=this.$props,e=t.dark,a=t.large,i=t.light,n=t.medium,s=t.small,o=t.size,r=t.xLarge,c=t.xSmall;return{dark:e,large:a,light:i,medium:n,size:o,small:s,xLarge:r,xSmall:c}},isHovering:function(){return this.hover&&this.hoverIndex>=0}},watch:{internalValue:function(t){t!==this.value&&this.$emit("input",t)},value:function(t){this.internalValue=t}},methods:{createClickFn:function(t){var e=this;return function(a){if(!e.readonly){var i=e.genHoverIndex(a,t);e.clearable&&e.internalValue===i?e.internalValue=0:e.internalValue=i}}},createProps:function(t){var e={index:t,value:this.internalValue,click:this.createClickFn(t),isFilled:Math.floor(this.internalValue)>t,isHovered:Math.floor(this.hoverIndex)>t};return this.halfIncrements&&(e.isHalfHovered=!e.isHovered&&(this.hoverIndex-t)%1>0,e.isHalfFilled=!e.isFilled&&(this.internalValue-t)%1>0),e},genHoverIndex:function(t,e){var a=this.isHalfEvent(t);return this.halfIncrements&&this.$vuetify.rtl&&(a=!a),e+(a?.5:1)},getIconName:function(t){var e=this.isHovering?t.isHovered:t.isFilled,a=this.isHovering?t.isHalfHovered:t.isHalfFilled;return e?this.fullIcon:a?this.halfIcon:this.emptyIcon},getColor:function(t){if(this.isHovering){if(t.isHovered||t.isHalfHovered)return this.color}else if(t.isFilled||t.isHalfFilled)return this.color;return this.backgroundColor},isHalfEvent:function(t){if(this.halfIncrements){var e=t.target&&t.target.getBoundingClientRect();if(e&&t.pageX-e.left<e.width/2)return!0}return!1},onMouseEnter:function(t,e){var a=this;this.runDelay("open",(function(){a.hoverIndex=a.genHoverIndex(t,e)}))},onMouseLeave:function(){var t=this;this.runDelay("close",(function(){return t.hoverIndex=-1}))},genItem:function(t){var e=this,a=this.createProps(t);if(this.$scopedSlots.item)return this.$scopedSlots.item(a);var n={click:a.click};return this.hover&&(n.mouseenter=function(a){return e.onMouseEnter(a,t)},n.mouseleave=this.onMouseLeave,this.halfIncrements&&(n.mousemove=function(a){return e.onMouseEnter(a,t)})),this.$createElement(i["a"],this.setTextColor(this.getColor(a),{attrs:{tabindex:-1,"aria-label":this.$vuetify.lang.t(this.iconLabel,t+1,Number(this.length))},directives:this.directives,props:this.iconProps,on:n}),[this.getIconName(a)])}},render:function(t){var e=this,a=Object(l["h"])(Number(this.length)).map((function(t){return e.genItem(t)}));return t("div",{staticClass:"v-rating",class:{"v-rating--readonly":this.readonly,"v-rating--dense":this.dense}},a)}})},"2ab5":function(t,e,a){"use strict";a("9d1c")},"62f8":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"mb-3"},[a("vue-card-title",{attrs:{icon:"mdi-file-document-outline",title:"Objective CheckLists",subtitle:"List of checklist"}},[a("template",{slot:"actions"},[a("v-icon",{domProps:{textContent:t._s(t.showMore?"mdi-menu-up":"mdi-menu-down")},on:{click:function(e){t.showMore=!t.showMore}}})],1)],2),t.showMore?a("div",[a("v-divider"),a("v-card-text",[a("v-col",[a("v-row",[a("v-col",{attrs:{md:"6",cols:"12"}},[a("div",{domProps:{textContent:t._s("Pending Checklist")}}),1===t.objectiveDetail.status?a("span",{staticClass:"text-caption text--disabled"},[t._v("Please move the objective to "),a("b",[t._v("In Progress")]),t._v(" to complete checklist")]):t._e(),t.loading?a("div",{domProps:{textContent:t._s("Loading pending checklist.")}}):t.pendingChecklists.length?t._l(t.pendingChecklists,(function(e){return a("v-checkbox",{key:e.id,attrs:{value:!1,label:e.check_list_title,disabled:!(2===t.objectiveDetail.status&&(t.userId===t.getAuthStateUser.user.id||t.isHrAdmin)),"hide-details":""},on:{change:function(a){t.checkListID=e.id,t.completeObjective()}}})})):a("div",{domProps:{textContent:t._s("All checklists are completed")}})],2),a("v-divider",{attrs:{vertical:""}}),a("v-col",{attrs:{md:"5",cols:"12"}},[a("div",{domProps:{textContent:t._s("Completed Checklist")}}),t.loading?a("div",{domProps:{textContent:t._s("Loading completed checklist.")}}):t.completedChecklists.length?a("v-list",t._l(t.completedChecklists,(function(e){return a("div",{key:e.id,attrs:{avatar:""}},[a("strong",[t._v(t._s(e.check_list_title))]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(i){var n=i.on;return[t.userId!==t.getAuthStateUser.user.id&&!t.isHrAdmin||2!==t.objectiveDetail.status?t._e():a("v-icon",t._g({attrs:{size:"15"},domProps:{textContent:t._s("mdi-undo-variant")},on:{click:function(a){t.checkListID=e.id,t.UndoCheckList()}}},n))]}}],null,!0)},[a("span",[t._v("Undo Checklist")])])],1)})),0):a("div",{domProps:{textContent:t._s("No checklists are completed yet")}})],1)],1)],1)],1)],1):t._e(),a("vue-dialog",{attrs:{notify:t.completeChecklist},on:{close:function(e){t.completeChecklist.dialog=!1},agree:t.completeObjective}})],1)},n=[],s=a("1da1"),o=a("5530"),r=(a("96cf"),a("a9e3"),a("4de4"),a("d3b7"),a("2f62")),c=a("63e9"),l={props:{objectiveId:{type:[Number,String],required:!0},userId:{type:[Number,String],required:!0},objectiveDetail:{type:Object,required:!0},readOnly:{type:Boolean,default:!0},isHrAdmin:{type:Boolean,default:!1}},data:function(){return{completeChecklist:{heading:"Confirm Completion",text:"Are you sure you want to complete this check list?",dialog:!1},checkListID:null,showMore:!0,objective:"",checkLists:[],completion:0,completedChecklists:[],pendingChecklists:[],loading:!1}},computed:Object(o["a"])({},Object(r["c"])({getAuthStateUser:"auth/getAuthStateUser"})),watch:{objective:function(){this.completedChecklists=this.objective.results.filter((function(t){return t.completed_on})),this.pendingChecklists=this.objective.results.filter((function(t){return!t.completed_on}))}},created:function(){this.fetchChecklistDetail()},methods:Object(o["a"])(Object(o["a"])({},Object(r["d"])({setSnackBar:"common/setSnackBar"})),{},{fetchChecklistDetail:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$http.get(c["a"].getCheckList(t.objectiveId)+(t.isHrAdmin?"?as=hr":"")).then((function(e){t.objective=e,t.checklists=e.results})).finally((function(){t.loading=!1}));case 3:case"end":return e.stop()}}),e)})))()},completeObjective:function(){var t=this;this.loading=!0,this.pendingChecklists=[],this.$http.post(c["a"].completeCheckList(this.objectiveId,this.checkListID)+(this.isHrAdmin?"?as=hr":"")).then((function(){t.setSnackBar({text:"Successfully completed checklist.",color:"green"}),t.checkListID=null,t.completeChecklist.dialog=!1,t.fetchChecklistDetail()}))},UndoCheckList:function(){var t=this;this.loading=!0,this.completedChecklists=[],this.$http.post(c["a"].completeCheckList(this.objectiveId,this.checkListID)+(this.isHrAdmin?"?as=hr":"")).then((function(){t.setSnackBar({text:"Successfully Undone checklist.",color:"green"}),t.checkListID=null,t.completeChecklist.dialog=!1,t.fetchChecklistDetail()}))}})},d=l,u=a("2877"),v=a("6544"),m=a.n(v),h=a("b0af"),p=a("99d9"),f=a("ac7c"),b=a("62ad"),g=a("ce7e"),_=a("132d"),x=a("8860"),y=a("0fd9b"),C=a("3a2f"),j=Object(u["a"])(d,i,n,!1,null,null,null);e["a"]=j.exports;m()(j,{VCard:h["a"],VCardText:p["c"],VCheckbox:f["a"],VCol:b["a"],VDivider:g["a"],VIcon:_["a"],VList:x["a"],VRow:y["a"],VTooltip:C["a"]})},"696f":function(t,e,a){},"9d1c":function(t,e,a){},a0bb:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"mb-3"},[a("v-card-title",{class:t.objectiveStatus(t.objectiveDetail.status-1).color,attrs:{"primary-title":""}},[a("div",{staticClass:"font-weight-medium"},[a("div",{staticClass:"white--text text-body-1",domProps:{textContent:t._s(t.objectiveStatus(t.objectiveDetail.status-1).text)}}),4!==t.objectiveDetail.status?a("div",{staticClass:"white--text text-caption"},[t._v(" Deadline "+t._s(t.humanizeDate(t.objectiveDetail.deadline))+" ")]):t._e()]),a("v-spacer"),t.canUpdateStatus?a("v-menu",{attrs:{bottom:"",origin:"center center",transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-btn",t._g({attrs:{icon:"",color:"white",small:""}},i),[a("v-icon",[t._v("mdi-menu-down")])],1)]}}],null,!1,1409415438)},[a("v-list",t._l(t.updatableStatus,(function(e){return a("v-list-item",{key:e.text,on:{click:function(a){t.updateStatus.value=e,t.updateStatus.dialog=!0}}},[a("v-list-item-title",{domProps:{textContent:t._s(e.text)}})],1)})),1)],1):t._e()],1),a("v-divider"),a("v-card-text",{staticClass:"black--text"},[a("v-row",{attrs:{align:"center"}},[a("v-col",{attrs:{md:"6",cols:"6"}},[a("div",{staticClass:"font-weight-medium"},[t._v("Assigned By")])]),a("v-col",{attrs:{md:"6",cols:"6"}},[a("v-avatar",{staticClass:"mr-2",attrs:{size:20}},[a("v-img",{attrs:{src:t.objectiveDetail.created_by.profile_picture}})],1),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[a("span",t._g(t._b({},"span",n,!1),i),[t._v(t._s(t._f("truncate")(t.objectiveDetail.created_by.full_name,15)))])]}}])},[a("span",[t._v(t._s(t.objectiveDetail.created_by.full_name))])])],1),a("v-col",{attrs:{md:"6",cols:"6"}},[a("div",{staticClass:"font-weight-medium"},[t._v("Responsible Person")])]),a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"my-1"},[a("v-avatar",{staticClass:"mr-2",attrs:{size:20}},[a("v-img",{attrs:{src:t.objectiveDetail.assigned_to.profile_picture}})],1),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[a("span",t._g(t._b({staticClass:"primary--text"},"span",n,!1),i),[t._v(" "+t._s(t._f("truncate")(t.objectiveDetail.assigned_to.full_name,12))+" ")])]}}])},[a("span",[t._v(t._s(t.objectiveDetail.assigned_to.full_name))])])],1)]),a("v-col",{attrs:{md:"6",cols:"6"}},[a("div",{staticClass:"font-weight-medium"},[t._v("Scheduled From:")])]),a("v-col",{attrs:{md:"6",cols:"6"}},[a("span",[t._v(t._s(t.objectiveDetail.created_at?t.objectiveDetail.created_at.substring(0,10)+", "+t.objectiveDetail.created_at.substring(11,19):"N/A")+" ")])]),a("v-col",{attrs:{md:"6",cols:"6"}},[a("div",{staticClass:"font-weight-medium"},[t._v("Deadline:")])]),t.updateDeadline.edit?t._e():a("v-col",{attrs:{md:"4",cols:"6"}},[a("div",[t._v(t._s(t._f("dayjs")(t.objectiveDetail.deadline,"YYYY-MM-DD")))]),a("div",[t._v(" "+t._s(t._f("dayjs")(t.objectiveDetail.deadline,"h:mm a"))+" ")])]),t.updateDeadline.edit?a("div",[a("vue-date-time-picker",t._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"prepend-inner-icon":"mdi-phone-outline"},model:{value:t.updateDeadline.value,callback:function(e){t.$set(t.updateDeadline,"value",e)},expression:"updateDeadline.value"}},"vue-date-time-picker",t.veeValidate("deadline","New Deadline *"),!1)),a("v-row",[a("v-spacer"),a("v-btn",{attrs:{small:""},domProps:{textContent:t._s("Save")},on:{click:t.addNewDeadline}}),a("v-btn",{attrs:{small:"",outlined:""},domProps:{textContent:t._s("Cancel")},on:{click:function(e){t.updateDeadline.edit=!1,t.updateDeadline.value=""}}})],1)],1):t._e(),a("v-col",{attrs:{md:"6",cols:"6"}},[a("div",{staticClass:"font-weight-medium"},[t._v("Created At:")])]),a("v-col",{attrs:{md:"6",cols:"6"}},[a("span",[t._v(t._s(t._f("dayjs")(t.objectiveDetail.created_at,"MMM DD YYYY, h:mm:ss a")))])]),a("v-col",{attrs:{md:"6",cols:"6"}},[a("div",{staticClass:"font-weight-medium"},[t._v("Started Working:")])]),a("v-col",{attrs:{md:"6",cols:"6"}},[a("span",[t._v(t._s(t.objectiveDetail.start?t.objectiveDetail.start:"N/A"))])]),a("v-col",{attrs:{md:"6",cols:"6"}},[a("div",{staticClass:"font-weight-medium"},[t._v("Finished Working:")])]),a("v-col",{attrs:{md:"6",cols:"6"}},[a("span",[t._v(t._s(t.objectiveDetail.end?t.objectiveDetail.end:"N/A"))])]),a("v-col",{attrs:{md:"6",cols:"6"}},[a("div",{staticClass:"font-weight-medium"},[t._v("Approved:")])]),a("v-col",{attrs:{md:"6",cols:"6"}},[t.objectiveDetail.approved?a("span",[a("v-icon",[t._v(" mdi-check-all ")])],1):a("span",[t._v(" No ")])])],1)],1),a("vue-dialog",{attrs:{notify:t.updateStatus},on:{close:function(e){t.updateStatus.dialog=!1},agree:function(e){return t.updateObjectiveStatus(t.updateStatus.value.id)}}})],1)},n=[],s=a("1da1"),o=a("5530"),r=(a("96cf"),a("caad"),a("99af"),a("7db0"),a("4de4"),a("ea98")),c=a("d567"),l=a("c44a"),d=a("dd34"),u=a("2f62"),v={components:{VueDateTimePicker:c["a"],VueDialog:r["a"]},mixins:[l["a"]],props:{objectiveDetail:{type:Object,required:!0},readOnly:{type:Boolean,default:!0},isHrAdmin:{type:Boolean,default:!1}},data:function(){return{showAllObservers:!1,updateDeadline:{value:!1,edit:!1},priorityColorMap:{MINOR:"green",MAJOR:"purple",CRITICAL:"red"},updateStatus:{value:"",dialog:!1,heading:"Confirm Update",subheading:"You are about to update the status of this objective.",text:"Are you sure you want to update the status of this objective?"}}},computed:Object(o["a"])(Object(o["a"])({},Object(u["c"])({getAuthStateUser:"auth/getAuthStateUser"})),{},{isCreator:function(){return this.objectiveDetail.created_by.id===this.getAuthStateUser.user.id},isFutureObjective:function(){return new Date(this.objectiveDetail.starts_at)>new Date},isResponsible:function(){return this.objectiveDetail.assigned_to.id===this.getAuthStateUser.user.id},canUpdateStatus:function(){return(this.isHrAdmin||this.isCreator||this.isResponsible&&![3,5].includes(this.objectiveDetail.status))&&!this.objectiveDetail.approved},updatableStatus:function(){var t=this,e=[];if(this.isFutureObjective&&this.isCreator||(e=[{text:"Pending",color:"orange",id:1},{text:"In Progress",color:"blue",id:2},{text:"Completed",color:"green",id:4}]),this.isCreator&&(e=e.concat([{text:"On Hold",color:"pink",id:3},{text:"Closed",color:"green",id:5}]),[3,5].includes(this.objectiveDetail.status)))return[{text:"Pending",color:"orange",id:1}];var a=this.get(e.find((function(e){return e.id===t.objectiveDetail.status})),"text");return e.filter((function(t){return t.text!==a}))}}),methods:Object(o["a"])(Object(o["a"])({},Object(u["d"])({setSnackBar:"common/setSnackBar"})),{},{canEditDeadline:function(){return this.isHrAdmin||!this.updateDeadline.edit&&this.canUpdateStatus&&this.objectiveDetail.changeable_deadline&&!this.readOnly&&this.objectiveDetail.created_by.id===this.getAuthStateUser.user.id&&!this.objectiveDetail.approved},objectiveStatus:function(t){var e=[{text:"Pending",color:"orange"},{text:"In Progress",color:"blue"},{text:"On Hold",color:"pink"},{text:"Completed",color:"green"},{text:"Closed",color:"purple"}];return e[t]},updateObjectiveStatus:function(t){var e=this,a={status:t},i=["Pending","In Progress","On Hold","Completed"];this.$http.patch(d["a"].updateObjective(this.objectiveDetail.id),a,{params:{as:this.isHrAdmin?"hr":"user"}}).then((function(){e.setSnackBar({text:"Successfully moved objective to "+i[t-1]+".",color:"green"}),e.$emit("refresh")})).catch((function(t){if(e.pushErrors(t),e.nonFieldErrors.length){var a=e.nonFieldErrors[0]["non field errors"]||e.nonFieldErrors[0].status||e.nonFieldErrors[0].detail||"You cannot perform this operation";e.setSnackBar({text:a,color:"red"})}e.notifyInvalidFormResponse(t.response.status[0]||t.response.data.status[0]),e.updateStatus.dialog=!1}))},addNewDeadline:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.validateAllFields();case 2:if(!e.sent){e.next=6;break}a="/dignity/objective/"+t.objectiveDetail.id+"/",i={deadline:t.updateDeadline.value},t.$http.patch(a,i).then((function(e){t.setSnackBar({text:"Successfully updated deadline",color:"green"}),t.objectiveDetail.deadline=e.deadline,t.updateDeadline.edit=!1})).catch((function(e){t.pushErrors(e)}));case 6:case"end":return e.stop()}}),e)})))()}})},m=v,h=a("2877"),p=a("6544"),f=a.n(p),b=a("8212"),g=a("8336"),_=a("b0af"),x=a("99d9"),y=a("62ad"),C=a("ce7e"),j=a("132d"),k=a("adda"),D=a("8860"),w=a("da13"),S=a("5d23"),V=a("e449"),O=a("0fd9b"),A=a("2fa4"),P=a("3a2f"),I=Object(h["a"])(m,i,n,!1,null,null,null);e["a"]=I.exports;f()(I,{VAvatar:b["a"],VBtn:g["a"],VCard:_["a"],VCardText:x["c"],VCardTitle:x["d"],VCol:y["a"],VDivider:C["a"],VIcon:j["a"],VImg:k["a"],VList:D["a"],VListItem:w["a"],VListItemTitle:S["c"],VMenu:V["a"],VRow:O["a"],VSpacer:A["a"],VTooltip:P["a"]})},a51f:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.search.length>0?a("span",[t._v(' Your search for "'+t._s(t.search)+'" found no results. ')]):t.loading?a("v-skeleton-loader",{attrs:{type:"table",height:t.skeletonLoaderHeight}}):a("no-data-found",{attrs:{text:t.text,height:t.height}},[t._t("default")],2)],1)},n=[],s=(a("a9e3"),a("e585")),o={components:{NoDataFound:s["default"]},props:{search:{type:String,default:""},loading:{type:Boolean,required:!0},text:{type:String,default:"No data available at the moment"},height:{type:[String,Number],default:200},skeletonLoaderHeight:{type:[String,Number],default:void 0}}},r=o,c=a("2877"),l=a("6544"),d=a.n(l),u=a("3129"),v=Object(c["a"])(r,i,n,!1,null,null,null);e["default"]=v.exports;d()(v,{VSkeletonLoader:u["a"]})},cde3:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"download-only"},t._l(t.users,(function(e,i){return a("v-chip",{key:i,staticClass:"ma-1",attrs:{small:"",label:""}},[t._v(" "+t._s(e.full_name)+" ")])})),1),a("v-row",{staticClass:"download-hidden",attrs:{"no-gutters":""}},[t.users&&!t.users.length?a("div",[a("v-col",{staticClass:"ma-0 pa-0"},[a("v-avatar",{staticClass:"mr-1",attrs:{size:"20"}},[a("v-img",{attrs:{src:"/images/info/user-default.png"}})],1),a("span",{staticClass:"grey--text text-caption"},[t._v("No Employee")])],1)],1):t._l(t.users.slice(0,3),(function(e,i){return a("div",{key:i,staticClass:"text-left"},[a("v-badge",{attrs:{dot:"",right:"",bottom:"",overlap:"","offset-y":"5",color:e.user&&e.user.is_online?"green":"transparent"}},[a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(i){var n=i.on;return[a("a",[a("v-avatar",t._g({staticClass:"mr-n1",attrs:{size:t.imgSize}},n),[a("v-img",{attrs:{height:t.imgSize,width:t.imgSize,src:e.profile_picture||e.user.profile_picture},on:{click:t.showMore}})],1)],1)]}}],null,!0)},[a("span",{domProps:{textContent:t._s(e.full_name||e.user.full_name)}}),e[t.type]?a("span",[t._v(" : "),a("span",{domProps:{textContent:t._s(e[t.type])}})]):t._e()])],1)],1)})),t.users&&t.users.length&&t.totalUsers>3?a("div",[a("v-col",{staticClass:"pl-2 py-0 text-subtitle-1"},[a("a",{on:{click:t.showMore}},[t._v(" +"+t._s(parseInt(t.totalUsers)-3)+" ")])])],1):t._e()],2)],1)},n=[],s=(a("a9e3"),{name:"ThumbnailUsers",props:{users:{type:Array,default:function(){return[]}},totalUsers:{type:Number,required:!0},type:{type:String,default:""},imgSize:{type:[String,Number],default:22}},watch:{users:function(t){this.users=t}},methods:{showMore:function(){this.users&&0===this.users.length||this.$emit("showMore")}}}),o=s,r=(a("2ab5"),a("2877")),c=a("6544"),l=a.n(c),d=a("8212"),u=a("4ca6"),v=a("cc20"),m=a("62ad"),h=a("adda"),p=a("0fd9b"),f=a("3a2f"),b=Object(r["a"])(o,i,n,!1,null,"51021d54",null);e["default"]=b.exports;l()(b,{VAvatar:d["a"],VBadge:u["a"],VChip:v["a"],VCol:m["a"],VImg:h["a"],VRow:p["a"],VTooltip:f["a"]})},d0b7:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"mb-3"},[a("v-card-title",{staticClass:"px-2 py-2"},[a("v-col",{attrs:{cols:"1"}},[a("v-icon",{staticClass:"blueGrey--text mr-1",attrs:{size:"35"},domProps:{textContent:t._s("mdi-calendar-check-outline")}})],1),a("v-col",{attrs:{cols:"10"}},[a("div",{staticClass:"blueGrey--text text-body-1 font-weight-medium text-justify"},[t._v(" "+t._s(t._f("capitalize")(t.objectiveDetail.title))+" ")])]),a("v-col",{attrs:{cols:"1"}},[a("v-card-actions",[t.canEditTask?a("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-btn",t._g({attrs:{icon:""},on:{click:function(e){t.actionData=t.objectiveDetail,t.updateTaskForm=!0}}},i),[a("v-icon",{attrs:{size:"20"},domProps:{textContent:t._s("mdi-pencil")}})],1)]}}],null,!1,3243661312)},[a("span",{domProps:{textContent:t._s("Update Objective")}})]):t._e(),t.objectiveDetail.description?a("v-col",{attrs:{cols:"12"}},[a("div",{staticClass:"text-body-1",domProps:{innerHTML:t._s(t.$sanitize(t.objectiveDetail.description))}})]):t._e()],1)],1)],1),a("v-divider"),a("v-dialog",{attrs:{transition:"dialog-bottom-transition",fullscreen:"",scrollable:"",persistent:""},on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.updateTaskForm=!1}},model:{value:t.updateTaskForm,callback:function(e){t.updateTaskForm=e},expression:"updateTaskForm"}},[a("v-card",[a("vue-card-title",{attrs:{title:"Update Objective",subtitle:"Here you can update objective detail.",icon:"mdi-file-document-outline",dark:"",closable:""},on:{close:function(e){t.updateTaskForm=!1,t.$emit("refresh")}}}),a("v-divider"),a("v-card-text",[t.updateTaskForm?a("dignity-form",{attrs:{"form-bottom-sheet":t.updateTaskForm,"parent-task":t.objectiveDetail.parent,"action-data":t.actionData,as:t.as},on:{"dismiss-form":function(e){t.updateTaskForm=!1,t.$emit("refresh")}}}):t._e()],1)],1)],1)],1)},n=[],s=a("5530"),o=(a("a9e3"),a("da0a")),r=a("2f62"),c={components:{DignityForm:o["a"]},props:{objectiveDetail:{type:Object,required:!0},objectiveCurrentStatus:{type:Number,default:0},readOnly:{type:Boolean,default:!0},as:{type:String,default:"user"}},data:function(){return{taskStatusItems:[{text:"Pending",value:1},{text:"In Progress",value:2},{text:"On Hold",value:3},{text:"Completed",value:4},{text:"Closed",value:5}],updateTaskForm:!1,actionData:void 0,configs:{toolbar:!1,spellChecker:!1}}},computed:Object(s["a"])(Object(s["a"])({},Object(r["c"])({getAuthStateUser:"auth/getAuthStateUser"})),{},{canEditTask:function(){return"hr"===this.as||!this.readOnly&&this.objectiveDetail.created_by.id===this.getAuthStateUser.user.id&&!this.objectiveDetail.approved}})},l=c,d=a("2877"),u=a("6544"),v=a.n(u),m=a("8336"),h=a("b0af"),p=a("99d9"),f=a("62ad"),b=a("169a"),g=a("ce7e"),_=a("132d"),x=a("3a2f"),y=Object(d["a"])(l,i,n,!1,null,null,null);e["a"]=y.exports;v()(y,{VBtn:m["a"],VCard:h["a"],VCardActions:p["a"],VCardText:p["c"],VCardTitle:p["d"],VCol:f["a"],VDialog:b["a"],VDivider:g["a"],VIcon:_["a"],VTooltip:x["a"]})},d736:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"mb-3"},[a("vue-card-title",{attrs:{title:"Objective Comments",subtitle:"Refer the following information for comments on this objective.",icon:"mdi-message-processing-outline",clickable:""},on:{click:function(e){t.showMore=!t.showMore}}},[a("template",{slot:"actions"},[a("v-icon",{staticClass:"pointer",domProps:{textContent:t._s(t.showMore?"mdi-menu-up":"mdi-menu-down")},on:{click:function(e){t.showMore=!t.showMore}}})],1)],2),t.showMore?a("div",[a("v-divider"),t.loading?a("v-skeleton-loader",{attrs:{type:"table"}}):t._e(),a("v-card-text",[t.loading?t._e():a("div",[t.comments.length?a("v-list",t._l(t.comments,(function(e,i){return a("v-list-item",{key:e.id},[a("v-list-item-avatar",[a("v-img",{attrs:{src:e.created_by.profile_picture}})],1),a("v-list-item-content",[a("v-list-item-title",[a("a",{staticClass:"mr-2",domProps:{textContent:t._s(e.created_by.full_name)},on:{click:function(a){return t.viewProfileDetail(e.created_by.id)}}}),a("span",{staticClass:"mx-1 text-caption grey--text",domProps:{textContent:t._s(t.humanizeDate(e.created_at))}})]),a("v-list-item-subtitle",{staticClass:"my-1"},[a("div",{style:t.showIndex===i?"display: none":"display: block",domProps:{innerHTML:t._s(t.getClickableLink(e.comment.slice(0,110)))}}),e.comment.length>90?a("a",{style:t.showIndex===i?"display: none":"display: block",on:{click:function(e){t.showIndex=i}}},[t._v("Read more")]):t._e(),t.showIndex===i?a("div",{staticClass:"text-wrap",domProps:{innerHTML:t._s(t.getClickableLink(e.comment))}}):t._e()])],1),a("v-list-item-icon",[e.created_by.id===t.auth.user.id?a("v-menu",{attrs:{bottom:"",right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-icon",t._g({attrs:{small:""},domProps:{textContent:t._s("mdi-menu-down")}},i))]}}],null,!0)},[a("v-list",[a("v-list-item",{on:{click:function(e){t.deleteNotification.dialog=!0,t.selectedCommentIndex=i}}},[a("v-list-item-title",[a("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-delete")}}),a("span",{domProps:{textContent:t._s("Delete Comment")}})],1)],1)],1)],1):t._e()],1)],1)})),1):a("vue-no-data",{attrs:{height:100,text:"There are no comments on this objective."}}),0!==t.nextCommentsCount?a("div",{staticClass:"text-center"},[a("a",{staticClass:"font-weight-bold",on:{click:function(e){t.limit+=5,t.getComments()}}},[t._v("View "+t._s(t.nextCommentsCount)+" more comments ")])]):t._e()],1)]),a("v-divider"),a("v-card-actions",{staticClass:"primaryLight"},[a("v-row",{staticClass:"px-4",attrs:{align:"center","no-gutters":""}},[a("v-col",{attrs:{cols:"1"}},[a("v-avatar",{attrs:{size:"35"}},[a("v-img",{attrs:{src:t.auth.user.profile_picture}})],1)],1),a("v-col",[a("v-textarea",t._b({directives:[{name:"validate",rawName:"v-validate",value:"max:1000",expression:"'max:1000'"}],staticStyle:{width:"100%"},attrs:{rows:"1",placeholder:"Add a comment",type:"text"},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.addComment.apply(null,arguments))}},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}},"v-textarea",t.veeValidate("comment",""),!1))],1)],1)],1)],1):t._e(),a("vue-dialog",{attrs:{notify:t.deleteNotification},on:{close:function(e){t.deleteNotification.dialog=!1},agree:t.deleteComment}})],1)},n=[],s=a("5530"),o=(a("a434"),a("c44a")),r=a("2f62"),c=a("dd34"),l=a("ea98"),d=a("e585"),u=a("cf45"),v={components:{VueDialog:l["a"],VueNoData:d["default"]},mixins:[o["a"]],props:{objectiveDetail:{type:Object,required:!0},readOnly:{type:Boolean,default:!0},isHrAdmin:{type:Boolean,default:!1}},data:function(){return{deleteNotification:{dialog:!1,heading:"Confirm Delete",text:"Are you sure you want to delete this comment?"},comment:"",comments:[],selectedCommentIndex:null,loading:!0,showMore:!0,showIndex:null,count:null,limit:5}},computed:Object(s["a"])(Object(s["a"])({},Object(r["c"])({auth:"auth/getAuthStateUser"})),{},{nextCommentsCount:function(){return this.count-this.comments.length}}),created:function(){this.getComments()},methods:{getClickableLink:u["e"],humanizeDate:function(t){return this.$dayjs(t).fromNow()},getComments:function(){var t=this;this.loading=!0;var e=this.objectiveDetail.id;this.$http.get(c["a"].getComments(e)+(this.isHrAdmin?"?as=hr":""),{params:{limit:this.limit}}).then((function(e){t.count=e.count,t.loading=!1,t.comments=e.results}))},addComment:function(){var t=this,e=this.objectiveDetail.id,a=new FormData;a.append("comment",this.comment),a.append("objective",e),this.$http.post(c["a"].postComments(e),a).then((function(e){t.count+=1,t.comments.unshift(e),t.comment="",t.getComments()}))},deleteComment:function(){var t=this,e=this.objectiveDetail.id;this.$http.delete(c["a"].deleteComments(e,this.comments[this.selectedCommentIndex].id)).then((function(){t.count-=1,t.notifyUser("Successfully deleted comment","green"),t.comments.splice(t.selectedCommentIndex,1),t.deleteNotification.dialog=!1,0===t.comments.length&&(t.limit=5,t.getComments())}))},viewProfileDetail:function(t){this.$router.push({name:"user-employee-directory-id-profile-detail",params:{id:t}})}}},m=v,h=a("2877"),p=a("6544"),f=a.n(p),b=a("8212"),g=a("b0af"),_=a("99d9"),x=a("62ad"),y=a("ce7e"),C=a("132d"),j=a("adda"),k=a("8860"),D=a("da13"),w=a("8270"),S=a("5d23"),V=a("34c3"),O=a("e449"),A=a("0fd9b"),P=a("3129"),I=a("a844"),F=Object(h["a"])(m,i,n,!1,null,null,null);e["a"]=F.exports;f()(F,{VAvatar:b["a"],VCard:g["a"],VCardActions:_["a"],VCardText:_["c"],VCol:x["a"],VDivider:y["a"],VIcon:C["a"],VImg:j["a"],VList:k["a"],VListItem:D["a"],VListItemAvatar:w["a"],VListItemContent:S["a"],VListItemIcon:V["a"],VListItemSubtitle:S["b"],VListItemTitle:S["c"],VMenu:O["a"],VRow:A["a"],VSkeletonLoader:P["a"],VTextarea:I["a"]})},e4bf:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.contextList.filter((function(t){return!t.hide})).length<3&&!t.hideIcons||t.showIcons?a("div",t._l(t.contextList,(function(e,i){return a("span",{key:i},[e.hide?t._e():a("v-tooltip",{attrs:{disabled:t.$vuetify.breakpoint.xs,top:""},scopedSlots:t._u([{key:"activator",fn:function(n){var s=n.on;return[a("v-btn",t._g({staticClass:"mx-0",attrs:{text:"",width:t.small?"18":"22",depressed:"",icon:""}},s),[a("v-icon",{attrs:{disabled:e.disabled,color:e.color,"data-cy":t.dataCyVariable+"btn-dropdown-menu-item-"+(i+1),dark:!e.disabled,small:t.small,size:"20",dense:""},domProps:{textContent:t._s(e.icon)},on:{click:function(e){return t.$emit("click"+i)}}})],1)]}}],null,!0)},[a("span",{domProps:{textContent:t._s(e.disabled&&e.disable_message||e.name)}})])],1)})),0):a("v-menu",{attrs:{"offset-y":"",left:"",transition:"slide-y-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-btn",t._g({attrs:{small:"",text:"",icon:""}},i),[a("v-icon",{attrs:{"data-cy":"btn-dropdown-menu"},domProps:{textContent:t._s("mdi-dots-vertical")}})],1)]}}])},t._l(t.contextList,(function(e,i){return a("v-list",{key:i,staticClass:"pa-0",attrs:{dense:""}},[e.hide?t._e():a("div",[e.disabled?a("v-list-item",{attrs:{"data-cy":"btn-dropdown-menu-item"}},[a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(i){var n=i.on;return[a("v-list-item-title",t._g({},n),[a("v-icon",{attrs:{disabled:"",small:"",color:e.color},domProps:{textContent:t._s(e.icon)}}),a("span",{staticClass:"ml-1 grey--text",domProps:{textContent:t._s(e.name)}})],1)]}}],null,!0)},[a("span",{domProps:{textContent:t._s(e.disabled&&e.disable_message||e.name)}})])],1):a("v-list-item",{attrs:{"data-cy":"btn-dropdown-menu-item"},on:{click:function(e){return t.$emit("click"+i)}}},[a("v-list-item-title",[a("v-icon",{attrs:{color:e.color,small:"",dense:""},domProps:{textContent:t._s(e.icon)}}),a("span",{staticClass:"ml-1",class:e.text_color,domProps:{textContent:t._s(e.name)}})],1)],1)],1)])})),1)],1)},n=[],s={name:"VueContextMenu",props:{contextList:{type:Array,default:function(){return[]}},dataCyVariable:{type:String,default:""},showIcons:{type:Boolean,default:!1},hideIcons:{type:Boolean,default:!1},small:{type:Boolean,default:!1}}},o=s,r=a("2877"),c=a("6544"),l=a.n(c),d=a("8336"),u=a("132d"),v=a("8860"),m=a("da13"),h=a("5d23"),p=a("e449"),f=a("3a2f"),b=Object(r["a"])(o,i,n,!1,null,"71ee785c",null);e["default"]=b.exports;l()(b,{VBtn:d["a"],VIcon:u["a"],VList:v["a"],VListItem:m["a"],VListItemTitle:h["c"],VMenu:p["a"],VTooltip:f["a"]})},e8cd:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("vue-card-title",{attrs:{title:"Objective Details of "+t.get(t.responsiblePerson,"user.full_name","Loading..."),subtitle:"Objective Details",icon:"mdi-file-document-outline",dark:"",closable:""},on:{close:function(e){return t.$emit("close")}}}),a("v-divider"),a("v-card-text",{staticClass:"grey lighten-5"},[a("v-form",[a("v-container",[t.fetched?a("v-row",[a("v-col",{attrs:{md:"8"}},[a("objective-detail-info",{attrs:{"objective-detail":t.objectiveDetail,"read-only":!0}}),a("v-card",[a("v-card-text",[a("v-row",[t.nonFieldErrors.length>0?a("v-col",{attrs:{cols:"12"}},[a("non-field-form-errors",{attrs:{"non-field-errors":t.nonFieldErrors}})],1):t._e(),a("v-col",{attrs:{md:"12"}},[a("v-row",{attrs:{align:"center"}},[a("v-col",{attrs:{md:"12"}},[a("div",{staticClass:"pb-lg-3",domProps:{textContent:t._s("Responsible Person")}}),a("vue-user",{attrs:{user:t.responsiblePerson}}),a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-row",[a("v-col",{staticClass:"text-center",attrs:{cols:"2"}},[a("div",{staticClass:"text-h1"},[t._v(t._s(t.score))])]),a("v-col",{attrs:{cols:"6"}},[a("v-rating",{attrs:{length:4,size:40,color:t.scoreMapper[t.score-1].color,hover:!1,readonly:!t.canProvideScore,"background-color":"grey"},model:{value:t.score,callback:function(e){t.score=e},expression:"score"}}),a("div",{staticClass:"text-body-2 pl-4",style:{color:t.scoreMapper[t.score-1].color}},[t._v(" "+t._s(t.scoreMapper[t.score-1].label)+" ")])],1)],1)],1),a("v-divider",{attrs:{vertical:""}}),a("v-col",{attrs:{cols:"6"}},[a("v-textarea",t._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{placeholder:"Write your remarks",readonly:!t.canProvideScore,rows:"3"},model:{value:t.remarks,callback:function(e){t.remarks=e},expression:"remarks"}},"v-textarea",t.veeValidate("remark","Remarks*"),!1))],1)],1)],1)],1)],1)],1)],1)],1),a("v-col",{attrs:{cols:"12"}},[a("v-btn",{attrs:{text:"",depressed:""},on:{click:function(e){t.showObjectiveDetails=!t.showObjectiveDetails}}},[a("span",{domProps:{textContent:t._s((t.showObjectiveDetails?"Hide":"Show")+" Objective Details")}}),a("v-icon",{domProps:{textContent:t._s(t.showObjectiveDetails?"mdi-menu-up":"mdi-menu-down")}})],1)],1),t.showObjectiveDetails?a("v-col",{attrs:{md:"12"}},[t.objectiveDetail.objective_checklists.length>0?a("objective-check-lists",{attrs:{"objective-id":t.objectiveDetail.id,"objective-detail":t.objectiveDetail,"user-id":t.getAuthStateUserId,"is-hr-admin":t.isHrAdmin,"read-only":""}}):t._e(),a("objective-detail-comments",{attrs:{"objective-detail":t.objectiveDetail,"is-hr-admin":t.isHrAdmin,"read-only":""}}),a("objective-detail-attachments",{attrs:{"objective-detail":t.objectiveDetail,"is-hr-admin":t.isHrAdmin,"read-only":""}})],1):t._e()],1),a("v-col",{attrs:{md:"4"}},[a("objective-detail-status",{attrs:{"objective-detail":t.objectiveDetail,"read-only":!0},on:{refresh:function(e){return t.fetchObjectiveDetail()}}})],1)],1):a("default-svg-loader")],1)],1)],1),t.fetched&&t.canProvideScore?a("v-footer",{staticClass:"elevation-24",attrs:{fixed:"",height:"auto"}},[a("v-spacer"),a("v-btn",{staticClass:"mr-3",attrs:{color:"primary"},domProps:{textContent:t._s("Provide Score")},on:{click:function(e){return t.approveObjective()}}}),a("v-btn",{attrs:{outlined:"",color:"primary"},domProps:{textContent:t._s("Cancel")},on:{click:function(e){return t.$emit("close")}}})],1):t._e()],1)},n=[],s=a("1da1"),o=a("5530"),r=(a("96cf"),a("a9e3"),a("d0b7")),c=a("62f8"),l=a("d736"),d=a("04fe"),u=a("a0bb"),v=a("ab8a"),m=a("02cb"),h=a("c197"),p=a("c44a"),f=a("dd34"),b=a("eb03"),g=a("2f62"),_={components:{ObjectiveDetailInfo:r["a"],ObjectiveCheckLists:c["a"],ObjectiveDetailComments:l["a"],ObjectiveDetailAttachments:d["a"],ObjectiveDetailStatus:u["a"],NonFieldFormErrors:v["default"],VueUser:m["default"],DefaultSvgLoader:h["default"]},mixins:[p["a"]],props:{actionData:{type:Object,default:function(){return{}}},notificationId:{type:[Number,String],default:""},selectedUser:{type:[String,Number],default:""},as:{type:String,default:"user"}},data:function(){return{htmlTitle:"Objective Approvals",breadCrumbItems:[{text:"Objective Approvals",disabled:!1,to:{name:"user-objective-approvals"}},{text:"Verify Objectives",disabled:!0}],score:4,remarks:"",scoreMapper:[{score:1,label:"Fail",color:"red darken-4"},{score:2,label:"Need Improvement",color:"orange darken-2"},{score:3,label:"Achieved",color:"yellow darken-2"},{score:4,label:"Exceed",color:"green darken-1"}],fetched:!1,objectiveDetail:null,showRemarksHistory:!1,showObjectiveDetails:!1,responsiblePerson:{}}},computed:Object(o["a"])(Object(o["a"])({},Object(g["c"])({getAppView:"common/getAppView"})),{},{canProvideScore:function(){return!!this.fetched&&("hrAdminView"===this.getAppView||"Score Not Provided"===this.objectiveDetail.cycle_status)},isHrAdmin:function(){return"hr"===this.as}}),created:function(){this.fetchObjectiveDetail()},methods:Object(o["a"])(Object(o["a"])({},Object(g["d"])({setUnreadNotificationCount:"notification/setUnreadNotificationCount"})),{},{fetchObjectiveDetail:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.fetched=!1,e.next=3,t.$http.get(f["a"].updateObjective(t.actionData.id),{params:{as:t.as}}).then((function(e){t.objectiveDetail=e,t.responsiblePerson=e.assigned_to,t.fetched=!0,e.remarks&&(t.remarks=e.remarks),e.score&&(t.score=e.score),t.showRemarksHistory=!t.canProvideScore}));case 3:case"end":return e.stop()}}),e)})))()},approveObjective:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.validateAllFields();case 2:if(!e.sent){e.next=7;break}a="",i={score:t.score,remarks:t.remarks},a=f["a"].objectiveAdminApprove(t.objectiveDetail.id)+"?as=".concat(t.as),t.$http.patch(a,i).then((function(){t.notificationId&&t.$http.post(b["a"].readNotification(t.notificationId)).then((function(){t.setUnreadNotificationCount(0)})).catch((function(){t.notifyUser("Something went wrong","red")})),t.notifyUser("Successfully approved objective","green"),t.$emit("close")})).catch((function(e){t.pushErrors(e)}));case 7:case"end":return e.stop()}}),e)})))()}})},x=_,y=a("2877"),C=a("6544"),j=a.n(C),k=a("8336"),D=a("b0af"),w=a("99d9"),S=a("62ad"),V=a("a523"),O=a("ce7e"),A=a("553a"),P=a("4bd4"),I=a("132d"),F=a("1d4d"),T=a("0fd9b"),$=a("2fa4"),L=a("a844"),N=Object(y["a"])(x,i,n,!1,null,null,null);e["a"]=N.exports;j()(N,{VBtn:k["a"],VCard:D["a"],VCardText:w["c"],VCol:S["a"],VContainer:V["a"],VDivider:O["a"],VFooter:A["a"],VForm:P["a"],VIcon:I["a"],VRating:F["a"],VRow:T["a"],VSpacer:$["a"],VTextarea:L["a"]})}}]);