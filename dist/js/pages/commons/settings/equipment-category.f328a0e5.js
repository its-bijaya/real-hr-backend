(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages/commons/settings/equipment-category","chunk-2d22d378"],{"3c9f":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{md:"8"}},[a("vue-page-wrapper",{attrs:{title:t.htmlTitle,"bread-crumbs":t.breadCrumbItems}},[a("v-card",[a("vue-card-title",{attrs:{title:"Equipment Category",subtitle:"The list of equipment category.",icon:"mdi-cash"}},[a("template",{slot:"actions"},[a("v-btn",{attrs:{text:"",color:"primary",depressed:""},on:{click:t.openOrganizationSettings}},[t._v(" Go Back ")]),a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("a",t._g({staticClass:"mr-3 text-body-1 font-weight-bold",on:{click:function(e){t.genericUploadBottomSheet=!0}}},i),[a("v-icon",{attrs:{size:"16",color:"primary"}},[t._v("mdi-download")]),t._v(" Import ")],1)]}}])},[a("span",[t._v(" Upload Equipment Category list in excel format. ")])]),a("v-btn",{attrs:{small:"",color:"primary",depressed:""},on:{click:function(e){return t.triggerForm("create")}}},[t._v(" "+t._s(t.$t("createNew"))+" ")]),a("v-btn",{attrs:{"data-cy":"btn-filter",icon:""},on:{click:function(e){t.showFilters=!t.showFilters}}},[a("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-filter-variant")}})],1)],1)],2),a("v-divider"),a("div",[a("v-slide-y-transition",[t.showFilters?a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{md:"12"}},[a("v-text-field",{staticClass:"mx-3",attrs:{"data-cy":"input-search",label:"Search for Equipment Category","prepend-inner-icon":"mdi-magnify"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1):t._e()],1),a("v-divider"),a("v-data-table",{attrs:{headers:t.headers,items:t.fetchedResults,"sort-desc":t.pagination.descending,"sort-by":t.pagination.sortBy,page:t.pagination.page,"items-per-page":t.pagination.rowsPerPage,"footer-props":t.footerProps,"server-items-length":t.pagination.totalItems,"must-sort":"","mobile-breakpoint":"0"},on:{"update:sortDesc":function(e){return t.$set(t.pagination,"descending",e)},"update:sort-desc":function(e){return t.$set(t.pagination,"descending",e)},"update:sortBy":function(e){return t.$set(t.pagination,"sortBy",e)},"update:sort-by":function(e){return t.$set(t.pagination,"sortBy",e)},"update:page":function(e){return t.$set(t.pagination,"page",e)},"update:itemsPerPage":function(e){return t.$set(t.pagination,"rowsPerPage",e)},"update:items-per-page":function(e){return t.$set(t.pagination,"rowsPerPage",e)}},scopedSlots:t._u([{key:"item",fn:function(e){return[a("tr",[a("td",{domProps:{textContent:t._s(e.item.name)}}),a("td",{domProps:{textContent:t._s(e.item.type)}}),a("td",[a("div",[a("span",{domProps:{textContent:t._s("Created:")}}),a("span",{domProps:{textContent:t._s(t.humanizeDate(e.item.created_at))}})]),a("div",[a("span",{domProps:{textContent:t._s("Modified:")}}),a("span",{domProps:{textContent:t._s(t.humanizeDate(e.item.modified_at))}})])]),a("td",[a("vue-context-menu",{attrs:{"context-list":[{name:"Update Details",icon:"mdi-pencil-outline",color:"blue"},{name:"Delete Details",icon:"mdi-delete-outline",color:"danger"}]},on:{click0:function(a){t.triggerForm("update",e.item),t.updateForm=!0},click1:function(a){return t.triggerForm("delete",e.item)}}})],1)])]}}])},[a("template",{slot:"no-data"},[a("data-table-no-data",{attrs:{loading:t.loading}})],1)],2)],1)],1),a("vue-dialog",{attrs:{notify:t.deleteNotification},on:{close:function(e){t.deleteNotification.dialog=!1},agree:t.deleteDataItem}}),a("v-dialog",{attrs:{width:"500"},model:{value:t.displayForm,callback:function(e){t.displayForm=e},expression:"displayForm"}},[t.displayForm?a("equipment-category",{attrs:{"update-form":t.updateForm,"action-data":t.actionData},on:{"dismiss-form":t.dismissForm,refresh:t.fetchDataTable}}):t._e()],1),a("v-bottom-sheet",{attrs:{persistent:""},on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.bottomSheetForm=!1}},model:{value:t.genericUploadBottomSheet,callback:function(e){t.genericUploadBottomSheet=e},expression:"genericUploadBottomSheet"}},[t.genericUploadBottomSheet?a("v-card",[a("vue-card-title",{attrs:{title:"Import Equipment Category",subtitle:"import equipment category file",icon:"mdi-file-document-outline",dark:"",closable:""},on:{close:function(e){t.genericUploadBottomSheet=!1,t.$router.push({name:"admin-commons-settings-equipment-category"})}}}),a("v-card-text",[a("generic-upload",{attrs:{"sample-file-name":"equipment-category-import-sample","request-api":t.requestApi()},on:{uploadSuccess:t.dismissForm}})],1)],1):t._e()],1)],1)],1)],1)},n=[],o=a("1da1"),r=(a("96cf"),a("ac1f"),a("841c"),a("0549")),s=a("a23a"),l=a("a51f"),d=a("36da"),c=a("e4bf"),u=a("8cd3"),m=a("6c6f"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("vue-card-title",{attrs:{title:"Equipment Category",subtitle:(t.updateForm?"Update":"Create")+" Equipment Category",icon:"mdi-atom-variant",closable:""},on:{close:function(e){return t.$emit("dismiss-form")}}}),a("v-divider"),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[t.nonFieldErrors?a("non-field-form-errors",{attrs:{"non-field-errors":t.nonFieldErrors}}):t._e()],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",t._b({directives:[{name:"validate",rawName:"v-validate",value:"required|max:50",expression:"'required|max:50'"}],attrs:{counter:"50"},model:{value:t.formValues.name,callback:function(e){t.$set(t.formValues,"name",e)},expression:"formValues.name"}},"v-text-field",t.veeValidate("name","Equipment Category Name *"),!1))],1),a("v-col",{attrs:{cols:"12"}},[a("v-select",t._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:t.assetTypes,"prepend-inner-icon":"mdi-flag-outline"},model:{value:t.formValues.type,callback:function(e){t.$set(t.formValues,"type",e)},expression:"formValues.type"}},"v-select",t.veeValidate("equipment_type","Equipment Type *"),!1))],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:""},domProps:{textContent:t._s("Clear")},on:{click:t.clearForm}}),a("v-btn",{attrs:{color:"primary",depressed:"",loading:t.loading},on:{click:t.submitForm}},[a("v-icon",{staticClass:"mr-1",attrs:{size:"14"}},[t._v(" mdi-content-save-outline ")]),t._v(" Save ")],1)],1)],1)},f=[],g=a("f12b"),h={name:"EquipmentCategory",mixins:[g["a"]],props:{actionData:{type:Object,required:!1,default:function(){return{name:"",type:""}}},updateForm:{type:Boolean,required:!1}},data:function(){return{formValues:this.deepCopy(this.actionData),assetTypes:[{text:"Fixed",value:"Fixed"},{text:"Tangible",value:"Tangible"},{text:"Intangible",value:"Intangible"},{text:"Current",value:"Current"},{text:"Financial",value:"Financial"}]}},methods:{submitForm:function(){var t=this;this.formValues.category="Religion",this.updateForm?(this.crud.message="Successfully updated equipment category.",this.putData(s["a"].equipmentCategory(this.actionData.slug),this.formValues).then((function(){t.$emit("dismiss-form")}))):(this.crud.message="Successfully created equipment category.",this.insertData(s["a"].equipmentCategories,this.formValues).then((function(){t.$emit("dismiss-form")})))},clearForm:function(){this.formValues={},this.errors.clear(),this.clearNonFieldErrors()}}},v=h,y=a("2877"),b=a("6544"),F=a.n(b),x=a("8336"),C=a("b0af"),w=a("99d9"),q=a("62ad"),V=a("ce7e"),_=a("132d"),T=a("0fd9b"),D=a("b974"),P=a("2fa4"),E=a("8654"),$=Object(y["a"])(v,p,f,!1,null,"1b1879dc",null),k=$.exports;F()($,{VBtn:x["a"],VCard:C["a"],VCardActions:w["a"],VCardText:w["c"],VCol:q["a"],VDivider:V["a"],VIcon:_["a"],VRow:T["a"],VSelect:D["a"],VSpacer:P["a"],VTextField:E["a"]});var S={components:{VuePageWrapper:r["default"],DataTableNoData:l["default"],GenericUpload:d["a"],VueContextMenu:c["default"],EquipmentCategory:k},mixins:[u["a"],m["a"]],data:function(){return{htmlTitle:"Equipment Category | Common Organization Settings | Admin",breadCrumbItems:[{text:"Common Settings",disabled:!1,to:{name:"switch-organization",params:{slug:this.$route.params.slug},query:{isCommon:!0}}},{text:"Equipment Category",disabled:!0}],headers:[{text:"Equipment Category",align:"left",sortable:!0,value:"name",width:""},{text:"Type",align:"left",value:"name",width:"",sortable:!1},{text:"Date Created",align:"left",sortable:!0,value:"modified_at",width:""},{text:"Action",sortable:!1,width:""}],search:"",genericUploadBottomSheet:!1,actionData:null,showFilters:!1,displayForm:!1,deleteNotification:{dialog:!1,heading:"Confirm Delete",text:"Are you sure you want to delete equipment category?"},updateForm:!1}},computed:{dataTableFilter:function(){return{search:this.search}}},watch:{"$route.query.status":{handler:function(t){"failed"==t&&(this.genericUploadBottomSheet=!0)},immediate:!0}},created:function(){this.dataTableEndpoint=s["a"].equipmentCategories},methods:{openOrganizationSettings:function(){this.$router.push({name:"switch-organization",query:{isCommon:!0}})},triggerForm:function(t,e){"delete"===t?this.deleteNotification.dialog=!0:"update"===t?(this.updateForm=!0,this.displayForm=!0):(this.updateForm=!1,this.displayForm=!0),this.showFilters=!1,this.actionData=e||void 0},deleteDataItem:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.crud.message="Successfully deleted equipment category.",t.deleteData(s["a"].equipmentCategory(t.actionData.slug)).then((function(){t.dismissForm()})).catch((function(e){t.notifyInvalidFormResponse(e.response.data.non_field_errors[0])}));case 2:case"end":return e.stop()}}),e)})))()},getValue:function(t,e){return t?t[e]:"N/A"},dismissForm:function(){this.updateForm=!1,this.displayForm=!1,this.genericUploadBottomSheet=!1,this.deleteNotification.dialog=!1,this.fetchDataTable()},requestApi:function(){return{download_sample_url:s["a"].downloadSampleEquipmentCategory,post_and_status_url:s["a"].importEquipmentCategory}}}},B=S,I=a("288c"),U=a("8fea"),N=a("169a"),R=a("0789"),O=a("3a2f"),A=Object(y["a"])(B,i,n,!1,null,null,null);e["default"]=A.exports;F()(A,{VBottomSheet:I["a"],VBtn:x["a"],VCard:C["a"],VCardText:w["c"],VCol:q["a"],VDataTable:U["a"],VDialog:N["a"],VDivider:V["a"],VIcon:_["a"],VRow:T["a"],VSlideYTransition:R["g"],VTextField:E["a"],VTooltip:O["a"]})},"6c6f":function(t,e,a){"use strict";a("d3b7");e["a"]={data:function(){return{deleteNotification:{dialog:!1,heading:"Confirm Delete",text:"Are you sure you want to delete ?"}}},methods:{deleteData:function(t,e){var a=this;return new Promise((function(i,n){!a.loading&&t&&(a.loading=!0,a.$http.delete(t,e||{}).then((function(t){a.crud.message&&setTimeout((function(){a.notifyUser(a.crud.message)}),1e3),i(t),a.loading=!1})).catch((function(t){a.pushErrors(t),a.notifyInvalidFormResponse(),n(t),a.loading=!1})).finally((function(){a.deleteNotification.dialog=!1})))}))}}}},"8cd3":function(t,e,a){"use strict";var i=a("5530"),n=(a("d3b7"),a("f0d5"));e["a"]={mixins:[n["a"]],data:function(){return{dataTableEndpoint:"",fetchedResults:[],response:null,footerProps:{itemsPerPageOptions:[10,20,30,40,50,100]},pagination:{sortBy:["modified_at"],descending:!1,totalItems:0,page:1,rowsPerPage:10,pageCount:0},loadTableOnInit:!0}},computed:{filterParams:function(){var t=Object(i["a"])(Object(i["a"])({},this.dataTableFilter),{},{offset:(this.pagination.page-1)*this.pagination.rowsPerPage,limit:this.pagination.rowsPerPage,ordering:this.pagination.descending?this.pagination.sortBy:"-"+this.pagination.sortBy});return this.convertToURLSearchParams(t,!1)}},watch:{filterParams:function(){var t=this;this.$nextTick((function(){t.fetchDataTable()}))},dataTableFilter:function(){this.pagination.page=1}},created:function(){var t=this;setTimeout((function(){t.loadTableOnInit&&t.fetchDataTable()}),0)},methods:{fetchDataTable:function(t,e){var a=this;return new Promise((function(i,n){!t&&!a.dataTableEndpoint||a.loading||(a.loadTableOnInit=!1,a.loading=!0,a.fetchedResults=[],a.$http.get(t||a.dataTableEndpoint,e||{params:a.filterParams}).then((function(t){a.response=t,a.fetchedResults=t.results,a.pagination.totalItems=t.count,a.processAfterTableLoad(t),i(t),a.loading=!1})).catch((function(t){a.pushErrors(t),a.notifyInvalidFormResponse(),n(t),a.loading=!1})))}))},processAfterTableLoad:function(){}}}},f12b:function(t,e,a){"use strict";var i=a("f0d5"),n=a("983c"),o=a("f70a"),r=a("6c6f");e["a"]={mixins:[i["a"],n["a"],o["a"],r["a"]]}},f70a:function(t,e,a){"use strict";a("d3b7"),a("caad");e["a"]={methods:{insertData:function(t,e){var a=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.validate,o=void 0===n||n,r=i.clearForm,s=void 0===r||r,l=arguments.length>3?arguments[3]:void 0;return new Promise((function(i,n){!a.loading&&t&&(a.clearErrors(),a.$validator.validateAll().then((function(r){o||(r=!0),r&&(a.loading=!0,a.$http.post(t,e,l||{}).then((function(t){a.clearErrors(),s&&(a.formValues={}),a.crud.addAnother||a.$emit("create"),a.crud.message&&setTimeout((function(){a.notifyUser(a.crud.message)}),1e3),i(t),a.loading=!1})).catch((function(t){a.pushErrors(t),a.notifyInvalidFormResponse(),n(t),a.loading=!1})))})))}))},patchData:function(t,e){var a=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.validate,o=void 0===n||n,r=i.clearForm,s=void 0===r||r,l=arguments.length>3?arguments[3]:void 0;return new Promise((function(i,n){a.updateData(t,e,{validate:o,clearForm:s},"patch",l).then((function(t){i(t)})).catch((function(t){n(t)}))}))},putData:function(t,e){var a=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.validate,o=void 0===n||n,r=i.clearForm,s=void 0===r||r,l=arguments.length>3?arguments[3]:void 0;return new Promise((function(i,n){a.updateData(t,e,{validate:o,clearForm:s},"put",l).then((function(t){i(t)})).catch((function(t){n(t)}))}))},updateData:function(t,e){var a=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.validate,o=void 0===n||n,r=i.clearForm,s=void 0===r||r,l=arguments.length>3?arguments[3]:void 0,d=arguments.length>4?arguments[4]:void 0;return new Promise((function(i,n){!a.loading&&t&&["put","patch"].includes(l)&&(a.clearErrors(),a.$validator.validateAll().then((function(r){o||(r=!0),r&&(a.loading=!0,a.$http[l](t,e,d||{}).then((function(t){a.$emit("update"),a.clearErrors(),s&&(a.formValues={}),a.crud.message&&setTimeout((function(){a.notifyUser(a.crud.message)}),1e3),i(t),a.loading=!1})).catch((function(t){a.pushErrors(t),a.notifyInvalidFormResponse(),n(t),a.loading=!1})))})))}))},clearErrors:function(){this.clearNonFieldErrors(),this.$validator.errors.clear()}}}}}]);