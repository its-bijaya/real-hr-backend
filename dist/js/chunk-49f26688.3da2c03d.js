(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-49f26688","chunk-2d2160c2","chunk-2d2160c2","chunk-2d2160c2","chunk-2d2160c2","chunk-2d2160c2"],{9192:function(t,e,i){"use strict";i("99af");e["a"]={getWorkShift:function(t){return"/attendance/".concat(t,"/work-shifts/")},postWorkShift:function(t){return"/attendance/".concat(t,"/work-shifts/")},updateWorkShift:function(t,e){return"/attendance/".concat(t,"/work-shifts/").concat(e,"/")},getWorkShiftDetails:function(t,e){return"/attendance/".concat(t,"/work-shifts/").concat(e,"/")},deleteWorkShift:function(t,e){return"/attendance/".concat(t,"/work-shifts/").concat(e,"/")},postAssignShift:function(t){return"/attendance/".concat(t,"/assign-shift/")},getShiftLegend:function(t){return"attendance/".concat(t,"/work-shifts/legend/")},getUserIndividualShift:function(t,e){return"/attendance/".concat(t,"/users/settings/").concat(e,"/shifts/")},getUserIndividualShiftDetails:function(t,e,i){return"/attendance/".concat(t,"/users/settings/").concat(e,"/shifts/").concat(i)}}},"9d01":function(t,e,i){},b624:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-form",{ref:"individualAttendanceForm",on:{submit:function(e){return e.preventDefault(),t.getFormAction.apply(null,arguments)}}},[t.nonFieldErrors?i("non-field-form-errors",{attrs:{"non-field-errors":t.nonFieldErrors}}):t._e(),i("v-card",[i("v-divider"),i("v-card-title",[i("v-row",{attrs:{justify:"end"}},[i("v-btn",{attrs:{color:"primary",small:""},on:{click:function(e){t.addShiftBottomSheet=!0}}},[t._v(" Add New Shift ")]),i("v-btn",{attrs:{outlined:"",color:"primary",small:""},on:{click:t.showDataTable}},[t._v(" Manage Shifts ")])],1)],1),i("v-card-text",[i("v-row",{attrs:{align:"center"}},[i("v-col",{attrs:{md:"4",cols:"6"}},[t.formValues.id?i("div",[i("user-detail-box",{attrs:{user:t.actionData.user}}),i("v-bottom-sheet",{attrs:{persistent:""},model:{value:t.showShiftDetails,callback:function(e){t.showShiftDetails=e},expression:"showShiftDetails"}},[i("IndividualShiftDetails",{attrs:{user:t.actionData.user,"force-re-fetch":t.forceReFetch},on:{close:t.closeIndividualShiftDetails,editShiftDetail:function(e){return t.editShiftDetail(t.formValues.id)}}})],1),i("v-bottom-sheet",{attrs:{persistent:""},model:{value:t.addShiftBottomSheet,callback:function(e){t.addShiftBottomSheet=e},expression:"addShiftBottomSheet"}},[i("CreateUpdateIndividualSettingShift",{attrs:{"user-detail":t.actionData.user,edit:""},on:{close:function(e){t.addShiftBottomSheet=!1}}})],1)],1):t._e()]),i("v-col",{attrs:{md:"4",cols:"6"}},[i("v-row",{attrs:{"no-gutters":""}},[i("v-col",[i("v-switch",{attrs:{"data-cy":"switch-web-attendance",label:"Allow Web Attendance for employee"},model:{value:t.formValues.web_attendance,callback:function(e){t.$set(t.formValues,"web_attendance",e)},expression:"formValues.web_attendance"}})],1)],1),i("v-row",{attrs:{"no-gutters":""}},[i("v-col",[i("v-switch",{attrs:{"data-cy":"switch-enable-approval",label:"Enable Approval"},model:{value:t.formValues.enable_approval,callback:function(e){t.$set(t.formValues,"enable_approval",e)},expression:"formValues.enable_approval"}})],1)],1),i("v-row",{attrs:{"no-gutters":""}},[i("v-col",[i("v-switch",{attrs:{"data-cy":"switch-enable-hr-notification",label:"Enable Notification for HR"},model:{value:t.formValues.enable_hr_notification,callback:function(e){t.$set(t.formValues,"enable_hr_notification",e)},expression:"formValues.enable_hr_notification"}})],1)],1),i("v-row",{attrs:{"no-gutters":""}},[i("v-col",[i("v-switch",{attrs:{"data-cy":"switch-enable-supervisor-notification",label:"Enable Notification for Supervisor"},model:{value:t.formValues.enable_supervisor_notification,callback:function(e){t.$set(t.formValues,"enable_supervisor_notification",e)},expression:"formValues.enable_supervisor_notification"}})],1)],1)],1),i("v-col",{attrs:{md:"3",cols:"12"}},[t.formValues.web_attendance?i("v-text-field",t._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],model:{value:t.cidr,callback:function(e){t.cidr=e},expression:"cidr"}},"v-text-field",t.veeValidate("cidr","CIDR (IP Address)+"),!1)):t._e()],1)],1)],1),i("v-divider"),i("v-card-actions",[i("v-col",{staticClass:"text-right"},[i("v-btn",{attrs:{outlined:"",color:"primary"},on:{click:function(e){return t.clearForm(t.formValues)}}},[t._v(" Clear ")]),i("v-btn",{attrs:{type:"submit",color:"primary"}},[i("v-icon",{attrs:{size:"14",left:""},domProps:{textContent:t._s("mdi-content-save-outline")}}),t._v(" Save ")],1)],1)],1)],1)],1)},n=[],s=i("1da1"),o=(i("96cf"),i("02cb")),r=i("ab8a"),l=i("c44a"),c=i("d132"),d=i("9192"),u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",[i("v-dialog",{attrs:{persistent:""},model:{value:t.editShiftDialog,callback:function(e){t.editShiftDialog=e},expression:"editShiftDialog"}},[t.editShiftDialog?i("CreateUpdateIndividualSettingShift",{attrs:{"user-detail":t.user,"shift-id":t.shiftIdToEdit},on:{close:t.closeEditShiftDialog}}):t._e()],1),i("v-dialog",{attrs:{"max-width":"700px"},model:{value:t.showDeleteMessage,callback:function(e){t.showDeleteMessage=e},expression:"showDeleteMessage"}},[i("v-card",[i("vue-card-title",{attrs:{title:"Are you sure you want to delete?",subtitle:"Press Delete if you want to delete, Press cancel if you want to cancel",icon:"mdi-file-document-outline",dark:"",closable:""},on:{close:function(e){t.showDeleteMessage=!1}}}),i("v-card-actions",[i("v-container",[i("v-row",{attrs:{justify:"start"}},[t._v(" Shift once deleted can not be undone. Press   "),i("span",{staticClass:"primary--text"},[t._v(" Confirm ")]),t._v("   to proceed! ")]),i("v-row",{attrs:{justify:"end"}},[i("v-btn",{attrs:{color:"primary"},on:{click:t.deleteIndividualShiftDetail}},[t._v("Confirm")]),i("v-btn",{on:{click:function(e){t.showDeleteMessage=!1}}},[t._v("Cancel")])],1)],1)],1)],1)],1),i("vue-card-title",{attrs:{title:"Shift Details of "+t.user.full_name,subtitle:"The list below contains the shift details of an employee",icon:"mdi-file-document-outline",dark:"",closable:""},on:{close:function(e){return t.$emit("close")}}}),i("v-data-table",{attrs:{headers:t.headers,items:t.fetchedResults,"fixed-header":""},scopedSlots:t._u([{key:"item",fn:function(e){return[i("tr",[i("td",{staticClass:"text-center"},[t._v(" "+t._s(e.item.shift.name)+" ")]),i("td",{staticClass:"text-center"},[t._v(" "+t._s(e.item.applicable_from)+" ")]),i("td",{staticClass:"text-center"},[e.item.applicable_to?i("span",[t._v(" "+t._s(e.item.applicable_to)+" ")]):i("span",{staticClass:"text-muted"},[t._v("(present)")])]),i("td",{staticClass:"text-center"},[i("v-icon",{on:{click:function(i){return t.editIndividualShiftDetail(e.item.id)}}},[t._v(" mdi-pencil")]),i("v-icon",{on:{click:function(i){return t.warnDeleteMsg(e.item.id)}}},[t._v("mdi-delete")])],1)])]}}])})],1)},h=[],f=i("17cc"),v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",[i("vue-card-title",{attrs:{title:t.displayText+" Shift Details",subtitle:"The form below can be used to "+t.displayText.toLowerCase()+" shift details",icon:"mdi-file-document-outline",dark:"",closable:""},on:{close:t.cancelShiftForm}}),i("v-container",[t.nonFieldErrors?i("non-field-form-errors",{attrs:{"non-field-errors":t.nonFieldErrors}}):t._e(),t.loading?i("default-svg-loader"):i("v-row",[i("v-col",{staticClass:"sm-12 md-4"},[i("vue-auto-complete",t._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"px-2",attrs:{endpoint:t.shiftAPI,"item-text":"name","item-value":"id","prepend-inner-icon":"mdi-file-document"},model:{value:t.individualShiftForm.shift,callback:function(e){t.$set(t.individualShiftForm,"shift",e)},expression:"individualShiftForm.shift"}},"vue-auto-complete",t.veeValidate("shift","Shift Name *"),!1))],1),i("v-col",{staticClass:"sm-12 md-4"},[i("vue-date-picker",t._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],model:{value:t.individualShiftForm.applicable_from,callback:function(e){t.$set(t.individualShiftForm,"applicable_from",e)},expression:"individualShiftForm.applicable_from"}},"vue-date-picker",t.veeValidate("applicable_from","Applicable From *"),!1))],1),i("v-col",{staticClass:"sm-12 md-4"},[i("vue-date-picker",{attrs:{label:"Applicable To"},model:{value:t.individualShiftForm.applicable_to,callback:function(e){t.$set(t.individualShiftForm,"applicable_to",e)},expression:"individualShiftForm.applicable_to"}})],1)],1)],1),i("v-card-actions",[i("v-container",[i("v-row",{attrs:{justify:"end"}},[i("v-btn",{attrs:{disabled:t.errors.any()||!t.individualShiftForm.shift||!t.individualShiftForm.applicable_from,primary:"",color:"primary"},on:{click:t.saveFormData}},[t._v(" "+t._s(t.displayText))]),i("v-btn",{on:{click:t.cancelShiftForm}},[t._v("Cancel")])],1)],1)],1)],1)},m=[],p=i("5530"),g=(i("a9e3"),i("ac1f"),i("1276"),i("d3b7"),i("5660")),b=i("741f"),S=i("c197"),w={name:"CreateUpdateIndividualSettingShift",components:{DefaultSvgLoader:S["default"],VueAutoComplete:g["default"],VueDatePicker:b["default"],NonFieldFormErrors:r["default"]},mixins:[l["a"]],props:{userDetail:{type:Object,required:!0},shiftId:{type:Number,default:function(){return null}}},data:function(){return{individualShiftForm:{shift:null,applicable_from:null,applicable_to:null},loading:!1}},computed:{displayText:function(){return this.shiftId?"Update":"Create"},apiMethod:function(){return this.shiftId?this.$http.put:this.$http.post},shiftAPI:function(){return"/attendance/".concat(this.getOrganizationSlug,"/work-shifts")},updateAPI:function(){return this.shiftId?d["a"].getUserIndividualShiftDetails(this.getOrganizationSlug,this.userDetail.id,this.shiftId):d["a"].getUserIndividualShift(this.getOrganizationSlug,this.userDetail.id)},today:function(){return(new Date).toISOString().split("T")[0]}},watch:{shiftId:function(t){t&&this.fillInitialForm()}},mounted:function(){this.shiftId&&this.fillInitialForm()},methods:{saveFormData:function(){var t=this;this.validateAllFields(),this.errors.any()||this.apiMethod(this.updateAPI,Object(p["a"])(Object(p["a"])({},this.individualShiftForm),{},{user:this.userDetail.id})).then((function(){t.resetForm(),t.$emit("close")})).catch((function(e){t.notifyInvalidFormResponse(),t.pushIndexedErrors(e,"non_field_errors")}))},cancelShiftForm:function(){this.clearNonFieldErrors(),this.resetForm(),this.$emit("close")},resetForm:function(){this.individualShiftForm={shift:null,applicable_from:null,applicable_to:null}},fillInitialForm:function(){var t=this;this.loading=!0,this.$http.get(d["a"].getUserIndividualShiftDetails(this.getOrganizationSlug,this.userDetail.id,this.shiftId)).then((function(e){t.individualShiftForm=e})).finally((function(){t.loading=!1}))}}},_=w,D=i("2877"),x=i("6544"),I=i.n(x),F=i("8336"),y=i("b0af"),C=i("99d9"),k=i("62ad"),V=i("a523"),A=i("0fd9b"),$=Object(D["a"])(_,v,m,!1,null,null,null),T=$.exports;I()($,{VBtn:F["a"],VCard:y["a"],VCardActions:C["a"],VCol:k["a"],VContainer:V["a"],VRow:A["a"]});var E={name:"IndividualShiftDetails",components:{CreateUpdateIndividualSettingShift:T},mixins:[f["a"]],props:{user:{type:Object,required:!0},forceReFetch:{type:Boolean,default:!0}},data:function(){return{headers:[{text:"Shift",align:"center",value:"name",sortable:!1},{text:"Applicable From",align:"center",value:"name",sortable:!1},{text:"Applicable Till",align:"center",value:"name",sortable:!1},{text:"Action",align:"center",value:"name",sortable:!1}],response:{},editShiftDialog:!1,initialForm:{shift:null,applicable_from:null,applicable_to:null},editForm:{shift:null,applicable_from:null,applicable_to:null},shiftIdToDelete:null,shiftIdToEdit:null,showDeleteMessage:null}},watch:{forceReFetch:function(t){t&&this.fetchAPIResults()}},mounted:function(){this.fetchAPIResults()},methods:{fetchAPIResults:function(){var t=this,e=d["a"].getUserIndividualShift(this.getOrganizationSlug,this.user.id);this.$http.get(e).then((function(e){t.loadDataTable(e)}))},editIndividualShiftDetail:function(t){var e=this;this.editShiftDialog=!0,this.shiftIdToEdit=t,this.$http.get(d["a"].getUserIndividualShiftDetails(this.getOrganizationSlug,this.user.id,t)).then((function(t){e.editForm=t}))},deleteIndividualShiftDetail:function(){var t=this;this.shiftIdToDelete&&this.$http.delete(d["a"].getUserIndividualShiftDetails(this.getOrganizationSlug,this.user.id,this.shiftIdToDelete)).then((function(){t.showDeleteMessage=!1,t.fetchAPIResults()}))},warnDeleteMsg:function(t){this.shiftIdToDelete=t,this.showDeleteMessage=!0},closeEditShiftDialog:function(){this.shiftIdToEdit=null,this.fetchAPIResults(),this.editShiftDialog=!1}}},O=E,R=i("8fea"),B=i("169a"),j=i("132d"),P=Object(D["a"])(O,u,h,!1,null,"1b1b971f",null),U=P.exports;I()(P,{VBtn:F["a"],VCard:y["a"],VCardActions:C["a"],VContainer:V["a"],VDataTable:R["a"],VDialog:B["a"],VIcon:j["a"],VRow:A["a"]});var M={components:{CreateUpdateIndividualSettingShift:T,UserDetailBox:o["default"],NonFieldFormErrors:r["default"],IndividualShiftDetails:U},mixins:[l["a"]],props:{actionData:{type:Object,required:!1,default:function(){return{user:null,web_attendance:!1,ip_filters:[]}}}},data:function(){return{formValues:this.deepCopy(this.actionData),showShiftDetails:!1,showBottomSheetDataTableBoolean:!1,addShiftBottomSheet:!1,forceReFetch:!0,cidr:this.actionData.ip_filters[0]?this.actionData.ip_filters[0].cidr:null}},methods:{clearForm:function(){this.$refs.individualAttendanceForm.reset(),this.clearNonFieldErrors(),this.$validator.errors.clear()},getFormAction:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.validateAllFields();case 2:if(!e.sent){e.next=4;break}t.updateSettings();case 4:case"end":return e.stop()}}),e)})))()},updateSettings:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.formValues.web_attendance&&(t.formValues.ip_filters=[],t.formValues.ip_filters.push({allow:!0,cidr:t.cidr})),t.formValues.user=t.actionData.user.id,t.$http.put(c["a"].updateUserSetting(t.getOrganizationSlug,t.actionData.id),t.formValues).then((function(){t.$emit("dismiss-form"),t.notifyUser("Successfully updated Web Attendance for User.")})).catch((function(e){t.notifyInvalidFormResponse(),t.pushErrors(e)}));case 3:case"end":return e.stop()}}),e)})))()},showBottomSheet:function(){this.shiftDetailsBottomSheet=!0,this.shiftDataVisible=!0},editShiftDetail:function(t){var e=this;this.$http.get(d["a"].getUserIndividualShiftDetails(this.getOrganizationSlug,this.actionData.user.id,t)).then((function(t){e.loadDataTable(t)}))},closeIndividualShiftDetails:function(){this.forceReFetch=!1,this.showShiftDetails=!1},openBottomSheet:function(){this.showShiftDetails=!0},showDataTable:function(){this.forceReFetch=!0,this.openBottomSheet(),this.showBottomSheetDataTableBoolean=!0}}},N=M,z=i("288c"),q=i("ce7e"),W=i("4bd4"),L=i("b73d"),J=i("8654"),H=Object(D["a"])(N,a,n,!1,null,null,null);e["default"]=H.exports;I()(H,{VBottomSheet:z["a"],VBtn:F["a"],VCard:y["a"],VCardActions:C["a"],VCardText:C["c"],VCardTitle:C["d"],VCol:k["a"],VDivider:q["a"],VForm:W["a"],VIcon:j["a"],VRow:A["a"],VSwitch:L["a"],VTextField:J["a"]})},b73d:function(t,e,i){"use strict";var a=i("5530"),n=(i("0481"),i("ec29"),i("9d01"),i("fe09")),s=i("c37a"),o=i("c3f0"),r=i("0789"),l=i("490a"),c=i("80d2");e["a"]=n["a"].extend({name:"v-switch",directives:{Touch:o["a"]},props:{inset:Boolean,loading:{type:[Boolean,String],default:!1},flat:{type:Boolean,default:!1}},computed:{classes:function(){return Object(a["a"])(Object(a["a"])({},s["a"].options.computed.classes.call(this)),{},{"v-input--selection-controls v-input--switch":!0,"v-input--switch--flat":this.flat,"v-input--switch--inset":this.inset})},attrs:function(){return{"aria-checked":String(this.isActive),"aria-disabled":String(this.isDisabled),role:"switch"}},validationState:function(){return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0},switchData:function(){return this.setTextColor(this.loading?void 0:this.validationState,{class:this.themeClasses})}},methods:{genDefaultSlot:function(){return[this.genSwitch(),this.genLabel()]},genSwitch:function(){return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",Object(a["a"])(Object(a["a"])({},this.attrs),this.attrs$)),this.genRipple(this.setTextColor(this.validationState,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",Object(a["a"])({staticClass:"v-input--switch__track"},this.switchData)),this.$createElement("div",Object(a["a"])({staticClass:"v-input--switch__thumb"},this.switchData),[this.genProgress()])])},genProgress:function(){return this.$createElement(r["c"],{},[!1===this.loading?null:this.$slots.progress||this.$createElement(l["a"],{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft:function(){this.isActive&&this.onChange()},onSwipeRight:function(){this.isActive||this.onChange()},onKeydown:function(t){(t.keyCode===c["y"].left&&this.isActive||t.keyCode===c["y"].right&&!this.isActive)&&this.onChange()}}})},c197:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.divClass},[i("v-img",{class:t.imgClass,attrs:{src:"/svg/three-dots.svg",height:t.height,contain:""}}),i("h3",{staticClass:"text-center grey--text",domProps:{textContent:t._s(t.message)}})],1)},n=[],s={props:{message:{type:String,default:"Please wait. Fetching data just for you ..."},divClass:{type:String,default:"pa-12"},imgClass:{type:String,default:"my-6"},height:{type:String,default:"20"}},data:function(){return{}}},o=s,r=i("2877"),l=i("6544"),c=i.n(l),d=i("adda"),u=Object(r["a"])(o,a,n,!1,null,null,null);e["default"]=u.exports;c()(u,{VImg:d["a"]})}}]);