(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d6376"],{7238:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-card",[i("vue-card-title",{attrs:{title:"Medical Information",subtitle:"Medical Information of "+e.userName,icon:"mdi-file-document-outline"}},[i("template",{slot:"actions"},[e.showForm||e.getAuthStateUserId!==parseInt(e.$route.params.id)&&!e.verifyPermission(e.allPermissions.CAN_CREATE_UPDATE_USER_PROFILE)||"supervisor"===e.as||e.loading?e._e():i("v-btn",{attrs:{small:"",depressed:"",color:"primary"},on:{click:function(t){e.showForm=!0}}},[e._v(" "+e._s(e.$t("update"))+" ")]),e.showForm?i("v-btn",{attrs:{small:"",outlined:"",color:"primary"},on:{click:e.refresh}},[e._v(" Cancel ")]):e._e()],1)],2),i("v-divider"),i("v-card-text",[e.loading?i("v-row",e._l(6,(function(e){return i("v-col",{key:e,attrs:{cols:"4"}},[i("bullet-list-loader",{attrs:{"primary-color":"#eee","secondary-color":"#d5d5d7"}})],1)})),1):e._e(),e.showForm||e.loading?e._e():i("v-row",[i("v-col",{attrs:{md:"6",cols:"12"}},[i("v-list-item",[i("v-list-item-avatar",{staticClass:"mr-0"},[i("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-hospital-box-outline")}})],1),i("v-list-item-content",[i("v-list-item-title",{domProps:{textContent:e._s("Blood Group")}}),i("v-list-item-subtitle",[i("span",{staticClass:"text-capitalize",domProps:{textContent:e._s(e.getBloodGroup)}}),e.medicalInfo.blood_group?i("span",{domProps:{textContent:e._s("ve")}}):e._e()])],1)],1)],1),i("v-col",{attrs:{md:"6",cols:"12"}},[i("v-list-item",[i("v-list-item-avatar",{staticClass:"mr-0"},[i("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-human-male-height")}})],1),i("v-list-item-content",[i("v-list-item-title",{domProps:{textContent:e._s("Height")}}),i("v-list-item-subtitle",{domProps:{textContent:e._s(e.getHeight)}})],1)],1)],1),i("v-col",{attrs:{md:"6",cols:"12"}},[i("v-list-item",[i("v-list-item-avatar",{staticClass:"mr-0"},[i("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-scale-balance")}})],1),i("v-list-item-content",[i("v-list-item-title",{domProps:{textContent:e._s("Weight")}}),i("v-list-item-subtitle",{domProps:{textContent:e._s(e.getWeight)}})],1)],1)],1),i("v-col",{attrs:{md:"6",cols:"12"}},[i("v-list-item",[i("v-list-item-avatar",{staticClass:"mr-0"},[i("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-smoking-off")}})],1),i("v-list-item-content",[i("v-list-item-title",{domProps:{textContent:e._s("Smoker")}}),i("v-list-item-subtitle",{domProps:{textContent:e._s(e.medicalInfo.smoker?"Yes":"No")}})],1)],1)],1),i("v-col",{attrs:{md:"6",cols:"12"}},[i("v-list-item",[i("v-list-item-avatar",{staticClass:"mr-0"},[i("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-glass-mug")}})],1),i("v-list-item-content",[i("v-list-item-title",{domProps:{textContent:e._s("Drinker")}}),i("v-list-item-subtitle",{domProps:{textContent:e._s(e.medicalInfo.drinker?"Yes":"No")}})],1)],1)],1),i("v-col",{attrs:{md:"6",cols:"12"}},[i("v-list-item",[i("v-list-item-avatar",{staticClass:"mr-0"},[i("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-pill")}})],1),i("v-list-item-content",[i("v-list-item-title",{domProps:{textContent:e._s("On Medication")}}),i("v-list-item-subtitle",{domProps:{textContent:e._s(e.medicalInfo.on_medication?"Yes":"No")}})],1)],1)],1),i("v-col",{attrs:{md:"6",cols:"12"}},[i("v-list-item",[i("v-list-item-avatar",{staticClass:"mr-0"},[i("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-wheelchair-accessibility")}})],1),i("v-list-item-content",[i("v-list-item-title",{domProps:{textContent:e._s("Chronic Disease")}}),i("v-list-item-subtitle",[0==e.medicalInfo.chronic_disease?i("span",[e._v("None")]):i("ul",e._l(e.medicalInfo.chronic_disease,(function(t,s){return i("li",{key:s},[i("span",[e._v(" "+e._s(t)+" ")])])})),0)])],1)],1)],1),i("v-col",{attrs:{md:"6",cols:"12"}},[i("v-list-item",[i("v-list-item-avatar",{staticClass:"mr-0"},[i("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-wheelchair-accessibility")}})],1),i("v-list-item-content",[i("v-list-item-title",{domProps:{textContent:e._s("Disabilities")}}),i("v-list-item-subtitle",[0==e.medicalInfo.disabilities?i("span",[e._v("None")]):i("ul",e._l(e.medicalInfo.disabilities,(function(t,s){return i("li",{key:s},[i("span",[e._v(" "+e._s(t.title)+" ")])])})),0)])],1)],1)],1),i("v-col",{attrs:{md:"6",cols:"12"}},[i("v-list-item",[i("v-list-item-avatar",{staticClass:"mr-0"},[i("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-wheelchair-accessibility")}})],1),i("v-list-item-content",[i("v-list-item-title",{domProps:{textContent:e._s("Allergic History")}}),i("v-list-item-subtitle",[0==e.medicalInfo.allergic_history?i("span",[e._v("None")]):i("ul",e._l(e.medicalInfo.allergic_history,(function(t,s){return i("li",{key:s},[i("span",[e._v(" "+e._s(t)+" ")])])})),0)])],1)],1)],1),i("v-col",{attrs:{md:"6",cols:"12"}},[i("v-list-item",[i("v-list-item-avatar",{staticClass:"mr-0"},[i("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-wheelchair-accessibility")}})],1),i("v-list-item-content",[i("v-list-item-title",{domProps:{textContent:e._s("Restricted Medicine")}}),i("v-list-item-subtitle",[0==e.medicalInfo.restricted_medicine?i("span",[e._v("None")]):i("ul",e._l(e.medicalInfo.restricted_medicine,(function(t,s){return i("li",{key:s},[i("span",[e._v(" "+e._s(t)+" ")])])})),0)])],1)],1)],1)],1),e.showForm?i("span",[i("medical-details-form",{attrs:{"user-id":e.userInfo.user.id,"export-fields":e.medicalInfo,as:e.as},on:{updated:e.refresh}})],1):e._e()],1),i("vue-notify",{attrs:{notify:e.notify}})],1)},r=[],a=i("1da1"),o=(i("96cf"),i("d81d"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-form",[i("v-container",{staticClass:"px-12"},[e.nonFieldErrors?i("non-field-form-errors",{attrs:{"non-field-errors":e.nonFieldErrors}}):e._e(),i("v-row",[i("v-col",{attrs:{md:"6",sm:"12"}},[i("v-select",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:e.bloodGroupChoices,"item-text":"item","item-value":"value","prepend-inner-icon":"mdi-hospital-box-outline"},model:{value:e.form.blood_group,callback:function(t){e.$set(e.form,"blood_group",t)},expression:"form.blood_group"}},"v-select",e.veeValidate("blood_group","Blood Group *"),!1))],1),i("v-col",{attrs:{cols:"6"}}),i("v-col",{attrs:{md:"6",sm:"12"}},[i("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required|decimal",expression:"'required|decimal'"}],attrs:{"prepend-inner-icon":"mdi-human-male-height"},model:{value:e.form.height,callback:function(t){e.$set(e.form,"height",t)},expression:"form.height"}},"v-text-field",e.veeValidate("height","Height *"),!1))],1),i("v-col",{attrs:{md:"6",sm:"12"}},[i("v-select",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:e.heightUnitChoices,"item-text":"item","item-value":"value",clearable:"","prepend-inner-icon":"mdi-human-male-height"},model:{value:e.form.height_unit,callback:function(t){e.$set(e.form,"height_unit",t)},expression:"form.height_unit"}},"v-select",e.veeValidate("height_unit","Height Unit *"),!1))],1),i("v-col",{attrs:{md:"6",sm:"12"}},[i("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required|decimal",expression:"'required|decimal'"}],attrs:{"prepend-inner-icon":"mdi-scale-balance"},model:{value:e.form.weight,callback:function(t){e.$set(e.form,"weight",t)},expression:"form.weight"}},"v-text-field",e.veeValidate("weight","Weight *"),!1))],1),i("v-col",{attrs:{md:"6",sm:"12"}},[i("v-select",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:e.weightUnitChoices,"item-text":"item","item-value":"value",clearable:"","prepend-inner-icon":"mdi-scale-balance"},model:{value:e.form.weight_unit,callback:function(t){e.$set(e.form,"weight_unit",t)},expression:"form.weight_unit"}},"v-select",e.veeValidate("weight_unit","Weight Unit *"),!1))],1),i("v-col",{attrs:{md:"4",sm:"12"}},[i("v-checkbox",e._b({attrs:{label:"Smoker"},model:{value:e.form.smoker,callback:function(t){e.$set(e.form,"smoker",t)},expression:"form.smoker"}},"v-checkbox",e.veeValidate("smoker","Smoker"),!1))],1),i("v-col",{attrs:{md:"4",sm:"12"}},[i("v-checkbox",e._b({attrs:{label:"Drinker"},model:{value:e.form.drinker,callback:function(t){e.$set(e.form,"drinker",t)},expression:"form.drinker"}},"v-checkbox",e.veeValidate("drinker","Drinker"),!1))],1),i("v-col",{attrs:{md:"4",sm:"12"}},[i("v-checkbox",e._b({attrs:{label:"On medication"},model:{value:e.form.on_medication,callback:function(t){e.$set(e.form,"on_medication",t)},expression:"form.on_medication"}},"v-checkbox",e.veeValidate("on_medication","On medication"),!1))],1),i("v-col",{attrs:{md:"6",sm:"12"}},[i("vue-auto-complete",e._b({attrs:{endpoint:e.disabilitiesEndpoint,default:e.currentItem.disabilities,multiple:"","item-text":"title","item-value":"slug"},model:{value:e.form.disabilities,callback:function(t){e.$set(e.form,"disabilities",t)},expression:"form.disabilities"}},"vue-auto-complete",e.veeValidate("disabilities","Disabilities"),!1))],1),i("v-col",{attrs:{md:"6",sm:"12"}},[i("v-combobox",e._b({directives:[{name:"validate",rawName:"v-validate",value:"chronicDisease",expression:"'chronicDisease'"}],attrs:{"search-input":e.searchDiseases,"menu-props":{auto:!0,overflowY:!0},"hide-selected":"",multiple:"","persistent-hint":"","small-chips":"","deletable-chips":"",clearable:"","prepend-inner-icon":"mdi-allergy"},on:{"update:searchInput":function(t){e.searchDiseases=t},"update:search-input":function(t){e.searchDiseases=t}},scopedSlots:e._u([{key:"no-data",fn:function(){return[i("v-list-item",[i("span",{domProps:{innerHTML:e._s("Press <b>Enter</b> to create a new one")}},[e._v("Create")])])]},proxy:!0}]),model:{value:e.chronicDiseases,callback:function(t){e.chronicDiseases=t},expression:"chronicDiseases"}},"v-combobox",e.veeValidate("title","Chronic disease"),!1))],1),i("v-col",{attrs:{md:"6",sm:"12"}},[i("v-combobox",e._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],attrs:{"menu-props":{auto:!0,overflowY:!0},"hide-selected":"",multiple:"","persistent-hint":"","small-chips":"","deletable-chips":"",clearable:""},scopedSlots:e._u([{key:"no-data",fn:function(){return[i("v-list-item",[i("span",{domProps:{innerHTML:e._s("Press <b>Enter</b> to create a new one")}},[e._v("Create")])])]},proxy:!0}]),model:{value:e.allergyHistory,callback:function(t){e.allergyHistory=t},expression:"allergyHistory"}},"v-combobox",e.veeValidate("allergic_history","Allergy History"),!1))],1),i("v-col",{attrs:{md:"6",sm:"12"}},[i("v-combobox",e._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],attrs:{"search-input":e.searchMedicine,"menu-props":{auto:!0,overflowY:!0},"hide-selected":"",multiple:"","persistent-hint":"","small-chips":"","deletable-chips":"",clearable:"","prepend-inner-icon":"mdi-allergy"},on:{"update:searchInput":function(t){e.searchMedicine=t},"update:search-input":function(t){e.searchMedicine=t}},scopedSlots:e._u([{key:"no-data",fn:function(){return[i("v-list-item",[i("span",{domProps:{innerHTML:e._s("Press <b>Enter</b> to create a new one")}},[e._v("Create")])])]},proxy:!0}]),model:{value:e.restrictedMedicine,callback:function(t){e.restrictedMedicine=t},expression:"restrictedMedicine"}},"v-combobox",e.veeValidate("restricted_medicine","Restricted Medicine"),!1))],1)],1)],1),i("v-divider"),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{disabled:e.errors.any(),depressed:"",color:"primary"},on:{click:e.editItem}},[e._v(" Save ")]),i("v-btn",{attrs:{depressed:""},on:{click:e.clear}},[e._v(" Clear ")])],1)],1)}),n=[],l=(i("a9e3"),i("159b"),i("c44a")),c=i("ab8a"),m=i("5660"),d={getDisabilities:"/commons/disabilities/",postDisabilities:"/commons/disabilities/"},u={getUserMedical:function(e){return"/users/".concat(e,"/medical-info/")},updateUserMedical:function(e){return"/users/".concat(e,"/medical-info/")}},v=i("7bb1");v["b"].Validator.extend("chronicDisease",{validate:function(e){var t=!0;return t=t&&e.length<6,t},getMessage:function(e){return"".concat(e," must be less than or equal to 5 ")}});var h={components:{NonFieldFormErrors:c["default"],VueAutoComplete:m["default"]},mixins:[l["a"]],props:{userId:{type:Number,required:!0},exportFields:{type:Object,required:!0},as:{type:String,default:""}},data:function(){return{bloodGroupChoices:[{value:"a+",item:"A +ve"},{value:"a-",item:"A -ve"},{value:"b+",item:"B +ve"},{value:"b-",item:"B -ve"},{value:"ab+",item:"AB +ve"},{value:"ab-",item:"AB -ve"},{value:"o+",item:"O +ve"},{value:"o-",item:"O -ve"}],heightUnitChoices:[{value:"ft.in",item:"Foot and Inches"},{value:"cms",item:"Centimeters"}],weightUnitChoices:[{value:"lbs",item:"Pounds"},{value:"kgs",item:"Kilograms"}],fromMenu:!1,toMenu:!1,form:JSON.parse(JSON.stringify(this.exportFields)),currentItem:JSON.parse(JSON.stringify(this.exportFields)),searchDiseases:"",searchMedicine:"",restrictedMedicine:[],allergyHistory:[],chronicDiseases:[],disabilitiesEndpoint:d.getDisabilities}},watch:{exportFields:{handler:function(e){this.form=JSON.parse(JSON.stringify(e)),this.currentItem=JSON.parse(JSON.stringify(e)),this.restrictedMedicine=this.form.restricted_medicine,this.chronicDiseases=this.form.chronic_disease,this.allergyHistory=this.form.allergic_history,this.clearNonFieldErrors()},immediate:!0}},methods:{clear:function(){this.$validator.errors.clear(),this.form={},this.restrictedMedicine=[],this.chronicDiseases=[],this.allergyHistory=[]},editItem:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.validateAllFields();case 2:if(!t.sent){t.next=10;break}e.form.restricted_medicine=[],e.restrictedMedicine.forEach((function(t){e.form.restricted_medicine.push({title:t})})),e.form.chronic_disease=[],e.chronicDiseases.forEach((function(t){e.form.chronic_disease.push({title:t})})),e.form.allergic_history=[],e.allergyHistory.forEach((function(t){e.form.allergic_history.push({title:t})})),e.$http.put(u.updateUserMedical(e.userId)+"?as=".concat(e.as),e.form).then((function(){e.verifyPermission(e.allPermissions.CAN_CREATE_UPDATE_USER_PROFILE)&&e.$route.params.slug?(e.notifyUser("Successfully updated Medical details","green"),e.restrictedMedicine=[],e.chronicDiseases=[],e.allergyHistory=[],e.$emit("updated")):(e.$router.push({name:"user-profile-change-request"}),setTimeout((function(){e.notifyUser("Profile Change request has been sent","green")}),1e3))})).catch((function(t){e.form.restricted_medicine=e.form.restricted_medicine.map((function(e){return e.title})),e.form.chronic_disease=e.form.chronic_disease.map((function(e){return e.title})),e.form.allergic_history=e.form.allergic_history.map((function(e){return e.title})),e.notifyInvalidFormResponse(),e.pushErrors(t)}));case 10:case"end":return t.stop()}}),t)})))()}}},f=h,p=i("2877"),_=i("6544"),b=i.n(_),g=i("8336"),x=i("99d9"),y=i("ac7c"),C=i("62ad"),I=i("2b5d"),w=i("a523"),k=i("ce7e"),P=i("4bd4"),V=i("da13"),N=i("0fd9b"),M=i("b974"),D=i("2fa4"),E=i("8654"),F=Object(p["a"])(f,o,n,!1,null,null,null),S=F.exports;b()(F,{VBtn:g["a"],VCardActions:x["a"],VCheckbox:y["a"],VCol:C["a"],VCombobox:I["a"],VContainer:w["a"],VDivider:k["a"],VForm:P["a"],VListItem:V["a"],VRow:N["a"],VSelect:M["a"],VSpacer:D["a"],VTextField:E["a"]});var O=i("e330"),$={components:{MedicalDetailsForm:S,BulletListLoader:O["a"]},mixins:[l["a"]],props:{userInfo:{type:Object,required:!0},as:{type:String,default:""}},data:function(){return{notify:{},medicalInfo:{chronic_disease:[],disabilities:[],allergic_history:[],restricted_medicine:[]},loading:!1,showForm:!1}},computed:{userName:function(){return this.userInfo.user.first_name+" "+this.userInfo.user.middle_name+" "+this.userInfo.user.last_name},getBloodGroup:function(){return this.medicalInfo.blood_group||"N/A"},getHeight:function(){return this.medicalInfo.height?this.medicalInfo.height+" "+this.medicalInfo.height_unit:"N/A"},getWeight:function(){return this.medicalInfo.weight?this.medicalInfo.weight+" "+this.medicalInfo.weight_unit:"N/A"}},mounted:function(){this.getUserMedicalInfo()},methods:{getUserMedicalInfo:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loading=!0,e.$http.get(u.getUserMedical(e.$route.params.id)+"?as=".concat(e.as)).then((function(t){e.medicalInfo=t,e.medicalInfo.chronic_disease=e.medicalInfo.chronic_disease?e.medicalInfo.chronic_disease.map((function(e){return e.title})):[],e.medicalInfo.allergic_history=e.medicalInfo.allergic_history?e.medicalInfo.allergic_history.map((function(e){return e.title})):[],e.medicalInfo.restricted_medicine=e.medicalInfo.restricted_medicine?e.medicalInfo.restricted_medicine.map((function(e){return e.title})):[],e.loading=!1}));case 2:case"end":return t.stop()}}),t)})))()},refresh:function(){this.getUserMedicalInfo(),this.$validator.errors.clear(),this.showForm=!1}}},A=$,U=i("b0af"),H=i("132d"),q=i("8270"),R=i("5d23"),L=Object(p["a"])(A,s,r,!1,null,null,null);t["default"]=L.exports;b()(L,{VBtn:g["a"],VCard:U["a"],VCardText:x["c"],VCol:C["a"],VDivider:k["a"],VIcon:H["a"],VListItem:V["a"],VListItemAvatar:q["a"],VListItemContent:R["a"],VListItemSubtitle:R["b"],VListItemTitle:R["c"],VRow:N["a"]})}}]);