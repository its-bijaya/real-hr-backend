(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-511bcae8"],{"0a33":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",[e.isCardTitle?s("vue-card-title",{attrs:{title:"Assign Supervisor to onboard "+e.fullName,subtitle:"Assign Supervisor.",icon:"mdi-file-document-outline",dark:"",closable:""},on:{close:function(t){return e.$emit("cancel")}}}):e._e(),s("v-card-text",[e.supervisorLevel?s("v-form",{on:{submit:function(t){return t.preventDefault(),e.submitForm.apply(null,arguments)}}},[s("v-row",[s("v-col",{attrs:{md:"12"}},[e.nonFieldErrors?s("non-field-form-errors",{attrs:{"non-field-errors":e.nonFieldErrors}}):e._e()],1)],1),s("v-row",{attrs:{"no-gutters":""}},[s("v-col",[s("v-checkbox",{attrs:{label:"Do not assign any supervisor?"},model:{value:e.has_no_supervisor,callback:function(t){e.has_no_supervisor=t},expression:"has_no_supervisor"}})],1)],1),e._l(e.supervisorLevel,(function(t,i){return[e.has_no_supervisor?e._e():s("v-row",{key:i},[s("v-col",{attrs:{md:"1"}},[s("v-sheet",{staticClass:"white--text",attrs:{color:e.getLevelInfo(i).color,label:"",width:"100",height:"30"}},[s("div",{staticClass:"pt-1"},[s("v-icon",{attrs:{color:"white",left:""}},[e._v(" mdi-shield-account ")]),e._v(" "+e._s(e.getLevelInfo(i).text)+" ")],1)])],1),s("v-col",{attrs:{md:"4"}},[s("users-auto-complete",e._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],attrs:{"data-cy-variable":"level-"+(i+1)+"-supervisor","items-to-exclude":e.excludeSupervisor(i),disabled:t.switch,clearable:!1},model:{value:t.supervisor,callback:function(s){e.$set(t,"supervisor",s)},expression:"level.supervisor"}},"users-auto-complete",e.veeValidate("supervisor","Supervisor"),!1)),s("v-checkbox",{directives:[{name:"show",rawName:"v-show",value:e.bulkAssign.length>=1,expression:"bulkAssign.length >= 1"}],staticClass:"labelStyling mt-0",attrs:{label:"Same as previous",disabled:e.disablePermission},model:{value:t.switch,callback:function(s){e.$set(t,"switch",s)},expression:"level.switch"}})],1),s("v-col",{attrs:{md:"2"}},[s("v-switch",{attrs:{"data-cy":"switch-level-"+(i+1)+"-approve-authority",disabled:e.handleApproveDisable(i)||t.switch,label:"Approve Authority"},model:{value:t.approve,callback:function(s){e.$set(t,"approve",s)},expression:"level.approve"}}),s("span",[e._v("Supervisor can approve their"),s("br"),e._v(" teams requests.")])],1),3!==t.authority_order?s("v-col",{attrs:{md:"2"}},[s("v-switch",{attrs:{"data-cy":"switch-level-"+(i+1)+"-forward-authority",disabled:e.handleForwardDisable(i)||t.switch,label:"Forward Authority"},model:{value:t.forward,callback:function(s){e.$set(t,"forward",s)},expression:"level.forward"}}),s("span",[e._v("Supervisor can forward their"),s("br"),e._v(" teams requests.")])],1):e._e(),s("v-col",{attrs:{md:"2"}},[s("v-switch",{attrs:{"data-cy":"switch-level-"+(i+1)+"-deny-authority",disabled:e.handleDenyDisable(i)||t.switch,label:"Deny Authority"},model:{value:t.deny,callback:function(s){e.$set(t,"deny",s)},expression:"level.deny"}}),s("span",[e._v("Supervisor can deny their"),s("br"),e._v(" teams requests.")])],1)],1)]})),s("v-divider"),s("v-row",{attrs:{"no-gutters":""}},[e.preEmployment?s("v-col",{staticClass:"pt-2",attrs:{md:"6"}},[s("v-btn",{attrs:{color:"primary",depressed:""},on:{click:function(t){return e.$emit("next","task-form","previous","preTask")}}},[s("v-icon",{domProps:{textContent:e._s("mdi-chevron-left")}}),s("span",{domProps:{textContent:e._s("Previous")}})],1)],1):e._e(),s("v-col",{staticClass:"text-right pt-2"},[e.preEmployment?s("v-btn",{attrs:{text:""},on:{click:function(t){return e.$emit("cancel")}}},[e._v(" Cancel ")]):e._e(),s("v-btn",{attrs:{disabled:e.errors.any(),depressed:"",color:"primary",type:"submit"}},[e._v(" "+e._s(e.preEmployment?"Next":"Save")+" ")])],1)],1)],2):e._e()],1)],1)},r=[],a=(s("a9e3"),s("4de4"),s("159b"),s("7db0"),s("d81d"),s("c44a")),n=s("ab8a"),o=s("ef8c"),l=s("791c2"),u={components:{NonFieldFormErrors:n["default"],UsersAutoComplete:o["default"]},mixins:[a["a"]],props:{fullName:{type:String,default:""},assignFor:{type:Number,required:!1,default:null},bulkAssign:{type:Array,required:!1,default:function(){return[]}},reassignData:{type:Array,required:!1,default:function(){return[]}},doNotAssign:{type:Boolean,default:!1},preEmployment:{type:Boolean,default:!1},isCardTitle:{type:Boolean,default:!1},componentType:{type:String,default:""}},data:function(){return{disablePermission:!1,supervisors:null,has_no_supervisor:this.doNotAssign,supervisorLevel:[{authority_order:1,supervisor:null,approve:!1,forward:!1,deny:!1,switch:!1},{authority_order:2,supervisor:null,approve:!1,forward:!1,deny:!1,switch:!1},{authority_order:3,supervisor:null,approve:!1,forward:!1,deny:!1,switch:!1}]}},watch:{reassignData:{handler:function(e){e.length>0?(this.supervisors=this.deepCopy(e),this.setReassignData(this.supervisors)):this.nonFieldErrorsList=[]},immediate:!0}},methods:{submitForm:function(){this.bulkAssign.length>=1?this.bulkSubmitForm():this.individualAssignForm()},individualAssignForm:function(){var e=this,t=l["a"].assignSupervisors()+"?organization_slug=".concat(this.getOrganizationSlug),s=this.supervisorLevel.filter((function(e){return!!e.supervisor}));s={user:this.assignFor,supervisors:s,has_supervisor:!0},this.has_no_supervisor&&(s={user:this.assignFor,supervisors:[],has_supervisor:!1}),this.$http.post(t,s).then((function(){e.preEmployment?e.$emit("next","letter-template","next",e.componentType):e.$emit("refreshDataTable")})).catch((function(t){e.pushErrors(t)}))},bulkSubmitForm:function(){var e=this,t=l["a"].assignBulkSupervisors()+"?organization_slug=".concat(this.getOrganizationSlug),s=this.supervisorLevel.filter((function(e){return!!e.supervisor}));s={user:this.bulkAssign,supervisors:s,has_supervisor:!0,ignore_all_authority_change:this.disablePermission,ignore_first_level_authority_change:this.supervisorLevel[0].switch,ignore_second_level_authority_change:this.supervisorLevel[1].switch,ignore_third_level_authority_change:this.supervisorLevel[2].switch},this.has_no_supervisor&&(s={user:this.bulkAssign,supervisors:[],has_supervisor:!1,ignore_all_authority_change:this.disablePermission,ignore_first_level_authority_change:this.supervisorLevel[0].switch,ignore_second_level_authority_change:this.supervisorLevel[1].switch,ignore_third_level_authority_change:this.supervisorLevel[2].switch}),this.$http.post(t,s).then((function(){e.preEmployment?e.$emit("next","letter-template","next",e.componentType):e.$emit("refreshDataTable")})).catch((function(t){e.pushErrors(t)}))},handleDisable:function(e){return this.assignFor&&this.supervisorLevel[e].supervisor===this.assignFor&&(this.notifyUser("Cannot assign supervisor to self.","red"),this.supervisorLevel[e].supervisor=null),!(0!==e||!this.supervisorLevel[1].supervisor&&!this.supervisorLevel[2].supervisor)||(!(1!==e||this.supervisorLevel[0].supervisor&&!this.supervisorLevel[2].supervisor)||2===e&&!this.supervisorLevel[1].supervisor)},getLevelInfo:function(e){var t=[{icon:"mdi-shield-account",text:"1st Level",color:"green"},{icon:"mdi-shield-account",text:"2nd Level",color:"blue"},{icon:"mdi-shield-account",text:"3rd Level",color:"amber"}];return t[e]},handleForwardDisable:function(e){if(this.bulkAssign.length>=1){if(!this.supervisorLevel[e].supervisor)return this.supervisorLevel[e].deny=!1,!0}else{var t=e+1,s=this.supervisorLevel[t].supervisor;if(!s)return this.supervisorLevel[e].forward=!1,!0}},handleApproveDisable:function(e){var t=e+1;return 3===t&&this.supervisorLevel[e].supervisor||this.supervisorLevel[e].supervisor&&!this.supervisorLevel[t].supervisor?(this.supervisorLevel[e].approve=!0,!0):this.supervisorLevel[e].supervisor?void 0:(this.supervisorLevel[e].approve=!1,!0)},handleDenyDisable:function(e){if(!this.supervisorLevel[e].supervisor)return this.supervisorLevel[e].deny=!1,!0},setReassignData:function(e){var t=this;this.supervisorLevel.forEach((function(s,i){var r=e.find((function(e){return e.authority_order===s.authority_order}));r&&(delete r.id,r.supervisor=r.supervisor.id,t.supervisorLevel[i]=r)}))},excludeSupervisor:function(e){var t=this.supervisorLevel.map((function(t,s){if(s!==e)return t.supervisor}));return t.push(this.assignFor),t}}},c=u,h=s("2877"),d=s("6544"),v=s.n(d),p=s("8336"),f=s("b0af"),m=s("99d9"),b=s("ac7c"),g=s("62ad"),y=s("ce7e"),_=s("4bd4"),w=s("132d"),L=s("0fd9b"),S=s("8dd9"),x=s("b73d"),C=Object(h["a"])(c,i,r,!1,null,null,null);t["default"]=C.exports;v()(C,{VBtn:p["a"],VCard:f["a"],VCardText:m["c"],VCheckbox:b["a"],VCol:g["a"],VDivider:y["a"],VForm:_["a"],VIcon:w["a"],VRow:L["a"],VSheet:S["a"],VSwitch:x["a"]})},"791c2":function(e,t,s){"use strict";s("99af");t["a"]={getSupervisors:"/users/supervisors/",getOrgSupervisors:function(e){return"/hris/".concat(e,"/supervisors/")},assignSupervisors:function(){return"/hris/assign/supervisors/"},assignBulkSupervisors:function(){return"/hris/assign/supervisors/bulk-assign/"},removeSupervisors:function(e){return"/hris/assign/supervisors/".concat(e,"/remove/")},getUserSupervisor:function(e,t){return"/hris/".concat(e,"/supervisors/").concat(t,"/")},replaceSupervisors:function(){return"/hris/assign/supervisors/bulk-replace"}}},"9d01":function(e,t,s){},b73d:function(e,t,s){"use strict";var i=s("5530"),r=(s("0481"),s("ec29"),s("9d01"),s("fe09")),a=s("c37a"),n=s("c3f0"),o=s("0789"),l=s("490a"),u=s("80d2");t["a"]=r["a"].extend({name:"v-switch",directives:{Touch:n["a"]},props:{inset:Boolean,loading:{type:[Boolean,String],default:!1},flat:{type:Boolean,default:!1}},computed:{classes:function(){return Object(i["a"])(Object(i["a"])({},a["a"].options.computed.classes.call(this)),{},{"v-input--selection-controls v-input--switch":!0,"v-input--switch--flat":this.flat,"v-input--switch--inset":this.inset})},attrs:function(){return{"aria-checked":String(this.isActive),"aria-disabled":String(this.isDisabled),role:"switch"}},validationState:function(){return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0},switchData:function(){return this.setTextColor(this.loading?void 0:this.validationState,{class:this.themeClasses})}},methods:{genDefaultSlot:function(){return[this.genSwitch(),this.genLabel()]},genSwitch:function(){return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",Object(i["a"])(Object(i["a"])({},this.attrs),this.attrs$)),this.genRipple(this.setTextColor(this.validationState,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",Object(i["a"])({staticClass:"v-input--switch__track"},this.switchData)),this.$createElement("div",Object(i["a"])({staticClass:"v-input--switch__thumb"},this.switchData),[this.genProgress()])])},genProgress:function(){return this.$createElement(o["c"],{},[!1===this.loading?null:this.$slots.progress||this.$createElement(l["a"],{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft:function(){this.isActive&&this.onChange()},onSwipeRight:function(){this.isActive||this.onChange()},onKeydown:function(e){(e.keyCode===u["y"].left&&this.isActive||e.keyCode===u["y"].right&&!this.isActive)&&this.onChange()}}})},ef8c:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("v-autocomplete",{class:e.appliedClass,attrs:{items:e.itemsSorted,loading:e.isLoading,"search-input":e.search,multiple:e.multiple,label:e.label,error:e.errorMessages.length>0,"error-messages":e.errorMessages,disabled:e.disabled,"prepend-inner-icon":e.prependInnerIcon,clearable:e.clearable&&!e.readonly,readonly:!!e.readonly,"hide-details":e.hideDetails,"data-cy":"input-user-autocomplete-"+e.dataCyVariable,placeholder:e.placeholder,"hide-selected":"","hide-no-data":"","item-text":"full_name","item-value":"id"},on:{"update:searchInput":function(t){e.search=t},"update:search-input":function(t){e.search=t},blur:function(t){return e.$emit("blur")}},scopedSlots:e._u([{key:"selection",fn:function(t){return[s("v-chip",{attrs:{"input-value":t.selected,close:(e.clearable||!e.clearable&&!e.multiple)&&!e.readonly,small:""},on:{"click:close":function(s){return e.remove(t.item)}}},[s("v-avatar",{attrs:{left:""}},[s("v-img",{attrs:{src:t.item.profile_picture,cover:""}})],1),e._v(" "+e._s(e._f("truncate")(t.item.full_name,e.truncate))+" ")],1)]}},{key:"item",fn:function(t){var i=t.item;return[s("v-list-item-avatar",[s("v-avatar",{attrs:{size:"30"}},[s("v-img",{attrs:{src:i.profile_picture,cover:""}})],1)],1),s("v-list-item-content",[s("v-list-item-title",[e._v(" "+e._s(e._f("truncate")(i.full_name,20))+" "),i.employee_code?s("span",[e._v("("+e._s(i.employee_code)+")")]):e._e()]),i.division?s("v-list-item-subtitle",{domProps:{textContent:e._s(i.division)}}):e._e()],1)]}}]),model:{value:e.selectedData,callback:function(t){e.selectedData=t},expression:"selectedData"}})],1)},r=[],a=s("53ca"),n=(s("a9e3"),s("ac1f"),s("841c"),s("4e827"),s("2ca0"),s("d81d"),s("a434"),s("d3b7"),s("159b"),s("7db0"),s("4de4"),s("caad"),s("2532"),s("fab2")),o=s("63ea"),l=s.n(o),u={props:{value:{type:[Number,String,Array,Object],required:!1,default:function(){return null}},dataCyVariable:{type:String,default:""},userObject:{type:[Object,Array],required:!1,default:function(){return{}}},params:{type:[Object,Array],required:!1,default:function(){return{}}},multiple:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1},errorMessages:{type:[String,Array],default:function(){return[]}},label:{type:String,default:"Select Employee"},prependInnerIcon:{type:String,default:"mdi-account-plus-outline"},itemsToExclude:{type:[Array,Number],default:null},itemsToInclude:{type:[Array,Number],default:null},clearable:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},hideDetails:{type:Boolean,default:!1},appliedClass:{type:String,default:""},truncate:{type:Number,default:10},placeholder:{type:String,default:""}},data:function(){return{isLoading:!1,items:[],allUsers:[],selectedData:null,search:null}},computed:{itemsSorted:function(){return this.sortBySearch(this.items,this.search?this.search.toLowerCase():"")}},watch:{value:{handler:function(e,t){!e&&t&&(this.selectedData="",this.populateInitialUsers()),!t&&e&&this.populateInitialUsers()},immediate:!0},search:function(e){!e||this.items.length>0||this.fetchUsers()},selectedData:function(e){this.search="",this.syncUserData(e),this.$emit("input",e)},itemsToExclude:function(){this.items=this.excludeRecord(this.allUsers)},itemsToInclude:function(){this.items=this.includeRecord(this.allUsers)},params:{handler:function(e,t){l()(e,t)||this.fetchUsers()},deep:!0}},methods:{sortBySearch:function(e,t){return e.sort((function(e,s){return e.full_name.toLowerCase().startsWith(t)&&s.full_name.toLowerCase().startsWith(t)?e.full_name.toLowerCase().localeCompare(s.full_name.toLowerCase()):e.full_name.toLowerCase().startsWith(t)?-1:s.full_name.toLowerCase().startsWith(t)?1:e.full_name.toLowerCase().localeCompare(s.full_name.toLowerCase())}))},populateInitialUsers:function(){this.fetchUsers(this.value),Array.isArray(this.value)?"object"===Object(a["a"])(this.value[0])?this.selectedData=this.value.map((function(e){return e.user.id})):this.selectedData=this.value:null===this.value?this.selectedData="":"object"===Object(a["a"])(this.value)?this.selectedData=this.value.id:this.selectedData=this.value,this.$emit("input",this.selectedData)},remove:function(e){if(this.selectedData instanceof Object){var t=this.selectedData.indexOf(e.id);t>=0&&this.selectedData.splice(t,1),this.$emit("remove",e)}else this.selectedData=""},fetchUsers:function(e){var t=this;this.isLoading||(this.isLoading=!0,this.$http.get(n["a"].autocomplete,{params:this.params}).then((function(s){t.allUsers=s,t.itemsToExclude&&(s=t.excludeRecord(s)),t.itemsToInclude&&(s=t.includeRecord(s)),t.items=s,e&&t.syncUserData(e)})).finally((function(){return t.isLoading=!1})))},syncUserData:function(e){var t=this;if(e instanceof Array){var s=[];e.forEach((function(e){s.unshift(t.items.find((function(t){return t.id===e})))})),this.$emit("update:userObject",s)}else{var i=this.items.find((function(t){return t.id===e}));this.$emit("update:userObject",i)}},excludeRecord:function(e){var t=[];return"number"===typeof this.itemsToExclude?t.push(this.itemsToExclude):t=this.itemsToExclude,e.filter((function(e){return!t.includes(e.id)}))},includeRecord:function(e){var t=this;return e.filter((function(e){return t.itemsToInclude.includes(e.id)}))}}},c=u,h=s("2877"),d=s("6544"),v=s.n(d),p=s("c6a6"),f=s("8212"),m=s("cc20"),b=s("adda"),g=s("8270"),y=s("5d23"),_=Object(h["a"])(c,i,r,!1,null,null,null);t["default"]=_.exports;v()(_,{VAutocomplete:p["a"],VAvatar:f["a"],VChip:m["a"],VImg:b["a"],VListItemAvatar:g["a"],VListItemContent:y["a"],VListItemSubtitle:y["b"],VListItemTitle:y["c"]})}}]);