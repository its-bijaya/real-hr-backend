(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c504646"],{"84e9":function(e,t,r){"use strict";r("99af");t["a"]={getUserTrainings:function(e){return"/users/".concat(e,"/training/")},postUserTraining:function(e){return"/users/".concat(e,"/training/")},getTrainingDetail:function(e,t){return"/users/".concat(e,"/training/").concat(t,"/")},updateTrainingDetail:function(e,t){return"/users/".concat(e,"/training/").concat(t,"/")},deleteUserTraining:function(e,t){return"/users/".concat(e,"/training/").concat(t,"/")},getUpcomingTraining:function(e){return"/training/".concat(e,"/detail/upcoming/")},getTrainingTypeBudget:function(e){return"/training/".concat(e,"/detail/budget")},getTrainingStats:function(e){return"/training/".concat(e,"/detail/stats/")}}},bb5b:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("vue-card-title",{attrs:{title:"Training Details",subtitle:"Training Details of "+e.userName,icon:"mdi-file-document-outline"}},[r("template",{slot:"actions"},[e.showForm||e.getAuthStateUserId!==parseInt(e.$route.params.id)&&!e.verifyPermission(e.allPermissions.CAN_CREATE_UPDATE_USER_PROFILE)||"supervisor"===e.as||e.loading?e._e():r("v-btn",{attrs:{small:"",depressed:"",color:"primary"},on:{click:e.createTrainingDetails}},[e._v(" "+e._s(e.$t("createNew"))+" ")]),e.showForm?r("v-btn",{attrs:{small:"",outlined:"",color:"primary"},on:{click:e.refresh}},[e._v(" Cancel ")]):e._e()],1)],2),r("v-divider"),r("v-card-text",[e.loading?r("v-row",e._l(6,(function(e){return r("v-col",{key:e,attrs:{cols:"6"}},[r("bullet-list-loader",{attrs:{"primary-color":"#eee","secondary-color":"#d5d5d7"}})],1)})),1):e._e(),e.trainingDetails.length<1&&!e.showForm?r("vue-no-data"):e._e(),0===e.trainingDetails.length||e.showForm||e.loading?e._e():r("v-col",[r("v-timeline",{attrs:{"align-top":"",dense:""}},e._l(e.trainingDetails,(function(t,n){return r("v-timeline-item",{key:n,attrs:{color:e.colors[n%4],small:""}},[r("v-hover",{scopedSlots:e._u([{key:"default",fn:function(i){var a=i.hover;return r("v-row",{},[r("v-icon",{attrs:{left:""},domProps:{textContent:e._s("mdi-school-outline")}}),r("div",[r("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(i){var s=i.on;return[r("div",e._g({},s),[r("span",{domProps:{textContent:e._s(t.name)}}),t.is_current?r("span",{domProps:{textContent:e._s("( Currently Training )")}}):e._e(),0!==n?r("span",[n===e.showDetails?r("v-icon",{domProps:{textContent:e._s("mdi-menu-up")},on:{click:function(t){e.showDetails=null}}}):r("v-icon",{domProps:{textContent:e._s("mdi-menu-down")},on:{click:function(t){e.showDetails=n}}})],1):e._e(),a&&(e.getAuthStateUserId===parseInt(e.$route.params.id)||e.verifyPermission(e.allPermissions.CAN_CREATE_UPDATE_USER_PROFILE))&&"supervisor"!==e.as?r("v-icon",{staticClass:"float-right mx-2",attrs:{small:""},domProps:{textContent:e._s("mdi-delete")},on:{click:function(r){return e.deleteTrainingDetails(t)}}}):e._e(),a&&(e.getAuthStateUserId===parseInt(e.$route.params.id)||e.verifyPermission(e.allPermissions.CAN_CREATE_UPDATE_USER_PROFILE))&&"supervisor"!==e.as?r("v-icon",{staticClass:"float-right mx-2",attrs:{small:""},domProps:{textContent:e._s("mdi-pencil")},on:{click:function(r){return e.editTrainingDetails(t)}}}):e._e()],1)]}}],null,!0)},[r("span",{domProps:{textContent:e._s(t.name)}})])],1)],1)}}],null,!0)}),r("v-slide-y-transition",[e.showDetails===n||0===n?r("training-details",{attrs:{details:t}}):e._e()],1)],1)})),1)],1),r("span",{directives:[{name:"show",rawName:"v-show",value:e.showForm,expression:"showForm"}]},[r("training-details-form",{attrs:{"user-id":e.userInfo.user.id,"export-fields":e.currentItem,as:e.as},on:{created:e.refresh,updated:e.refresh}})],1)],1),r("vue-notify",{attrs:{notify:e.notify}}),r("vue-dialog",{attrs:{notify:e.deleteDialog},on:{close:function(t){e.deleteDialog.dialog=!1},agree:e.deleteItem},model:{value:e.deleteDialog.dialog,callback:function(t){e.$set(e.deleteDialog,"dialog",t)},expression:"deleteDialog.dialog"}})],1)},i=[],a=r("1da1"),s=(r("96cf"),r("c44a")),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-col",[r("v-row",[r("v-col",{attrs:{md:"6",sm:"12"}},[r("v-list-item",[r("v-list-item-avatar",{staticClass:"mr-0"},[r("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-school-outline")}})],1),r("v-list-item-content",[r("v-list-item-title",{domProps:{textContent:e._s("Training name")}}),r("v-list-item-subtitle",{domProps:{textContent:e._s(e.details.name)}})],1)],1)],1),r("v-col",{attrs:{md:"6",sm:"12"}},[r("v-list-item",[r("v-list-item-avatar",{staticClass:"mr-0"},[r("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-calendar-month-outline")}})],1),r("v-list-item-content",[r("v-list-item-title",{domProps:{textContent:e._s("Duration")}}),r("v-list-item-subtitle",[e._v(" "+e._s(e.details.start_date)+" "),e.details.is_current?e._e():r("span",{domProps:{textContent:e._s("- "+e.details.end_date)}})])],1)],1)],1),r("v-col",{attrs:{md:"6",sm:"12"}},[r("v-list-item",[r("v-list-item-avatar",{staticClass:"mr-0"},[r("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-domain")}})],1),r("v-list-item-content",[r("v-list-item-title",{domProps:{textContent:e._s("Institution")}}),r("v-list-item-subtitle",{domProps:{textContent:e._s(e.details.institution)}})],1)],1)],1)],1)],1)},l=[],d={props:{details:{type:Object,default:null}}},c=d,u=r("2877"),m=r("6544"),v=r.n(m),f=r("62ad"),p=r("132d"),g=r("da13"),h=r("8270"),_=r("5d23"),b=r("0fd9b"),x=Object(u["a"])(c,o,l,!1,null,null,null),y=x.exports;v()(x,{VCol:f["a"],VIcon:p["a"],VListItem:g["a"],VListItemAvatar:h["a"],VListItemContent:_["a"],VListItemSubtitle:_["b"],VListItemTitle:_["c"],VRow:b["a"]});var C=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-form",[r("v-container",{staticClass:"px-12"},[e.nonFieldErrors?r("non-field-form-errors",{attrs:{"non-field-errors":e.nonFieldErrors}}):e._e(),r("v-row",[r("v-col",{attrs:{md:"6",sm:"12"}},[r("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required|max:100",expression:"'required|max:100'"}],attrs:{counter:100,"prepend-inner-icon":"mdi-file-document-outline"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}},"v-text-field",e.veeValidate("name","Name *"),!1))],1),r("v-col",{attrs:{md:"6",sm:"12"}},[r("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required|max:100",expression:"'required|max:100'"}],attrs:{counter:100,"prepend-inner-icon":"mdi-domain"},model:{value:e.form.institution,callback:function(t){e.$set(e.form,"institution",t)},expression:"form.institution"}},"v-text-field",e.veeValidate("institution","Institution *"),!1))],1),r("v-col",{attrs:{md:"6",sm:"12"}},[r("vue-date-picker",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],model:{value:e.form.start_date,callback:function(t){e.$set(e.form,"start_date",t)},expression:"form.start_date"}},"vue-date-picker",e.veeValidate("start_date","Start Date *"),!1))],1),r("v-col",{attrs:{md:"6",sm:"12"}},[e.form.is_current?e._e():r("vue-date-picker",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],model:{value:e.form.end_date,callback:function(t){e.$set(e.form,"end_date",t)},expression:"form.end_date"}},"vue-date-picker",e.veeValidate("end_date","End Date *"),!1))],1),r("v-col",{attrs:{md:"6",sm:"12"}},[r("v-checkbox",e._b({attrs:{label:"Is Currently Training"},on:{change:function(t){e.form.end_date=null}},model:{value:e.form.is_current,callback:function(t){e.$set(e.form,"is_current",t)},expression:"form.is_current"}},"v-checkbox",e.veeValidate("is_current","Is Current"),!1))],1)],1)],1),r("v-divider"),r("v-card-actions",[r("v-spacer"),e.editable?e._e():r("v-btn",{attrs:{disabled:e.errors.any(),depressed:"","data-cy":"btn-save-and-add-another",color:"primary"},on:{click:e.addAnother}},[e._v(" Save and Add Another ")]),e.editable?r("v-btn",{attrs:{disabled:e.errors.any(),depressed:"","data-cy":"btn-save",color:"primary"},on:{click:e.editItem}},[e._v(" Update ")]):r("v-btn",{attrs:{disabled:e.errors.any(),depressed:"","data-cy":"btn-save",color:"primary"},on:{click:e.createItem}},[e._v(" Save ")]),r("v-btn",{attrs:{depressed:""},on:{click:e.clear}},[e._v(" Clear ")])],1)],1)},w=[],T=(r("a9e3"),r("d3b7"),r("ab8a")),D=r("741f"),I=r("84e9"),P={components:{NonFieldFormErrors:T["default"],VueDatePicker:D["default"]},mixins:[s["a"]],props:{userId:{type:Number,required:!0},exportFields:{type:Object,required:!0,default:function(){return{title:"",organization:"",responsibility:"",division:"",employment_level:"",employment_status:"",job_location:"",from_year:"",to_year:""}}},as:{type:String,default:""}},data:function(){return{fromMenu:!1,toMenu:!1,form:this.exportFields,editable:!1,saveAndAddAnother:!1}},watch:{exportFields:function(e){this.$validator.errors.clear(),this.form=e,this.clearNonFieldErrors(),this.editable=!!e.slug}},methods:{clear:function(){this.$validator.errors.clear(),this.clearNonFieldErrors(),this.form={}},createItem:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.validateAllFields();case 2:if(!t.sent){t.next=4;break}e.$http.post(I["a"].postUserTraining(e.$route.params.id)+"?as=".concat(e.as),e.form).then((function(t){e.verifyPermission(e.allPermissions.CAN_CREATE_UPDATE_USER_PROFILE)&&e.$route.params.slug?(e.notifyUser("Successfully created Training details","green"),e.saveAndAddAnother?e.clear():e.$emit("created",t)):(e.notifyUser("Profile Change request has been sent","green"),e.saveAndAddAnother?e.clear():e.$router.push({name:"user-profile-change-request"}))})).catch((function(t){e.notifyInvalidFormResponse(),e.pushErrors(t)})).finally((function(){e.saveAndAddAnother=!1}));case 4:case"end":return t.stop()}}),t)})))()},addAnother:function(){this.saveAndAddAnother=!0,this.createItem()},editItem:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.validateAllFields();case 2:if(!t.sent){t.next=4;break}e.$http.put(I["a"].updateTrainingDetail(e.$route.params.id,e.exportFields.slug)+"?as=".concat(e.as),e.form).then((function(){e.verifyPermission(e.allPermissions.CAN_CREATE_UPDATE_USER_PROFILE)&&e.$route.params.slug?(e.notifyUser("Successfully updated Training details","green"),e.$emit("updated")):(e.notifyUser("Profile Change request has been sent","green"),e.$router.push({name:"user-profile-change-request"}))})).catch((function(t){e.notifyInvalidFormResponse(),e.pushErrors(t)}));case 4:case"end":return t.stop()}}),t)})))()}}},A=P,E=r("8336"),k=r("99d9"),V=r("ac7c"),F=r("a523"),U=r("ce7e"),$=r("4bd4"),R=r("2fa4"),S=r("8654"),N=Object(u["a"])(A,C,w,!1,null,null,null),q=N.exports;v()(N,{VBtn:E["a"],VCardActions:k["a"],VCheckbox:V["a"],VCol:f["a"],VContainer:F["a"],VDivider:U["a"],VForm:$["a"],VRow:b["a"],VSpacer:R["a"],VTextField:S["a"]});var O=r("e330"),L=r("e585"),j={components:{trainingDetails:y,TrainingDetailsForm:q,BulletListLoader:O["a"],VueNoData:L["default"]},mixins:[s["a"]],props:{userInfo:{type:Object,required:!0},as:{type:String,default:""}},data:function(){return{currentItem:{},showForm:!1,notify:{},showDetails:100,trainingDetails:[],colors:["red","green","indigo","yellow"],deleteDialog:{dialog:!1,heading:"Confirm Delete",text:"Do you really want to delete this Training information ?"},loading:!1}},computed:{userName:function(){return this.userInfo.user.first_name+" "+this.userInfo.user.middle_name+" "+this.userInfo.user.last_name}},mounted:function(){this.getUserTrainingDetails()},methods:{getUserTrainingDetails:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loading=!0,e.$http.get(I["a"].getUserTrainings(e.$route.params.id)+"?as=".concat(e.as)).then((function(t){e.trainingDetails=t.results,e.loading=!1}));case 2:case"end":return t.stop()}}),t)})))()},refresh:function(){this.getUserTrainingDetails(),this.showForm=!1,this.deleteDialog.dialog=!1,this.currentItem={},this.$validator.errors.clear()},createTrainingDetails:function(){this.showForm=!0,this.currentItem={}},editTrainingDetails:function(e){this.currentItem=e,this.showForm=!0},deleteTrainingDetails:function(e){this.currentItem=e,this.deleteDialog.dialog=!0},deleteItem:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$http.delete(I["a"].deleteUserTraining(e.$route.params.id,e.currentItem.slug)+"?as=".concat(e.as)).then((function(){e.verifyPermission(e.allPermissions.CAN_CREATE_UPDATE_USER_PROFILE)&&e.$route.params.slug?(e.notifyUser("Successfully deleted Training details","green"),e.refresh()):(e.notifyUser("Profile Change request has been sent","green"),e.$router.push({name:"user-profile-change-request"}))})).catch((function(t){e.pushErrors(t);var r=e.nonFieldErrors[0]["non field errors"];e.notifyUser(r,"red"),e.refresh()}));case 1:case"end":return t.stop()}}),t)})))()}}},B=j,J=r("b0af"),M=r("ce87"),z=r("0789"),H=r("8414"),Y=r("1e06"),G=r("3a2f"),K=Object(u["a"])(B,n,i,!1,null,null,null);t["default"]=K.exports;v()(K,{VBtn:E["a"],VCard:J["a"],VCardText:k["c"],VCol:f["a"],VDivider:U["a"],VHover:M["a"],VIcon:p["a"],VRow:b["a"],VSlideYTransition:z["g"],VTimeline:H["a"],VTimelineItem:Y["a"],VTooltip:G["a"]})}}]);