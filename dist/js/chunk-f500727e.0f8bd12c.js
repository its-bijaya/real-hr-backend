(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f500727e","chunk-2d2160c2","chunk-2d2160c2","chunk-2d2160c2","chunk-2d2160c2","chunk-2d2160c2"],{"69ba":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",[s("vue-card-title",{attrs:{icon:"mdi-send",title:"Credit Hour Delete Request Detail",subtitle:"Request Detail Summary",closable:!!e.requestId,dark:!!e.requestId},on:{close:function(t){return e.$emit("close")}}}),s("v-divider"),e.response&&e.response.request?s("v-card-text",[e.nonFieldErrors?s("non-field-form-errors",{attrs:{"non-field-errors":e.nonFieldErrors}}):e._e(),e.loading?e._e():s("v-row",["user"!==e.as?s("v-col",{attrs:{cols:"12",md:"4"}},[s("div",{staticClass:"font-weight-medium"},[s("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-account")}}),e._v(" Requested By ")],1),s("vue-user",{staticClass:"mx-5",attrs:{user:e.response.sender}})],1):e._e(),s("v-col",{attrs:{cols:"12",md:"4"}},[s("div",{staticClass:"font-weight-medium"},[s("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-calendar")}}),e._v(" Requested On ")],1),s("div",{staticClass:"mx-5 black--text"},[e._v(" "+e._s(e.response.created_at?e.response.created_at.substring(0,10):"")+" ")]),s("div",{staticClass:"mx-5 grey--text text-caption"},[e._v(" "+e._s(e.response.created_at?e.$dayjs(e.response.created_at).format("hh:mm:ss a"):"")+" ")])]),s("v-col",{attrs:{cols:"12",md:"4"}},[s("div",{staticClass:"font-weight-medium"},[s("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-calendar")}}),e._v(" Credit Hour Requested For ")],1),s("div",{staticClass:"mx-5 black--text"},[e._v(" "+e._s(e.response.request&&e.response.request.credit_hour_date?e.response.request.credit_hour_date:"")+" ")])]),s("v-col",{attrs:{cols:"12",md:"4"}},[s("div",{staticClass:"font-weight-medium"},[s("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-clock")}}),e._v(" Credit Hour Duration ")],1),s("div",{staticClass:"mx-5 black--text"},[e._v(" "+e._s(e.response.request?e.response.request.credit_hour_duration:"")+" ")])]),s("v-col",{attrs:{cols:"12"}},[s("div",{staticClass:"font-weight-medium"},[s("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-information-outline")}}),e._v(" Remarks ")],1),s("div",{staticClass:"mx-5 black--text"},[e._v(" "+e._s(e.response.request?e.response.request.request_remarks:"")+" ")])]),s("v-col",{attrs:{cols:"12"}},[s("div",{staticClass:"font-weight-medium"},[s("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-information-outline")}}),e._v(" Delete Remarks ")],1),s("div",{staticClass:"mx-5 black--text"},[e._v(" "+e._s(e.response?e.response.request_remarks:"")+" ")])]),s("v-col",{staticClass:"blue-grey lighten-5",attrs:{cols:"12"}},[s("v-row",{attrs:{justify:"start"}},[s("v-col",{attrs:{cols:"12"}},[s("v-timeline",{staticClass:"py-0 my-0"},e._l(e.response.histories,(function(t,r){return s("v-timeline-item",{key:r,attrs:{right:"",color:["declined","cancelled"].includes(t.action_performed.toLowerCase())?"danger":"success",icon:["declined","cancelled"].includes(t.action_performed.toLowerCase())?"mdi-close":"mdi-check","show-dot":"",small:""}},[s("div",{staticClass:"font-weight-medium"},[e._v(" "+e._s(t.action_performed_by.full_name+" has ")+" "),s("span",{class:e.$options.tabs[t.action_performed]+"--text"},[e._v(" "+e._s(t.action_performed)+" ")]),e._v(" this Credit Hour Delete Request with remarks ")]),s("div",[s("span",{staticClass:"font-weight-medium",domProps:{textContent:e._s(t.remarks)}})]),t.created_at?s("template",{slot:"opposite"},[s("div",{staticClass:"font-weight-bold",domProps:{textContent:e._s(e.humanizeDate(t.created_at))}}),s("div",{domProps:{textContent:e._s(e.humanizeTime(t.created_at))}})]):e._e()],2)})),1)],1)],1)],1),"user"!==e.as&&["Forwarded","Requested"].includes(e.response.status)?s("v-col",{attrs:{cols:"12"}},[s("v-textarea",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required|max:600",expression:"'required|max:600'"}],attrs:{counter:"600"},model:{value:e.formValues.remarks,callback:function(t){e.$set(e.formValues,"remarks",t)},expression:"formValues.remarks"}},"v-textarea",e.veeValidate("remarks","Remarks *"),!1))],1):e._e()],1),e.loading?s("v-col",[s("default-svg-loader")],1):e._e()],1):e._e(),s("v-divider"),e.response?s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"black--text",attrs:{text:""},on:{click:function(t){return e.$emit("close")}}},[e._v(" Cancel ")]),e.permissions.deny&&"user"!==e.as&&["Requested","Forwarded"].includes(e.response.status)?s("v-btn",{staticClass:"white--text",attrs:{color:"danger",depressed:"",loading:e.loading},on:{click:function(t){return e.requestAction("decline")}}},[e._v(" Decline ")]):e._e(),e.permissions.forward&&!["hr","user"].includes(e.as)&&!e.$route.params.slug&&["Requested","Forwarded"].includes(e.response.status)?s("v-btn",{staticClass:"white--text",attrs:{color:"purple",depressed:"",loading:e.loading},on:{click:function(t){return e.requestAction("forward")}}},[e._v(" Forward ")]):e._e(),e.permissions.approve&&"user"!==e.as&&["Requested","Forwarded"].includes(e.response.status)?s("v-btn",{staticClass:"white--text",attrs:{color:"success",depressed:"",loading:e.loading},on:{click:function(t){return e.requestAction("approve")}}},[e._v(" Approve ")]):e._e()],1):e._e()],1)},a=[],i=s("1da1"),n=s("5530"),o=(s("96cf"),s("a9e3"),s("caad"),s("8b61")),c=s("cfa3"),d=s("02cb"),u=s("2f62"),l=s("bbab"),m=s("a09e"),p=s("eb03"),v=s("bf02"),f=s("c197"),h={components:{DefaultSvgLoader:f["default"],VueUser:d["default"]},mixins:[m["a"],o["a"],c["a"]],props:{requestDetail:{type:Object,default:function(){return{}}},as:{type:String,default:""},requestId:{type:[String,Number],default:""},notificationId:{type:[String,Number],default:""},deleteDetail:{type:Boolean,default:!1}},tabs:{Requested:"orange",Cancelled:"red",Forwarded:"purple",Approved:"green",Declined:"red",All:"blue"},data:function(){return{formValues:{remarks:""},response:{},permissions:{approve:!0,deny:!0,forward:!0},orgSlug:""}},computed:Object(n["a"])({},Object(u["c"])({getSupervisorSwitchedOrganization:"supervisor/getOrganizationSlug"})),created:function(){var e=this;this.orgSlug="supervisor"===this.as||"notification"===this.as?this.getSupervisorSwitchedOrganization:this.getOrganizationSlug,this.$nextTick(Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.crud.endpoint.common=l["a"].getDeleteRequestDetail(e.orgSlug,e.requestId||e.requestDetail.id)+"?as=".concat(e.requestId&&e.$route.params.slug?"hr":e.requestId?"supervisor":e.as),t.next=3,e.getData();case 3:e.response.id&&e.getSupervisorPermission();case 4:case"end":return t.stop()}}),t)}))))},methods:Object(n["a"])(Object(n["a"])({},Object(u["d"])({setUnreadNotificationCount:"notification/setUnreadNotificationCount"})),{},{requestAction:function(e){this.crud.endpoint.put=l["a"].requestAction(this.orgSlug,this.requestId||this.requestDetail.id,e)+"?as=".concat(this.requestId&&this.$route.params.slug?"hr":this.requestId?"supervisor":this.as),this.crud.message="Successfully ".concat(e," request."),this.updateData()},processAfterCreateSuccess:function(){this.refresh()},humanizeDate:function(e){return this.$dayjs(e).format("YYYY-MM-DD")},refresh:function(){var e=this;this.notificationId&&this.$http.post(p["a"].readNotification(this.notificationId)).then((function(){e.setUnreadNotificationCount(0)})).catch((function(){e.notifyUser("Something went wrong","red")})),this.$emit("close")},humanizeTime:function(e){var t=this.$dayjs(e).format("h:mm:ss a");return"Invalid date"===t?"N/A":t},getSupervisorPermission:function(){var e=this;!["supervisor","notification"].includes(this.as)&&!this.notificationId||this.$route.params.slug||(this.permissions={},this.$http.get(v["a"].getSubordinatePermission(this.response.sender.id)).then((function(t){e.permissions=t})))}})},g=h,_=s("2877"),C=s("6544"),b=s.n(C),q=s("8336"),x=s("b0af"),w=s("99d9"),k=s("62ad"),y=s("ce7e"),S=s("132d"),D=s("0fd9b"),R=s("2fa4"),V=s("a844"),I=s("8414"),$=s("1e06"),j=Object(_["a"])(g,r,a,!1,null,"3f89524d",null);t["default"]=j.exports;b()(j,{VBtn:q["a"],VCard:x["a"],VCardActions:w["a"],VCardText:w["c"],VCol:k["a"],VDivider:y["a"],VIcon:S["a"],VRow:D["a"],VSpacer:R["a"],VTextarea:V["a"],VTimeline:I["a"],VTimelineItem:$["a"]})},bbab:function(e,t,s){"use strict";s("99af");t["a"]={getCreditHourDeleteRequest:function(e){return"attendance/".concat(e,"/credit-hour/delete-requests/")},getDeleteRequestDetail:function(e,t){return"attendance/".concat(e,"/credit-hour/delete-requests/").concat(t,"/")},deleteCreditHour:function(e,t){return"/attendance/".concat(e,"/credit-hour/pre-approval/").concat(t,"/")},requestAction:function(e,t,s){return"/attendance/".concat(e,"/credit-hour/delete-requests/").concat(t,"/").concat(s,"/")}}},c197:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:e.divClass},[s("v-img",{class:e.imgClass,attrs:{src:"/svg/three-dots.svg",height:e.height,contain:""}}),s("h3",{staticClass:"text-center grey--text",domProps:{textContent:e._s(e.message)}})],1)},a=[],i={props:{message:{type:String,default:"Please wait. Fetching data just for you ..."},divClass:{type:String,default:"pa-12"},imgClass:{type:String,default:"my-6"},height:{type:String,default:"20"}},data:function(){return{}}},n=i,o=s("2877"),c=s("6544"),d=s.n(c),u=s("adda"),l=Object(o["a"])(n,r,a,!1,null,null,null);t["default"]=l.exports;d()(l,{VImg:u["a"]})}}]);