(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5059bca8"],{d502:function(e,t,a){"use strict";a("99af");t["a"]={getUserMap:function(e){return"/attendance/".concat(e,"/user-map/")},postUserMap:function(e){return"/attendance/".concat(e,"/user-map/")},bulkUserMap:function(e){return"/attendance/".concat(e,"/user-map/bulk-excel-update/")},getSampleFile:function(e){return"/attendance/".concat(e,"/user-map/sample-file/")},getUserMapDetails:function(e,t){return"/attendance/".concat(e,"/user-map/").concat(t,"/")},updateUserMap:function(e,t){return"/attendance/".concat(e,"/user-map/").concat(t,"/")},deleteUserMap:function(e,t){return"/attendance/".concat(e,"/user-map/").concat(t,"/")}}},ecb6:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.nonFieldErrors?a("non-field-form-errors",{attrs:{"non-field-errors":e.nonFieldErrors}}):e._e(),a("v-row",[a("v-col",{attrs:{md:"2",cols:"12"}},[a("div",[a("vue-user",{attrs:{user:e.user,horizontal:"",size:"50"}})],1),e.pastEmployee?e._e():a("div",{staticClass:"py-4"},[!1===e.add?a("v-btn",{attrs:{color:"primary",small:""},on:{click:function(t){e.add=!0}}},[e._v(" Add to Device ")]):a("v-btn",{attrs:{color:"primary",small:""},on:{click:function(t){e.add=!1}}},[e._v(" Return to List ")])],1)]),a("v-col",[e.add?a("v-row",{attrs:{align:"center"}},[a("v-col",{attrs:{md:"4"}},[a("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],model:{value:e.deviceInfo.bio_user_id,callback:function(t){e.$set(e.deviceInfo,"bio_user_id",t)},expression:"deviceInfo.bio_user_id"}},"v-text-field",e.veeValidate("bio_user_id","Bio User Id *"),!1))],1),a("v-col",{attrs:{md:"4"}},[a("vue-auto-complete",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{endpoint:e.deviceEndpoint,"items-to-exclude":e.fetchedResults.map((function(e){return e.source.id})),"item-text":"name","item-value":"id"},model:{value:e.deviceInfo.source,callback:function(t){e.$set(e.deviceInfo,"source",t)},expression:"deviceInfo.source"}},"vue-auto-complete",e.veeValidate("source","Device *"),!1))],1),a("v-col",{attrs:{md:"4"}},[a("v-btn",{attrs:{small:"",color:"primary",depressed:""},on:{click:function(t){return e.createHistory()}}},[e._v(" Save ")])],1)],1):a("v-data-table",{key:e.componentKey,attrs:{headers:e.headers,items:e.fetchedResults,loading:e.loading,"sort-desc":e.pagination.descending,"sort-by":e.pagination.sortBy,page:e.pagination.page,"items-per-page":e.pagination.rowsPerPage,"footer-props":e.footerProps,"server-items-length":e.pagination.totalItems,"mobile-breakpoint":0,"must-sort":"","single-expand":""},on:{"update:sortDesc":function(t){return e.$set(e.pagination,"descending",t)},"update:sort-desc":function(t){return e.$set(e.pagination,"descending",t)},"update:sortBy":function(t){return e.$set(e.pagination,"sortBy",t)},"update:sort-by":function(t){return e.$set(e.pagination,"sortBy",t)},"update:page":function(t){return e.$set(e.pagination,"page",t)},"update:itemsPerPage":function(t){return e.$set(e.pagination,"rowsPerPage",t)},"update:items-per-page":function(t){return e.$set(e.pagination,"rowsPerPage",t)}},scopedSlots:e._u([{key:"item",fn:function(t){return[a("tr",[a("td",{attrs:{"data-cy":"td-device-"+(t.index+1)}},[e._v(" "+e._s(t.item.source.name)+" ")]),a("td",[e._v(" "+e._s(t.item.bio_user_id)+" ")]),a("td",{attrs:{"data-cy":"td-menu-item-"+(t.index+1)}},[a("vue-context-menu",{attrs:{"data-cy-variable":"assign-employee-to-device","context-list":[{name:"Edit Details",icon:"mdi-pencil-outline",color:"blue"},{name:"Delete Details",icon:"mdi-trash-can-outline",color:"red"}]},on:{click0:function(e){return t.expand(!t.isExpanded)},click1:function(a){e.deleteNotify.dialog=!0,e.mapId=t.item.id}}})],1)])]}},{key:"expanded-item",fn:function(t){var n=t.item,r=t.headers;return[a("td",{attrs:{colspan:r.length}},[a("v-row",{attrs:{align:"center"}},[a("v-col",{attrs:{md:"4"}},[a("vue-auto-complete",e._b({directives:[{name:"validate",rawName:"v-validate"}],attrs:{endpoint:e.deviceEndpoint,"item-text":"name","item-value":"id","force-fetch":""},model:{value:n.source.id,callback:function(t){e.$set(n.source,"id",t)},expression:"item.source.id"}},"vue-auto-complete",e.veeValidate("source","Device"),!1))],1),a("v-col",{attrs:{md:"4"}},[a("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],model:{value:n.bio_user_id,callback:function(t){e.$set(n,"bio_user_id",t)},expression:"item.bio_user_id"}},"v-text-field",e.veeValidate("bio_user_id","Bio User Id *"),!1))],1),a("v-col",{attrs:{md:"4"}},[a("v-btn",{attrs:{small:"",color:"primary",depressed:""},on:{click:function(t){return e.assignEmployee(n.bio_user_id,n.source.id,n.id)}}},[e._v(" Save ")])],1)],1)],1)]}}])},[a("template",{slot:"no-data"},[a("data-table-no-data",{attrs:{loading:e.loading}})],1)],2),a("vue-dialog",{attrs:{notify:e.deleteNotify},on:{agree:function(t){return e.deleteDeviceItem()},close:function(t){e.deleteNotify.dialog=!1}}})],1)],1)],1)},r=[],i=a("1da1"),o=(a("96cf"),a("a9e3"),a("d3b7"),a("17cc")),s=a("c44a"),c=a("02cb"),d=a("ab8a"),u=a("5660"),l=a("a51f"),p=a("d502"),f=a("e4bf"),m={components:{VueContextMenu:f["default"],DataTableNoData:l["default"],VueAutoComplete:u["default"],VueUser:c["default"],NonFieldFormErrors:d["default"]},mixins:[s["a"],o["a"]],props:{settingId:{type:[Number,String],default:""},user:{type:Object,default:void 0},pastEmployee:{type:Boolean,default:!1}},data:function(){return{headers:[{text:"Device",value:"user_first_name",sortable:!1},{text:"Bio User ID",sortable:!1,align:"left",value:"email"},{text:"Action",sortable:!1,align:"left",value:"email"}],componentKey:1,loading:!1,deviceEndpoint:"",deviceInfo:{},add:!1,search:"",mapId:"",excludeItems:"",deleteNotify:{dialog:!1,heading:"Confirm Delete",text:"Are you sure you want remove user from this device?"}}},computed:{DataTableFilter:function(){return{setting:this.settingId,bio_user_id:"",source:""}}},created:function(){this.deviceEndpoint="/attendance/source/?organization_slug=".concat(this.getOrganizationSlug),this.loadDataTableChange()},methods:{fetchDataTable:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loading=!0,e.$http.get("/attendance/".concat(e.getOrganizationSlug,"/user-map/"),{params:e.fullParams}).then((function(t){e.loadDataTable(t)})).finally((function(){e.loading=!1}));case 2:case"end":return t.stop()}}),t)})))()},assignEmployee:function(e,t,a){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n.deviceInfo.setting=n.settingId,i={setting:n.settingId,bio_user_id:e,source:t},n.$http.put(p["a"].updateUserMap(n.getOrganizationSlug,a),i).then((function(){n.notifyUser("Successfully Update Device Settings."),n.$emit("refresh"),n.clearNonFieldErrors(),n.fetchDataTable(),n.componentKey+=1})).catch((function(e){n.notifyInvalidFormResponse(),n.pushErrors(e)}));case 3:case"end":return r.stop()}}),r)})))()},deleteDeviceItem:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$http.delete(p["a"].deleteUserMap(e.getOrganizationSlug,e.mapId)).then((function(){e.$emit("refresh"),e.notifyUser("Successfully remove user from this Device."),e.deleteNotify.dialog=!1,e.clearNonFieldErrors(),e.fetchDataTable()})).catch((function(t){e.notifyInvalidFormResponse(),e.pushErrors(t)}));case 1:case"end":return t.stop()}}),t)})))()},createHistory:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.deviceInfo.setting=e.settingId,e.$http.post(p["a"].postUserMap(e.getOrganizationSlug),e.deviceInfo).then((function(){e.deviceInfo={},e.$emit("refresh"),e.notifyUser("Successfully assign Employee to Device."),e.clearNonFieldErrors(),e.add=!1,e.fetchDataTable()})).catch((function(t){e.notifyInvalidFormResponse(),e.pushErrors(t)}));case 2:case"end":return t.stop()}}),t)})))()}}},v=m,g=a("2877"),b=a("6544"),h=a.n(b),y=a("8336"),_=a("62ad"),x=a("8fea"),w=a("0fd9b"),I=a("8654"),D=Object(g["a"])(v,n,r,!1,null,null,null);t["default"]=D.exports;h()(D,{VBtn:y["a"],VCol:_["a"],VDataTable:x["a"],VRow:w["a"],VTextField:I["a"]})}}]);