(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["/components/User/Education/List"],{b91a:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("vue-card-title",{attrs:{title:e.heading,subtitle:e.subHeading+e.userName,icon:"mdi-file-document-outline"}},[r("template",{slot:"actions"},[e.showForm||e.getAuthStateUserId!==parseInt(e.$route.params.id)&&!e.verifyPermission(e.allPermissions.CAN_CREATE_UPDATE_USER_PROFILE)||"supervisor"===e.as||e.loading?e._e():r("v-btn",{attrs:{small:"",color:"primary",depressed:""},on:{click:e.createEducation}},[e._v(" "+e._s(e.$t("createNew"))+" ")]),e.showForm?r("v-btn",{attrs:{small:"",outlined:"",color:"primary"},on:{click:e.refresh}},[e._v(" Cancel ")]):e._e()],1)],2),r("v-divider"),e.loading?r("v-row",e._l(6,(function(e){return r("v-col",{key:e,attrs:{cols:"6"}},[r("bullet-list-loader",{attrs:{"primary-color":"#eee","secondary-color":"#d5d5d7"}})],1)})),1):e.educationDetails.length<1&&!e.showForm?r("vue-no-data"):e._e(),0===e.educationDetails.length||e.showForm||e.loading?e._e():r("v-col",[r("v-timeline",{attrs:{"align-top":"",dense:""}},e._l(e.educationDetails,(function(t,a){return r("v-timeline-item",{key:a,attrs:{color:e.colors[a%4],small:""}},[r("v-hover",{scopedSlots:e._u([{key:"default",fn:function(i){var s=i.hover;return r("v-row",{attrs:{align:"center"}},[r("v-icon",{attrs:{left:""},domProps:{textContent:e._s("mdi-school-outline")}}),r("span",[e._v(" "+e._s(t.degree)+" ")]),t.is_current?r("span",[e._v(" ( Currently Studying) ")]):e._e(),0!==a?r("span",[a===e.showDetails?r("v-icon",{staticClass:"float-right mx-2",attrs:{small:""},domProps:{textContent:e._s("mdi-menu-up")},on:{click:function(t){e.showDetails=null}}}):r("v-icon",{staticClass:"float-right mx-2",attrs:{small:""},domProps:{textContent:e._s("mdi-menu-down")},on:{click:function(t){e.showDetails=a}}})],1):e._e(),s&&(e.getAuthStateUserId===parseInt(e.$route.params.id)||e.verifyPermission(e.allPermissions.CAN_CREATE_UPDATE_USER_PROFILE))&&"supervisor"!==e.as?r("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-pencil")},on:{click:function(r){return e.editEducation(t)}}}):e._e(),s&&(e.getAuthStateUserId===parseInt(e.$route.params.id)||e.verifyPermission(e.allPermissions.CAN_CREATE_UPDATE_USER_PROFILE))&&"supervisor"!==e.as?r("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-delete")},on:{click:function(r){return e.deleteEducation(t)}}}):e._e(),r("v-spacer")],1)}}],null,!0)}),r("v-slide-y-transition",[e.showDetails===a||0===a?r("education-detail",{attrs:{details:t}}):e._e()],1)],1)})),1)],1),e.showForm?r("span",[r("education-details-form",{attrs:{"user-id":e.userInfo.user.id,"export-fields":e.currentItem,as:e.as},on:{created:e.refresh,updated:e.refresh}})],1):e._e(),r("vue-notify",{attrs:{notify:e.notify}}),r("vue-dialog",{attrs:{notify:e.deleteDialog},on:{close:function(t){e.deleteDialog.dialog=!1},agree:e.deleteItem},model:{value:e.deleteDialog.dialog,callback:function(t){e.$set(e.deleteDialog,"dialog",t)},expression:"deleteDialog.dialog"}})],1)},i=[],s=r("1da1"),n=(r("96cf"),r("c44a")),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-col",[r("v-row",[r("v-col",{attrs:{md:"6",sm:"12"}},[r("v-list-item",[r("v-list-item-avatar",{staticClass:"mr-0"},[r("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-text-box-outline")}})],1),r("v-list-item-content",[r("v-list-item-title",{domProps:{textContent:e._s("Degree")}}),r("v-list-item-subtitle",[e._v(" "+e._s(e.educationDegree[e.details.degree-1])+" in "+e._s(e.details.field)+" ")])],1)],1)],1),r("v-col",{attrs:{md:"6",sm:"12"}},[r("v-list-item",[r("v-list-item-avatar",{staticClass:"mr-0"},[r("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-school-outline")}})],1),r("v-list-item-content",[r("v-list-item-title",{domProps:{textContent:e._s("Institution")}}),r("v-list-item-subtitle",{domProps:{textContent:e._s(e.details.institution)}})],1)],1)],1),r("v-col",{attrs:{md:"6",sm:"12"}},[r("v-list-item",[r("v-list-item-avatar",{staticClass:"mr-0"},[r("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-text-box-outline")}})],1),r("v-list-item-content",[r("v-list-item-title",{domProps:{textContent:e._s("Field")}}),r("v-list-item-subtitle",{domProps:{textContent:e._s(e.details.field)}})],1)],1)],1),e.details.marks?r("v-col",{attrs:{md:"6",cols:"12"}},[r("v-list-item",[r("v-list-item-avatar",{staticClass:"mr-0"},[r("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-relative-scale")}})],1),r("v-list-item-content",[r("v-list-item-title",{domProps:{textContent:e._s("Marks Secured:")}}),r("v-list-item-subtitle",[e._v(" "+e._s(e.details.marks_type)+" : "+e._s(e.details.marks)+" ")])],1)],1)],1):e._e(),r("v-col",{attrs:{md:"6",cols:"12"}},[r("v-list-item",[r("v-list-item-avatar",{staticClass:"mr-0"},[r("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-calendar-month-outline")}})],1),r("v-list-item-content",[r("v-list-item-title",{domProps:{textContent:e._s("Year")}}),r("v-list-item-subtitle",[e._v(" "+e._s(e.details.from_year)+" "),e.details.is_current?e._e():r("span",{domProps:{textContent:e._s("- "+e.details.to_year)}})])],1)],1)],1),r("v-col",{attrs:{md:"6",cols:"12"}},[r("v-list-item",[r("v-list-item-avatar",{staticClass:"mr-0"},[r("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-school-outline")}})],1),r("v-list-item-content",[r("v-list-item-title",{domProps:{textContent:e._s("University / Board")}}),r("v-list-item-subtitle",{domProps:{textContent:e._s(e.details.university)}})],1)],1)],1)],1)],1)},l=[],d={name:"EducationDetail",props:{details:{type:Object,default:null}},data:function(){return{educationDegree:["PHD Level","Masters Degree","Bachelors Degree","Diploma Level","Intermediate","SLC Level","Below SLC"]}}},c=d,u=r("2877"),m=r("6544"),v=r.n(m),f=r("62ad"),p=r("132d"),_=r("da13"),h=r("8270"),g=r("5d23"),x=r("0fd9b"),y=Object(u["a"])(c,o,l,!1,null,null,null),b=y.exports;v()(y,{VCol:f["a"],VIcon:p["a"],VListItem:_["a"],VListItemAvatar:h["a"],VListItemContent:g["a"],VListItemSubtitle:g["b"],VListItemTitle:g["c"],VRow:x["a"]});var E=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[e.form?r("v-form",[r("v-container",{staticClass:"px-12"},[e.nonFieldErrors?r("non-field-form-errors",{attrs:{"non-field-errors":e.nonFieldErrors}}):e._e(),r("v-row",[r("v-col",{attrs:{md:"6",sm:"12"}},[r("vue-auto-complete",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{endpoint:e.educationDegreeEndpoint,"force-fetch":"","hide-details":"","item-text":"name","item-value":"id",label:"Education Degree *","prepend-inner-icon":"mdi-text-box-outline"},model:{value:e.form.new_degree,callback:function(t){e.$set(e.form,"new_degree",t)},expression:"form.new_degree"}},"vue-auto-complete",e.veeValidate("degree","Degree *"),!1))],1),r("v-col",{attrs:{md:"6",sm:"12"}},[r("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required|alpha_spaces_special|max:150",expression:"'required|alpha_spaces_special|max:150'"}],attrs:{counter:150,"prepend-inner-icon":"mdi-text-box-outline"},model:{value:e.form.field,callback:function(t){e.$set(e.form,"field",t)},expression:"form.field"}},"v-text-field",e.veeValidate("field","Field *"),!1))],1),r("v-col",{attrs:{md:"6",sm:"12"}},[r("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required|alpha_spaces|max:150",expression:"'required|alpha_spaces|max:150'"}],attrs:{counter:150,"prepend-inner-icon":"mdi-school-outline"},model:{value:e.form.institution,callback:function(t){e.$set(e.form,"institution",t)},expression:"form.institution"}},"v-text-field",e.veeValidate("institution","Institution *"),!1))],1),r("v-col",{attrs:{md:"6",sm:"12"}},[r("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required|alpha_spaces|max:150",expression:"'required|alpha_spaces|max:150'"}],attrs:{counter:150,"prepend-inner-icon":"mdi-school-outline"},model:{value:e.form.university,callback:function(t){e.$set(e.form,"university",t)},expression:"form.university"}},"v-text-field",e.veeValidate("university","University / Board *"),!1))],1),r("v-col",{attrs:{md:"6",sm:"12"}},[e.form.is_current?e._e():r("v-select",e._b({attrs:{items:e.marksTypeChoices,"item-text":"item","item-value":"value","prepend-inner-icon":"mdi-text-box-outline"},model:{value:e.form.marks_type,callback:function(t){e.$set(e.form,"marks_type",t)},expression:"form.marks_type"}},"v-select",e.veeValidate("marks_type","Marks type"),!1))],1),r("v-col",{attrs:{md:"6",sm:"12"}},[e.form.is_current?e._e():r("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"decimal|max:5"+e.marksValidator,expression:"'decimal|max:5' + marksValidator"}],attrs:{"prepend-inner-icon":"mdi-poll"},model:{value:e.form.marks,callback:function(t){e.$set(e.form,"marks",t)},expression:"form.marks"}},"v-text-field",e.veeValidate("marks","Marks"),!1))],1),r("v-col",{attrs:{md:"6",sm:"12"}},[r("vue-date-picker",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],model:{value:e.form.from_year,callback:function(t){e.$set(e.form,"from_year",t)},expression:"form.from_year"}},"vue-date-picker",e.veeValidate("from_year","From year *"),!1))],1),r("v-col",{attrs:{md:"6",sm:"12"}},[e.form.is_current?e._e():r("vue-date-picker",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],model:{value:e.form.to_year,callback:function(t){e.$set(e.form,"to_year",t)},expression:"form.to_year"}},"vue-date-picker",e.veeValidate("to_year","To year *"),!1))],1),r("v-col",{attrs:{md:"6",sm:"12"}},[r("v-checkbox",e._b({attrs:{label:"Is Currently Studying"},on:{change:e.clearCurrentlyStudyingFields},model:{value:e.form.is_current,callback:function(t){e.$set(e.form,"is_current",t)},expression:"form.is_current"}},"v-checkbox",e.veeValidate("is_current","Is Current"),!1))],1)],1)],1),r("v-divider"),r("v-card-actions",[r("v-spacer"),e.exportFields.id?e._e():r("v-btn",{attrs:{disabled:e.errors.any(),depressed:"","data-cy":"btn-save-and-add-another",color:"primary"},on:{click:e.addAnother}},[e._v(" Save and Add Another ")]),e.editable?r("v-btn",{attrs:{disabled:e.errors.any(),depressed:"","data-cy":"btn-save",color:"primary"},on:{click:e.editItem}},[e._v(" Save ")]):r("v-btn",{attrs:{disabled:e.errors.any(),depressed:"","data-cy":"btn-save",color:"primary"},on:{click:e.createItem}},[e._v(" Save ")]),r("v-btn",{attrs:{depressed:""},on:{click:e.clear}},[e._v(" Clear ")])],1)],1):e._e()],1)},C=[],k=(r("a9e3"),r("d3b7"),r("ab8a")),D=r("741f"),w=(r("99af"),{getUserEducations:function(e){return"/users/".concat(e,"/education/")},postUserEducation:function(e){return"/users/".concat(e,"/education/")},getEducationDetail:function(e,t){return"/users/".concat(e,"/education/").concat(t,"/")},updateEducationDetail:function(e,t){return"/users/".concat(e,"/education/").concat(t,"/")},deleteUserEducation:function(e,t){return"/users/".concat(e,"/education/").concat(t,"/")}}),P=r("5660"),I=r("ffbb"),A=r("7bb1");A["a"].extend("alpha_spaces_special",{getMessage:function(e){return"The ".concat(e," field may only contain alphabetic characters, spaces, and the special characters ( ) - &.")},validate:function(e){return/^[a-zA-Z\s()\-&]*$/.test(e)}});var V={components:{VueAutoComplete:P["default"],NonFieldFormErrors:k["default"],VueDatePicker:D["default"]},mixins:[n["a"]],props:{userId:{type:Number,required:!0},as:{type:String,default:""},exportFields:{type:Object,required:!0,default:function(){return{new_degree:"",field:"",institution:"",university:"",marks_type:"",marks:"",from_year:"",to_year:"",is_current:!1}}}},data:function(){return{marksTypeChoices:[{value:"cgpa",item:"CGPA/GPA"},{value:"percentage",item:"Percentage"}],fromMenu:!1,toMenu:!1,form:this.deepCopy(this.exportFields),editable:!1,saveAndAddAnother:!1,educationDegreeEndpoint:""}},computed:{marksValidator:function(){return"cgpa"===this.form.marks_type?"|min_value:0|max_value:15":"percentage"===this.form.marks_type?"|min_value:0|max_value:100":""}},created:function(){this.educationDegreeEndpoint=I["a"].getEducationDegree,this.form=this.deepCopy(this.exportFields),this.$validator.errors.clear(),this.clearNonFieldErrors(),this.editable=!!this.exportFields.id},methods:{clear:function(){this.form={},this.$validator.errors.clear()},clearCurrentlyStudyingFields:function(){this.form.marks_type="",this.form.marks=null,this.form.to_year=null},createItem:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.validateAllFields();case 2:if(!t.sent){t.next=4;break}e.$http.post(w.postUserEducation(e.$route.params.id)+"?as=".concat(e.as),e.form).then((function(t){e.verifyPermission(e.allPermissions.CAN_CREATE_UPDATE_USER_PROFILE)&&e.$route.params.slug?(e.notifyUser("Successfully created Education details","green"),e.saveAndAddAnother?e.clear(e.form):e.$emit("created",t)):(e.notifyUser("Profile Change request has been sent","green"),e.saveAndAddAnother?e.clear(e.form):e.$router.push({name:"user-profile-change-request"}))})).catch((function(t){e.notifyInvalidFormResponse(),e.pushErrors(t)})).finally((function(){e.saveAndAddAnother=!1}));case 4:case"end":return t.stop()}}),t)})))()},addAnother:function(){this.saveAndAddAnother=!0,this.createItem()},editItem:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.validateAllFields();case 2:if(!t.sent){t.next=5;break}delete e.form.degree,e.$http.put(w.updateEducationDetail(e.$route.params.id,e.exportFields.id)+"?as=".concat(e.as),e.form).then((function(){e.verifyPermission(e.allPermissions.CAN_CREATE_UPDATE_USER_PROFILE)&&e.$route.params.slug?(e.notifyUser("Successfully updated Education details","green"),e.$emit("updated")):(e.notifyUser("Profile Change request has been sent","green"),e.$router.push({name:"user-profile-change-request"}))})).catch((function(t){e.notifyInvalidFormResponse(),e.pushErrors(t)}));case 5:case"end":return t.stop()}}),t)})))()}}},F=V,$=r("8336"),U=r("b0af"),S=r("99d9"),R=r("ac7c"),L=r("a523"),q=r("ce7e"),T=r("4bd4"),N=r("b974"),O=r("2fa4"),j=r("8654"),B=Object(u["a"])(F,E,C,!1,null,null,null),M=B.exports;v()(B,{VBtn:$["a"],VCard:U["a"],VCardActions:S["a"],VCheckbox:R["a"],VCol:f["a"],VContainer:L["a"],VDivider:q["a"],VForm:T["a"],VRow:x["a"],VSelect:N["a"],VSpacer:O["a"],VTextField:j["a"]});var H=r("e330"),G=r("e585"),J={components:{educationDetail:b,EducationDetailsForm:M,BulletListLoader:H["a"],VueNoData:G["default"]},mixins:[n["a"]],props:{userInfo:{type:Object,required:!0},as:{type:String,default:""}},data:function(){return{heading:"Education Details",subHeading:"Education Details of ",currentItem:{},showForm:!1,notify:{},showDetails:100,educationDetails:[],colors:["red","green","indigo","yellow"],educationDegree:[{text:"PHD Level",value:1},{text:"Masters Degree",value:2},{text:"Bachelors Degree",value:3},{text:"Diploma Level",value:4},{text:"Intermediate",value:5},{text:"SLC Level",value:6},{text:"Below SLC",value:7}],deleteDialog:{dialog:!1,heading:"Confirm Delete",text:"Do you really want to delete this education information ?"},loading:!1}},computed:{userName:function(){return this.userInfo.user.first_name+" "+this.userInfo.user.middle_name+" "+this.userInfo.user.last_name}},mounted:function(){this.getUserEducationInfo()},methods:{getUserEducationInfo:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loading=!0,e.$http.get(w.getUserEducations(e.$route.params.id)+"?as=".concat(e.as)).then((function(t){e.educationDetails=t.results,e.loading=!1}));case 2:case"end":return t.stop()}}),t)})))()},refresh:function(){this.$validator.errors.clear(),this.getUserEducationInfo(),this.showForm=!1,this.deleteDialog.dialog=!1,this.currentItem={}},createEducation:function(){this.currentItem={},this.showForm=!0},editEducation:function(e){this.currentItem=e,this.showForm=!0},deleteEducation:function(e){this.currentItem=e,this.deleteDialog.dialog=!0},deleteItem:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$http.delete(w.deleteUserEducation(e.$route.params.id,e.currentItem.id)+"?as=".concat(e.as)).then((function(){e.verifyPermission(e.allPermissions.CAN_CREATE_UPDATE_USER_PROFILE)&&e.$route.params.slug?(e.notifyUser("Successfully deleted Education details","green"),e.refresh()):(e.notifyUser("Profile Change request has been sent","green"),e.$router.push({name:"user-profile-change-request"}))})).catch((function(t){e.pushErrors(t);var r=e.nonFieldErrors[0]["non field errors"];e.notifyUser(r,"red"),e.refresh()}));case 1:case"end":return t.stop()}}),t)})))()}}},Y=J,z=r("ce87"),Z=r("0789"),K=r("8414"),Q=r("1e06"),W=Object(u["a"])(Y,a,i,!1,null,null,null);t["default"]=W.exports;v()(W,{VBtn:$["a"],VCard:U["a"],VCol:f["a"],VDivider:q["a"],VHover:z["a"],VIcon:p["a"],VRow:x["a"],VSlideYTransition:Z["g"],VSpacer:O["a"],VTimeline:K["a"],VTimelineItem:Q["a"]})},ffbb:function(e,t,r){"use strict";t["a"]={getEducationDegree:"/commons/education-degree/",postEducationDegree:"/commons/education-degree/",changeEducationDegree:function(e){return"/commons/education-degree/".concat(e)}}}}]);