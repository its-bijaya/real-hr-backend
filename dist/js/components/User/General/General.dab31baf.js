(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["components/User/General/General"],{"204a":function(t,e,a){},3860:function(t,e,a){"use strict";var i=a("604c");e["a"]=i["a"].extend({name:"button-group",provide:function(){return{btnToggle:this}},computed:{classes:function(){return i["a"].options.computed.classes.call(this)}},methods:{genData:i["a"].options.methods.genData}})},"55d9":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("vue-card-title",{attrs:{title:"General Information",subtitle:"General Information of "+t.userName,icon:"mdi-file-document-outline"}},[a("template",{slot:"actions"},[t.showForm||t.getAuthStateUserId!==parseInt(t.$route.params.id)&&!t.verifyPermission(t.allPermissions.CAN_CREATE_UPDATE_USER_PROFILE)||"supervisor"===t.as||t.loading?t._e():a("v-btn",{attrs:{small:"",color:"primary",depressed:""},on:{click:function(e){return t.changeShowForm(!0)}}},[t._v(" Update ")]),t.showForm?a("v-btn",{attrs:{small:"",color:"primary",outlined:""},on:{click:function(e){return t.changeShowForm(!1)}}},[t._v(" Cancel ")]):t._e()],1)],2),a("v-divider"),t.showForm?a("v-form",{ref:"form",attrs:{"lazy-validation":""}},[a("general-information-form",{attrs:{"user-detail":t.accountInformation,as:t.as},on:{update:t.refreshData}})],1):t._e(),t.showForm||t.loading?t._e():a("v-row",{staticClass:"px-12",attrs:{dense:""}},[a("v-col",{attrs:{cols:"6"}},[a("v-list-item",[a("v-list-item-avatar",{staticClass:"mr-0"},[a("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-account-outline")}})],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s("First Name")}}),a("v-list-item-subtitle",{domProps:{textContent:t._s(t.get(t.accountInformation,"user.first_name","N/A"))}})],1)],1)],1),a("v-col",{attrs:{cols:"6"}},[a("v-list-item",[a("v-list-item-avatar",{staticClass:"mr-0"},[a("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-account-outline")}})],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s("Middle Name")}}),a("v-list-item-subtitle",{domProps:{textContent:t._s(t.get(t.accountInformation,"user.middle_name")||"N/A")}})],1)],1)],1),a("v-col",{attrs:{cols:"6"}},[a("v-list-item",[a("v-list-item-avatar",{staticClass:"mr-0"},[a("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-account-outline")}})],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s("Last Name")}}),a("v-list-item-subtitle",{domProps:{textContent:t._s(t.get(t.accountInformation,"user.last_name")||"N/A")}})],1)],1)],1),a("v-col",{attrs:{cols:"6"}},[a("v-list-item",[a("v-list-item-avatar",{staticClass:"mr-0"},[a("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-gender-male-female")}})],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s("Gender")}}),a("v-list-item-subtitle",{domProps:{textContent:t._s(t.get(t.accountInformation,"gender")||"N/A")}})],1)],1)],1),a("v-col",{attrs:{cols:"6"}},[a("v-list-item",[a("v-list-item-avatar",{staticClass:"mr-0"},[a("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-atom-variant")}})],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s("Religion")}}),a("v-list-item-subtitle",{domProps:{textContent:t._s(t.get(t.accountInformation,"religion.name")||"N/A")}})],1)],1)],1),a("v-col",{attrs:{cols:"6"}},[a("v-list-item",[a("v-list-item-avatar",{staticClass:"mr-0"},[a("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-account-multiple")}})],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s("Ethnicity")}}),a("v-list-item-subtitle",{domProps:{textContent:t._s(t.get(t.accountInformation,"ethnicity.name")||"N/A")}})],1)],1)],1),a("v-col",{attrs:{cols:"6"}},[a("v-list-item",[a("v-list-item-avatar",{staticClass:"mr-0"},[a("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-calendar-month-outline")}})],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s("Date Of Birth")}}),a("v-list-item-subtitle",{domProps:{textContent:t._s(t.get(t.accountInformation,"date_of_birth")||"N/A")}})],1)],1)],1),a("v-col",{attrs:{cols:"6"}},[a("v-list-item",[a("v-list-item-avatar",{staticClass:"mr-0"},[a("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-flag-outline")}})],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s("Nationality")}}),a("v-list-item-subtitle",{domProps:{textContent:t._s(t.get(t.accountInformation,"nationality")||"N/A")}})],1)],1)],1),a("v-col",{attrs:{cols:"6"}},[a("v-list-item",[a("v-list-item-avatar",{staticClass:"mr-0"},[a("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-account-multiple-outline")}})],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s("Marital Status")}}),a("v-list-item-subtitle",{domProps:{textContent:t._s(t.get(t.accountInformation,"marital_status")||"N/A")}})],1)],1)],1),a("v-col",{attrs:{cols:"6"}},[a("v-list-item",[a("v-list-item-avatar",{staticClass:"mr-0"},[a("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-cake-variant")}})],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s("Marriage Anniversary")}}),a("v-list-item-subtitle",{domProps:{textContent:t._s(t.get(t.accountInformation,"marriage_anniversary")||"N/A")}})],1)],1)],1),a("v-col",{attrs:{cols:"6"}},[a("v-list-item",[a("v-list-item-avatar",{staticClass:"mr-0"},[a("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-phone-outline")}})],1),a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s("Extension Number")}}),a("v-list-item-subtitle",{domProps:{textContent:t._s(t.get(t.accountInformation,"extension_number")||"N/A")}})],1)],1)],1),a("v-col",{attrs:{cols:"6"}},[a("div",{staticClass:"px-7 mt-2"},[a("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-information-outline")}}),t._v(" User Signature ")],1),a("div",{staticClass:"px-12 my-2"},[a("v-img",{attrs:{src:t.get(t.accountInformation,"user.signature"),width:"150",contain:""}})],1)])],1),t.loading?a("v-row",{attrs:{justify:"center"}},t._l(6,(function(t){return a("v-col",{key:t,attrs:{md:"4",sm:"12"}},[a("bullet-list-loader",{attrs:{"primary-color":"#eee","secondary-color":"#d5d5d7"}})],1)})),1):t._e()],1)},n=[],o=a("1da1"),r=(a("96cf"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{ref:"generalInformationForm"},[a("v-container",{staticClass:"px-12"},[t.nonFieldErrors?a("non-field-form-errors",{attrs:{"non-field-errors":t.nonFieldErrors}}):t._e(),a("v-row",{attrs:{align:"start"}},[a("v-col",{attrs:{md:"6",cols:"12"}},[a("v-text-field",t._b({directives:[{name:"validate",rawName:"v-validate",value:"required|name|max:30",expression:"'required|name|max:30'"}],attrs:{counter:30,"prepend-inner-icon":"mdi-account-outline"},model:{value:t.form.user.first_name,callback:function(e){t.$set(t.form.user,"first_name",e)},expression:"form.user.first_name"}},"v-text-field",t.veeValidate("first_name","First Name *"),!1))],1),a("v-col",{attrs:{md:"6",cols:"12"}},[a("v-text-field",t._b({directives:[{name:"validate",rawName:"v-validate",value:"name|max:30",expression:"'name|max:30'"}],attrs:{counter:30,"prepend-inner-icon":"mdi-account-outline"},model:{value:t.form.user.middle_name,callback:function(e){t.$set(t.form.user,"middle_name",e)},expression:"form.user.middle_name"}},"v-text-field",t.veeValidate("middle_name","Middle Name"),!1))],1),a("v-col",{attrs:{md:"6",cols:"12"}},[a("v-text-field",t._b({directives:[{name:"validate",rawName:"v-validate",value:"required|name|max:30",expression:"'required|name|max:30'"}],attrs:{counter:30,"prepend-inner-icon":"mdi-account-outline"},model:{value:t.form.user.last_name,callback:function(e){t.$set(t.form.user,"last_name",e)},expression:"form.user.last_name"}},"v-text-field",t.veeValidate("last_name","Last Name *"),!1))],1),a("v-col",{attrs:{md:"6",cols:"12"}},[a("v-btn-toggle",{model:{value:t.form.gender,callback:function(e){t.$set(t.form,"gender",e)},expression:"form.gender"}},t._l(t.genderChoices,(function(e){return a("v-btn",{key:e.value,attrs:{value:e.value,text:""}},[a("v-icon",{attrs:{small:""},domProps:{textContent:t._s(e.icon)}}),a("span",{domProps:{textContent:t._s(e.value)}})],1)})),1)],1),a("v-col",{attrs:{md:"6",cols:"12"}},[a("vue-auto-complete",t._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],attrs:{endpoint:t.religionEthnicityEndpoint,params:{category:"Religion"},default:t.userDetail.religion,"prepend-inner-icon":"mdi-atom-variant","item-text":"name","item-value":"slug"},model:{value:t.form.religion,callback:function(e){t.$set(t.form,"religion",e)},expression:"form.religion"}},"vue-auto-complete",t.veeValidate("religion","Religion"),!1))],1),a("v-col",{attrs:{md:"6",cols:"12"}},[a("vue-auto-complete",t._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],attrs:{endpoint:t.religionEthnicityEndpoint,params:{category:"Ethnicity"},"item-text":"name","prepend-inner-icon":"mdi-account-multiple","item-value":"slug"},model:{value:t.form.ethnicity,callback:function(e){t.$set(t.form,"ethnicity",e)},expression:"form.ethnicity"}},"vue-auto-complete",t.veeValidate("ethnicity","Ethnicity"),!1))],1),a("v-col",{attrs:{md:"6",cols:"12"}},[a("vue-date-picker",t._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],model:{value:t.form.date_of_birth,callback:function(e){t.$set(t.form,"date_of_birth",e)},expression:"form.date_of_birth"}},"vue-date-picker",t.veeValidate("date_of_birth","Date of Birth *"),!1))],1),a("v-col",{attrs:{md:"6",cols:"12"}},[a("v-autocomplete",t._b({directives:[{name:"validate",rawName:"v-validate",value:"required|max:30",expression:"'required|max:30'"}],attrs:{counter:30,items:t.nationalityChoices,"search-input":t.nationalitySearch,"prepend-inner-icon":"mdi-flag-outline","item-text":"display","item-value":"value","hide-selected":"",clearable:"","hide-no-data":""},on:{"update:searchInput":function(e){t.nationalitySearch=e},"update:search-input":function(e){t.nationalitySearch=e}},model:{value:t.form.nationality,callback:function(e){t.$set(t.form,"nationality",e)},expression:"form.nationality"}},"v-autocomplete",t.veeValidate("nationality","Nationality *"),!1))],1),a("v-col",{attrs:{md:"6",cols:"12"}},[a("v-select",t._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:t.maritalChoices,"prepend-inner-icon":"mdi-heart-outline"},model:{value:t.form.marital_status,callback:function(e){t.$set(t.form,"marital_status",e)},expression:"form.marital_status"}},"v-select",t.veeValidate("marital_status","Marital Status *"),!1))],1),"Married"===t.form.marital_status?a("v-col",{attrs:{md:"6",cols:"12"}},[a("vue-date-picker",t._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],model:{value:t.form.marriage_anniversary,callback:function(e){t.$set(t.form,"marriage_anniversary",e)},expression:"form.marriage_anniversary"}},"vue-date-picker",t.veeValidate("marriage_anniversary","Marriage Anniversary"),!1))],1):t._e(),a("v-col",{attrs:{md:"6",cols:"12"}},[a("v-text-field",t._b({directives:[{name:"validate",rawName:"v-validate",value:"max:6|integer",expression:"'max:6|integer'"}],attrs:{"prepend-inner-icon":"mdi-phone-outline"},model:{value:t.form.extension_number,callback:function(e){t.$set(t.form,"extension_number",e)},expression:"form.extension_number"}},"v-text-field",t.veeValidate("extension_number","Extension Number"),!1))],1),a("v-col",{attrs:{md:"6",cols:"12"}},[a("div",[a("v-text-field",{attrs:{readonly:"",label:"User Signature","prepend-inner-icon":"mdi-attachment"},on:{click:function(e){t.imgDialog=!0}},model:{value:t.imageName,callback:function(e){t.imageName=e},expression:"imageName"}})],1),a("div",[a("v-img",{attrs:{src:t.imageUrl,width:"150",contain:""}})],1)])],1),t.imgDialog?a("image-upload",{attrs:{resize:!1,"hide-overlay":"","view-port":{width:390,height:260},"options-size":"viewport"},on:{close:function(e){t.imgDialog=!1},"cropped-image":t.uploadImage},model:{value:t.form.signature,callback:function(e){t.$set(t.form,"signature",e)},expression:"form.signature"}}):t._e(),a("vue-notify",{attrs:{notify:t.notify}})],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{disabled:t.errors.any(),depressed:"",color:"primary"},on:{click:t.editInfo}},[t._v(" Save ")]),a("v-btn",{attrs:{depressed:""},on:{click:function(e){return t.clear()}}},[t._v(" Clear ")])],1)],1)}),s=[],l=a("5530"),m=(a("b0c0"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("159b"),a("b64b"),a("c44a")),c=a("ab8a"),d=a("5660"),u=a("741f"),v=a("fab2"),f=a("38ef"),p=a("69e5"),g=a("a79c"),h=a("ad37"),_=a("2f62"),b={components:{NonFieldFormErrors:c["default"],ImageUpload:p["default"],VueAutoComplete:d["default"],VueDatePicker:u["default"]},mixins:[m["a"]],props:{userDetail:{type:Object,default:function(){return{user:{first_name:"",middle_name:"",last_name:"",signature:""},gender:null,ethnicity:"",religion:"",nationality:"",marital_status:"",marriage_anniversary:"",date_of_birth:""}}},as:{type:String,default:"''"}},data:function(){return{date:null,showDatePicker:!1,menu:!1,marriageMenu:!1,valid:!0,imageUrl:this.userDetail.user.signature,imageName:"",imgDialog:!1,notify:{},genderChoices:[{icon:"mdi-gender-male",value:"Male"},{icon:"mdi-gender-female",value:"Female"},{icon:"mdi-gender-male-female",value:"Other"}],maritalChoices:["Married","Single","Divorced","Widowed"],form:this.deepCopy(this.userDetail),religionEthnicityEndpoint:h["a"].getReligionEthnicity,nationalityChoices:[],nationalitySearch:""}},computed:Object(l["a"])({},Object(_["e"])(["auth"])),watch:{nationalitySearch:function(){this.getNationalityChoices()}},methods:Object(l["a"])(Object(l["a"])({},Object(_["d"])({updateUserName:"auth/updateUserName"})),{},{uploadImage:function(t){var e=t.size;e>5e6?(this.notifyUser("File size may not be greater then 5MB.","red"),this.imgDialog=!1):(this.form.signature=t,this.imageName=t.name,this.imageUrl=URL.createObjectURL(t),this.imgDialog=!1)},constructFormData:function(){return{user:{first_name:this.form.user.first_name,middle_name:this.form.user.middle_name,last_name:this.form.user.last_name,signature:this.form.signature},date_of_birth:this.form.date_of_birth,gender:this.form.gender,ethnicity:this.form.ethnicity,religion:this.form.religion,nationality:this.form.nationality,marital_status:this.form.marital_status,marriage_anniversary:"Married"===this.form.marital_status?this.form.marriage_anniversary:null,extension_number:this.form.extension_number}},editInfo:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.validateAllFields();case 2:if(!e.sent){e.next=6;break}a=t.constructFormData(),i=Object(g["b"])(a),t.$http.patch(v["a"].updateUser(t.$route.params.id)+"?as=".concat(t.as),i).then((function(e){t.verifyPermission(t.allPermissions.CAN_CREATE_UPDATE_USER_PROFILE)&&t.$route.params.slug?(t.auth.user.user.id===e.user.id&&t.updateUserName(e),t.notifyUser("Successfully updated General Information","green"),t.$emit("update"),t.clear()):(t.$router.push({name:"user-profile-change-request"}),setTimeout((function(){t.notifyUser("Profile Change request has been sent","green")}),1e3))})).catch((function(e){t.notifyInvalidFormResponse(),t.pushErrors(e)}));case 6:case"end":return e.stop()}}),e)})))()},getNationalityChoices:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$http.get(f["a"].getConstants,{params:{field:"nationality"}}).then((function(e){t.nationalityChoices=e.nationality}));case 1:case"end":return e.stop()}}),e)})))()},clear:function(){var t=this;this.$validator.errors.clear(),this.clearNonFieldErrors(),Object.keys(this.form).forEach((function(e){t.form[e]=""}))}})},x=b,y=(a("8817"),a("2877")),C=a("6544"),w=a.n(C),P=a("c6a6"),I=a("8336"),N=a("a609"),k=a("99d9"),V=a("62ad"),E=a("a523"),F=a("ce7e"),D=a("132d"),A=a("adda"),R=a("0fd9b"),O=a("b974"),S=a("2fa4"),$=a("8654"),j=Object(y["a"])(x,r,s,!1,null,"6cef7d37",null),U=j.exports;w()(j,{VAutocomplete:P["a"],VBtn:I["a"],VBtnToggle:N["a"],VCardActions:k["a"],VCol:V["a"],VContainer:E["a"],VDivider:F["a"],VIcon:D["a"],VImg:A["a"],VRow:R["a"],VSelect:O["a"],VSpacer:S["a"],VTextField:$["a"]});var B=a("e330"),L={components:{GeneralInformationForm:U,BulletListLoader:B["a"]},props:{userInfo:{type:Object,default:function(){return{}}},as:{type:String,default:""}},data:function(){return{id:this.$route.params.id,formLeft:[],formRight:[],datePicker:[],marriedStatus:!1,overviewLeft:[],overviewRight:[],showForm:!1,accountInformation:{},loading:!1,ethnicity:"",religion:""}},computed:{userName:function(){return this.userInfo.user.first_name+" "+this.userInfo.user.middle_name+" "+this.userInfo.user.last_name}},created:function(){this.getGeneralInfo()},methods:{getGeneralInfo:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.loading=!0,t.$http.get(v["a"].getUserDetail(t.id)+"?as=".concat(t.as||"")).then((function(e){t.accountInformation=e,t.loading=!1}));case 2:case"end":return e.stop()}}),e)})))()},refreshData:function(){this.getGeneralInfo(),this.$emit("refresh"),this.changeShowForm(!1)},changeShowForm:function(t){!0===t?(this.showForm=!0,this.loading=!1):this.showForm=!1}}},q=L,M=a("b0af"),G=a("4bd4"),T=a("da13"),z=a("8270"),J=a("5d23"),W=Object(y["a"])(q,i,n,!1,null,null,null);e["default"]=W.exports;w()(W,{VBtn:I["a"],VCard:M["a"],VCol:V["a"],VDivider:F["a"],VForm:G["a"],VIcon:D["a"],VImg:A["a"],VListItem:T["a"],VListItemAvatar:z["a"],VListItemContent:J["a"],VListItemSubtitle:J["b"],VListItemTitle:J["c"],VRow:R["a"]})},"7e58":function(t,e,a){},8817:function(t,e,a){"use strict";a("204a")},a609:function(t,e,a){"use strict";var i=a("5530"),n=(a("7e58"),a("3860")),o=a("a9ad"),r=a("58df");e["a"]=Object(r["a"])(n["a"],o["a"]).extend({name:"v-btn-toggle",props:{backgroundColor:String,borderless:Boolean,dense:Boolean,group:Boolean,rounded:Boolean,shaped:Boolean,tile:Boolean},computed:{classes:function(){return Object(i["a"])(Object(i["a"])({},n["a"].options.computed.classes.call(this)),{},{"v-btn-toggle":!0,"v-btn-toggle--borderless":this.borderless,"v-btn-toggle--dense":this.dense,"v-btn-toggle--group":this.group,"v-btn-toggle--rounded":this.rounded,"v-btn-toggle--shaped":this.shaped,"v-btn-toggle--tile":this.tile},this.themeClasses)}},methods:{genData:function(){var t=this.setTextColor(this.color,Object(i["a"])({},n["a"].options.methods.genData.call(this)));return this.group?t:this.setBackgroundColor(this.backgroundColor,t)}}})},a79c:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return o}));var i=a("53ca");a("b0c0");function n(t,e,a){var r,s,l=e||new FormData;for(var m in t)if(Object.prototype.hasOwnProperty.call(t,m))if(r=a?a+"."+m:m,s=t[m],"boolean"===typeof s||"number"===typeof s)l.append(r,s);else if(Array.isArray(s))for(var c=0;c<s.length;c++)l.append(r,s[c]);else"object"!==Object(i["a"])(s)||o(s)?o(s)?l.append(r,s,s.name):s?l.append(r,s):s||"undefined"!==typeof s&&l.append(r,""):n(s,l,m);return l}function o(t){return t instanceof File||t instanceof Blob}},ad37:function(t,e,a){"use strict";e["a"]={getReligionEthnicity:"/commons/religion-ethnicity/",postReligionEthnicity:"/commons/religion-ethnicity/",updateReligionEthnicity:function(t){return"/commons/religion-ethnicity/".concat(t,"/")},deleteReligionEthnicity:function(t){return"/commons/religion-ethnicity/".concat(t,"/")}}}}]);