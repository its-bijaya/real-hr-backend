(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["/components/User/Contact/Contact"],{"4cc1":function(t,e,n){"use strict";n("99af");e["a"]={getUserContacts:function(t){return"/users/".concat(t,"/contact/")},postUserContact:function(t){return"/users/".concat(t,"/contact/")},getContactDetail:function(t,e){return"/users/".concat(t,"/contact/").concat(e,"/")},updateContactDetail:function(t,e){return"/users/".concat(t,"/contact/").concat(e,"/")},deleteUserContact:function(t,e){return"/users/".concat(t,"/contact/").concat(e,"/")}}},a173:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-row",{attrs:{dense:"",align:"start"}},[n("v-col",{staticClass:"pr-2",attrs:{md:t.showCaption?"6":"8",cols:"12"}},[n("div",[n("v-text-field",{attrs:{id:t.id,label:t.label,"data-cy":"input-file-upload",error:t.errorMessages.length>0,"error-messages":t.errorMessages,"hide-details":t.hideDetails,hint:t.hint,"persistent-hint":!!t.hint,disabled:t.disabled,readonly:"","prepend-inner-icon":"mdi-attachment","append-icon":t.fileName?"mdi-close":""},on:{"click:prepend":t.pickFile,"click:append":function(e){return t.clear()},click:t.pickFile,blur:function(e){return t.$emit("blur")}},model:{value:t.fileName,callback:function(e){t.fileName=e},expression:"fileName"}}),n("input",{ref:"upload",staticClass:"d-none",attrs:{id:"fileUpload",type:"file",multiple:"multiple"},on:{change:t.upload}})],1)]),t.showCaption?n("v-col",{attrs:{md:"5",cols:"8"}},[n("v-text-field",{staticClass:"pl-2",attrs:{disabled:!t.attachment,label:"Caption"},model:{value:t.caption,callback:function(e){t.caption=e},expression:"caption"}})],1):t._e(),t.multiple?n("v-col",{attrs:{md:t.showCaption?"1":"4",cols:t.showCaption?"4":"6"}},[n("v-icon",{staticClass:"mt-5",attrs:{color:"primary"},on:{click:t.appendFile}},[t._v(" mdi-plus-box-outline ")])],1):t._e()],1)],1)},i=[],s=n("1da1"),o=n("5530"),r=(n("96cf"),n("ac1f"),n("1276"),n("b0c0"),n("2f62")),l={props:{default:{type:[String,File],default:void 0},text:{type:String,default:void 0},id:{type:String,default:""},label:{type:String,default:"Attachment"},hint:{type:String,default:"Files with jpg, png, odt extensions are not available for preview."},errorMessages:{type:[String,Array],default:function(){return[]}},hideDetails:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},value:{type:[File,Array],default:function(){return[]}},showCaption:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1}},data:function(){return{fileName:"",attachment:null,caption:"",attachments:[]}},watch:{default:{handler:function(t){!t||t instanceof File||(this.attachment=t)},immediate:!0},value:{handler:function(t){this.attachments=t,t||(this.fileName="")},immediate:!0},attachment:function(t){this.multiple||this.$emit("input",t)},attachments:function(t){this.$emit("input",t)}},methods:Object(o["a"])(Object(o["a"])({},Object(r["d"])({setSnackBar:"common/setSnackBar"})),{},{pickFile:function(){this.$refs.upload.click()},upload:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=new FileReader,a.readAsDataURL(t.target.files[0]),i="",1===t.target.files[0].name.split(".").length?i="Please upload known file type.":t.target.files[0].size>5242880?i="File size cannot be greater than 5MB.":"svg"===t.target.files[0].name.split(".").pop()&&(i="SVG image not allowed here."),i?e.setSnackBar({text:i,color:"red"}):a.onload=function(){e.$emit("input",t.target.files[0]),e.$emit("blur"),e.$emit("update",a.result),e.attachment=t.target.files[0],e.fileName=t.target.files[0].name};case 5:case"end":return n.stop()}}),n)})))()},clear:function(){this.attachment=null,this.fileName="",this.$emit("input",this.attachment)},appendFile:function(){if(!this.attachment||this.showCaption&&!this.caption){var t=this.attachment?"Please add both attachment and caption":"Please add attachment";this.setSnackBar({text:t,color:"red"})}else{this.setSnackBar({display:!1});var e={};e=this.showCaption?{file:this.attachment,caption:this.caption}:{file:this.attachment},this.multiple||(this.attachments=[]),this.attachments.unshift(e),this.attachment=null,this.caption=""}}})},c=l,d=n("2877"),m=n("6544"),u=n.n(m),p=n("62ad"),v=n("132d"),f=n("0fd9b"),h=n("8654"),_=Object(d["a"])(c,a,i,!1,null,null,null);e["a"]=_.exports;u()(_,{VCol:p["a"],VIcon:v["a"],VRow:f["a"],VTextField:h["a"]})},a505:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{attrs:{flat:""}},[n("vue-card-title",{attrs:{title:"Contact Details",subtitle:"Contact Details of "+t.userName+".",icon:"mdi-phone-outline"}},[n("template",{slot:"actions"},[t.addMode||t.editMode||t.getAuthStateUserId!==parseInt(t.$route.params.id)&&!t.verifyPermission(t.allPermissions.CAN_CREATE_UPDATE_USER_PROFILE)||"supervisor"===t.as||t.loading?t._e():n("v-btn",{attrs:{small:"",color:"primary",depressed:""},on:{click:function(e){return t.changeAddMode(!0)}}},[t._v(" "+t._s(t.$t("createNew"))+" ")]),t.addMode||t.editMode?n("v-btn",{attrs:{small:"",color:"primary",outlined:""},on:{click:function(e){return t.changeAddMode(!1)}}},[t._v(" Cancel ")]):t._e()],1)],2),n("v-divider"),t.formPurpose?n("contact-form",{attrs:{"contact-slug":t.editId,"form-purpose":t.formPurpose,"user-id":t.userInfo.user.id,as:t.as},on:{created:t.refresh,updated:t.refresh,cancel:t.resetFormPurpose}}):t._e(),t.loading?n("v-row",{attrs:{justify:"center"}},t._l(4,(function(t){return n("v-col",{key:t,attrs:{cols:"6"}},[n("bullet-list-loader",{attrs:{"primary-color":"#eee","secondary-color":"#d5d5d7"}})],1)})),1):t._e(),t.contactDetails.length<1&&!t.addMode&&!t.editMode&&!t.loading?n("vue-no-data"):t._e(),!t.loading&&t.contactDetails.length>0&&!t.addMode&&!t.editMode?n("v-row",{staticClass:"ml-3"},[n("v-col",{attrs:{cols:"12"}},[n("strong",{staticClass:"mx-6"},[t._v(" Self ")]),0===t.selfContacts.length?n("v-row",{attrs:{align:"center"}},[n("v-col",{attrs:{sm:"12",md:"2"}},[n("v-img",{attrs:{src:"/images/info/no-data-found.png",height:"150",width:"150",contain:""}})],1),n("v-col",{attrs:{sm:"12",md:"10"}},[n("v-col",[t._v(" "+t._s(t.userName)+" hasn't added any self contact details ")])],1)],1):n("v-row",{attrs:{dense:""}},t._l(t.selfContacts,(function(e,a){return n("v-col",{key:a,attrs:{md:"4",sm:"12"}},[n("v-hover",{scopedSlots:t._u([{key:"default",fn:function(i){var s=i.hover;return n("v-col",{},[s&&(t.getAuthStateUserId===parseInt(t.$route.params.id)||t.verifyPermission(t.allPermissions.CAN_CREATE_UPDATE_USER_PROFILE))&&"supervisor"!==t.as?n("v-icon",{staticClass:"float-right mx-2",attrs:{small:""},domProps:{textContent:t._s("mdi-delete")},on:{click:function(n){return t.deleteItem(e.slug,a,t.selfContacts)}}}):t._e(),s&&(t.getAuthStateUserId===parseInt(t.$route.params.id)||t.verifyPermission(t.allPermissions.CAN_CREATE_UPDATE_USER_PROFILE))&&"supervisor"!==t.as?n("v-icon",{staticClass:"float-right mx-2",attrs:{small:""},domProps:{textContent:t._s("mdi-pencil")},on:{click:function(n){return t.editContact(e.slug)}}}):t._e(),n("v-list-item",[n("v-list-item-avatar",{staticClass:"mr-0"},[n("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-cellphone")}})],1),n("v-list-item-content",[n("v-list-item-title",[t._v(" "+t._s(e.number_type)+" Number: ")]),n("v-list-item-subtitle",{domProps:{textContent:t._s(e.number)}})],1)],1),n("v-list-item",[n("v-list-item-avatar",{staticClass:"mr-0"},[n("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-email-outline")}})],1),n("v-list-item-content",[n("v-list-item-title",[t._v(" Email: ")]),n("v-list-item-subtitle",[n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(a){var i=a.on;return[n("p",t._g({domProps:{textContent:t._s(e.email)}},i))]}}],null,!0)},[n("span",[t._v(" "+t._s(e.email)+" ")])])],1)],1)],1),n("v-list-item",[n("v-list-item-avatar",{staticClass:"mr-0"},[n("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-map-marker-radius")}})],1),n("v-list-item-content",[n("v-list-item-title",[t._v(" Address: ")]),n("v-list-item-subtitle",[n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(a){var i=a.on;return[n("p",t._g({domProps:{textContent:t._s(e.address)}},i))]}}],null,!0)},[n("span",{domProps:{textContent:t._s(e.address)}})])],1)],1)],1)],1)}}],null,!0)})],1)})),1)],1),n("v-col",{attrs:{cols:"12"}},[n("strong",{staticClass:"mx-6",domProps:{textContent:t._s("Emergency")}}),0===t.emergencyContacts.length?n("v-row",{attrs:{align:"center"}},[n("v-col",{attrs:{sm:"12",md:"2"}},[n("v-img",{attrs:{src:"/images/info/no-data-found.png",height:"150",width:"150",contain:""}})],1),n("v-col",{attrs:{sm:"12",md:"10"}},[n("v-col",[t._v(" "+t._s(t.userName)+" hasn't added any emergency contact details ")])],1)],1):n("v-row",t._l(t.emergencyContacts,(function(e,a){return n("v-col",{key:a,attrs:{md:"4",sm:"12"}},[n("v-hover",{scopedSlots:t._u([{key:"default",fn:function(i){var s=i.hover;return n("v-col",{},[s?n("v-icon",{staticClass:"float-right mx-2",attrs:{small:""},domProps:{textContent:t._s("mdi-delete")},on:{click:function(n){return t.deleteItem(e.slug,a,t.emergencyContacts)}}}):t._e(),s?n("v-icon",{staticClass:"float-right mx-2",attrs:{small:""},domProps:{textContent:t._s("mdi-pencil")},on:{click:function(n){return t.editContact(e.slug)}}}):t._e(),n("v-list-item",[n("v-list-item-avatar",{staticClass:"mr-0"},[n("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-account-outline")}})],1),n("v-list-item-content",[n("v-list-item-title",[t._v(" Name: ")]),n("v-list-item-subtitle",[n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(a){var i=a.on;return[n("p",t._g({domProps:{textContent:t._s(e.name)}},i))]}}],null,!0)},[n("span",[t._v(" "+t._s(e.name)+" ")])])],1)],1)],1),n("v-list-item",[n("v-list-item-avatar",{staticClass:"mr-0"},[n("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-account-multiple-outline")}})],1),n("v-list-item-content",[n("v-list-item-title",[t._v(" Relation: ")]),n("v-list-item-subtitle",{domProps:{textContent:t._s(e.relation)}})],1)],1),n("v-list-item",[n("v-list-item-avatar",{staticClass:"mr-0"},[n("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-cellphone")}})],1),n("v-list-item-content",[n("v-list-item-title",[t._v(" "+t._s(e.number_type)+" Number: ")]),n("v-list-item-subtitle",{domProps:{textContent:t._s(e.number)}})],1)],1),n("v-list-item",[n("v-list-item-avatar",{staticClass:"mr-0"},[n("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-email-outline")}})],1),n("v-list-item-content",[n("v-list-item-title",[t._v(" Email: ")]),n("v-list-item-subtitle",[n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(a){var i=a.on;return[n("p",t._g({domProps:{textContent:t._s(e.email)}},i))]}}],null,!0)},[n("span",[t._v(" "+t._s(e.email)+" ")])])],1)],1)],1),n("v-list-item",[n("v-list-item-avatar",{staticClass:"mr-0"},[n("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-map-marker-radius")}})],1),n("v-list-item-content",[n("v-list-item-title",[t._v(" Address: ")]),n("v-list-item-subtitle",[n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(a){var i=a.on;return[n("p",t._g({domProps:{textContent:t._s(e.address)}},i))]}}],null,!0)},[n("span",{domProps:{textContent:t._s(e.address)}})])],1)],1)],1),n("v-list-item",[n("v-list-item-avatar",{staticClass:"mr-0"},[n("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-vector-link")}})],1),n("v-list-item-content",[n("v-list-item-title",[t._v(" Dependent: ")]),n("v-list-item-subtitle",[n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(a){var i=a.on;return[e.is_dependent?n("v-icon",t._g({attrs:{small:"",color:"success"},domProps:{textContent:t._s("mdi-check-circle")}},i)):n("v-icon",t._g({attrs:{small:"",color:"danger"},domProps:{textContent:t._s("mdi-close-circle")}},i))]}}],null,!0)},[n("span",[t._v(" "+t._s(e.is_dependent?"Yes":"No")+" ")])])],1)],1)],1)],1)}}],null,!0)})],1)})),1)],1),n("v-col",{attrs:{cols:"12"}},[n("strong",{staticClass:"mx-6",domProps:{textContent:t._s("Other Contacts")}}),0===t.otherContacts.length?n("v-row",{attrs:{align:"center"}},[n("v-col",{attrs:{sm:"12",md:"2"}},[n("v-img",{attrs:{src:"/images/info/no-data-found.png",height:"150",width:"150",contain:""}})],1),n("v-col",{attrs:{sm:"12",md:"10"}},[n("v-col",[t._v(" "+t._s(t.userName)+" hasn't added any other contact details ")])],1)],1):n("v-row",t._l(t.otherContacts,(function(e,a){return n("v-col",{key:a,attrs:{md:"4",sm:"12"}},[n("v-hover",{scopedSlots:t._u([{key:"default",fn:function(i){var s=i.hover;return n("v-col",{},[s?n("v-icon",{staticClass:"float-right mx-2",attrs:{small:""},domProps:{textContent:t._s("mdi-delete")},on:{click:function(n){return t.deleteItem(e.slug,a,t.otherContacts)}}}):t._e(),s?n("v-icon",{staticClass:"float-right mx-2",attrs:{small:""},domProps:{textContent:t._s("mdi-pencil")},on:{click:function(n){return t.editContact(e.slug)}}}):t._e(),n("v-list-item",[n("v-list-item-avatar",{staticClass:"mr-0"},[n("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-account-outline")}})],1),n("v-list-item-content",[n("v-list-item-title",[t._v(" Name: ")]),n("v-list-item-subtitle",[n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(a){var i=a.on;return[n("p",t._g({domProps:{textContent:t._s(e.name)}},i))]}}],null,!0)},[n("span",[t._v(" "+t._s(e.name)+" ")])])],1)],1)],1),n("v-list-item",[n("v-list-item-avatar",{staticClass:"mr-0"},[n("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-account-multiple-outline")}})],1),n("v-list-item-content",[n("v-list-item-title",[t._v(" Relation: ")]),n("v-list-item-subtitle",{domProps:{textContent:t._s(e.relation)}})],1)],1),n("v-list-item",[n("v-list-item-avatar",{staticClass:"mr-0"},[n("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-cellphone")}})],1),n("v-list-item-content",[n("v-list-item-title",[t._v(" "+t._s(e.number_type)+" Number: ")]),n("v-list-item-subtitle",{domProps:{textContent:t._s(e.number)}})],1)],1),n("v-list-item",[n("v-list-item-avatar",{staticClass:"mr-0"},[n("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-email-outline")}})],1),n("v-list-item-content",[n("v-list-item-title",[t._v(" Email: ")]),n("v-list-item-subtitle",[n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(a){var i=a.on;return[n("p",t._g({domProps:{textContent:t._s(e.email)}},i))]}}],null,!0)},[n("span",[t._v(" "+t._s(e.email)+" ")])])],1)],1)],1),n("v-list-item",[n("v-list-item-avatar",{staticClass:"mr-0"},[n("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-map-marker-radius")}})],1),n("v-list-item-content",[n("v-list-item-title",[t._v(" Address: ")]),n("v-list-item-subtitle",[n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(a){var i=a.on;return[n("p",t._g({domProps:{textContent:t._s(e.address)}},i))]}}],null,!0)},[n("span",{domProps:{textContent:t._s(e.address)}})])],1)],1)],1),n("v-list-item",[n("v-list-item-avatar",{staticClass:"mr-0"},[n("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-account-outline")}})],1),n("v-list-item-content",[n("v-list-item-title",[t._v(" Occupation: ")]),n("v-list-item-subtitle",[n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(a){var i=a.on;return[n("p",t._g({domProps:{textContent:t._s(e.occupation)}},i))]}}],null,!0)},[n("span",[t._v(" "+t._s(e.occupation)+" ")])])],1)],1)],1),n("v-list-item",[n("v-list-item-avatar",{staticClass:"mr-0"},[n("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-vector-link")}})],1),n("v-list-item-content",[n("v-list-item-title",[t._v(" Dependent: ")]),n("v-list-item-subtitle",[n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(a){var i=a.on;return[e.is_dependent?n("v-icon",t._g({attrs:{small:"",color:"success"},domProps:{textContent:t._s("mdi-check-circle")}},i)):n("v-icon",t._g({attrs:{small:"",color:"danger"},domProps:{textContent:t._s("mdi-close-circle")}},i))]}}],null,!0)},[n("span",[t._v(" "+t._s(e.is_dependent?"Yes":"No")+" ")])])],1)],1)],1),e.is_dependent?n("v-list-item",[n("v-list-item-avatar",{staticClass:"mr-0"},[n("v-icon",{attrs:{small:""},domProps:{textContent:t._s("mdi-file-document")}})],1),n("v-list-item-content",[n("v-list-item-title",[n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(a){var i=a.on;return[n("span",t._g({},i),[t._v(t._s(t.documentTitle[e.dependent_id_type]))])]}}],null,!0)},[n("span",[t._v(" "+t._s(t.documentTitle[e.dependent_id_type])+" ")])])],1),n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(a){var i=a.on;return[n("v-list-item-subtitle",t._g({domProps:{textContent:t._s(e.dependent_id_number)}},i))]}}],null,!0)},[t._v(" "+t._s(e.dependent_id_number)+" ")])],1)],1):t._e()],1)}}],null,!0)})],1)})),1)],1)],1):t._e(),n("vue-dialog",{attrs:{notify:t.deleteDialog},on:{close:function(e){t.deleteDialog.dialog=!1},agree:t.deleteContact},model:{value:t.deleteDialog.dialog,callback:function(e){t.$set(t.deleteDialog,"dialog",e)},expression:"deleteDialog.dialog"}})],1)},i=[],s=n("1da1"),o=(n("96cf"),n("b0c0"),n("d3b7"),n("a434"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",[n("v-container",{staticClass:"px-12"},[t.nonFieldErrors?n("non-field-form-errors",{attrs:{"non-field-errors":t.nonFieldErrors}}):t._e(),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-select",t._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:t.relationChoices,"item-text":"item","item-value":"value","prepend-inner-icon":"mdi-account-multiple-outline"},on:{change:function(e){t.showFullName="Self"!==t.form.relation}},model:{value:t.form.relation,callback:function(e){t.$set(t.form,"relation",e)},expression:"form.relation"}},"v-select",t.veeValidate("contact_of","Relation*"),!1)),t.showFullName?n("v-text-field",t._b({directives:[{name:"validate",rawName:"v-validate",value:"required|alpha_spaces|max:30",expression:"'required|alpha_spaces|max:30'"}],attrs:{counter:30,"prepend-inner-icon":"mdi-account-outline"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}},"v-text-field",t.veeValidate("name","Full Name*"),!1)):t._e(),n("v-text-field",t._b({directives:[{name:"validate",rawName:"v-validate",value:t.isChildren&&!t.form.emergency?"":"required|max:30|min:7",expression:"\n            isChildren && !form.emergency ? '' : 'required|max:30|min:7'\n          "}],attrs:{counter:30,"prepend-inner-icon":"mdi-cellphone"},model:{value:t.form.number,callback:function(e){t.$set(t.form,"number",e)},expression:"form.number"}},"v-text-field",t.veeValidate("number","Number "+(t.isChildren&&!t.form.emergency?"":"*")),!1)),n("v-text-field",{attrs:{label:"Occupation",counter:255,"prepend-inner-icon":"mdi-briefcase-account-outline"},model:{value:t.form.occupation,callback:function(e){t.$set(t.form,"occupation",e)},expression:"form.occupation"}}),n("v-row",{attrs:{"no-gutters":""}},[n("v-checkbox",{attrs:{label:"Emergency Contact","hide-details":""},model:{value:t.form.emergency,callback:function(e){t.$set(t.form,"emergency",e)},expression:"form.emergency"}})],1)],1),n("v-spacer"),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",t._b({directives:[{name:"validate",rawName:"v-validate",value:"required|max:255",expression:"'required|max:255'"}],attrs:{counter:255,"prepend-inner-icon":"mdi-web"},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}},"v-text-field",t.veeValidate("address","Address*"),!1)),n("v-text-field",t._b({directives:[{name:"validate",rawName:"v-validate",value:"email|max:50",expression:"'email|max:50'"}],attrs:{counter:50,"prepend-inner-icon":"mdi-email-outline"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}},"v-text-field",t.veeValidate("email","Email"),!1)),n("v-select",t._b({directives:[{name:"validate",rawName:"v-validate",value:t.isChildren&&!t.form.emergency?"":"required",expression:"isChildren && !form.emergency ? '' : 'required'"}],attrs:{items:t.phoneNumberTypes,"prepend-inner-icon":"mdi-phone-outline",clearable:""},model:{value:t.form.number_type,callback:function(e){t.$set(t.form,"number_type",e)},expression:"form.number_type"}},"v-select",t.veeValidate("number_type","Number Type "+(t.isChildren&&!t.form.emergency?"":"*")),!1))],1)],1),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("vue-date-picker",t._b({directives:[{name:"validate",rawName:"v-validate",value:"",expression:"''"}],model:{value:t.form.date_of_birth,callback:function(e){t.$set(t.form,"date_of_birth",e)},expression:"form.date_of_birth"}},"vue-date-picker",t.veeValidate("dob","Date of Birth :"),!1))],1)],1),"Self"!==t.form.relation?n("v-row",{attrs:{"no-gutters":""}},[n("v-checkbox",{staticClass:"mb-2",attrs:{label:"Dependent","hide-details":""},model:{value:t.form.is_dependent,callback:function(e){t.$set(t.form,"is_dependent",e)},expression:"form.is_dependent"}})],1):t._e(),t.form.is_dependent?n("div",[n("v-row",{attrs:{align:"center"}},[n("v-col",{attrs:{cols:"6"}},[n("v-select",t._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{items:t.dependentChoice,"item-text":"item","item-value":"value","prepend-inner-icon":"mdi-file-document",label:"select document type"},on:{change:function(e){t.showFullName="Self"!==t.form.relation}},model:{value:t.form.dependent_id_type,callback:function(e){t.$set(t.form,"dependent_id_type",e)},expression:"form.dependent_id_type"}},"v-select",t.veeValidate("dependent_id_type","document type"),!1))],1),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",t._b({directives:[{name:"validate",rawName:"v-validate",value:"required|max:50",expression:"'required|max:50'"}],attrs:{label:t.documentLabel[t.form.dependent_id_type],counter:50,"prepend-inner-icon":"mdi-information-outline"},model:{value:t.form.dependent_id_number,callback:function(e){t.$set(t.form,"dependent_id_number",e)},expression:"form.dependent_id_number"}},"v-text-field",t.veeValidate("dependent_id_number","document number"),!1))],1)],1),n("attachments",{attrs:{"show-caption":!1,disabled:!!t.previousAttachment},model:{value:t.attachment,callback:function(e){t.attachment=e},expression:"attachment"}}),n("v-row",{attrs:{"no-gutters":""}},[t.previousAttachment?n("div",{staticClass:"mt-2"},[t._v(" Attachment : "),n("span",{staticClass:"pointer primary--text",on:{click:function(e){return t.viewAttachment(t.previousAttachment)}}},[t._v(" "+t._s(t.previousAttachment))]),n("div",{staticClass:"mt-2"},[n("v-btn",{attrs:{small:"",color:"primary"},domProps:{textContent:t._s("Download")},on:{click:function(e){return t.downloadAttachment(t.previousAttachment)}}}),n("v-btn",{attrs:{small:"",color:"danger white--text"},domProps:{textContent:t._s("RemoveAttachment")},on:{click:function(e){t.removeAttachment=!0,t.previousAttachment=""}}})],1)]):t._e()])],1):t._e()],1),n("v-divider"),n("v-card-actions",[n("v-spacer"),"add"===t.formPurpose?n("v-btn",{attrs:{disabled:t.errors.any(),"data-cy":"btn-save-and-add-another",depressed:"",color:"primary"},on:{click:t.addAnother}},[t._v(" Save and Add Another ")]):t._e(),n("v-btn",{attrs:{disabled:t.errors.any(),depressed:"","data-cy":"btn-save",color:"primary"},on:{click:t.processForm}},[t._v(" Save ")]),n("v-btn",{attrs:{depressed:""},on:{click:function(e){return t.clear(t.form)}}},[t._v(" Clear ")])],1)],1)}),r=[],l=(n("a9e3"),n("159b"),n("b64b"),n("c44a")),c=n("ab8a"),d=n("741f"),m=n("4cc1"),u=n("a173"),p={name:"ContactDetails",components:{Attachments:u["a"],NonFieldFormErrors:c["default"],VueDatePicker:d["default"]},mixins:[l["a"]],props:{contactSlug:{type:String,required:!0},formPurpose:{type:String,required:!0},userId:{type:Number,required:!0},as:{type:String,default:""}},data:function(){return{abc:!1,dependentChoice:[{value:1,item:"Citizenship certificate"},{value:2,item:"Birth certificate"}],relationChoices:[{value:"Self",item:"Self"},{value:"Father",item:"Father"},{value:"Mother",item:"Mother"},{value:"Spouse",item:"Spouse"},{value:"Grandfather",item:"Grandfather"},{value:"Grandmother",item:"Grandmother"},{value:"Son",item:"Son"},{value:"Daughter",item:"Daughter"},{value:"Sibling",item:"Sibling"},{value:"Friend",item:"Friend"},{value:"Relative",item:"Relative"},{value:"Home",item:"Home"},{value:"Office",item:"Office"},{value:"Family",item:"Family"},{value:"Parent",item:"Parent"},{value:"Children",item:"Children"}],phoneNumberTypes:["Fax","Phone","Mobile","Work"],showFullName:!0,saveAndAddAnother:!1,form:{relation:"",phoneNumber:"",name:"",address:"",number:"",email:"",emergency:!1,number_type:"",is_dependent:!1,dependent_id_type:null,dependent_id_number:"",date_of_birth:"",occupation:""},attachment:null,previousAttachment:"",removeAttachment:!1,documentLabel:{0:"identification number",1:"citizenship certificate number",2:"birth certificate number"}}},computed:{isChildren:function(){return"Children"===this.form.relation}},mounted:function(){var t=this;"edit"===this.formPurpose&&this.$http.get(m["a"].getContactDetail(this.$route.params.id,this.contactSlug)+"?as=".concat(this.as)).then((function(e){t.setFormData(e),t.showFullName="Self"!==t.form.relation}))},methods:{clear:function(t){Object.keys(this.form).forEach((function(e){t[e]="emergency"!==e&&""})),this.clearNonFieldErrors(),this.$validator.errors.clear(),this.editable=!1},setFormData:function(t){this.form.name=t.name,this.form.relation=t.contact_of,this.form.address=t.address,this.form.emergency=t.emergency,this.form.number=t.number,this.form.email=t.email,this.form.number_type=t.number_type,this.form.occupation=t.occupation,this.form.is_dependent=t.is_dependent,this.form.is_dependent&&(this.form.dependent_id_type=t.dependent_id_type,this.form.dependent_id_number=t.dependent_id_number),this.form.date_of_birth=t.date_of_birth||"",this.previousAttachment=t.attachment},getFormData:function(){var t=new FormData;return t.append("name",this.form.name),t.append("contact_of",this.form.relation),t.append("address",this.form.address),t.append("emergency",this.form.emergency),t.append("number",this.form.number),t.append("number_type",void 0===this.form.number_type?"":this.form.number_type),t.append("email",this.form.email),t.append("is_dependent",this.form.is_dependent),t.append("date_of_birth",this.form.date_of_birth),t.append("occupation",this.form.occupation),this.form.is_dependent&&(t.append("dependent_id_type",this.form.dependent_id_type),t.append("dependent_id_number",this.form.dependent_id_number)),this.attachment?t.append("attachment",this.attachment):this.removeAttachment&&t.append("attachment",null),t},processForm:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.validateAllFields();case 2:if(!e.sent){e.next=5;break}n=t.getFormData(),"add"===t.formPurpose?t.$http.post(m["a"].postUserContact(t.$route.params.id)+"?as=".concat(t.as),n).then((function(e){t.verifyPermission(t.allPermissions.CAN_CREATE_UPDATE_USER_PROFILE)&&t.$route.params.slug?(t.notifyUser("Successfully created Contact details","green"),t.saveAndAddAnother?t.clear(t.form):t.$emit("created",e)):(t.saveAndAddAnother?t.clear(t.form):t.$router.push({name:"user-profile-change-request"}),setTimeout((function(){t.notifyUser("Profile Change request has been sent","green")}),1e3))})).catch((function(e){t.notifyInvalidFormResponse(),t.pushErrors(e)})).finally((function(){t.saveAndAddAnother=!1})):"edit"===t.formPurpose&&t.$http.put(m["a"].updateContactDetail(t.$route.params.id,t.contactSlug)+"?as=".concat(t.as),t.getFormData()).then((function(){t.verifyPermission(t.allPermissions.CAN_CREATE_UPDATE_USER_PROFILE)&&t.$route.params.slug?t.notifyUser("Successfully updated Contact details","green"):(t.notifyUser("Profile Change request has been sent","green"),t.$router.push({name:"user-profile-change-request"})),t.$emit("updated")})).catch((function(e){t.notifyInvalidFormResponse(),t.pushErrors(e)}));case 5:case"end":return e.stop()}}),e)})))()},addAnother:function(){this.saveAndAddAnother=!0,this.processForm()},viewAttachment:function(t){var e="https://docs.google.com/viewerng/viewer?url=".concat(t);window.open(e,"_blank")},downloadAttachment:function(t){window.open(t)}}},v=p,f=n("2877"),h=n("6544"),_=n.n(h),g=n("8336"),b=n("99d9"),C=n("ac7c"),y=n("62ad"),x=n("a523"),P=n("ce7e"),k=n("0fd9b"),w=n("b974"),A=n("2fa4"),S=n("8654"),D=Object(f["a"])(v,o,r,!1,null,null,null),N=D.exports;_()(D,{VBtn:g["a"],VCardActions:b["a"],VCheckbox:C["a"],VCol:y["a"],VContainer:x["a"],VDivider:P["a"],VRow:k["a"],VSelect:w["a"],VSpacer:A["a"],VTextField:S["a"]});var F=n("e330"),E=n("e585"),$={components:{ContactForm:N,BulletListLoader:F["a"],VueNoData:E["default"]},mixins:[l["a"]],props:{userInfo:{type:Object,default:function(){return{}}},as:{type:String,default:""}},data:function(){return{editId:"",formPurpose:null,id:this.$route.params.id,formLeft:[],formRight:[],editMode:!1,addMode:!1,editSlug:"",selfContacts:[],emergencyContacts:[],otherContacts:[],contactDetails:[],loading:!1,itemIndex:null,contactDetail:{},deleteDialog:{dialog:!1,heading:"Confirm Delete",text:"Do you really want to delete this contact ?"},itemToDelete:{},documentTitle:{1:"Citizenship Certificate Number",2:"Birth Certificate Number"}}},computed:{userName:function(){return this.userInfo.user.first_name+" "+this.userInfo.user.middle_name+" "+this.userInfo.user.last_name}},created:function(){this.getUserContactInfo()},methods:{getUserContactInfo:function(){var t=this;this.selfContacts=[],this.emergencyContacts=[],this.loading=!0,this.otherContacts=[],this.$http.get(m["a"].getUserContacts(this.id)+"?as=".concat(this.as)).then((function(e){t.loading=!1,e.results.length>0&&t.pushContactDetails(e)}))},refresh:function(){this.getUserContactInfo(),this.editMode=!1,this.addMode=!1,this.formPurpose=null},resetFormPurpose:function(){this.formPurpose=null,this.editMode=null,this.addMode=null},pushContactDetails:function(t){for(var e=0;e<t.results.length;e++){this.contactDetails.push({name:t.results.length?t.results[e].name:"",contact_of:t.results.length?t.results[e].contact_of:"",address:t.results.length?t.results[e].address:"",email:t.results.length?t.results[e].email:"",number:t.results.length?t.results[e].number:"",number_type:t.results.length?t.results[e].number_type:"",emergency:t.results.length?t.results[e].emergency:"",is_dependent:t.results.length?t.results[e].is_dependent:"",slug:t.results.length?t.results[e].slug:""});var n={occupation:t.results[e].occupation,number:t.results[e].number?t.results[e].number:"Not Available",email:t.results[e].email?t.results[e].email:"Not Available",address:t.results[e].address?t.results[e].address:"Not Available",slug:t.results[e].slug,is_dependent:t.results[e].is_dependent,number_type:t.results[e].number_type};n.is_dependent&&(n["dependent_id_type"]=t.results[e].dependent_id_type,n["dependent_id_number"]=t.results[e].dependent_id_number),"Self"===t.results[e].contact_of?this.selfContacts.push(n):t.results[e].emergency?(n.name=t.results.length?t.results[e].name:"",n.relation=t.results[e].contact_of,this.emergencyContacts.push(n)):(n.name=t.results.length?t.results[e].name:"",n.relation=t.results[e].contact_of,this.otherContacts.push(n))}},changeAddMode:function(t){!0===t?(this.formPurpose="add",this.editId="",this.addMode=!0,this.editMode=!1,this.loading=!1):this.refresh()},editContact:function(t){this.formPurpose="edit",this.editId=t,this.editMode=!0,this.addMode=!1},deleteItem:function(t,e,n){this.deleteDialog.dialog=!0,this.itemToDelete={slug:t,index:e,contactType:n}},deleteContact:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$http.delete(m["a"].deleteUserContact(t.userInfo.user.id,t.itemToDelete.slug)+"?as=".concat(t.as)).then((function(){t.verifyPermission(t.allPermissions.CAN_CREATE_UPDATE_USER_PROFILE)&&t.$route.params.slug?(t.notifyUser("Successfully deleted Education details","green"),t.itemToDelete.contactType.splice(t.itemToDelete.index,1)):(t.notifyUser("Profile Change request has been sent","green"),t.$router.push({name:"user-profile-change-request"}))})).catch((function(e){t.pushErrors(e);var n=t.nonFieldErrors[0]["non field errors"];t.notifyUser(n,"red")})).finally((function(){t.itemToDelete={},t.deleteDialog.dialog=!1}));case 1:case"end":return e.stop()}}),e)})))()}}},I=$,V=(n("b3f9"),n("b0af")),R=n("ce87"),U=n("132d"),T=n("adda"),M=n("da13"),q=n("8270"),O=n("5d23"),L=n("3a2f"),B=Object(f["a"])(I,a,i,!1,null,null,null);e["default"]=B.exports;_()(B,{VBtn:g["a"],VCard:V["a"],VCol:y["a"],VDivider:P["a"],VHover:R["a"],VIcon:U["a"],VImg:T["a"],VListItem:M["a"],VListItemAvatar:q["a"],VListItemContent:O["a"],VListItemSubtitle:O["b"],VListItemTitle:O["c"],VRow:k["a"],VTooltip:L["a"]})},b3f9:function(t,e,n){"use strict";n("b582")},b582:function(t,e,n){}}]);