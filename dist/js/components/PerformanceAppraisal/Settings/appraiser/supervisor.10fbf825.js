(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["/components/PerformanceAppraisal/Settings/appraiser/supervisor","chunk-2d22d378"],{"42f1":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-card",[i("vue-card-title",{attrs:{title:"Supervisor Appraisal",subtitle:"Here you can view/edit supervisor for appraisal",icon:"mdi-account-check-outline"}},[i("template",{slot:"actions"},[i("v-btn",{attrs:{small:"",depressed:"",color:"primary"},on:{click:function(t){e.displayBulkForm=!0}}},[e._v(" Bulk Assign ")]),i("v-btn",{attrs:{icon:""},on:{click:function(t){e.showFilter=!e.showFilter}}},[i("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-filter-variant")}})],1)],1)],2),i("v-divider"),i("v-slide-y-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.showFilter,expression:"showFilter"}]},[i("pa-filters",{on:{filter:function(t){e.paFilter=t}}})],1)]),e.showFilter?i("v-divider"):e._e(),i("v-data-table",{attrs:{headers:e.heading,items:e.fetchedResults,"sort-desc":e.pagination.descending,"sort-by":e.pagination.sortBy,page:e.pagination.page,"items-per-page":e.pagination.rowsPerPage,"footer-props":e.footerProps,"server-items-length":e.pagination.totalItems,"mobile-breakpoint":0,"single-expand":"","must-sort":""},on:{"update:sortDesc":function(t){return e.$set(e.pagination,"descending",t)},"update:sort-desc":function(t){return e.$set(e.pagination,"descending",t)},"update:sortBy":function(t){return e.$set(e.pagination,"sortBy",t)},"update:sort-by":function(t){return e.$set(e.pagination,"sortBy",t)},"update:page":function(t){return e.$set(e.pagination,"page",t)},"update:itemsPerPage":function(t){return e.$set(e.pagination,"rowsPerPage",t)},"update:items-per-page":function(t){return e.$set(e.pagination,"rowsPerPage",t)}},scopedSlots:e._u([{key:"item",fn:function(t){return[i("tr",[i("td",[i("vue-user",{attrs:{user:t.item}})],1),i("td",[t.item.supervisors.find((function(e){return 1===e.authority_order}))?i("div",[i("v-row",{attrs:{align:"center"}},[i("v-col",{attrs:{md:"auto"}},[t.item.supervisors.find((function(e){return 1===e.authority_order&&!0===e.is_selected}))?i("div",[i("v-icon",{attrs:{size:"20",color:"green"}},[e._v("mdi-checkbox-marked-circle-outline")])],1):i("div",[i("v-icon",{attrs:{size:"20",color:"red"}},[e._v("mdi-close-circle-outline")])],1)]),i("v-col",[i("vue-user",{attrs:{user:t.item.supervisors.find((function(e){return 1===e.authority_order})).supervisor}})],1)],1)],1):i("div",[e._v("Not Assigned")])]),i("td",[t.item.supervisors.find((function(e){return 2===e.authority_order}))?i("div",[i("v-row",{attrs:{align:"center"}},[i("v-col",{attrs:{md:"auto"}},[t.item.supervisors.find((function(e){return 2===e.authority_order&&!0===e.is_selected}))?i("div",[i("v-icon",{attrs:{size:"20",color:"green"}},[e._v("mdi-checkbox-marked-circle-outline")])],1):i("div",[i("v-icon",{attrs:{size:"20",color:"red"}},[e._v("mdi-close-circle-outline")])],1)]),i("v-col",[i("vue-user",{attrs:{user:t.item.supervisors.find((function(e){return 2===e.authority_order})).supervisor}})],1)],1)],1):i("div",[e._v("Not Assigned")])]),i("td",[t.item.supervisors.find((function(e){return 3===e.authority_order}))?i("div",[i("v-row",{attrs:{align:"center"}},[i("v-col",{attrs:{md:"auto"}},[t.item.supervisors.find((function(e){return 3===e.authority_order&&!0===e.is_selected}))?i("div",[i("v-icon",{attrs:{size:"20",color:"green"}},[e._v("mdi-checkbox-marked-circle-outline")])],1):i("div",[i("v-icon",{attrs:{size:"20",color:"red"}},[e._v("mdi-close-circle-outline")])],1)]),i("v-col",[i("vue-user",{attrs:{user:t.item.supervisors.find((function(e){return 3===e.authority_order})).supervisor}})],1)],1)],1):i("div",[e._v("Not Assigned")])]),i("td",{attrs:{align:"center"}},[i("vue-context-menu",{attrs:{"context-list":[{name:"Assign 1st Level Supervisor",icon:"mdi-numeric-1",color:"info",hide:!t.item.supervisors.find((function(e){return 1===e.authority_order&&!1===e.is_selected}))},{name:"Unassign 1st Level Supervisor",icon:"mdi-numeric-1-circle-outline",color:"info",hide:!t.item.supervisors.find((function(e){return 1===e.authority_order&&!0===e.is_selected}))},{name:"Assign 2nd Level Supervisor",icon:"mdi-numeric-2",color:"info",hide:!t.item.supervisors.find((function(e){return 2===e.authority_order&&!1===e.is_selected}))},{name:"Unassign 2nd Level Supervisor",icon:"mdi-numeric-2-circle-outline",color:"info",hide:!t.item.supervisors.find((function(e){return 2===e.authority_order&&!0===e.is_selected}))},{name:"Assign 3rd Level Supervisor",icon:"mdi-numeric-3",color:"info",hide:!t.item.supervisors.find((function(e){return 3===e.authority_order&&!1===e.is_selected}))},{name:"Unassign 3rd Level Supervisor",icon:"mdi-numeric-3-circle-outline",color:"info",hide:!t.item.supervisors.find((function(e){return 3===e.authority_order&&!0===e.is_selected}))}]},on:{click0:function(i){return e.singleAssignUnassignRequest(t.item.id,"1","assign")},click1:function(i){return e.singleAssignUnassignRequest(t.item.id,"1","unassign")},click2:function(i){return e.singleAssignUnassignRequest(t.item.id,"2","assign")},click3:function(i){return e.singleAssignUnassignRequest(t.item.id,"2","unassign")},click4:function(i){return e.singleAssignUnassignRequest(t.item.id,"3","assign")},click5:function(i){return e.singleAssignUnassignRequest(t.item.id,"3","unassign")}}})],1)])]}}])},[i("template",{slot:"no-data"},[i("data-table-no-data",{attrs:{loading:e.loading}})],1)],2),e.displayBulkForm?i("v-dialog",{attrs:{width:"720",scrollable:"",presistent:""},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.displayBulkForm=!1}},model:{value:e.displayBulkForm,callback:function(t){e.displayBulkForm=t},expression:"displayBulkForm"}},[e.displayBulkForm?i("bulk-assign-form",{attrs:{"appraisal-id":e.appraisalId,params:e.filterParams,type:"Supervisor"},on:{close:function(t){e.displayBulkForm=!1,e.fetchDataTable()}}}):e._e()],1):e._e()],1)},r=[],a=i("5530"),s=(i("d3b7"),i("3ca3"),i("ddb0"),i("a9e3"),i("99af"),i("8cd3")),o=i("f70a"),u=i("a1b8"),c={components:{DataTableNoData:function(){return i.e("chunk-26c51c79").then(i.bind(null,"a51f"))},VueUser:function(){return Promise.resolve().then(i.bind(null,"02cb"))},VueContextMenu:function(){return i.e("chunk-2d2259e9").then(i.bind(null,"e4bf"))},PaFilters:function(){return i.e("chunk-936ddf1a").then(i.bind(null,"8113"))},BulkAssignForm:function(){return i.e("chunk-2d0ea0e7").then(i.bind(null,"8fbe"))}},mixins:[s["a"],o["a"]],props:{appraisalId:{type:[String,Number],required:!0}},data:function(){return{showFilter:!1,displayBulkForm:!1,paFilter:{},heading:[{text:"Subordinate Name",value:"full_name"},{text:"1st Level Supervisor",sortable:!1},{text:"2nd Level Supervisor",sortable:!1},{text:"3rd Level Supervisor",sortable:!1},{text:"Actions",align:"center",sortable:!1}]}},computed:{dataTableFilter:function(){return Object(a["a"])({},this.paFilter)}},created:function(){this.dataTableEndpoint=u["a"].getSupervisorAppraisalSettings(this.getOrganizationSlug,this.appraisalId)},methods:{singleAssignUnassignRequest:function(e,t,i){var n=this,r="";r="assign"===i?u["a"].assignSupervisorAppraisalForm(this.getOrganizationSlug,this.appraisalId):u["a"].unAssignSupervisorAppraisalForm(this.getOrganizationSlug,this.appraisalId);var a={authority_level:t,user:e};this.crud.message="Successfully ".concat(i,"ed level ").concat(t," supervisor."),this.insertData(r,a).then((function(){n.fetchDataTable()}))}}},l=c,d=i("2877"),p=i("6544"),f=i.n(p),v=i("8336"),g=i("b0af"),m=i("62ad"),h=i("8fea"),b=i("169a"),y=i("ce7e"),_=i("132d"),k=i("0fd9b"),F=i("0789"),w=Object(d["a"])(l,n,r,!1,null,null,null);t["default"]=w.exports;f()(w,{VBtn:v["a"],VCard:g["a"],VCol:m["a"],VDataTable:h["a"],VDialog:b["a"],VDivider:y["a"],VIcon:_["a"],VRow:k["a"],VSlideYTransition:F["g"]})},"8cd3":function(e,t,i){"use strict";var n=i("5530"),r=(i("d3b7"),i("f0d5"));t["a"]={mixins:[r["a"]],data:function(){return{dataTableEndpoint:"",fetchedResults:[],response:null,footerProps:{itemsPerPageOptions:[10,20,30,40,50,100]},pagination:{sortBy:["modified_at"],descending:!1,totalItems:0,page:1,rowsPerPage:10,pageCount:0},loadTableOnInit:!0}},computed:{filterParams:function(){var e=Object(n["a"])(Object(n["a"])({},this.dataTableFilter),{},{offset:(this.pagination.page-1)*this.pagination.rowsPerPage,limit:this.pagination.rowsPerPage,ordering:this.pagination.descending?this.pagination.sortBy:"-"+this.pagination.sortBy});return this.convertToURLSearchParams(e,!1)}},watch:{filterParams:function(){var e=this;this.$nextTick((function(){e.fetchDataTable()}))},dataTableFilter:function(){this.pagination.page=1}},created:function(){var e=this;setTimeout((function(){e.loadTableOnInit&&e.fetchDataTable()}),0)},methods:{fetchDataTable:function(e,t){var i=this;return new Promise((function(n,r){!e&&!i.dataTableEndpoint||i.loading||(i.loadTableOnInit=!1,i.loading=!0,i.fetchedResults=[],i.$http.get(e||i.dataTableEndpoint,t||{params:i.filterParams}).then((function(e){i.response=e,i.fetchedResults=e.results,i.pagination.totalItems=e.count,i.processAfterTableLoad(e),n(e),i.loading=!1})).catch((function(e){i.pushErrors(e),i.notifyInvalidFormResponse(),r(e),i.loading=!1})))}))},processAfterTableLoad:function(){}}}},f70a:function(e,t,i){"use strict";i("d3b7"),i("caad");t["a"]={methods:{insertData:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.validate,a=void 0===r||r,s=n.clearForm,o=void 0===s||s,u=arguments.length>3?arguments[3]:void 0;return new Promise((function(n,r){!i.loading&&e&&(i.clearErrors(),i.$validator.validateAll().then((function(s){a||(s=!0),s&&(i.loading=!0,i.$http.post(e,t,u||{}).then((function(e){i.clearErrors(),o&&(i.formValues={}),i.crud.addAnother||i.$emit("create"),i.crud.message&&setTimeout((function(){i.notifyUser(i.crud.message)}),1e3),n(e),i.loading=!1})).catch((function(e){i.pushErrors(e),i.notifyInvalidFormResponse(),r(e),i.loading=!1})))})))}))},patchData:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.validate,a=void 0===r||r,s=n.clearForm,o=void 0===s||s,u=arguments.length>3?arguments[3]:void 0;return new Promise((function(n,r){i.updateData(e,t,{validate:a,clearForm:o},"patch",u).then((function(e){n(e)})).catch((function(e){r(e)}))}))},putData:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.validate,a=void 0===r||r,s=n.clearForm,o=void 0===s||s,u=arguments.length>3?arguments[3]:void 0;return new Promise((function(n,r){i.updateData(e,t,{validate:a,clearForm:o},"put",u).then((function(e){n(e)})).catch((function(e){r(e)}))}))},updateData:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.validate,a=void 0===r||r,s=n.clearForm,o=void 0===s||s,u=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0;return new Promise((function(n,r){!i.loading&&e&&["put","patch"].includes(u)&&(i.clearErrors(),i.$validator.validateAll().then((function(s){a||(s=!0),s&&(i.loading=!0,i.$http[u](e,t,c||{}).then((function(e){i.$emit("update"),i.clearErrors(),o&&(i.formValues={}),i.crud.message&&setTimeout((function(){i.notifyUser(i.crud.message)}),1e3),n(e),i.loading=!1})).catch((function(e){i.pushErrors(e),i.notifyInvalidFormResponse(),r(e),i.loading=!1})))})))}))},clearErrors:function(){this.clearNonFieldErrors(),this.$validator.errors.clear()}}}}}]);