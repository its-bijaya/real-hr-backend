(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21066b"],{b876:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("vue-card-title",{attrs:{title:"Past Experience",subtitle:"Past Experience Details of "+e.userName,icon:"mdi-file-document-outline"}},[r("template",{slot:"actions"},[e.showForm||e.getAuthStateUserId!==parseInt(e.$route.params.id)&&!e.verifyPermission(e.allPermissions.CAN_CREATE_UPDATE_USER_PROFILE)||"supervisor"===e.as||e.loading?e._e():r("v-btn",{attrs:{small:"",color:"primary",depressed:""},on:{click:e.createPastExperience}},[e._v(" "+e._s(e.$t("createNew"))+" ")]),e.showForm?r("v-btn",{attrs:{small:"",outlined:"",color:"primary"},on:{click:e.refresh}},[e._v(" Cancel ")]):e._e()],1)],2),r("v-divider"),e.loading?r("v-row",e._l(6,(function(e){return r("v-col",{key:e,attrs:{cols:"6"}},[r("bullet-list-loader",{attrs:{"primary-color":"#eee","secondary-color":"#d5d5d7"}})],1)})),1):e._e(),e.pastExperiences.length<1&&!e.showForm?r("vue-no-data"):e._e(),0===e.pastExperiences.length||e.showForm||e.loading?e._e():r("v-col",[r("v-timeline",{attrs:{"align-top":"",dense:""}},e._l(e.pastExperiences,(function(t,a){return r("v-timeline-item",{key:a,attrs:{color:e.colors[a%4],small:""}},[r("v-hover",{scopedSlots:e._u([{key:"default",fn:function(i){var s=i.hover;return r("v-row",{},[r("v-icon",{attrs:{left:""},domProps:{textContent:e._s("mdi-domain")}}),r("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(a){var i=a.on;return[r("span",e._g({domProps:{textContent:e._s(t.organization)}},i))]}}],null,!0)},[r("span",{domProps:{textContent:e._s(t.organization)}})]),0!==a?r("span",[a===e.showDetails?r("v-icon",{domProps:{textContent:e._s("mdi-menu-up")},on:{click:function(t){e.showDetails=null}}}):r("v-icon",{domProps:{textContent:e._s("mdi-menu-down")},on:{click:function(t){e.showDetails=a}}})],1):e._e(),s&&"supervisor"!==e.as?r("v-icon",{staticClass:"float-right mx-2",attrs:{small:""},domProps:{textContent:e._s("mdi-pencil")},on:{click:function(r){return e.editPastExperience(t)}}}):e._e(),s&&"supervisor"!==e.as?r("v-icon",{staticClass:"float-right mx-2",attrs:{small:""},domProps:{textContent:e._s("mdi-delete")},on:{click:function(r){return e.deletePastExperience(t)}}}):e._e(),r("v-spacer")],1)}}],null,!0)}),r("v-slide-y-transition",[e.showDetails===a||0===a?r("pastExperience-detail",{attrs:{details:t}}):e._e()],1)],1)})),1)],1),r("span",{directives:[{name:"show",rawName:"v-show",value:e.showForm,expression:"showForm"}]},[r("past-experience-form",{attrs:{"user-id":e.userInfo.user.id,"export-fields":e.currentItem,as:e.as},on:{created:e.refresh,updated:e.refresh}})],1),r("vue-notify",{attrs:{notify:e.notify}}),r("vue-dialog",{attrs:{notify:e.deleteDialog},on:{close:function(t){e.deleteDialog.dialog=!1},agree:e.deleteItem},model:{value:e.deleteDialog.dialog,callback:function(t){e.$set(e.deleteDialog,"dialog",t)},expression:"deleteDialog.dialog"}})],1)},i=[],s=r("1da1"),n=(r("96cf"),r("c44a")),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-col",[r("v-row",[r("v-col",{attrs:{md:"6",sm:"12"}},[r("v-list-item",[r("v-list-item-avatar",{staticClass:"mr-0"},[r("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-account-outline")}})],1),r("v-list-item-content",[r("v-list-item-title",{domProps:{textContent:e._s("Job Title")}}),r("v-list-item-subtitle",{domProps:{textContent:e._s(e.details.title)}})],1)],1)],1),r("v-col",{attrs:{md:"6",sm:"12"}},[r("v-list-item",[r("v-list-item-avatar",{staticClass:"mr-0"},[r("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-source-branch")}})],1),r("v-list-item-content",[r("v-list-item-title",{domProps:{textContent:e._s("Division")}}),r("v-list-item-subtitle",{domProps:{textContent:e._s(e.details.department)}})],1)],1)],1),r("v-col",{attrs:{md:"6",sm:"12"}},[r("v-list-item",[r("v-list-item-avatar",{staticClass:"mr-0"},[r("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-account-outline")}})],1),r("v-list-item-content",[r("v-list-item-title",{domProps:{textContent:e._s("Employment Type")}}),r("v-list-item-subtitle",{domProps:{textContent:e._s(e.details.employment_status)}})],1)],1)],1),r("v-col",{attrs:{md:"6",sm:"12"}},[r("v-list-item",[r("v-list-item-avatar",{staticClass:"mr-0"},[r("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-account-outline")}})],1),r("v-list-item-content",[r("v-list-item-title",{domProps:{textContent:e._s("Employment Level")}}),r("v-list-item-subtitle",{domProps:{textContent:e._s(e.details.employment_level)}})],1)],1)],1),r("v-col",{attrs:{md:"6",sm:"12"}},[r("v-list-item",[r("v-list-item-avatar",{staticClass:"mr-0"},[r("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-map-marker-outline")}})],1),r("v-list-item-content",[r("v-list-item-title",{domProps:{textContent:e._s("Job Location")}}),r("v-list-item-subtitle",{domProps:{textContent:e._s(e.details.job_location)}})],1)],1)],1),r("v-col",{attrs:{md:"6",cols:"12"}},[r("v-list-item",[r("v-list-item-avatar",{staticClass:"mr-0"},[r("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-calendar-month-outline")}})],1),r("v-list-item-content",[r("v-list-item-title",{domProps:{textContent:e._s("Year")}}),r("v-list-item-subtitle",{domProps:{textContent:e._s(e.details.start_date+"-"+e.details.end_date)}})],1)],1)],1),r("v-col",{attrs:{md:"6",cols:"12"}},[r("v-list-item",[r("v-list-item-avatar",{staticClass:"mr-0"},[r("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-calendar-month-outline")}})],1),r("v-list-item-content",[r("v-list-item-title",{domProps:{textContent:e._s("Responsibility")}}),r("v-list-item-subtitle",{domProps:{innerHTML:e._s(e.details.responsibility)}})],1)],1)],1)],1)],1)},l=[],d={props:{details:{type:Object,default:null}}},c=d,m=r("2877"),u=r("6544"),p=r.n(u),v=r("62ad"),f=r("132d"),x=r("da13"),h=r("8270"),_=r("5d23"),b=r("0fd9b"),g=Object(m["a"])(c,o,l,!1,null,null,null),y=g.exports;p()(g,{VCol:v["a"],VIcon:f["a"],VListItem:x["a"],VListItemAvatar:h["a"],VListItemContent:_["a"],VListItemSubtitle:_["b"],VListItemTitle:_["c"],VRow:b["a"]});var P=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-form",[r("v-container",{staticClass:"px-12"},[e.nonFieldErrors?r("non-field-form-errors",{attrs:{"non-field-errors":e.nonFieldErrors}}):e._e(),r("v-row",[r("v-col",{attrs:{md:"6",sm:"12"}},[r("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required|max:150",expression:"'required|max:150'"}],attrs:{counter:150,"prepend-inner-icon":"mdi-account-outline"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}},"v-text-field",e.veeValidate("title","Job Title *"),!1))],1),r("v-col",{attrs:{md:"6",sm:"12"}},[r("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required|max:150",expression:"'required|max:150'"}],attrs:{counter:150,"prepend-inner-icon":"mdi-domain"},model:{value:e.form.organization,callback:function(t){e.$set(e.form,"organization",t)},expression:"form.organization"}},"v-text-field",e.veeValidate("organization","Organization *"),!1))],1),r("v-col",{attrs:{md:"6",sm:"12"}},[r("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required|max:150",expression:"'required|max:150'"}],attrs:{counter:150,"prepend-inner-icon":"mdi-source-branch"},model:{value:e.form.department,callback:function(t){e.$set(e.form,"department",t)},expression:"form.department"}},"v-text-field",e.veeValidate("department","Division *"),!1))],1),r("v-col",{attrs:{md:"6",sm:"12"}},[r("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required|max:150",expression:"'required|max:150'"}],attrs:{counter:150,"prepend-inner-icon":"mdi-account-outline"},model:{value:e.form.employment_level,callback:function(t){e.$set(e.form,"employment_level",t)},expression:"form.employment_level"}},"v-text-field",e.veeValidate("employment_level","Employment Level *"),!1))],1),r("v-col",{attrs:{md:"6",sm:"12"}},[r("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required|max:150",expression:"'required|max:150'"}],attrs:{counter:150,"prepend-inner-icon":"mdi-account-outline"},model:{value:e.form.employment_status,callback:function(t){e.$set(e.form,"employment_status",t)},expression:"form.employment_status"}},"v-text-field",e.veeValidate("employment_status","Employment Type *"),!1))],1),r("v-col",{attrs:{md:"6",sm:"12"}},[r("v-text-field",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required|max:150",expression:"'required|max:150'"}],attrs:{counter:150,"prepend-inner-icon":"mdi-map-marker-outline"},model:{value:e.form.job_location,callback:function(t){e.$set(e.form,"job_location",t)},expression:"form.job_location"}},"v-text-field",e.veeValidate("job_location","Job Location *"),!1))],1),r("v-col",{attrs:{md:"6",sm:"12"}},[r("vue-date-picker",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],model:{value:e.form.start_date,callback:function(t){e.$set(e.form,"start_date",t)},expression:"form.start_date"}},"vue-date-picker",e.veeValidate("start_date","Start Date *"),!1))],1),r("v-col",{attrs:{md:"6",sm:"12"}},[r("vue-date-picker",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],model:{value:e.form.end_date,callback:function(t){e.$set(e.form,"end_date",t)},expression:"form.end_date"}},"vue-date-picker",e.veeValidate("end_date","End Date *"),!1))],1),r("v-col",{attrs:{md:"12",sm:"12"}},[r("span",[r("v-icon",{attrs:{small:""},domProps:{textContent:e._s("mdi-lightbulb-on-outline")}})],1),r("span",{staticClass:"text-body-2"},[e._v(" Responsibility : ")]),r("vue-trumbowyg",e._b({directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],ref:"trumbowyg",attrs:{id:"trumbowyg",placeholder:"Responsibility"},model:{value:e.form.responsibility,callback:function(t){e.$set(e.form,"responsibility",t)},expression:"form.responsibility"}},"vue-trumbowyg",e.veeValidate("responsibility","Responsibility *"),!1))],1)],1)],1),r("v-divider"),r("v-card-actions",[r("v-spacer"),e.editable?e._e():r("v-btn",{attrs:{disabled:e.errors.any(),depressed:"","data-cy":"btn-save-and-add-another",color:"primary"},on:{click:e.addAnother}},[e._v(" Save and Add Another ")]),e.editable?r("v-btn",{attrs:{disabled:e.errors.any(),depressed:"","data-cy":"btn-save",color:"primary"},on:{click:e.editItem}},[e._v(" "+e._s(e.$t("update"))+" ")]):r("v-btn",{attrs:{disabled:e.errors.any(),depressed:"","data-cy":"btn-save",color:"primary"},on:{click:e.createItem}},[e._v(" Save ")]),r("v-btn",{attrs:{depressed:""},on:{click:e.clear}},[e._v(" Clear ")])],1)],1)],1)},E=[],w=(r("a9e3"),r("d3b7"),r("ab8a")),C=r("741f"),V=(r("99af"),{getUserPastExperiences:function(e){return"/users/".concat(e,"/past-experience/")},postUserPastExperience:function(e){return"/users/".concat(e,"/past-experience/")},getPastExperienceDetail:function(e,t){return"/users/".concat(e,"/past-experience/").concat(t,"/")},updatePastExperienceDetail:function(e,t){return"/users/".concat(e,"/past-experience/").concat(t,"/")},deleteUserPastExperience:function(e,t){return"/users/".concat(e,"/past-experience/").concat(t,"/")}}),k=r("1467"),I={components:{NonFieldFormErrors:w["default"],VueDatePicker:C["default"],VueTrumbowyg:k["default"]},mixins:[n["a"]],props:{userId:{type:Number,required:!0},exportFields:{type:Object,required:!0,default:function(){return{title:"",organization:"",responsibility:"",department:"",employment_level:"",employment_status:"",job_location:"",start_date:"",end_date:""}}},as:{type:String,default:""}},data:function(){return{fromMenu:!1,toMenu:!1,form:this.exportFields,editable:!1,saveAndAddAnother:!1}},watch:{exportFields:function(e){this.form=e,this.$validator.errors.clear(),this.clearNonFieldErrors(),this.editable=!!e.slug}},methods:{clear:function(){this.form={},this.$validator.errors.clear(),this.clearNonFieldErrors()},createItem:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.validateAllFields();case 2:if(!t.sent){t.next=4;break}e.$http.post(V.postUserPastExperience(e.$route.params.id)+"?as=".concat(e.as),e.form).then((function(t){e.verifyPermission(e.allPermissions.CAN_CREATE_UPDATE_USER_PROFILE)&&e.$route.params.slug?(e.notifyUser("Successfully created Past Experience details","green"),e.saveAndAddAnother?e.clear():e.$emit("created",t)):(e.notifyUser("Profile Change request has been sent","green"),e.saveAndAddAnother?e.clear():e.$router.push({name:"user-profile-change-request"}))})).catch((function(t){e.notifyInvalidFormResponse(),e.pushErrors(t)})).finally((function(){e.saveAndAddAnother=!1}));case 4:case"end":return t.stop()}}),t)})))()},addAnother:function(){this.saveAndAddAnother=!0,this.createItem()},editItem:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.validateAllFields();case 2:if(!t.sent){t.next=4;break}e.$http.put(V.updatePastExperienceDetail(e.$route.params.id,e.exportFields.slug)+"?as=".concat(e.as),e.form).then((function(){e.verifyPermission(e.allPermissions.CAN_CREATE_UPDATE_USER_PROFILE)&&e.$route.params.slug?(e.notifyUser("Successfully updated Past Experience details","green"),e.$emit("updated")):(e.notifyUser("Profile Change request has been sent","green"),e.$router.push({name:"user-profile-change-request"}))})).catch((function(t){e.notifyInvalidFormResponse(),e.pushErrors(t)}));case 4:case"end":return t.stop()}}),t)})))()}}},A=I,$=r("8336"),D=r("b0af"),F=r("99d9"),R=r("a523"),q=r("ce7e"),U=r("4bd4"),N=r("2fa4"),T=r("8654"),S=Object(m["a"])(A,P,E,!1,null,null,null),j=S.exports;p()(S,{VBtn:$["a"],VCard:D["a"],VCardActions:F["a"],VCol:v["a"],VContainer:R["a"],VDivider:q["a"],VForm:U["a"],VIcon:f["a"],VRow:b["a"],VSpacer:N["a"],VTextField:T["a"]});var L=r("e330"),O=r("e585"),z={components:{pastExperienceDetail:y,PastExperienceForm:j,BulletListLoader:L["a"],VueNoData:O["default"]},mixins:[n["a"]],props:{userInfo:{type:Object,required:!0},as:{type:String,default:""}},data:function(){return{currentItem:{},showForm:!1,notify:{},showDetails:100,pastExperiences:[],colors:["red","green","indigo","yellow"],deleteDialog:{dialog:!1,heading:"Confirm Delete",text:"Do you really want to delete this Past Experience Default ?"},loading:!1}},computed:{userName:function(){return this.userInfo.user.first_name+" "+this.userInfo.user.middle_name+" "+this.userInfo.user.last_name}},mounted:function(){this.getUserPastExperienceInfo()},methods:{getUserPastExperienceInfo:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loading=!0,e.$http.get(V.getUserPastExperiences(e.$route.params.id)+"?as=".concat(e.as)).then((function(t){e.pastExperiences=t.results,e.loading=!1}));case 2:case"end":return t.stop()}}),t)})))()},refresh:function(){this.getUserPastExperienceInfo(),this.showForm=!1,this.deleteDialog.dialog=!1,this.currentItem={},this.$validator.errors.clear()},createPastExperience:function(){this.currentItem={},this.showForm=!0},editPastExperience:function(e){this.currentItem=e,this.showForm=!0},deletePastExperience:function(e){this.currentItem=e,this.deleteDialog.dialog=!0},deleteItem:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$http.delete(V.deleteUserPastExperience(e.$route.params.id,e.currentItem.slug)+"?as=".concat(e.as)).then((function(){e.verifyPermission(e.allPermissions.CAN_CREATE_UPDATE_USER_PROFILE)&&e.$route.params.slug?(e.notifyUser("Successfully deleted Past Experience details","green"),e.refresh()):(e.notifyUser("Profile Change request has been sent","green"),e.$router.push({name:"user-profile-change-request"}))})).catch((function(t){e.pushErrors(t);var r=e.nonFieldErrors[0]["non field errors"];e.notifyUser(r,"red"),e.refresh()}));case 1:case"end":return t.stop()}}),t)})))()}}},J=z,B=r("ce87"),M=r("0789"),H=r("8414"),Y=r("1e06"),G=r("3a2f"),K=Object(m["a"])(J,a,i,!1,null,null,null);t["default"]=K.exports;p()(K,{VBtn:$["a"],VCard:D["a"],VCol:v["a"],VDivider:q["a"],VHover:B["a"],VIcon:f["a"],VRow:b["a"],VSlideYTransition:M["g"],VSpacer:N["a"],VTimeline:H["a"],VTimelineItem:Y["a"],VTooltip:G["a"]})}}]);